(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{201:function(e,t,n){"use strict";n.r(t),n.d(t,"_MaterialLayout",(function(){return se}));var a=n(3),r=n.n(a),o=n(5),i=n.n(o),s=n(6),c=n.n(s),l=n(10),u=n.n(l),p=n(7),h=n.n(p),d=n(2),m=n.n(d),f=n(0),v=n.n(f),g=n(1),k=n.n(g),E=n(316),A=n(53),y=n(317),b=n(262),w=n(423),x=n(278),C=n(38),O=n(67),N=n(207),R=n(368),D=n(9),S=n(41),M=n(365),W=n(342),B=n(337),T=n(19),P=n.n(T),j=n(14),_=n(332),V=n(362),U=n(35),z=n(78),L=n(16);function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var G=function(e){c()(n,e);var t=K(n);function n(e){var a;return r()(this,n),a=t.call(this,e),m()(P()(a),"state",{showDialog:!1}),a._onClick=a._onClick.bind(P()(a)),a._onClose=a._onClose.bind(P()(a)),a}return i()(n,[{key:"render",value:function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(_.a,{className:"py-1 ".concat(this.props.classNames),onClick:this._onClick},v.a.createElement(j.b,{id:"material_header.create_lesson"})),this.state.showDialog&&v.a.createElement(V.b,{resourceId:this.props.resourceId,resourceTitle:this.props.resourceTitle,onClose:this._onClose}))}},{key:"_onClick",value:function(){var e=this;Object(z.e)(this.props.resourceId),Object(U.g)(this.context.store).then((function(){e.setState({showDialog:!0})})).catch((function(){}))}},{key:"_onClose",value:function(){this.setState({showDialog:!1})}}]),n}(v.a.PureComponent);m()(G,"contextType",L.b),m()(G,"propTypes",{resourceTitle:k.a.string.isRequired,resourceId:k.a.string.isRequired,classNames:k.a.string});var I=n(320);function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}function Q(e){var t=Object(L.d)((function(e){return e.userState.user})),n=e.book?e.book:e.worksheet,a=e.book&&e.worksheet;return v.a.createElement("ul",{className:"viewers-headermenu valign-wrapper"},n&&v.a.createElement(v.a.Fragment,null,n.supportsLesson&&v.a.createElement("li",null,v.a.createElement(G,{resourceId:n.id,resourceTitle:n.title,classNames:"mr-1 d-n-s"})),v.a.createElement("li",null,v.a.createElement(R.b,{material:n,bookWorksheet:a,spinnerClassName:"white grey-circle small",onRefresh:function(e){e===B.b?window.location.reload():e===I.a&&(window.location="/u/".concat(t.username))},showCreateLesson:!0}))))}Q.propTypes={book:k.a.instanceOf(N.h),worksheet:k.a.instanceOf(N.h)};var J=function(e){c()(n,e);var t=F(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){return v.a.createElement("header",{className:"h-8 w-100 z-header"},v.a.createElement(M.a,null),v.a.createElement("div",{className:"navbar-fixed"},v.a.createElement("nav",{className:"materials white"},v.a.createElement("div",{className:"nav-wrapper ".concat(this.props.type)},v.a.createElement(W.a,{responsive:!0}),v.a.createElement("div",{className:"header-gap"}),v.a.createElement(Q,{book:this.props.book,worksheet:this.props.worksheet})))),(this.props.book||this.props.worksheet)&&v.a.createElement(S.a,null,v.a.createElement("meta",{name:"ggb:m:id",content:this.props.book?this.props.book.id:this.props.worksheet.id})))}}]),n}(v.a.Component);m()(J,"propTypes",{type:k.a.oneOf(O.c),book:k.a.instanceOf(N.h),worksheet:k.a.instanceOf(N.h),chapter:k.a.any});var q=Object(D.i)(J),Y=n(377),Z=n(76),H=n(359),X=n(31),$=n.n(X),ee=n(62),te=n(210),ne=n(8),ae=n(55),re=n(81);function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}function ie(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var se=function(e){c()(n,e);var t=ie(n);function n(e,a){var o;return r()(this,n),o=t.call(this,e,a),a.store.dispatch(Object(Z.d)()),o}return i()(n,[{key:"render",value:function(){var e,t,n;return this.props.payload?(t=this.props.payload.reduceToProps(),this.props.payload.book?(e=this.props.payload.getTree(),n=!1):(e=Y.a,n=!0)):(t={},e=Y.a,n=!0),v.a.createElement(y.a,{header:v.a.createElement(q,t),sidebar:e,showSidebarFooter:n},this.props.payload?v.a.createElement(H.a,null,this._renderMaterialRoutes()):v.a.createElement(A.a,{className:"fullscreen"}))}},{key:"_renderMaterialRoutes",value:function(){switch(this.props.payload.type){case O.e:case O.d:case O.f:return v.a.createElement(C.a,this.props.payload.reduceToProps());case O.k:return v.a.createElement(C.d,{worksheet:this.props.payload.worksheet});case O.h:return n._renderError(this.props.payload.error)}}}],[{key:"_renderError",value:function(e){switch(e.code){case 401:return v.a.createElement(b.a,null);case 403:return v.a.createElement(w.a,null);case 404:return v.a.createElement(x.a,{error:e})}}}]),n}(v.a.Component);m()(se,"propTypes",{payload:k.a.instanceOf(E.a)}),m()(se,"contextType",L.b);var ce,le,ue=(ce=se,le=function(e){c()(n,e);var t=oe(n);function n(e,a){var o;r()(this,n),(o=t.call(this,e,a))._mapData=o._mapData.bind(P()(o)),o._cacheMaterial=o._cacheMaterial.bind(P()(o)),o.state={id:e.match.params.id,hash:e.location.hash,cachedMaterial:null,payload:null};var i=Object(ae.b)(a.store);return i&&(i.code?(o.state.cachedMaterial={},o.state.payload=E.a.error(i.code)):(o.state.cachedMaterial=N.n.fromPlainObject(a.store,i),o.state.payload=E.a.getPayloadFromMaterial(o.state.cachedMaterial,""),n.handleSideNavState(o.state.payload,a.store))),o}return i()(n,null,[{key:"loadData",value:function(e,t){var n=t.id,a=t.interlinking,r=void 0===a||a,o=t.topics,i=void 0===o||o,s=t.embedLanguage,c=void 0===s||s;return n=Object(ee.b)(n)||n,Object(te.e)(e,n,{embedContributors:!0,scope:"extended",embedInterlinking:r,embedTags:i,embedLanguage:c}).then((function(e){return e.type===O.a||e.type===O.b?e.isAutocheckWorksheet&&e.isAutocheckWorksheet()?{redirect:!0,to:"/m/".concat(e.id,"/autocheck"),code:307}:/^\d+$/.test(n)&&e instanceof N.h?{redirect:!0,to:"/m/".concat(e.id),code:301}:(ne.b&&(e.ComponentName=Object(C.e)(e.type||O.b)),e):[O.l,O.i,O.g,O.j].includes(e.type)?{redirect:!0,to:"/material/show/id/".concat(e.id),code:302}:{code:404}})).catch((function(e){return e}))}}]),i()(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.state.cachedMaterial?this.state.cachedMaterial.type===O.a&&this._mapData(this.state.cachedMaterial):this._fetchMaterial(this.state.id)}},{key:"componentDidUpdate",value:function(){this.state.cachedMaterial?this.state.payload?this.state.payload.isEmpty()&&(n.handleSideNavState(this.state.payload,this.context.store),this.state.payload.type!==O.f||this.state.payload.worksheet||this._fetchBookWorksheet(this.state.payload)):this._mapData(this.state.cachedMaterial):this._fetchMaterial(this.state.id)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){return v.a.createElement(ce,$()({},this.props,{payload:this.state.payload}))}},{key:"_cacheMaterial",value:function(e){return this.state.cachedMaterial=e,new Promise((function(t){t(e)}))}},{key:"_fetchBookWorksheet",value:function(e){var t=this,a=E.a.getIdFromHash(this.state.hash);n.loadData(this.context.store,{id:a,interlinking:!1}).then((function(n){n.redirect?t._handleRedirect("".concat(e.book.id,"/autocheck#material/").concat(a)):n.code?t._isMounted&&t.setState({payload:E.a.error(n.code)}):(n.index=e.page.index,e.page.worksheet=n,t._isMounted&&t.setState({payload:E.a.bookPage(e.book,e.chapter,e.page)}))}))}},{key:"_fetchMaterial",value:function(e){n.loadData(this.context.store,{id:e}).then(this._cacheMaterial).then(this._mapData)}},{key:"_handleRedirect",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];ne.a&&(t?this.props.history.push(e):window.location.replace(e))}},{key:"_mapData",value:function(e){if(e.redirect)this._handleRedirect(e.to,e.push);else if(e.code)!this._isMounted||this.state.payload&&this.state.payload.error||(console.error("fetching failed - server error `"+e.code+"`",e),this.setState({payload:E.a.error(e.code)}));else{var t=E.a.getPayloadFromMaterial(e,this.state.hash);n.handleSideNavState(t,this.context.store),this._isMounted&&this.setState({payload:t})}}}],[{key:"getDerivedStateFromProps",value:function(e,t){return t.id!==e.match.params.id?{cachedMaterial:null,payload:null,id:e.match.params.id}:t.hash!==e.location.hash?{payload:E.a.getPayloadFromMaterial(t.cachedMaterial,e.location.hash),hash:e.location.hash}:null}},{key:"handleSideNavState",value:function(e,t){e.book?t.getState().sideNavState.state!==re.b&&Object(re.e)(t):t.getState().sideNavState.state!==re.a&&Object(re.d)(t)}}]),n}(v.a.Component),m()(le,"propTypes",{match:k.a.shape({params:k.a.shape({id:k.a.any.isRequired}).isRequired}),data:k.a.object}),m()(le,"contextType",L.b),le);t.default=ue},221:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=r.a.createContext(null)},316:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n(3),r=n.n(a),o=n(5),i=n.n(o),s=n(2),c=n.n(s),l=n(67),u=n(8),p=function(){function e(t){r()(this,e),c()(this,"type",null),c()(this,"book",null),c()(this,"chapter",null),c()(this,"page",null),c()(this,"worksheet",null),c()(this,"error",null),this.type=t.type,t.book&&(this.book=t.book),t.chapter&&(this.chapter=t.chapter),t.page&&(this.page=t.page),t.worksheet&&(this.worksheet=t.worksheet),t.error&&(this.error=t.error)}return i()(e,[{key:"getTree",value:function(e){e=e||"/m/".concat(this.book.id);var t=this.book.chapters.slice();return t.length>0&&0===t[0].id?t[0]={id:0,title:this.book.title,pages:t[0].pages?t[0].pages.slice():[]}:t.unshift({id:0,title:this.book.title,pages:[]}),t.map((function(t){var n=t.pages.map((function(t){return{text:t.title,to:"".concat(e,"#material/").concat(t.id)}}));return{text:t.title,to:0!==t.id?"".concat(e,"#chapter/").concat(t.id):e,pages:n}}))}},{key:"isEmpty",value:function(){return this.type===l.e&&!this.book||this.type===l.d&&!this.chapter||this.type===l.f&&!this.worksheet||this.type===l.k&&!this.worksheet||this.type===l.h&&!this.error}},{key:"reduceToProps",value:function(){return{type:this.type,book:this.book,chapter:this.chapter,worksheet:this.worksheet}}}],[{key:"worksheet",value:function(t){return new e({type:l.k,worksheet:t})}},{key:"bookTitle",value:function(t){return new e({type:l.e,book:t})}},{key:"bookChapter",value:function(t,n){return new e({type:l.d,book:t,chapter:n})}},{key:"bookPage",value:function(t,n,a){return void 0!==a.worksheet&&(a.worksheet.index=a.index),new e({type:l.f,book:t,chapter:n,page:a,worksheet:a.worksheet})}},{key:"error",value:function(t){return new e({type:l.h,error:{code:t}})}},{key:"getViewerTypeFromHash",value:function(e,t){if(u.a&&""!==e){if(-1!==e.indexOf("chapter/"))return l.d;if(-1!==e.indexOf("material/"))return l.f}return t.type===l.a?l.e:l.k}},{key:"getIdFromHash",value:function(e){return e.split("/")[1]}},{key:"getPayloadFromMaterial",value:function(t,n){var a,r;switch(e.getViewerTypeFromHash(n,t)){case l.k:return e.worksheet(t);case l.e:return e.bookTitle(t);case l.d:return void 0!==(a=t.getBookChapter(e.getIdFromHash(n)))?e.bookChapter(t,a):e.bookTitle(t);case l.f:return void 0!==(r=t.getBookPage(e.getIdFromHash(n)))?e.bookPage(t,r.chapter,r.page):e.bookTitle(t)}}}]),e}()},332:function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u}));var a=n(31),r=n.n(a),o=n(0),i=n.n(o),s=n(1),c=n.n(s);function l(e){return i.a.createElement("button",{className:"".concat("h5 tt-u lh-i ls-1_25px fw-600"," ").concat("ba brad-4px px-2"," bc-gray-dark f-bc-primary tc-primary ").concat(e.className),onClick:e.onClick},e.children)}l.propTypes={onClick:c.a.func,className:c.a.string};function u(e){return i.a.createElement(l,r()({},e,{className:"".concat("bg-white bg-purple-light-h"," ").concat(e.className)}))}u.propTypes={onClick:c.a.func,className:c.a.string}},359:function(e,t,n){"use strict";var a=n(3),r=n.n(a),o=n(5),i=n.n(o),s=n(6),c=n.n(s),l=n(10),u=n.n(l),p=n(7),h=n.n(p),d=n(2),m=n.n(d),f=n(0),v=n.n(f),g=n(81),k=n(1),E=n.n(k),A=n(16),y=n(54),b=n.n(y);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=h()(e);if(t){var r=h()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return u()(this,n)}}var x=function(e){c()(n,e);var t=w(n);function n(){return r()(this,n),t.apply(this,arguments)}return i()(n,[{key:"render",value:function(){var e=b()("material-viewer xi-grow-1 miw-0 x-d-x x-column-fit",{"side-nav-default":this.props.sideNavState===g.b,"side-nav-overlay":this.props.sideNavState===g.c,"side-nav-closed":this.props.sideNavState===g.a});return v.a.createElement("main",{className:e},this.props.overflowNode,v.a.createElement("div",{className:"px-2 px-0-m pt-2 xi-grow-1 x-d-x x-column-fit"},this.props.children))}}]),n}(v.a.Component);m()(x,"propTypes",{sideNavState:E.a.string,overflowNode:E.a.node}),m()(x,"contextType",A.b);t.a=Object(A.c)((function(e){return{sideNavState:e.sideNavState.state}}))(x)},362:function(e,t,n){"use strict";n.d(t,"a",(function(){return V}));var a=n(34),r=n.n(a),o=n(13),i=n.n(o),s=n(24),c=n.n(s),l=n(3),u=n.n(l),p=n(5),h=n.n(p),d=n(19),m=n.n(d),f=n(6),v=n.n(f),g=n(10),k=n.n(g),E=n(7),A=n.n(E),y=n(2),b=n.n(y),w=n(0),x=n.n(w),C=n(1),O=n.n(C),N=n(14),R=n(9),D=n(43),S=n(219),M=n(57),W=n(16),B=n(311),T="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAAQCAYAAABDebxFAAAACXBIWXMAAA+AAAAPgAEyQq3jAAACBklEQVRIie2XwUtUURSHP0NxUygIIkR1L91FC5HZBKJEQpvIRMONaJvcVSsXrkLwbwgCc1MtCoIWQYsWLVISV4rjQhS8ck/kPpWQdhMHjvCUGUdntHTowOMN59173/nu+Z3z7tQVCgVq2S7UNF0tAQbn64r5T0Wiwfkc0GxXrsiQLSCfdURJM1W8rxH4DQxFSe+zz+orXdQWdoDu0JiBBOByhWvpbRXYAdaAOWAhSsqXn00bsAtMAPsAK8pgcH4AeA5cKTN01sB/AQJsWlY7gA3gEtBqwV0vscZ34DUwc1iWg/MfgEHgXZQ0cmzA4PwocBPoy2Rp26SWN4CoMJXKLTjfYz/1rurQjWzKDFkGPipwlKTvy859ArwAfkRJV48EGJy/BgwDvUC3ud/obirUEeVTlRn0XYuh/SBslDRpsd4HPtkzv7cBRQGD8/cs3f1Ai0ltsppGcEKwKvdxU9Btc6uEFfIrsA40AA+iJM30fsDgvNbHM2DEakR3YTpK+vavoEqZxdpjl0p5HugCVHVTUdJjsoDB+VvWgaaBL8BKlLR11sBKmUlUpfwUeBslPWQPMDiv7f0R8DlKmjuTBGbBee3AQ3ZI6TR37kAz0uY3FiW9OhdnUWt2L62zav1dLDPlJ3AnSlqq6kP/F63Lgr4BLNpJSLNUsMPKptWdaKlle8b/fxPn2oA/Uc648Tk6Tj4AAAAASUVORK5CYII=",P="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAWCAYAAABXEBvcAAAACXBIWXMAABYlAAAWJQFJUiTwAAADDElEQVRYhe2ZS2hUMRSGP62gG2sRdSPSBAIVwXZUxAdi3VhUfOGiogupgiIKUnDjQkR05a4ufCCi3Qgigg8Ety2Kr40tiBYJJl2JotBWEYVK5eC55fYx40xn+pDOD8M9yc3Nvflzzn+SzIyBgQHKGDtmlrkrDmUCi0SZwCJRJjAHnLEnnbHHc7WZNQkftUnN5JoBqtQ2QLXanUCd2u2pLtpSdkbLHT6GdH2psArY54yt8TGcGK3PcSPQGVvlY+hxxh4DGrV6JTA3zy7qUnZ9FluwS9/3DfgA9AARuCv1PoZHRQzji14bsjUo+TLGGdsCrAV+AQOMHHA+6AV+AK8SghQe+AqsKbCvN4BMZJ+PIRYwFomMbqASeOxj2Da8TckIdMaeAw5osTpLsz4gqJckIScD6lB7N9CldpeG9m9gsZalbTMwB3gNfAKWAYs0nDM53p1ApKHFx9Ca57g6NBo+AkeGe/SYCXTGysceAjYCC3SQacjM3U8RFAuZ/WKgOmtUZzPD5CBBt05iWy4ynbFXgKNavOhjaE7fL5hAZ+x2YAOwH1ii1RImrYlnjZOgjxk62UKmhODmLP1IomodTqYzVqLinhY7fQyZ9P28CHTGymze0KxUqdVC2llgvo/hzATyUTScsU3qVaNp6QOgSRIgf9ueBiQDLxSv9TGYdOOcBDpjRU8kKVQAO7S6V+tER3qmEC8FQz0TdQTx0HmpPtpVb2WML1VnBSt8DIlmZyfQGSvufllFWTp4DrzzMVybKgSUGhppzaqb9eosEsJXgRp93XUfw+Hk1SMIdMbuBS4o8w+BF8DbiUoAUwW6hGlUrb8DXNJPG5JIhiyknbG1wHngto/h1HQibBT8VD18CixP3a5INx30QGfsOl0A3/zftS1fqJftAWp12VOVejTXBmAwG0+7A1WNsq26bm1IaVshuKWZun/CDxMmE85Y0faDuiTJhc/AbN0Cet0MrAdWAzt9DE+SZ6eNBzpj5ehui5K3Srdm8vuuBxyJvRR4BvT7GN7/q9/yfyJFonygWgyAPxAfAdqK04tEAAAAAElFTkSuQmCC",j="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAhCAYAAAAS5W/tAAAACXBIWXMAACE3AAAhNwEzWJ96AAAEo0lEQVRoge2bSWgkVRjHf+6IUUfcdRzfw3dQEQ2IKC6Yk+BKFBnn4CEyCi4HI15cLsGD3rS9ijjjQRAXzCiCoswk4kEFMaMgig/rBRcEETtxlEFGI5/8S2pqKulOp9NJyvpDU+nqt3zv/d+3VuWwhYUFGtQXhzfc1hsNwTVHQ3DN0RBcczQE1xwNwRsIwfn7g/NblyPxkTXbgGFg0zK6zMSUtVdRpL4hOG9cXQ9cE5zfHFP2dDdjb5g8uEBe+eqAc/swxXRhvBldDZOAHYKpmLKpPszTE4LztsYJYAz4FRiJKfu801jrkuDg/Hhhg43IIeDSNRZrDvge+Ar4CLhIxO+MKZsZhADB+S+BC/T18ZiyJzv1WRcEB+dHpTWmQU8ANw9o6nlgP/AbcN4KxjHy9wGvGekxZRN9lPE/yIp9pu8/A5fFlM0u1WfNCA7Ot4DrdCJ/AM7uw7Bzup5Y+Dv3sW8CJwMXA38BlxT6TIrso4B7S+O1e3QBHwOPqH/qh68PzpsCTBVkN2yNKXt1sT4DDbIk4Kh8iQl6ln7qRO5saZOndU2Fz1RuMnV9R232F6xD/jmguf8UuUiu8zX2u8AxGusq4B61Gdbh6QaXA3sKa98FtFbix+2QBOdnCgR/1+nwrboGy6zYht8APAWc0EW3afngKR2GK8z3DcrXLQYd0DwQs+uISL9W2t4N+bNa02QvWh2ctyBrR+HWfEzZovOuCsHaiLstpAdu6aLLtDTp39O91kT2CsUSI7IG3Zj1vbIu492SHZy3Pf2gdPvWmLLJqvZ9JVjEXg3cWPJlOfIFpUIEuiHy0OUiOJ8TnWt4J+zVITd/vXOptsH5dslavBhTNlbVdsUEB+edFrINOKN0cnOztUtkVp6yukMH/z7gdODBLpZrZI/GlKWK/d4kJTkoJokpG6kaqGeCRewzCtRuqmhylwRpVwn6f4X2zbTtzkJqVg4ikXK0qlKu4PwXigOGdKt/BMvJR2nsA4WfZhV4mJZONKR2hsx4kt/esUiHufKeBuefB7aX2p1U5e6WRXBw/lHldnkkbKWyb4AfgW/r7FMHARGeR+bDFe5uzNxccN7inDeAUwq/PxtTNl4WsyuCg/NWHHhOPvZURbtmJj608t1GjXrXM5ReFsl2imceiilrBeffKrnGV2LK7igvaUmCg/MTCqDy/O8x4GhNMNwQOzgoBbOU8zaRPaYYKMfrMWW3lwValODg/NvAFpX1Wp1C9waDgaLoCfnlPYVJKwmuLFUG5031TwM+AR5u/OraQ9E3Kr2+YLdKQlUGtYdocHDeyom/AO83JngwEHnn6GFI7nNRmlkMuH4HjtNvByoU9JDU6iCCg/PHWpG90djBQM+97dHomYXnvP2Az1Oq5j8bBgRlIub6/rB9ByzivRA4vo8SmAYPF2sQtXona70iOP+yqlaWZm5ehpjzqjl8DfwtLZ/NK4R6vJmb8+0xZS+VB2g0eJURnN8iUrrFnAIm88u75Wt3K+idLL+HZf57qaphQ/AqIzh/hIpDbb1XdiXwnooWn2p2qynviymz136sz5BM908xZSsiqCG45mhefK85GoLrDOAfNj+3guEhBW0AAAAASUVORK5CYII=";function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=A()(e);if(t){var r=A()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return k()(this,n)}}var V="LESSON_CREATE_DIALOG",U=function(e){v()(a,e);var t,n=_(a);function a(e){var t;return u()(this,a),(t=n.call(this,e))._onConfirmButtonConfirmPromise=t._onConfirmButtonConfirmPromise.bind(m()(t)),t}return h()(a,[{key:"componentDidMount",value:(t=c()(i.a.mark((function e(){var t,n,a,r,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.intl.formatMessage({id:"create_lesson_dialog.create-button"}),n=this.props.intl.formatMessage({id:"create_lesson_dialog.cancel-button"}),a=Object(D.e)(this.context.store,z,{actionButton:{title:t,onClick:this._onConfirmButtonConfirmPromise},cancelButton:{title:n},lessonTitle:this.props.resourceTitle,inputsDisabled:!1,error:null,paddingtonBear:!0}),e.next=5,Object(D.g)(a);case 5:r=e.sent,o=r.lessonTitle,s=r.id,this.props.onClose&&this.props.onClose(o),s&&this.props.history.push("".concat(M.b,"/").concat(s));case 10:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return null}},{key:"_onConfirmButtonConfirmPromise",value:function(){var e=this,t=Object(D.c)(this.context.store).lessonTitle;if(""!==t)return Object(D.f)(this.context.store,null,{inputsDisabled:!0}),Object(S.a)(this.context.store,{id:this.props.resourceId,title:t}).then((function(t){var n=t.id;Object(D.f)(e.context.store,null,{id:n}),Object(D.a)(e.context.store)})).catch((function(e){console.error("There was an error while creating the lesson:",e)}));Object(D.f)(this.context.store,null,{error:"create_lesson_dialog.empty-lesson-title"})}}]),a}(x.a.PureComponent);b()(U,"propTypes",{resourceTitle:O.a.string.isRequired,resourceId:O.a.string.isRequired,onClose:O.a.func,intl:N.d}),b()(U,"contextType",W.b);t.b=Object(N.e)(Object(R.i)(U));function z(e){var t=e.setModalState,n=r()(e,["setModalState"]),a=Object(w.useCallback)((function(e){t({lessonTitle:e})}),[t]),o=Object(N.g)().formatMessage;return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"bg-gray-light btrad-4px w-480px mw-100 p-3 p-2-m"},x.a.createElement("div",{className:"x-d-x x-row-fit x-space-around x-ai-c"},x.a.createElement("img",{className:"w-8 miw-0 my-1 xi-shrink-1",src:"/assets/img/create-wand.96b0c165.png",srcSet:"".concat("/assets/img/create-wand@2x.d10559a6.png"," 2x, ").concat("/assets/img/create-wand@3x.81da0e22.png"," 3x"),alt:"CreateWandImage"}),x.a.createElement("img",{className:"w-7 miw-0 mx-1 xi-shrink-2",src:T,srcSet:"".concat(P," 2x, ").concat(j," 3x"),alt:"ArrowRight"}),x.a.createElement("img",{className:"w-8 miw-0 my-1 xi-shrink-1",src:"/assets/img/students-with-share-laptop.7df4e62f.png",srcSet:"".concat("/assets/img/students-with-share-laptop@2x.1b9170cb.png"," 2x, ").concat("/assets/img/students-with-share-laptop@3x.2953c7f6.png"," 3x"),alt:"CreateWandImage"}),x.a.createElement("img",{className:"w-7 miw-0 mx-1 xi-shrink-2",src:T,srcSet:"".concat(P," 2x, ").concat(j," 3x"),alt:"ArrowRight"}),x.a.createElement("img",{className:"w-8 miw-0 my-1 xi-shrink-1",src:"data:image/png;base64,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",srcSet:"".concat("/assets/img/student-with-laptop@2x.8cbaabc5.png"," 2x, ").concat("/assets/img/student-with-laptop@3x.135df44b.png"," 3x"),alt:"CreateWandImage"})),x.a.createElement("div",{className:"x-d-x x-row-fit x-space-between ta-c h5 h6-s"},x.a.createElement("div",{className:"w-25 xi-shrink-1"},x.a.createElement(N.b,{id:"create_lesson_dialog.info-create-class"})),x.a.createElement("div",{className:"w-7 mx-1 xi-shrink-2"}),x.a.createElement("div",{className:"w-25 xi-shrink-1"},x.a.createElement(N.b,{id:"create_lesson_dialog.info-share-with-students"})),x.a.createElement("div",{className:"w-7 mx-1 xi-shrink-2"}),x.a.createElement("div",{className:"w-25 xi-shrink-1"},x.a.createElement(N.b,{id:"create_lesson_dialog.info-review-work"})))),x.a.createElement("div",{className:"w-480px mw-100 p-3 p-2-m pb-0"},x.a.createElement("div",{className:"mb-3 d-ib w-100 debug-"},x.a.createElement("div",{className:"h3 fw-600 f-l"},x.a.createElement(N.b,{id:"create_lesson_dialog.title"})),x.a.createElement("div",{className:"h5 f-r lh-3"},x.a.createElement("a",{href:o({id:"tutorials.classroom_teacher"}),title:o({id:"lesson-context-menu.tutorial"}),target:"_blank",rel:"noreferrer"},x.a.createElement("span",{className:"d-n-s"},x.a.createElement(N.b,{id:"enter-lesson.classroom-tutorial"},(function(e){return e}))),x.a.createElement("span",{className:"d-n d-b-s"},x.a.createElement(N.b,{id:"enter-lesson.classroom-tutorial-short"},(function(e){return e})))))),x.a.createElement(B.a,{label:"create_lesson_dialog.name",value:n.lessonTitle,onChange:a,error:n.error,autofocus:!0,disabled:n.inputsDisabled})))}z.propTypes={setModalState:O.a.func.isRequired,lessonTitle:O.a.string,error:O.a.string,inputsDisabled:O.a.bool}},364:function(e,t,n){"use strict";var a=n(15),r=n(39),o=n(25);n(1);function i(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var s=n(0),c=n.n(s),l=n(58),u=n.n(l),p=!1,h=n(221),d="unmounted",m="exited",f="entering",v="entered",g="exiting",k=function(e){function t(t,n){var a;a=e.call(this,t,n)||this;var r,o=n&&!n.isMounting?t.enter:t.appear;return a.appearStatus=null,t.in?o?(r=m,a.appearStatus=f):r=v:r=t.unmountOnExit||t.mountOnEnter?d:m,a.state={status:r},a.nextCallback=null,a}Object(o.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===d?{status:m}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==f&&n!==v&&(t=f):n!==f&&n!==v||(t=g)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,a=this.props.timeout;return e=t=n=a,null!=a&&"number"!=typeof a&&(e=a.exit,t=a.enter,n=void 0!==a.appear?a.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===f?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===m&&this.setState({status:d})},n.performEnter=function(e){var t=this,n=this.props.enter,a=this.context?this.context.isMounting:e,r=this.props.nodeRef?[a]:[u.a.findDOMNode(this),a],o=r[0],i=r[1],s=this.getTimeouts(),c=a?s.appear:s.enter;!e&&!n||p?this.safeSetState({status:v},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,i),this.safeSetState({status:f},(function(){t.props.onEntering(o,i),t.onTransitionEnd(c,(function(){t.safeSetState({status:v},(function(){t.props.onEntered(o,i)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),a=this.props.nodeRef?void 0:u.a.findDOMNode(this);t&&!p?(this.props.onExit(a),this.safeSetState({status:g},(function(){e.props.onExiting(a),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:m},(function(){e.props.onExited(a)}))}))}))):this.safeSetState({status:m},(function(){e.props.onExited(a)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(a){n&&(n=!1,t.nextCallback=null,e(a))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:u.a.findDOMNode(this),a=null==e&&!this.props.addEndListener;if(n&&!a){if(this.props.addEndListener){var r=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=r[0],i=r[1];this.props.addEndListener(o,i)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===d)return null;var t=this.props,n=t.children,a=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(r.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return c.a.createElement(h.a.Provider,{value:null},"function"==typeof n?n(e,a):c.a.cloneElement(c.a.Children.only(n),a))},t}(c.a.Component);function E(){}k.contextType=h.a,k.propTypes={},k.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:E,onEntering:E,onEntered:E,onExit:E,onExiting:E,onExited:E},k.UNMOUNTED=d,k.EXITED=m,k.ENTERING=f,k.ENTERED=v,k.EXITING=g;var A=k,y=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.remove(a):"string"==typeof n.className?n.className=i(n.className,a):n.setAttribute("class",i(n.className&&n.className.baseVal||"",a)));var n,a}))},b=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(t=e.call.apply(e,[this].concat(a))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1];t.removeClasses(r,"exit"),t.addClass(r,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1]?"appear":"enter";t.addClass(r,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var a=t.resolveArguments(e,n),r=a[0],o=a[1]?"appear":"enter";t.removeClasses(r,o),t.addClass(r,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,a="string"==typeof n,r=a?""+(a&&n?n+"-":"")+e:n[e];return{baseClassName:r,activeClassName:a?r+"-active":n[e+"Active"],doneClassName:a?r+"-done":n[e+"Done"]}},t}Object(o.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var a=this.getClassNames(t)[n+"ClassName"],r=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&r&&(a+=" "+r),"active"===n&&e&&e.scrollTop,a&&(this.appliedClasses[t][n]=a,function(e,t){e&&t&&t.split(" ").forEach((function(t){return a=t,void((n=e).classList?n.classList.add(a):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,a)||("string"==typeof n.className?n.className=n.className+" "+a:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+a)));var n,a}))}(e,a))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],a=n.base,r=n.active,o=n.done;this.appliedClasses[t]={},a&&y(e,a),r&&y(e,r),o&&y(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Object(r.a)(e,["classNames"]));return c.a.createElement(A,Object(a.a)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.a.Component);b.defaultProps={classNames:""},b.propTypes={};t.a=b},366:function(e,t,n){"use strict";var a=n(39),r=n(15);var o=n(25),i=(n(1),n(0)),s=n.n(i),c=n(221);function l(e,t){var n=Object.create(null);return e&&i.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&Object(i.isValidElement)(e)?t(e):e}(e)})),n}function u(e,t,n){return null!=n[t]?n[t]:e.props[t]}function p(e,t,n){var a=l(e.children),r=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var a,r=Object.create(null),o=[];for(var i in e)i in t?o.length&&(r[i]=o,o=[]):o.push(i);var s={};for(var c in t){if(r[c])for(a=0;a<r[c].length;a++){var l=r[c][a];s[r[c][a]]=n(l)}s[c]=n(c)}for(a=0;a<o.length;a++)s[o[a]]=n(o[a]);return s}(t,a);return Object.keys(r).forEach((function(o){var s=r[o];if(Object(i.isValidElement)(s)){var c=o in t,l=o in a,p=t[o],h=Object(i.isValidElement)(p)&&!p.props.in;!l||c&&!h?l||!c||h?l&&c&&Object(i.isValidElement)(p)&&(r[o]=Object(i.cloneElement)(s,{onExited:n.bind(null,s),in:p.props.in,exit:u(s,"exit",e),enter:u(s,"enter",e)})):r[o]=Object(i.cloneElement)(s,{in:!1}):r[o]=Object(i.cloneElement)(s,{onExited:n.bind(null,s),in:!0,exit:u(s,"exit",e),enter:u(s,"enter",e)})}})),r}var h=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},d=function(e){function t(t,n){var a,r=(a=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(a));return a.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},a}Object(o.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,a,r=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,a=o,l(n.children,(function(e){return Object(i.cloneElement)(e,{onExited:a.bind(null,e),in:!0,appear:u(e,"appear",n),enter:u(e,"enter",n),exit:u(e,"exit",n)})}))):p(e,r,o),firstRender:!1}},n.handleExited=function(e,t){var n=l(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=Object(r.a)({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=Object(a.a)(e,["component","childFactory"]),o=this.state.contextValue,i=h(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?s.a.createElement(c.a.Provider,{value:o},i):s.a.createElement(c.a.Provider,{value:o},s.a.createElement(t,r,i))},t}(s.a.Component);d.propTypes={},d.defaultProps={component:"div",childFactory:function(e){return e}};t.a=d},368:function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var a=n(20),r=n.n(a),o=n(3),i=n.n(o),s=n(5),c=n.n(s),l=n(19),u=n.n(l),p=n(6),h=n.n(p),d=n(10),m=n.n(d),f=n(7),v=n.n(f),g=n(2),k=n.n(g),E=n(0),A=n.n(E),y=n(1),b=n.n(y),w=n(14),x=n(245),C=n(207),O=n(33),N=n(237),R=n(16),D=n(67),S=n(35),M=n(210);function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var B=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M12.1 18.55l-.1.1-.11-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04 1 3.57 2.36h1.86C13.46 6 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05M16.5 3c-1.74 0-3.41.81-4.5 2.08C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.41 2 8.5c0 3.77 3.4 6.86 8.55 11.53L12 21.35l1.45-1.32C18.6 15.36 22 12.27 22 8.5 22 5.41 19.58 3 16.5 3z"}))};B.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var T=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.27 2 8.5 2 5.41 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.08C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.41 22 8.5c0 3.77-3.4 6.86-8.55 11.53L12 21.35z"}))};T.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var P=function(e){h()(n,e);var t=W(n);function n(){return i()(this,n),t.apply(this,arguments)}return c()(n,[{key:"render",value:function(){return this.props.materialRights.isFavorite&&-1!==this.context.store.getState().userState.user.id?A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onClick(!1)},A.a.createElement(T,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.unfavorite"}))):A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onClick(!0)},A.a.createElement(B,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.favorite"})))}},{key:"_onClick",value:function(e){var t=this;return function(){if(t.context.store.getState().userState.user.id>-1){var n=t.props.material;Object(M.n)(t.context.store,n.id,e).then((function(){t.props.onChange(),Object(O.c)(t.context.store,{id:"materialcard.message.".concat(e?"favorited":"unfavorited"),values:{$1:n.title}})})).catch((function(a){console.error("favorite action failed",a),Object(O.c)(t.context.store,{id:"materialcard.error.".concat(e?"favorite":"unfavorite"),values:{$1:n.title}})}))}else Object(S.g)(t.context.store).then(t._onClick(e))}}}]),n}(A.a.Component);k()(P,"contextType",R.b),k()(P,"propTypes",{material:b.a.instanceOf(C.h).isRequired,materialRights:b.a.object.isRequired,onChange:b.a.func.isRequired});var j=n(337),_=n(362),V=n(320),U=n(84);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){k()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return m()(this,n)}}var G=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 00-3 3 3 3 0 003 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0018 16.08z"}))};G.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var I=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M22 9.5c0-1.3-1.1-2.4-2.3-2.4h-.3c-1.3-1.8-3.4-2.8-5.7-2.9-.4-.8-1.2-1.4-2.1-1.4-1.3 0-2.3 1-2.3 2.3-.5.2-.9.4-1.3.7-1.2.7-2.2 1.7-3 2.8-.2-.1-.4-.1-.7-.1C3 8.5 2 9.5 2 10.8c0 1 .6 1.8 1.4 2.1-.1 1.3.2 2.7.9 3.8.3.4.6.8.9 1.1-.1.2-.1.5-.1.8 0 1.3 1.1 2.3 2.4 2.3.8 0 1.5-.4 2-1.1 1.7.3 3.6 0 5.4-.8.4.4 1 .7 1.6.7 1.3 0 2.3-1.1 2.3-2.4 0-.4-.1-.8-.3-1.1 1.2-1.4 1.9-3.1 2-4.7.9-.2 1.5-1 1.5-2zm-12.2 9c-.1-1.2-1.1-2.1-2.3-2.1-.4 0-.8.1-1.2.3-.3-.2-.5-.4-.6-.7-.5-.9-.7-1.9-.7-2.9 1-.3 1.7-1.2 1.7-2.3 0-.5-.2-1-.5-1.4.6-.9 1.5-1.7 2.6-2.4.3-.2.6-.3.8-.4.4.6 1.1 1 1.9 1 1.1 0 2-.7 2.3-1.7 1.7.1 3.1.8 4.1 2.1-.4.4-.6.9-.6 1.5 0 1 .6 1.9 1.6 2.2-.1 1.3-.7 2.5-1.6 3.6-.3-.1-.5-.2-.8-.2-1.3 0-2.3 1.1-2.3 2.3v.2c-1.5.8-3.1 1.1-4.4.9z"}))};I.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var F=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"}))};F.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var Q=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M19 21H8V7h11m0-2H8a2 2 0 00-2 2v14a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2m-3-4H4a2 2 0 00-2 2v14h2V3h12V1z"}))};Q.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var J=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M13 9h-2V7h2m0 10h-2v-6h2m-1-9A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"}))};J.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var q=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M20 6h-8l-2-2H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V8a2 2 0 00-2-2zm-5.5 12v-3h-4v-4h4V8l5 5z"}))};q.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var Y=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M14 20.94V23h2.06l6.06-6.07-2.05-2.05L14 20.94zM23.7 14.58l-1.28-1.28a.53.53 0 00-.38-.17.56.56 0 00-.39.17l-1 1 2.05 2.05 1-1a.53.53 0 000-.77zM12 2a10 10 0 000 20v-2.62l9.71-9.72A10 10 0 0012 2zm1 15h-2v-6h2zm0-8h-2V7h2z"}))};Y.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var Z=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M12 3L1 9l11 6 9-4.91V17h2V9M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82z"}))};Z.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var H=function(e){return A.a.createElement("svg",e,A.a.createElement("path",{d:"M17.9 17.39c-.26-.8-1.01-1.39-1.9-1.39h-1v-3a1 1 0 00-1-1H8v-2h2a1 1 0 001-1V7h2a2 2 0 002-2v-.41a7.984 7.984 0 012.9 12.8M11 19.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.22.21-1.79L9 15v1a2 2 0 002 2m1-16A10 10 0 002 12a10 10 0 0010 10 10 10 0 0010-10A10 10 0 0012 2z"}))};H.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var X=function(e){h()(n,e);var t=K(n);function n(e){var a;return i()(this,n),(a=t.call(this,e))._onCloseDialog=a._onCloseDialog.bind(u()(a)),a._onMoreClick=a._onMoreClick.bind(u()(a)),a._onCopyResource=a._onCopyResource.bind(u()(a)),a._onCreateLesson=a._onCreateLesson.bind(u()(a)),a.state=L(L({},n._getEmptyStateData()),{},{openDialog:void 0,bookWorksheet:e.bookWorksheet,user_id:e.user_id}),a}return c()(n,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){return A.a.createElement(A.a.Fragment,null,A.a.createElement(x.a,{onMoreClick:this._onMoreClick,loading:1===this.state.loadingState,moreClass:this.props.moreClass,iconClass:this.props.iconClass,spinnerClassName:this.props.spinnerClassName},this._getPopdown()),void 0!==this.state.openDialog&&this.state.openDialog!==_.a&&A.a.createElement(j.d,{openDialog:this.state.openDialog,onClose:this._onCloseDialog,material:this.props.material,book_worksheet:this.props.bookWorksheet,worksheet_rights:this.state.worksheetActions,onRefresh:this.props.onRefresh}),this.state.openDialog===_.a&&A.a.createElement(_.b,{resourceTitle:this.props.material.title,resourceId:this.props.material.id,onClose:this._onCloseDialog}))}},{key:"_getPopdown",value:function(){var e=this.state.materialActions;if(2===this.state.loadingState&&e.canView){var t=this.props.material,n=t.type===D.b,a=t.type===D.a,r=this.state.worksheetActions;return A.a.createElement("ul",null,this._itemCreateLesson(),this._itemFavorite(e,r),this._itemShare(e,r),this._itemPublishOrEditDetails(e),this._itemMove(e),A.a.createElement(ne,{dividerTop:!0},this._itemOpenApp(t,e,r),this._itemEdit(t,n,a),this._itemCopy(t,e,n,a),this._itemBookWs(e,r),this._itemDetails(t,e,r)),A.a.createElement(ne,{dividerTop:!0},this._itemDelete(t,e)))}}},{key:"_itemBookWs",value:function(e,t){var n=this.props.bookWorksheet;if(n)return A.a.createElement(ne,{dividerTop:!0},this._itemBookWsEdit(e,t,n),this._itemBookWsCopy(n.id,t))}},{key:"_itemBookWsCopy",value:function(e,t){if(t&&t.canCopy)return A.a.createElement("li",{key:"book_ws_copy"},A.a.createElement("a",{onClick:this._onCopyResource("/material/copy/id/".concat(e))},A.a.createElement(Q,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"worksheet.copy"})))}},{key:"_itemBookWsEdit",value:function(e,t,n){var a=this,r=n&&n.creator_id!==this.props.user_id&&n.creator_id!==this.props.material.creator_id;return t.canEdit?r&&e.canEdit?A.a.createElement(te,{key:"book_ws_edit",onClick:function(){return a._openMessageBox("material-context-menu.edit_or_copy",n,t)}}):t.isInOtherBook&&e.canEdit?A.a.createElement(te,{key:"book_ws_edit",onClick:function(){return a._openMessageBox("material-context-menu.in_other_books",n,t)}}):A.a.createElement(te,{key:"book_ws_edit",onClick:$,href:"/material/edit/id/".concat(n.id)}):e.canEdit&&t.canCopy?A.a.createElement(te,{key:"book_ws_edit",onClick:$,href:t.replacewithcopyURL}):void 0}},{key:"_itemCopy",value:function(e,t,n,a){if(t.canCopy){var r=a?"/book/create/copy_id/".concat(e.id):"/material/copy/id/".concat(e.id);return A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onCopyResource(r)},A.a.createElement(Q,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:n?"worksheet.copy":a?"book.copy":"general.copy"})))}}},{key:"_itemCreateLesson",value:function(){if(this.props.showCreateLesson&&this.props.material.supportsLesson)return A.a.createElement("li",{key:"create_lesson",className:"d-n d-b-s"},A.a.createElement("a",{onClick:this._onCreateLesson},A.a.createElement(Z,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.create_lesson"})))}},{key:"_itemDelete",value:function(e,t){if(t.canDelete&&!this.props.bookWorksheet)return A.a.createElement("li",{key:"mat_delete"},A.a.createElement(V.b,{material:e,onRefresh:this.props.onRefresh}))}},{key:"_itemDetails",value:function(e,t,n){var a=n&&n.canViewDetails;if(a||t.canViewDetails)return A.a.createElement("li",null,A.a.createElement("a",{href:"/material/show/id/".concat(a?this.props.bookWorksheet.id:e.id),onClick:$},A.a.createElement(J,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.details"})))}},{key:"_itemEdit",value:function(e,t,n){if(this.state.materialActions.canEdit)return A.a.createElement("li",null,A.a.createElement("a",{href:"/material/edit/id/".concat(e.id),onClick:$},A.a.createElement(F,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:t?"worksheet.edit":n?"book.edit":"general.edit"})))}},{key:"_itemFavorite",value:function(e,t){if(t&&t.canMakeFavorite||e.canMakeFavorite)return A.a.createElement(P,{material:this.props.bookWorksheet?this.props.bookWorksheet:this.props.material,materialRights:t||e,onChange:this._onMakeFavorite.bind(this)})}},{key:"_itemMove",value:function(e){if(e.canMove)return A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onOpenDialog(j.a)},A.a.createElement(q,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.move_to"})))}},{key:"_itemOpenApp",value:function(e,t,n){var a=t.canOpenInWebApp?t:n;if(a&&a.canOpenInWebApp){var r=t.canOpenInWebApp?e:this.props.bookWorksheet;return A.a.createElement("li",null,A.a.createElement("a",{href:"/".concat("suite"===a.webApp?"calculator":a.webApp,"/").concat(r.id),target:"_blank",rel:"noreferrer"},A.a.createElement(I,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.openinwebapp"})))}}},{key:"_itemPublishOrEditDetails",value:function(e){return e.canPublish?A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onOpenDialog(j.b)},A.a.createElement(H,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.publish"}))):e.canEditMetaData?A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onOpenDialog(j.b)},A.a.createElement(Y,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.edit_details"}))):void 0}},{key:"_itemShare",value:function(e,t){if(t?t.canShare:e.canShare)return A.a.createElement("li",null,A.a.createElement("a",{onClick:this._onOpenDialog(j.c)},A.a.createElement(G,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"materialcard.share"})))}},{key:"_onCloseDialog",value:function(){this._mounted&&this.setState({openDialog:void 0})}},{key:"_onCopyResource",value:function(e){var t=this;return function(){t.props.user_id>-1?ee(e):Object(S.g)(t.context.store).then(t._onCopyResource(e))}}},{key:"_onCreateLesson",value:function(){this._mounted&&this.setState({openDialog:_.a})}},{key:"_onMakeFavorite",value:function(){n._dropActions(this.props),this.setState(n._getEmptyStateData()),this.props.onRefresh&&this.props.onRefresh()}},{key:"_onMoreClick",value:function(){var e=this;this.state.loadingState||this.setState({loadingState:1}),Promise.all([this.props.material.actions,this.props.bookWorksheet&&this.props.bookWorksheet.getBookWorksheetActions(this.props.material.id)]).then((function(t){var n=r()(t,2),a=n[0],o=n[1];e.setState({materialActions:a,worksheetActions:o,loadingState:2})})).catch((function(t){console.error("more action failed",t),Object(O.c)(e.context.store,{id:"materialcard.no_rights"}),e.setState({loadingState:3})}))}},{key:"_onOpenDialog",value:function(e){var t=this;return function(){return t.setState({openDialog:e})}}},{key:"_openMessageBox",value:function(e,t,n){Object(U.b)(this.context.store,{messageKey:e,messageValues:{$1:t.creator.displayname},option1Key:"general.copy",onOption1:function(){return ee(n.replacewithcopyURL)},option2Key:"general.edit",onOption2:function(){return ee("/material/edit/id/".concat(t.id))}})}}],[{key:"_dropActions",value:function(e){e.material.dropActions(),e.bookWorksheet&&e.bookWorksheet.dropActions()}},{key:"_getEmptyStateData",value:function(){return{materialActions:void 0,worksheetActions:void 0,loadingState:0}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.user_id!==e.user_id||t.bookWorksheet!==e.bookWorksheet||t.bookWorksheet&&t.bookWorksheet.id!==e.bookWorksheet.id?(n._dropActions(e),L(L({},n._getEmptyStateData()),{},{user_id:e.user_id,bookWorksheet:e.bookWorksheet})):{user_id:e.user_id,bookWorksheet:e.bookWorksheet}}}]),n}(A.a.Component);k()(X,"contextType",R.b),k()(X,"propTypes",{material:b.a.instanceOf(C.h).isRequired,bookWorksheet:b.a.instanceOf(C.h),user_id:b.a.number.isRequired,moreClass:b.a.string,iconClass:b.a.string,onRefresh:b.a.func,spinnerClassName:b.a.string,showCreateLesson:b.a.bool});t.b=Object(R.c)((function(e){return{user_id:e.userState.user.id}}))(X);function $(){Object(N.d)(window.location)}function ee(e){$(),window.location=e}function te(e){return A.a.createElement("li",null,A.a.createElement("a",e,A.a.createElement(F,{className:"icon left no-stretch"}),A.a.createElement(w.b,{id:"worksheet.edit"})))}function ne(e){var t=!1;return t=Array.isArray(e.children)?e.children.filter((function(e){return e})).length>0:!!e.children,A.a.createElement(A.a.Fragment,null,e.dividerTop&&t&&A.a.createElement("li",{className:"divider"}),e.children,e.dividerBottom&&t&&A.a.createElement("li",{className:"divider"}))}ne.propTypes={dividerTop:b.a.bool,dividerBottom:b.a.bool}}}]);