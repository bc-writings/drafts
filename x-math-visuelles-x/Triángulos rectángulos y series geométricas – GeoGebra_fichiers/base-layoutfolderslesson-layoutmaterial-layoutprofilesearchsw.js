(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{207:function(e,t,n){"use strict";n.d(t,"j",(function(){return j})),n.d(t,"k",(function(){return E})),n.d(t,"m",(function(){return R})),n.d(t,"l",(function(){return x})),n.d(t,"c",(function(){return P})),n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return D})),n.d(t,"e",(function(){return I})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return T})),n.d(t,"h",(function(){return M})),n.d(t,"i",(function(){return q})),n.d(t,"o",(function(){return F})),n.d(t,"g",(function(){return A}));var r=n(2),i=n.n(r),o=n(6),a=n.n(o),c=n(10),s=n.n(c),u=n(7),l=n.n(u),d=n(3),f=n.n(d),p=n(5),h=n.n(p),m=n(210),v=n(208),b=n(8),y=n(33),g=n(67),w=n(219);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l()(e);if(t){var i=l()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s()(this,n)}}var j="@l",E="P",R="S",x="O",P="shared",C="lesson-student",D="lesson-co-teacher",I="initial",S="active",T="paused",M=function(){function e(t){f()(this,e),this.id=t.id,this.title=t.title,this.description=t.description,this.language=t.language,t.oldAPI?(this.id=t.sharing_key,this.date_created=B(t.created),this.date_modified=B(t.modified),this.date_published=B(t.published),this.thumbnail=t.thumbnail,this._oriThumbnail=t.thumbnail,this.visibility=t.visibility,this.type="ggb"===t.type?"ws":t.type,this.favorite=t.favorite,this.creator=v.b.fromPlainObject({id:t.author_id,username:t.author,displayname:t.author,avatar:t.author_avatar,profile:t.author_url}),this.worksheet_id=t.worksheet_id):(this.creator_id=t.creator_id||t.creator&&t.creator.id||-1,this.date_created=B(t.date_created),this.date_modified=B(t.date_modified),this.date_published=B(t.date_published),this._oriThumbnail=t._oriThumbnail||t.thumbnail||t.thumbUrl,this.calcThumbnailURL(),this.visibility=t.visibility,this.type=t.type,this.qualityVerified=t.qualityVerified,this.supportsLesson=t.supportsLesson||!1,t.chapters&&(this.chapters=L.createChaptersFromPlainObjects(t.store,t.chapters)),this.favorite=t.favorite||!1,t.actions?this._actions=t.actions:this._actions=t._actions,t.elements&&(this.elements=t.elements),t.contributors&&(this.contributors=t.contributors),t.creator&&(this.creator=v.b.fromPlainObject(t.creator)),t.interlinking&&(this.interlinking=t.interlinking),t.topics&&(this.topics=t.topics),t.categories&&(this.categories=t.categories),void 0!==t.publishable&&(this.publishable=t.publishable),t.displayReason&&(this.displayReason=t.displayReason),this.worksheet_id=t.worksheet_id),this.store=t.store}return h()(e,[{key:"actions",get:function(){var e=this;return new Promise((function(t,n){e._actions?t(e._actions):Object(m.f)(e.store,e.id).then((function(n){e._actions=n,t(e._actions)})).catch(n)}))}}]),h()(e,[{key:"calcThumbnailURL",value:function(){return this.thumbnail=this.getThumbnailURL(!b.b&&window.devicePixelRatio&&window.devicePixelRatio>=1.5?j:"")}},{key:"dropActions",value:function(){this._actions=void 0}},{key:"flatten",value:function(e){var t=this.id;e=e||"/m/".concat(t);var n=[{id:t,title:this.title,to:e}];return this.chapters&&this.chapters.forEach((function(t){t.pages&&t.pages.forEach((function(t){n.push({id:t.id,title:t.title,to:"".concat(e,"#material/").concat(t.id)})}))})),n}},{key:"getBookChapter",value:function(e){if(this.type===g.a){var t=e>0?this.chapters.findIndex((function(t){return t.id===Number(e)})):-1,n=this.chapters[t];return n&&(n.index=t),n}}},{key:"getBookPage",value:function(e){if(this.type===g.a)for(var t=this.chapters,n=function(e,n){return t[e].pages.findIndex((function(e){return e.id===n}))},r=0;r<t.length;r++){var i=n(r,e);if(i>=0)return t[r].index=r,t[r].pages[i].index=i,{chapter:t[r],page:t[r].pages[i]}}}},{key:"getBookWorksheetActions",value:function(e){var t=this;return new Promise((function(n,r){t._actions?n(t._actions):Object(m.c)(t.store,e,t.id).then((function(e){t._actions=e,n(t._actions)})).catch(r)}))}},{key:"getThumbnailURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this._oriThumbnail?this._oriThumbnail.replace("$1",e):this._oriThumbnail}},{key:"isAutocheckWorksheet",value:function(){if("ws"===this.type&&this.elements)for(var e=0;e<this.elements.length;e++)if(this.elements[e].settings&&this.elements[e].settings.exercise&&this.elements[e].settings.exercise.hasAutoCheckExercise)return!0;return!1}},{key:"moveTo",value:function(e,t,n,r){var i=this;return Object(m.l)(e,this.id,r.id).then((function(n){var r=n.destination.title||t,o=n.source.title||t;Object(y.c)(e,{id:"move-dialog.success",values:{$1:i.title,$2:o,$3:r}})})).catch((function(t){throw Object(y.c)(e,{id:"move-dialog.error"}),t}))}}]),e}(),N=function e(t){f()(this,e),this.id=t.id,this.title=t.title,this.description=t.description,this.pages=L.createPagesFromPlainObjects(t.store,t.pages)},q=function e(t){f()(this,e),this.id=t.id,this.title=t.title,this.thumbUrl=t.thumbUrl,t.elements&&(this.elements=t.elements)};function F(e,t,n,r){var i=1,o=e.id;t?o=t.id:n&&n.pages&&n.pages.length&&(o=n.pages[0].id,i=0);var a=r.findIndex((function(e){return e.id===o}));return a>=0?{prevIndex:a-1,nextIndex:a+i}:{prevIndex:-1,nextIndex:-1}}var A=function(e){a()(n,e);var t=_(n);function n(e){var r;return f()(this,n),(r=t.call(this,e)).showInTeacherView=e.showInTeacherView,r.userStudentId=e.userStudentId,r.state=e.state,r}return h()(n,[{key:"actions",get:function(){var e=this;return new Promise((function(t,n){e._actions?t(e._actions):Object(w.e)(e.store,e.id).then((function(n){e._actions=n,t(e._actions)})).catch(n)}))}}]),h()(n,[{key:"getFormattedId",value:function(){var e=this.id.toUpperCase();return e.substr(0,4)+" "+e.substr(4)}},{key:"getSharingUrl",value:function(e){return[e.protocol,"",e.host,"classroom",this.id].join("/")}}]),n}(M),L={createInstanceForType:function(e){return"lesson"===e.type?new A(e):new M(e)},fromSharingKey:function(e,t){return Object(m.e)(e,t,{})},fromJsonString:function(e,t){return L.fromPlainObject(e,JSON.parse(t))},fromPlainObject:function(e,t){return L.createInstanceForType(O(O({},t),{},{store:e}))},fromOldAPIObject:function(e,t){return L.createInstanceForType(O(O({},t),{},{store:e,oldAPI:!0}))},createArrayFromPlainObjects:function(e,t){return t.map((function(t){return L.fromPlainObject(e,t)}))},createArrayFromOldAPIObjects:function(e,t){return t.map((function(t){return L.fromOldAPIObject(e,t)}))},createChaptersFromPlainObjects:function(e,t){return t.map((function(t){return new N(O(O({},t),{},{store:e}))}))},createPagesFromPlainObjects:function(e,t){return t.map((function(e){return new q(e)}))}};function B(e){return"number"==typeof e?new Date(1e3*e):"string"==typeof e?new Date(e):e||void 0}t.n=L},208:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(2),s=n.n(c),u=function(){function e(t){i()(this,e),s()(this,"id",void 0),s()(this,"username",void 0),s()(this,"displayname",void 0),s()(this,"avatar",void 0),s()(this,"banner",void 0),this.id=t.id||t.creator_id,this.username=t.username,this.displayname=t.displayname,this.avatar=t.avatar||t.avatarUrl,this.avatarXL=t.avatarXL,this.banned=t.banned,this.banner=t.banner,this.qualityVerified=t.qualityVerified,this.profilemessage=t.profilemessage||"",this.permissionGroup=t.permissionGroup,t.profile&&(this.profile=t.profile),t.following_me_since&&(this.following_me_since=t.following_me_since),t.i_follow_since&&(this.i_follow_since=t.i_follow_since),t.actions&&(this.actions=t.actions)}return a()(e,[{key:"isLoggedIn",value:function(t){return e.isLoggedIn(t,this.id)}}],[{key:"isLoggedIn",value:function(e,t){return t===e.getState().userState.user.id}}]),e}(),l={fromPlainObject:function(e){return new u(e)},createArrayFromPlainObjects:function(e){return e.map((function(e){return l.fromPlainObject(e)}))}};t.b=l},209:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(6),s=n.n(c),u=n(10),l=n.n(u),d=n(7),f=n.n(d),p=n(0),h=n.n(p);function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var v=function(e){s()(n,e);var t=m(n);function n(){return i()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return h.a.createElement("div",{className:"d-b w-100 mw-1080px mx-a"},this.props.children)}}]),n}(h.a.Component)},210:function(e,t,n){"use strict";n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return m})),n.d(t,"d",(function(){return v})),n.d(t,"n",(function(){return b})),n.d(t,"k",(function(){return y})),n.d(t,"l",(function(){return g})),n.d(t,"f",(function(){return w})),n.d(t,"c",(function(){return k})),n.d(t,"g",(function(){return O})),n.d(t,"e",(function(){return _})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return E})),n.d(t,"m",(function(){return R})),n.d(t,"o",(function(){return x})),n.d(t,"j",(function(){return C}));var r=n(2),i=n.n(r),o=n(30),a=n(232),c=n(207),s=n(27),u=n(49),l=n(78),d=n(8);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"featured";return Object(a.b)(e,"entity",{entity_type:"materials",list_type:t,limit:4,embed:"creator",language:e.getState().userState.user.lang_ui,skipErrors:[a.a]}).catch((function(e){if(404===e.code)return[];throw e})).then((function(t){return y(e,t)}))}function m(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return o.d(e,"/users/".concat(t,"/materials"),p({embed:"creator"},n)).then((function(t){return c.n.createArrayFromPlainObjects(e,t)}))}function v(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return m(e,t,p({type:"created_by"},n))}function b(e,t,n){return!0===n?(Object(l.i)(t),o.f(e,"/materials/".concat(t,"/favorite"),{skipErrors:!0})):(Object(l.m)(t),o.c(e,"/materials/".concat(t,"/favorite"),{skipErrors:!0}))}function y(e,t){return t?t.map((function(t){return p(p({},t),{},{elements:c.n.createArrayFromPlainObjects(e,t.elements)})})):t}function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return o.f(e,"/materials/".concat(t,"/folder").concat(n?"/".concat(n):""),{skipErrors:!0})}function w(e,t){return o.d(e,"/materials/".concat(t,"/actions"))}function k(e,t,n){return o.d(e,"/books/".concat(t,"/actions/").concat(n))}function O(e,t){return o.d(e,"/materials/".concat(t,"/folder"))}function _(e,t,n){var r=n.embedContributors,i=void 0!==r&&r,a=n.scope,s=void 0===a?"basic":a,u=n.embedInterlinking,l=void 0!==u&&u,d=n.embedTags,f=void 0!==d&&d,p=n.embedLanguage,h=void 0===p||p,m=n.embedPublishable,v=void 0!==m&&m;return o.d(e,"/materials/".concat(t),{embed:"creator".concat(i?",contributors":"").concat(l?",interlinking":"").concat(f?",tags":"").concat(v?",publishable":""),scope:s,language:h?e?e.getState().userState.user.lang_ui:"en":void 0}).then((function(t){return c.n.fromPlainObject(e,t)})).catch((function(t){return P(e,t)}))}function j(e,t,n){return o.e(e,"/materials/".concat(t),{visibility:n,skipErrors:!0}).then((function(t){return c.n.fromPlainObject(e,t)}))}function E(e,t){return o.e(e,"/materials/".concat(t),{deleted:!0,skipErrors:!0})}function R(e,t,n){var r=n.description,i=void 0===r?"":r,a=n.topics,s=void 0===a?[]:a,u=n.categories,l=void 0===u?[]:u,d=n.language;return o.e(e,"/materials/".concat(t),{visibility:c.l,description:i,language:d,topics:s,categories:l,skipErrors:!0}).then((function(t){return c.n.fromPlainObject(e,t)}))}function x(e,t){d.b||o.f(e,"/track/materials/".concat(t),{type:"view",skipErrors:!0}).catch((function(e){return console.log("Tracking Error",e)}))}var P=function(e,t){return 400===t.code&&(t=s.b.withCode(404),Object(u.c)(e,t)),Promise.reject(t)};function C(e,t,n,r){var i=n.offset,a=n.order,c=n.limit,s=n.type,u=n.ignoreUser,d=n.onlyQCMaterials,f=function(e){var t={};return"-"===e[0]?(t.type="desc",t.by=e.substring(1)):(t.type="asc",t.by=e),t},h=function(e,t){return t||""===t?{"-name":"".concat(e),"#text":"".concat(t)}:void 0},m=[h("search",t||""),h("type","none"!==s&&s),h("qc",d)].filter((function(e){return e&&e})),v=!(!e||u)&&e.getState().userState.accessToken,b={request:{"-api":"1.1.0",client:{"-type":"marvl","-language":e?e.getState().userState.user.lang_ui:"en"},task:{"-type":"fetch",fields:{field:[{"-name":"id"},{"-name":"title"},{"-name":"description"},{"-name":"created"},{"-name":"modified"},{"-name":"thumbnail"},{"-name":"visibility"},{"-name":"type"},{"-name":"favorite"},{"-name":"url"},{"-name":"author"},{"-name":"sharing_key"},{"-name":"author_url"},{"-name":"author_id"},{"-name":"author_avatar"}]},filters:{field:m},order:{"-by":"".concat(f(a).by),"-type":"".concat(f(a).type)},limit:{"-num":"".concat(c),"-page":"".concat(i/c+1)}}}};v&&(b.request.login={token:v});var y=p({oldAPI:!0,retryFunction:r},b);return Object(l.k)(t),o.f(e,"/api/json.php",y)}},212:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return p}));var r=n(31),i=n.n(r),o=n(0),a=n.n(o),c=n(1),s=n.n(c),u=n(364);function l(e){return a.a.createElement(u.a,i()({},e,{classNames:"animate-fade-".concat(e.timeout)}),e.children)}function d(e){return a.a.createElement(l,i()({},e,{timeout:150}),e.children)}function f(e){return a.a.createElement(l,i()({},e,{timeout:300}),e.children)}function p(e){return a.a.createElement(l,i()({},e,{timeout:500}),e.children)}l.propTypes={timeout:s.a.number}},214:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n(31),i=n.n(r),o=n(20),a=n.n(o),c=n(0),s=n.n(c),u=n(1),l=n.n(u),d=n(53),f=n(366),p=n(212),h=n(251),m=n(54),v=n.n(m);function b(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null),o=Object(c.useRef)(null),u=null!==/right-edge/.exec(e.className),l=Object(c.useState)(!1),m=a()(l,2),b=m[0],y=m[1],g=Object(c.useState)(!1),w=a()(g,2),k=w[0],O=w[1],_=Object(c.useCallback)((function(t){if(!e.loading&&b){var i=!0===t||r.current.contains(t.target);!i&&e.stayOpen&&n.current.contains(t.target)&&t.target!==o.current||(y(!1),i&&t.preventDefault&&t.preventDefault())}}),[b,e.loading,e.stayOpen]);Object(c.useEffect)((function(){var e=_;if(b)return window.addEventListener("popstate",e),document.addEventListener("click",e),function(){document.removeEventListener("click",e),window.removeEventListener("popstate",e)};document.removeEventListener("click",e),window.removeEventListener("popstate",e)}),[b,_]),Object(c.useEffect)((function(){if(null!==t.current&&b){var n=t.current.getBoundingClientRect();e.noVisibilityCheck||O((function(e){return(e?n.bottom+n.height+24:n.bottom)>document.documentElement.clientHeight}))}}),[b,e.loading,e.noVisibilityCheck]);var j=e.children[0],E=e.children[1],R=u?void 0:e.gutter,x=u?e.gutter:void 0;return s.a.createElement("div",{className:v()("popdown-button-container",e.className,{up:k}),ref:n},j&&s.a.createElement("div",i()({ref:r},j.props,{onClick:function(e){return function(e,t){b?_(e):("function"==typeof t&&t(e),y(!0))}(e,j.props.onClick)},className:v()(j.props.className||"",{active:b},"popdown-button")})),void 0!==e.loading&&s.a.createElement(f.a,null,e.loading&&s.a.createElement(p.a,null,s.a.createElement(d.a,{key:"spinner",className:e.spinnerClassName||"grey-circle small grey lighten-5"}))),s.a.createElement(f.a,null,b&&E&&s.a.createElement(p.a,null,s.a.createElement("div",{title:"",className:v()("popdown-content z-depth-2 black-text",{"no-mobile":e.noMobileView},E.props.className||""),style:{maxWidth:e.contentMaxWidth||"300px",width:e.contentWidth,left:e.rtl?x:R,right:e.rtl?R:x},onClick:_,ref:o},s.a.createElement("div",{className:"bottom-sheet-container",ref:t},E))),E&&!e.noMobileView&&s.a.createElement(h.a,{maxWidth:601,isActive:b})))}b.propTypes={children:function(e,t,n){if(!e||!Array.isArray(e[t])||2!==e[t].length)throw new Error("Invalid prop '".concat(t,"' supplied for '").concat(n,"'. Needs two children!"))},className:l.a.string,contentWidth:l.a.string,contentMaxWidth:l.a.string,gutter:l.a.string,stayOpen:l.a.bool,noVisibilityCheck:l.a.bool,rtl:l.a.bool,loading:l.a.bool,noMobileView:l.a.bool,spinnerClassName:l.a.string}},219:function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"e",(function(){return g}));var r=n(13),i=n.n(r),o=n(24),a=n.n(o),c=n(30);function s(e,t){return u.apply(this,arguments)}function u(){return(u=a()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.d(t,"/lessons/".concat(n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return d.apply(this,arguments)}function d(){return(d=a()(i.a.mark((function e(t,n){var r,o,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,o=n.title,a=n.description,e.abrupt("return",c.f(t,"/lessons/".concat(r),{title:o.trim(),description:a}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e,t,n){return p.apply(this,arguments)}function p(){return(p=a()(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.e(t,"/lessons/".concat(n),{title:r.trim()}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){return m.apply(this,arguments)}function m(){return(m=a()(i.a.mark((function e(t,n,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.e(t,"/lessons/".concat(n),{state:r}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return b.apply(this,arguments)}function b(){return(b=a()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.e(t,"/lessons/".concat(n),{deleted:!0,skipErrors:!0}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e,t,n){return c.c(e,"/lessons/".concat(t,"/students/").concat(n),{skipErrors:!0})}function g(e,t){return w.apply(this,arguments)}function w(){return(w=a()(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",c.d(t,"/lessons/".concat(n,"/actions")));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},222:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return l})),n.d(t,"e",(function(){return d})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return p}));var r=n(2),i=n.n(r),o=n(30);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=null,s="NULL";function u(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return n?o.d(e,"/folders/".concat(n),r):!t||t<=0?Promise.reject({code:401}):o.d(e,"/users/".concat(t,"/folders"),r)}function l(e,t){var n=t.title,r=t.parent,s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:n},r&&r!==c?{parent:r}:{});return o.f(e,"/folders",s)}function d(e,t){return o.c(e,"/folders/".concat(t),{skipErrors:!0})}function f(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.e(e,"/folders/".concat(t),n)}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n===c?s:n;return f(e,t,{parent:r})}},232:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(30),i="err_no_swimlanes";function o(e,t,n){if(!t)return Promise.reject({error:"invalid swimlane type"});var i="/swimlanes/"+t;return Object(r.d)(e,i,n)}},237:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s}));var r=n(8),i=null,o=600;function a(){return!!r.a&&(null===i&&(e=navigator.userAgent||navigator.vendor||window.opera,i=!(!/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)&&!/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br[ev]w|bumb|bw-[nu]|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do[cp]o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly[-_]|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-[mpt]|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c[- _agpst]|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac[ -\/]|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja[tv]a|jbro|jemu|jigs|kddi|keji|kgt[ \/]|klon|kpt |kwc-|kyo[ck]|le(no|xi)|lg( g|\/[klu]|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t[- ov]|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30[02]|n50[025]|n7(0[01]|10)|ne([cm]-|on|tf|wf|wg|wt)|nok[6i]|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan[adt]|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c[-01]|47|mc|nd|ri)|sgh-|shar|sie[-m]|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel[im]|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c[- ]|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4)))),i);var e}function c(){return!!window.MSInputMethodContext&&!!document.documentMode}function s(e){try{window.sessionStorage.setItem("backurl",e)}catch(e){console.log("sessionStorage not supported"+e.message)}return!0}},245:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(6),s=n.n(c),u=n(10),l=n.n(u),d=n(7),f=n.n(d),p=n(2),h=n.n(p),m=n(0),v=n.n(m),b=n(1),y=n.n(b),g=n(214),w=n(54),k=n.n(w);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var _=function(e){return v.a.createElement("svg",e,v.a.createElement("path",{d:"M12 16a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2m0-6a2 2 0 012 2 2 2 0 01-2 2 2 2 0 01-2-2 2 2 0 012-2z"}))};_.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var j=function(e){s()(n,e);var t=O(n);function n(){return i()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return v.a.createElement(g.a,{className:"more-menu-button right-edge",stayOpen:this.props.stayOpen,loading:this.props.loading,spinnerClassName:this.props.spinnerClassName},v.a.createElement("buttontag",{className:k()("dropdown-button icon-container",this.props.moreClass),onClick:this.props.onMoreClick},v.a.createElement(_,{className:k()("icon",this.props.iconClass)})),this.props.children)}}]),n}(v.a.Component);h()(j,"propTypes",{loading:y.a.bool.isRequired,onMoreClick:y.a.func,stayOpen:y.a.bool,moreClass:y.a.string,iconClass:y.a.string,spinnerClassName:y.a.string})},251:function(e,t,n){"use strict";n.d(t,"a",(function(){return k}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(6),s=n.n(c),u=n(10),l=n.n(u),d=n(7),f=n.n(d),p=n(2),h=n.n(p),m=n(0),v=n.n(m),b=n(1),y=n.n(b),g=n(41);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var k=function(e){s()(n,e);var t=w(n);function n(){return i()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){return v.a.createElement(g.a,null,this.props.isActive&&v.a.createElement("style",null,(this.props.maxWidth?"@media screen and (max-width: ".concat(this.props.maxWidth,"px) { "):"")+"body, html {overflow: hidden; position: relative;"+(this.props.maxWidth?" }":"")))}}]),n}(v.a.PureComponent);h()(k,"propTypes",{maxWidth:y.a.oneOfType([y.a.number,y.a.string]),isActive:y.a.bool}),h()(k,"defaultProps",{isActive:!0})},253:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(222),s=n(33),u=function(){function e(t){i()(this,e),this.id=t.id,this.title=t.title,this.parent=t.parent,this.children=t.children||[],this.parents=t.parents||[]}return a()(e,[{key:"equals",value:function(t){return t instanceof e&&t.id===this.id}},{key:"moveTo",value:function(e,t,n,r){var i=this;return Object(c.g)(e,this.id,r.id).then((function(){var o=n.title||t,a=r.title||t;Object(s.c)(e,{id:"move-dialog.success",values:{$1:i.title,$2:o,$3:a}})})).catch((function(t){throw Object(s.c)(e,{id:"move-dialog.folder-error"}),t}))}}]),e}()},311:function(e,t,n){"use strict";n.d(t,"a",(function(){return E}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(19),s=n.n(c),u=n(6),l=n.n(u),d=n(10),f=n.n(d),p=n(7),h=n.n(p),m=n(2),v=n.n(m),b=n(0),y=n.n(b),g=n(1),w=n.n(g),k=n(319),O=n.n(k),_=n(14);function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var E=function(e){l()(n,e);var t=j(n);function n(e){var r;return i()(this,n),(r=t.call(this,e))._onChange=r._onChange.bind(s()(r)),r.inputRef=y.a.createRef(),r}return a()(n,[{key:"componentDidMount",value:function(){if(this.props.autofocus){var e=this.inputRef.current;O()(e),e.setSelectionRange(0,e.value.length)}}},{key:"render",value:function(){return y.a.createElement("div",{className:"d-b"},this.props.error&&y.a.createElement("p",{className:"tc-red"},y.a.createElement(_.b,{id:this.props.error})),y.a.createElement("div",{className:"input-field"},y.a.createElement("input",{type:"text",ref:this.inputRef,id:"error_handling_input",value:this.props.value,className:this.props.error?"invalid":"",onChange:this._onChange,disabled:this.props.disabled}),y.a.createElement("label",{htmlFor:"error_handling_input",className:this.props.value?"active":""},y.a.createElement(_.b,{id:this.props.label}))))}},{key:"_onChange",value:function(e){this.props.onChange(e.target.value)}}]),n}(y.a.Component);v()(E,"propTypes",{label:w.a.string.isRequired,onChange:w.a.func.isRequired,value:w.a.string,error:w.a.string,autofocus:w.a.bool,disabled:w.a.bool}),v()(E,"defaultProps",{disabled:!1})},319:function(e,t,n){var r=n(373);e.exports=function(e,t){if("undefined"==typeof window)return e;if("object"!=typeof e||!e||!e.focus)throw new TypeError("dom-autofocus: el should be a DOM element");return t||(t=""),r(e,(function(){e.focus()}),(function(){}),"dom-autofocus"+t)}},320:function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n(13),i=n.n(r),o=n(24),a=n.n(o),c=n(0),s=n.n(c),u=n(1),l=n.n(u),d=n(339),f=n(207),p=n(16),h=n(210),m=n(33),v="DELETE";function b(e){var t=Object(p.e)();function n(){return(n=a()(i.a.mark((function n(){return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(h.b)(t,e.material.id);case 2:Object(m.c)(t,{id:"delete-material-button.success",values:{$1:e.material.title}}),"function"==typeof e.onRefresh&&e.onRefresh(v,!1,e.material);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return s.a.createElement(d.a,{onPerformDelete:function(){return n.apply(this,arguments)},contentMessage:"material.confirm.delete.message",deleteErrorMessage:"delete-material-button.error"})}b.propTypes={material:l.a.instanceOf(f.h).isRequired,onRefresh:l.a.func}},337:function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return P})),n.d(t,"a",(function(){return C})),n.d(t,"d",(function(){return D}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(6),s=n.n(c),u=n(10),l=n.n(u),d=n(7),f=n.n(d),p=n(2),h=n.n(p),m=n(0),v=n.n(m),b=n(1),y=n.n(b),g=n(12);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var k=function(e){s()(r,e);var t=w(r);function r(e){return i()(this,r),t.call(this,e,r)}return a()(r,null,[{key:"importer",value:function(){return n.e(62).then(n.bind(null,666)).then((function(e){var t=e.default;return r.Component=t}))}}]),r}(g.a);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var _=function(e){s()(r,e);var t=O(r);function r(e){return i()(this,r),t.call(this,e,r)}return a()(r,null,[{key:"importer",value:function(){return n.e(62).then(n.bind(null,673)).then((function(e){var t=e.default;return r.Component=t}))}}]),r}(g.a),j=n(207),E=n(424);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f()(e);if(t){var i=f()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l()(this,n)}}var x="SHARE",P="PUBLISH",C="MOVE",D=function(e){s()(n,e);var t=R(n);function n(){return i()(this,n),t.apply(this,arguments)}return a()(n,[{key:"render",value:function(){switch(this.props.openDialog){case x:return v.a.createElement(k,{material:this.props.book_worksheet?this.props.book_worksheet:this.props.material,onClose:this._hideDialog(x)});case P:return v.a.createElement(_,{material:this.props.book_worksheet?this.props.book_worksheet:this.props.material,onClose:this._hideDialog(P),onRefresh:this.props.onRefresh});case C:return v.a.createElement(E.a,{movable:this.props.book_worksheet?this.props.book_worksheet:this.props.material,onClose:this._hideDialog(C),onRefresh:this.props.onRefresh});default:return null}}},{key:"_hideDialog",value:function(e){var t=this;return function(){return t.props.onClose(e)}}}]),n}(v.a.Component);h()(D,"propTypes",{openDialog:y.a.oneOf([x,P,C]).isRequired,material:y.a.instanceOf(j.h).isRequired,book_worksheet:y.a.instanceOf(j.h),worksheet_rights:y.a.object,onClose:y.a.func.isRequired,onRefresh:y.a.func})},339:function(e,t,n){"use strict";n.d(t,"b",(function(){return P}));var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(19),s=n.n(c),u=n(6),l=n.n(u),d=n(10),f=n.n(d),p=n(7),h=n.n(p),m=n(2),v=n.n(m),b=n(0),y=n.n(b),g=n(14),w=n(1),k=n.n(w),O=n(43),_=n(33),j=n(16);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var R=function(e){return y.a.createElement("svg",e,y.a.createElement("path",{d:"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 002 2h8a2 2 0 002-2V7H6v12z"}))};R.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var x=function(e){l()(n,e);var t=E(n);function n(e){var r;return i()(this,n),(r=t.call(this,e))._performDelete=r._performDelete.bind(s()(r)),r._onClick=r._onClick.bind(s()(r)),r}return a()(n,[{key:"render",value:function(){return y.a.createElement("a",{onClick:this._onClick,className:"context-menu-item"},y.a.createElement(R,{className:"icon left no-stretch"}),y.a.createElement(g.b,{id:"general.delete"}))}},{key:"_onClick",value:function(){var e=this.props.intl.formatMessage,t=this.props.contentMessage;Object(O.e)(this.context.store,(function(){return y.a.createElement(g.b,{id:t})}),P(e,this._performDelete))}},{key:"_performDelete",value:function(){var e=this;return this.props.onPerformDelete().then((function(){Object(O.a)(e.context.store)})).catch((function(){e.props.deleteErrorMessage&&Object(_.c)(e.context.store,{id:e.props.deleteErrorMessage})}))}}]),n}(y.a.Component);function P(e,t){return{actionButton:{title:e({id:"general.delete"}),onClick:t},cancelButton:{title:e({id:"general.cancel"})}}}v()(x,"propTypes",{onPerformDelete:k.a.func.isRequired,contentMessage:k.a.string.isRequired,deleteErrorMessage:k.a.string,intl:g.d}),v()(x,"contextType",j.b),t.a=Object(g.e)(x)},340:function(e,t,n){"use strict";function r(e){var t=function(t,n,r){if(null===n[r])return null;for(var i=t?e.isRequired:e,o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return i.apply(void 0,[n,r].concat(a))},n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}n.d(t,"a",(function(){return r}))},370:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(31),i=n.n(r),o=n(34),a=n.n(o),c=n(0),s=n.n(c),u=n(1),l=n.n(u),d=n(54),f=n.n(d);function p(e){var t=e.className,n=a()(e,["className"]);return s.a.createElement("a",i()({},n,{className:f()("px-2 py-1 tc-black-medium","tt-u fw-600 h5 ls-1_25px",t)}))}p.propTypes={className:l.a.any}},372:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),i=n.n(r),o=n(1),a=n.n(o),c=n(14),s=n(311);function u(e){return i.a.createElement("div",{className:"w-412px mw-100"},i.a.createElement("div",{className:"h3 fw-600 mb-3"},i.a.createElement(c.b,{id:e.dialogTitle})),i.a.createElement(s.a,{label:e.inputLabel,value:e.value,onChange:e.onChange,error:e.error,autofocus:e.autofocus,disabled:e.inputsDisabled}))}u.propTypes={dialogTitle:a.a.string.isRequired,inputLabel:a.a.string.isRequired,onChange:a.a.func.isRequired,value:a.a.string,error:a.a.string,autofocus:a.a.bool,disabled:a.a.bool,inputsDisabled:a.a.bool}},373:function(e,t,n){var r=n(374),i=n(376),o=Object.create(null),a="onloadid"+Math.random().toString(36).slice(2),c="data-"+a,s=0;i&&i.MutationObserver&&new MutationObserver((function(e){if(!(Object.keys(o).length<1))for(var t=0;t<e.length;t++)e[t].attributeName!==c?(f(e[t].removedNodes,(function(e,t){r.documentElement.contains(t)||l(e,t)})),f(e[t].addedNodes,(function(e,t){r.documentElement.contains(t)&&u(e,t)}))):d(e[t],u,l)})).observe(r.documentElement,{childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0,attributeFilter:[c]});function u(e,t){o[e][0]&&0===o[e][2]&&(o[e][0](t),o[e][2]=1)}function l(e,t){o[e][1]&&1===o[e][2]&&(o[e][1](t),o[e][2]=0)}function d(e,t,n){var r=e.target.getAttribute(c);!function(e,t){return!(!e||!t)&&o[e][3]===o[t][3]}(e.oldValue,r)?(o[e.oldValue]&&n(e.oldValue,e.target),o[r]&&t(r,e.target)):o[r]=o[e.oldValue]}function f(e,t){for(var n=Object.keys(o),r=0;r<e.length;r++){if(e[r]&&e[r].getAttribute&&e[r].getAttribute(c)){var i=e[r].getAttribute(c);n.forEach((function(n){i===n&&t(n,e[r])}))}e[r]&&e[r].childNodes.length>0&&f(e[r].childNodes,t)}}e.exports=function e(t,n,r,i){return n=n||function(){},r=r||function(){},t.setAttribute(c,"o"+s),o["o"+s]=[n,r,0,i||e.caller],s+=1,t},e.exports.KEY_ATTR=c,e.exports.KEY_ID=a},374:function(e,t,n){(function(t){var r,i=void 0!==t?t:"undefined"!=typeof window?window:{},o=n(375);"undefined"!=typeof document?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"])||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=o),e.exports=r}).call(this,n(40))},375:function(e,t){},376:function(e,t,n){(function(t){var n;n="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=n}).call(this,n(40))},421:function(e,t,n){"use strict";var r=n(20),i=n.n(r),o=n(3),a=n.n(o),c=n(5),s=n.n(c),u=n(19),l=n.n(u),d=n(6),f=n.n(d),p=n(10),h=n.n(p),m=n(7),v=n.n(m),b=n(2),y=n.n(b),g=n(0),w=n.n(g),k=n(1),O=n.n(k),_=n(222),j=n(210),E=n(337),R=n(14);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var P=function(e){return w.a.createElement("svg",e,w.a.createElement("path",{d:"M7 10l5 5 5-5H7z"}))};P.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var C=function(e){return w.a.createElement("svg",e,w.a.createElement("path",{d:"M10 17l5-5-5-5v10z"}))};C.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};var D=function(e){f()(n,e);var t=x(n);function n(e){var r;return a()(this,n),(r=t.call(this,e))._open=r._open.bind(l()(r)),r._onSelect=r._onSelect.bind(l()(r)),r._isEnabled=r._isEnabled.bind(l()(r)),r._isExpansionEnabled=r._isExpansionEnabled.bind(l()(r)),r.state={opened:e.opened||e.openedIds.has(e.folder.id)||!1},r}return s()(n,[{key:"render",value:function(){var e=this,t=this.props.selectedId===this.props.folder.id;return w.a.createElement("div",{className:"folder-tree"},w.a.createElement("div",{className:"folder-tree-header".concat(t?" selected":"")},w.a.createElement("div",{onClick:this._open},this.state.opened?w.a.createElement(P,null):w.a.createElement(C,null)),w.a.createElement("div",{onClick:this._onSelect,className:"folder-title".concat(this._isEnabled()?"":" secondary-text")},this.props.folder.id!==_.a?this.props.folder.title:w.a.createElement(R.b,{id:"profile.materials"}))),this.state.opened&&this.props.folder.children&&this.props.folder.children.length>0?w.a.createElement("ul",{className:"folder-tree-children"},this.props.folder.children.map((function(t){return w.a.createElement("li",{key:t.id},w.a.createElement(n,{folder:t,selectedId:e.props.selectedId,onSelect:e.props.onSelect,openedIds:e.props.openedIds,disableIds:e.props.disableIds,disableExpansionIds:e.props.disableExpansionIds}))}))):null)}},{key:"_isEnabled",value:function(){var e=this;return void 0===this.props.disableIds.find((function(t){return t===e.props.folder.id}))}},{key:"_isExpansionEnabled",value:function(){var e=this;return void 0===this.props.disableExpansionIds.find((function(t){return t===e.props.folder.id}))}},{key:"_onSelect",value:function(e){e.preventDefault(),this.props.onSelect&&this.props.onSelect(this.props.folder)}},{key:"_open",value:function(e){e.preventDefault(),this._isExpansionEnabled()&&this.setState({opened:!this.state.opened})}}]),n}(w.a.Component);y()(D,"propTypes",{folder:O.a.object.isRequired,openedIds:O.a.instanceOf(Set).isRequired,selectedId:O.a.string,onSelect:O.a.func,opened:O.a.bool,disableIds:O.a.array.isRequired,disableExpansionIds:O.a.array.isRequired});var I=n(43),S=n(16);function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var M=function(e){f()(n,e);var t=T(n);function n(e){var r;return a()(this,n),(r=t.call(this,e))._setSelectedFolder=r._setSelectedFolder.bind(l()(r)),r._isDisabled=r._isDisabled.bind(l()(r)),r._onMoveClick=r._onMoveClick.bind(l()(r)),r.moveButtonTitle=e.intl.formatMessage({id:"move-dialog.move"}),r.cancelButtonTitle=e.intl.formatMessage({id:"move-dialog.cancel"}),r}return s()(n,[{key:"componentDidMount",value:function(){this._setSelectedFolder({id:this.props.sourceId})}},{key:"render",value:function(){return w.a.createElement("div",{className:"move-dialog-form h-50vh h-75vh-m"},w.a.createElement("div",{className:"h3 fw-600 m-3 m-2-m"},w.a.createElement(R.b,{id:"move-dialog.title"})),w.a.createElement("div",{className:"xi-grow-1 o-a bt bb p0 bc-gray-medium"},w.a.createElement("div",{className:"miw-100 p-3 p-2-m d-ib"},w.a.createElement(D,{folder:this.props.tree,onSelect:this._setSelectedFolder,selectedId:this.props.selectedFolder?this.props.selectedFolder.id:this.props.sourceId,opened:!0,openedIds:this.props.openedIds,disableIds:this.props.disableIds,disableExpansionIds:this.props.disableExpansionIds}))))}},{key:"_isDisabled",value:function(e){return void 0!==this.props.disableIds.find((function(t){return t===e}))}},{key:"_onMoveClick",value:function(){return this.props.onMove(this.props.selectedFolder)}},{key:"_setSelectedFolder",value:function(e){var t=this._isDisabled(e.id);Object(I.f)(this.context.store,this.props.modalId,{actionButton:{title:this.moveButtonTitle,onClick:this._onMoveClick,disabled:t},cancelButton:{title:this.cancelButtonTitle},selectedFolder:e})}}]),n}(w.a.Component);y()(M,"propTypes",{tree:O.a.object.isRequired,openedIds:O.a.instanceOf(Set).isRequired,onMove:O.a.func.isRequired,disableIds:O.a.array.isRequired,disableExpansionIds:O.a.array.isRequired,modalId:O.a.string.isRequired,selectedFolder:O.a.object,sourceId:O.a.string,intl:R.d}),y()(M,"contextType",S.b);var N=Object(R.e)(Object(S.c)((function(e,t){var n=t.modalId;return{selectedFolder:e.modalState.modals[n].state.selectedFolder}}))(M)),q=n(53),F=n(425),A=n(253),L=n(207),B=n(340),V=void 0;function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var H=function(e){f()(n,e);var t=W(n);function n(e,r){var i;return a()(this,n),(i=t.call(this,e,r))._onMove=i._onMove.bind(l()(i)),i._onFolderCreated=i._onFolderCreated.bind(l()(i)),i._isFolderMove=i._isFolderMove.bind(l()(i)),i._isMounted=!1,i.state={tree:null,source:i.props.source,openedIds:new Set,hasFolders:null},i.modalId=Object(I.b)(r.store.getState().modalState.modals),i}return s()(n,[{key:"componentDidMount",value:function(){this._isMounted=!0,this._fetchData()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e;return e=null!==this.state.hasFolders?this.state.hasFolders?w.a.createElement(N,{tree:this.state.tree,sourceId:this.state.source.id,openedIds:this.state.openedIds,onMove:this._onMove,disableIds:this._isFolderMove()?[this.props.movable.id,this.state.source.id]:[this.state.source.id],disableExpansionIds:this._isFolderMove()?[this.props.movable.id]:[],modalId:this.modalId}):w.a.createElement(F.a,{folderId:null,onFolderCreated:this._onFolderCreated,modalId:this.modalId}):w.a.createElement("div",{className:"move-dialog-form h-50vh h-75vh-m"},w.a.createElement(q.a,null)),w.a.createElement("div",{className:"w-412px mw-100 oy-a"},e)}},{key:"_calculateOpenedIds",value:function(e){for(var t=[e.tree],n={},r=e.source.id,i=function(){var e=t.shift();if(e.id===r)return"break";e.children&&e.children.forEach((function(r){t.push(r),n[r.id]=e.id}))};t.length>0;){if("break"===i())break}for(var o=new Set,a=r;a;)a=n[a],o.add(a);this._isMounted&&this.setState(z(z({},e),{},{openedIds:o}))}},{key:"_fetchData",value:function(){var e=this,t=[Object(_.f)(this.context.store,this.context.store.getState().userState.user.id,null,{depth:-1})],n=this.props.movable instanceof L.h&&void 0===this.props.source;n&&t.push(Object(j.g)(this.context.store,this.props.movable.id)),Promise.all(t).then((function(t){var r=i()(t,2),o=r[0],a=r[1];if(o.children&&o.children.length>0){var c={tree:o,hasFolders:!0,source:n?a:e.props.source};e._calculateOpenedIds(c)}else e.setState({hasFolders:!1})}))}},{key:"_isFolderMove",value:function(){return this.props.movable instanceof A.a}},{key:"_onFolderCreated",value:function(e){return this._onMove(e)}},{key:"_onMove",value:function(e){var t=this,n=this.props.intl.formatMessage({id:"profile.materials"});return this.props.movable.moveTo(this.context.store,n,this.state.source,e).then((function(){t.props.onRefresh&&t.props.onRefresh(E.a,!t.state.hasFolders,t.props.movable),Object(I.a)(t.context.store)})).catch((function(e){return console.error(e)}))}}]),n}(w.a.Component);y()(H,"contextType",S.b);var $=Object(R.e)(H);H.propTypes=$.propTypes={movable:O.a.shape({moveTo:O.a.func.isRequired,title:O.a.string}).isRequired,source:function(e,t){for(var n=O.a.shape({id:Object(B.a)(O.a.string).isRequired,title:Object(B.a)(O.a.string).isRequired}),r=e.movable instanceof A.a?n.isRequired:n,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return r.call.apply(r,[V,e,t].concat(o))},onRefresh:O.a.func};t.a=$},424:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r=n(13),i=n.n(r),o=n(24),a=n.n(o),c=n(3),s=n.n(c),u=n(5),l=n.n(u),d=n(6),f=n.n(d),p=n(10),h=n.n(p),m=n(7),v=n.n(m),b=n(2),y=n.n(b),g=n(0),w=n.n(g),k=n(1),O=n.n(k),_=n(43),j=n(421),E=n(340),R=n(253),x=n(16);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){y()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v()(e);if(t){var i=v()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h()(this,n)}}var I=function(e){f()(r,e);var t,n=D(r);function r(){return s()(this,r),n.apply(this,arguments)}return l()(r,[{key:"componentDidMount",value:(t=a()(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(_.e)(this.context.store,j.a,C({paddingtonBear:!0},this.props)),e.next=3,Object(_.g)(t);case 3:this.props.onClose&&this.props.onClose();case 4:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"render",value:function(){return null}}]),r}(w.a.PureComponent);y()(I,"propTypes",{movable:O.a.shape({moveTo:O.a.func.isRequired,title:O.a.string}).isRequired,source:function(e,t){for(var n=O.a.shape({id:Object(E.a)(O.a.string).isRequired,title:Object(E.a)(O.a.string).isRequired}),r=e.movable instanceof R.a?n.isRequired:n,i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];return r.call.apply(r,[I,e,t].concat(o))},onClose:O.a.func,onRefresh:O.a.func}),y()(I,"contextType",x.b)},425:function(e,t,n){"use strict";var r=n(3),i=n.n(r),o=n(5),a=n.n(o),c=n(19),s=n.n(c),u=n(6),l=n.n(u),d=n(10),f=n.n(d),p=n(7),h=n.n(p),m=n(2),v=n.n(m),b=n(0),y=n.n(b),g=n(1),w=n.n(g),k=n(14),O=n(372),_=n(340),j=n(43),E=n(222),R=n(16);function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h()(e);if(t){var i=h()(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return f()(this,n)}}var P=function(e){l()(n,e);var t=x(n);function n(e,r){var o;return i()(this,n),(o=t.call(this,e,r))._onChange=o._onChange.bind(s()(o)),o._setupButtons(r,e),o.state={folderTitle:e.intl.formatMessage({id:"folder-create-modal.untitled"})},o}return a()(n,[{key:"render",value:function(){return y.a.createElement("div",{className:"p-3 pt-2-m px-2-m pb-0 w-412px"},y.a.createElement(O.a,{dialogTitle:"folder-create-modal.title",inputLabel:"folder-create-modal.name",value:this.state.folderTitle,onChange:this._onChange,autofocus:!0}))}},{key:"_onChange",value:function(e){this.setState({folderTitle:e})}},{key:"_onCreateClick",value:function(){var e=this;return Object(E.d)(this.context.store,{title:this.state.folderTitle,parent:this.props.folderId}).then(this.props.onFolderCreated).then((function(){return Object(j.a)(e.context.store,e.props.modalId)})).catch((function(e){if(e.response&&e.response.contextType)throw{message:"folder-create-modal.err_invalid_title"}}))}},{key:"_setupButtons",value:function(e,t){Object(j.f)(e.store,t.modalId,{actionButton:{title:t.intl.formatMessage({id:"folder-create-modal.create"}),onClick:this._onCreateClick.bind(this)},cancelButton:{title:t.intl.formatMessage({id:"folder-create-modal.cancel"})},paddingtonBear:!0})}}]),n}(y.a.Component);v()(P,"contextType",R.b),v()(P,"propTypes",{intl:k.d,folderId:Object(_.a)(w.a.string).isRequired,onFolderCreated:w.a.func.isRequired,modalId:w.a.string});var C=Object(k.e)(P);C.propTypes=Object(k.h)(P.propTypes),t.a=C}}]);