var citation=function(){var e=function(e){var t=e.attr("id").substring("cite-link-".length),n=e.parent().parent(),r="cite-popup-"+t,o="bibradio-"+t,a="amsradio-"+t,i="reftype-"+t,s="cite-example-"+t,c="cite-textarea-"+t;$("#"+r).remove();var l='<div id="'+r+'" class="popup" style="width:700px;cursor:auto;display:block;"><div id="'+s+'"></div><label style="margin-right:16px"><input type="radio" id="'+o+'" name="'+i+'" checked="checked"/> BibTeX</label><label><input type="radio" id="'+a+'" name="'+i+'"/> amsrefs</label> <textarea id="'+c+'" rows="9" style="width:100%;box-sizing:border-box"></textarea><br><p align="right"><a class="cite-close">close</a></p></div>',u=$(l);u.find("a.cite-close").click(function(){u.fadeOutAndRemove()}),n.append(u),StackExchange.helpers.addSpinner(u),$.ajax({"type":"GET","url":"/posts/"+t+"/citation","dataType":"json","success":function(e){StackExchange.helpers.removeSpinner(),$("#"+s).html(e.example),$("#"+c).val(e.bibtex),$("#"+o).data("ref",e.bibtex).click(function(){$("#"+c).val($("#"+o).data("ref"))}),$("#"+a).data("ref",e.amsref).click(function(){$("#"+c).val($("#"+a).data("ref"))})}})};return{"show":function(t){e(t)}}}();