(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[53],{898:function(e,t,n){"use strict";n.r(t);var s=n(22),a=n.n(s),o=n(23),r=n.n(o),i=n(30),c=n.n(i),l=n(24),u=n.n(l),m=n(25),d=n.n(m),p=n(27),h=n.n(p),f=n(28),g=n.n(f),b=n(29),v=n.n(b),y=n(40),k=n.n(y),M=n(32),E=n.n(M),C=n(0),I=n.n(C),w=n(11),U=n.n(w),x=n(12),D=n(136),O=n(59),_=n(39),j=n(429),S=n.n(j),R=n(31);function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return g()(this,n)}}var F=function(e){h()(n,e);var t=A(n);function n(){return u()(this,n),t.apply(this,arguments)}return d()(n,[{key:"render",value:function(){return I.a.createElement(R.MenuItem,{disabled:!0,"data-parent-class":S.a.loadingItem,"data-open-web-class":"approve/disapprove-report-button"},I.a.createElement(O.a,{textKey:"message.contextMenu.".concat(this.props.name,".item.loading")}))}}]),n}(C.Component);F.displayName="MenuItemLoader";var L=n(110),N=n(418),P=n(73),K=n(34),T=n(68),B=n(33),W=n(838),G=n.n(W),H=Object(x.connect)((function(e){var t=e.blocklistUser;return{blockOnlyLoading:t.blockOnlyLoading,blockAndDeleteLoading:t.blockAndDeleteLoading,blockUserFailed:t.blockUserFailed,isSuccess:t.isSuccess}}))((function(e){Object(C.useEffect)((function(){e.isSuccess&&e.onClose()}),[e.isSuccess]);return I.a.createElement(R.Modal,{disableCustomBodyScroll:B.j,shadowRootCssModules:T.c?["conversation"]:void 0,isLtr:B.t,fullScreenMobile:!1,showModal:e.showModal,closeButton:!0,onClose:function(){return e.onClose()},size:"md",bottomActions:I.a.createElement(I.a.Fragment,null,I.a.createElement(R.Gutter,null,I.a.createElement(R.Button,{mode:"secondary",onClick:function(){e.onAction("BLOCK_ONLY")}},e.blockOnlyLoading?I.a.createElement(P.a,null):I.a.createElement(K.a,{i18nKey:"message.contextMenu.blockUser.confirmation.blockOnlyButton"})),e.blockAndDeleteLoading?I.a.createElement(P.a,null):I.a.createElement(R.Button,{mode:"primary",onClick:function(){e.onAction("BLOCK_AND_DELETE")}},e.blockAndDeleteLoading?I.a.createElement(P.a,null):I.a.createElement(K.a,{i18nKey:"message.contextMenu.blockUser.confirmation.blockAndDeleteButton"})),e.blockUserFailed&&I.a.createElement("div",{className:G.a.failedMessage},I.a.createElement(R.Icon,{type:"fa-solid",name:"exclamation-circle",className:G.a.failedIcon}),I.a.createElement(K.a,{i18nKey:"message.contextMenu.blockUser.confirmation.failed"})))),modalTitle:I.a.createElement(K.a,{i18nKey:"message.contextMenu.blockUser.confirmation.title"})},I.a.createElement(K.a,{i18nKey:"message.contextMenu.blockUser.confirmation.text"}))})),V=n(67),J=n(258),q=n(4),Y=n(26);function z(e){var t=e.message,n=e.action,s=e.shouldDeleteSpotUserContent;return function(){var e=r()(a.a.mark((function e(o,r){var i,c,l,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(Q(s)),i=r(),c=i.conversation.postId,l=!1,e.prev=3,"add"!==n){e.next=11;break}return e.next=7,V.b(t.user.id,c,s);case 7:u=e.sent,l=!0,e.next=14;break;case 11:return e.next=13,V.k(t.user.id,c);case 13:u=e.sent;case 14:u?(o(Object(J.b)(t,l)),o({type:Y.f})):o(X()),e.next=21;break;case 17:e.prev=17,e.t0=e.catch(3),q.a.error("blockUser",e.t0),o(X());case 21:case"end":return e.stop()}}),e,null,[[3,17]])})));return function(t,n){return e.apply(this,arguments)}}()}function Q(e){return{type:Y.h,payload:e}}function X(){return{type:Y.g}}var Z=n(422),$=n(420),ee=n(250),te=n(421),ne=n(76),se=n(170),ae=n(83);var oe=n(38),re=n(2),ie=n.n(re),ce=n(430),le=n(37),ue=n(35),me=n.n(ue),de=n(51),pe=n(3),he=n(80);function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,s)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,s=v()(e);if(t){var a=v()(this).constructor;n=Reflect.construct(s,arguments,a)}else n=s.apply(this,arguments);return g()(this,n)}}n.d(t,"MessageContextMenu",(function(){return Ce}));var ve=ie.a.get("tenant_config.conversation.enableUsersMuting",!1),ye=ie.a.get("tenant_config.conversation.enableMessageApproveForAdminAndModerator",!1),ke=ie.a.get("tenant_config.conversation.enableMessageApproveForCommunityModerator",!1),Me=ie.a.get("tenant_config.conversation.enablePendingMessageRejectForCommunityModerator",!1),Ee=ie.a.get("tenant_config.conversation.enablePublishedMessageRejectForCommunityModerator",!1),Ce=function(e){h()(o,e);var t,n,s=be(o);function o(e,t){var n;return u()(this,o),(n=s.call(this,e,t)).handleTabModeChanged=function(e){n.setState({isDroplistOpenedForce:e.activated})},n.showDroplist=function(){var e=n.props,t=e.tracking,s=e.message,a=e.onShow,o=e.featuredComment,r=e.postId;a(s),n.setState({showTooltip:!0}),n.droplistVisible=!0;var i={type:"message-context-menu-clicked",message_id:s.id,post_id:r};o&&(i=ge(ge({},i),{},{target_type:"featured-comment",segment:"top"===o?"top-featured-comment":"in-conversation-featured"})),t.trackEvent(i)},n.hideDroplist=function(){n.props.onHide(n.props.message),n.setState({showTooltip:!1}),n.droplistVisible=!1},n.onDroplistChange=function(e){e?n.showDroplist():n.hideDroplist()},n.onSetFeaturedMessage=function(){var e=n.props,t=e.tracking,s=e.featuredComment,a=e.openFeaturedCommentModal,o=e.message,r=e.setFeaturedComment,i=e.postId;r(o,a);var c={type:"message-context-menu-inner-clicked",target_type:"set-top-comment",segment:"top"===s?"top-featured-comment":"in-conversation-featured",post_id:i};t.trackEvent(c),n.hideDroplist()},n.onRemoveAsFeatured=function(){var e=n.props,t=e.tracking,s=e.message,a=e.removeFeaturedComment,o=e.featuredComment,r=e.postId;a(s),q.a.send("remove_featured_comment_clicked");var i={type:"message-context-menu-inner-clicked",target_type:"remove-top-comment",segment:"top"===o?"top-featured-comment":"in-conversation-featured",post_id:r};t.trackEvent(i),n.hideDroplist()},n.approveMessage=function(){n.hideDroplist(),n.props.onApprove({message:n.props.message})},n.handleDropListKeyUp=function(e){13===e.keyCode&&(n.droplistVisible?n.hideDroplist():n.showDroplist())},n.showContextMenuImage=function(){var e=n.props.currentUser;return!0===e.isAdmin||!0===e.isModerator||!0===e.isJournalist||!0===e.isSuperAdmin||!0===e.isCommunityModerator},n.handleCloseShareModal=function(){n.setState({showShareModal:!1})},n.handleBlacklistUserModalAction=function(e){var t=n.props,s=t.message;(0,t.onBlockUser)({message:s,shouldDeleteSpotUserContent:"BLOCK_AND_DELETE"===e})},n.handleCloseBlacklistUserModal=function(){n.setState({showBlacklistUserModal:!1})},n.state={isDroplistOpened:!1,isDroplistOpenedForce:!1,showTooltip:!1,showBlacklistUserModal:!1,isPostScope:n.props.contentType===de.b.Post},n.droplistVisible=!1,n.getReportItem=function(e){return I.a.createElement(R.MenuItem,{key:"reportItem",onClick:e},I.a.createElement(O.a,{textKey:"message.contextMenu.report.item"}))},n}return d()(o,[{key:"componentDidMount",value:function(){document.addEventListener("hostClick",this.hideDroplist),document.addEventListener("tabModeChanged",this.handleTabModeChanged)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("hostClick",this.hideDroplist),document.removeEventListener("tabModeChanged",this.handleTabModeChanged)}},{key:"blockUser",value:(n=r()(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({showBlacklistUserModal:!0}),this.hideDroplist();case 2:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"unblockUser",value:function(){var e=this.props,t=e.message;(0,e.onUnblockUser)({message:t}),this.hideDroplist()}},{key:"deleteMessage",value:(t=r()(a.a.mark((function e(){var t,n,s,o,r,i;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props,n=t.tracking,s=t.message,o=t.onDeletedMessageModalOpen,r=t.postId,q.a.send("delete_message_clicked"),i={type:"delete-message-clicked",message_id:s.id,post_id:r},n.trackEvent(i),this.hideDroplist(),o();case 6:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"pinFeaturedComment",value:function(){var e=this.props,t=e.message,n=e.pinFeaturedComment;n(t,e.featuredComment),this.hideDroplist()}},{key:"globalReject",value:function(){this.props.onGlobalReject({message:this.props.message})}},{key:"rejectMessage",value:function(){this.hideDroplist(),this.props.onReject({message:this.props.message})}},{key:"deleteAction",value:function(){this.props.onDelete({message:this.props.message})}},{key:"userWhiteList",value:function(e){var t=this.props,n=t.message,s=t.onUserWhiteList;this.hideDroplist(),s(e,n)}},{key:"editMessage",value:function(){var e=this.props,t=e.tracking,n=e.message,s=e.onEdit,a=e.postId;q.a.send("edit_message_clicked");var o={type:"edit-message-clicked",message_id:n.id,post_id:a};t.trackEvent(o),this.hideDroplist(),s(n.id)}},{key:"reportMessage",value:function(){var e=this;this.hideDroplist();var t=this.props,n=t.tracking,s=t.message,a=t.postId,o=function(){if(e.props.featuredComment)return"top"===e.props.featuredComment?"top-featured-comment":"in-conversation-featured"}();q.a.send("report_message_clicked");var r={type:"message-context-menu-inner-clicked",message_id:s.id,target_type:"report",segment:o,post_id:a};n.trackEvent(r),this.props.onReport()}},{key:"muteUser",value:function(){var e=this.props,t=e.tracking,n=e.openMuteUserModal,s=e.postId;n(),this.hideDroplist(),q.a.send("mute_user_clicked");var a={type:"message-context-menu-inner-clicked",target_type:"mute_user",post_id:s};t.trackEvent(a)}},{key:"getHostPanelContentType",value:function(){return this.props.contentType===de.b.Conversation?"comments":"posts"}},{key:"openDashboard",value:function(){var e=this.props,t=e.spotId,n=e.conversationId,s=ie.a.get("tenant_config.admin-panel.openDashboardUrl",D.a.urls.manage);s=s.replace("{SPOT_ID}",t).replace("{CONV_ID}",n).replace("{CONTENT_TYPE}",this.getHostPanelContentType()),window.open(s,"_blank").focus(),this.hideDroplist()}},{key:"viewAllFromUser",value:function(){var e=this.props,t=e.message,n=e.spotId,s=ie.a.get("tenant_config.admin-panel.viewAllFromUserUrl",D.a.urls.manage);s=s.replace("{SPOT_ID}",n).replace("{USER_ID}",t.user.id).replace("{CONTENT_TYPE}",this.getHostPanelContentType()),window.open(s,"_blank").focus(),this.hideDroplist()}},{key:"isStaffMessage",value:function(e){var t=e.user;return!!(t.isAdmin||t.isJournalist||t.isModerator||t.isSuperAdmin)}},{key:"share",value:function(){var e=this;_.a&&"function"==typeof navigator.share?navigator.share({title:document.title,url:Object(pe.getLocation)().href}).catch((function(){e.setState({showShareModal:!0})})):this.setState({showShareModal:!0}),this.hideDroplist()}},{key:"getMenuItems",value:function(){var e=this.props,t=e.message,n=e.currentUser,s=e.enableViewInDashboardItem,a=e.enableViewAllFromUser,o=e.enableDeleteItem,r=e.enableRejectItem,i=e.enableEditItem,c=e.enableReportItem,l=e.enableBlockUser,u=e.enableGlobalReject,m=e.enableWhitelistUser,d=e.isLiveBlog,p=e.currentUserID,h=t.user.id===n.id,f=[],g=I.a.createElement(R.MenuItem,{key:"viewInDashboardItem","data-spot-im-class":"context-menu-item-view-dashboard","data-open-web-class":"report-reply/comment-button",onClick:this.openDashboard.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.viewInDashboard"})),b=I.a.createElement(R.MenuItem,{key:"viewAllFromUser","data-spot-im-class":"context-menu-item-viewall-user","data-open-web-class":"report-reply/comment-button",onClick:this.viewAllFromUser.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.viewAllFromUser"})),v=I.a.createElement(R.MenuItem,{key:"deleteItem","data-spot-im-class":"context-menu-item-delete","data-open-web-class":"report-reply/comment-button",onClick:this.deleteMessage.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.delete.item"})),y=I.a.createElement(R.MenuItem,{key:"setAsFeaturedItem","data-spot-im-class":"context-menu-item-set-as-featured","data-open-web-class":"report-reply/comment-button",onClick:this.onSetFeaturedMessage},I.a.createElement(K.a,{i18nKey:"message.contextMenu.setAsFeatured"})),k=I.a.createElement(R.MenuItem,{key:"pinFeaturedCommentItem","data-spot-im-class":"context-menu-item-pin-featured-comment",onClick:this.pinFeaturedComment.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.pinFeaturedComment"})),M=I.a.createElement(R.MenuItem,{key:"removeAsFeaturedItem","data-spot-im-class":"context-menu-item-remove-as-featured","data-open-web-class":"report-reply/comment-button",onClick:this.onRemoveAsFeatured},I.a.createElement(O.a,{textKey:"message.contextMenu.".concat("top"===t.featuredComment?"removeAsPinned":"removeAsFeatured")})),E=I.a.createElement(R.Typography,{type:"infoMd",className:U()(S.a.featuredMessageAlert,{[S.a.mobile]:_.a})},I.a.createElement(O.a,{textKey:"message.contextMenu.editFeatured.featured"}),I.a.createElement(O.a,{textKey:"message.contextMenu.editFeatured.delete"})),C=I.a.createElement(R.MenuItem,{key:"rejectItem","data-spot-im-class":"context-menu-item-reject","data-open-web-class":"report-reply/comment-button",onClick:this.rejectMessage.bind(this),className:S.a.actionListItem},I.a.createElement("span",{className:S.a.rejectIcon},I.a.createElement(R.Icon,{name:"ban",type:"solid"})),I.a.createElement(O.a,{textKey:"message.contextMenu.reject"})),w=I.a.createElement(R.MenuItem,{key:"approveItem","data-spot-im-class":"context-menu-item-approve","data-open-web-class":"report-reply/comment-button",onClick:this.approveMessage,className:S.a.actionListItem},I.a.createElement("span",{className:S.a.approveIcon},I.a.createElement(R.Icon,{name:"check",type:"solid"})),I.a.createElement(K.a,{i18nKey:"message.contextMenu.approve"},"Approve")),x=I.a.createElement(R.MenuItem,{key:"editItem","data-spot-im-class":"context-menu-item-edit","data-open-web-class":"report-reply/comment-button",onClick:this.editMessage.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.edit"})),D=this.getReportItem(this.reportMessage.bind(this)),j=I.a.createElement(R.MenuItem,{key:"blockUser","data-spot-im-class":"context-menu-item-block","data-open-web-class":"report-reply/comment-button",onClick:this.blockUser.bind(this,"add")},I.a.createElement(O.a,{textKey:"message.contextMenu.blockUser.item.add"})),A=I.a.createElement(R.MenuItem,{key:"unblockUser","data-spot-im-class":"context-menu-item-unblock","data-open-web-class":"report-reply/comment-button",onClick:this.unblockUser.bind(this,"remove")},I.a.createElement(O.a,{textKey:"message.contextMenu.blockUser.item.remove"})),L=I.a.createElement(R.MenuItem,{key:"muteUser","data-spot-im-class":"context-menu-item-mute","data-open-web-class":"report-reply/comment-button",onClick:this.muteUser.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.muteUser.item"})),N=I.a.createElement(R.MenuItem,{key:"globalReject","data-spot-im-class":"context-menu-item-global-reject","data-open-web-class":"report-reply/comment-button",onClick:this.globalReject.bind(this)},I.a.createElement(O.a,{textKey:"message.contextMenu.globalReject.item"})),P=I.a.createElement(R.MenuItem,{key:"addWhiteList","data-spot-im-class":"context-menu-item-whitelist-add","data-open-web-class":"report-reply/comment-button",onClick:this.userWhiteList.bind(this,"add")},I.a.createElement(O.a,{textKey:"message.contextMenu.whiteList.item.add"})),T=I.a.createElement(R.MenuItem,{key:"removeWhiteList","data-spot-im-class":"context-menu-item-whitelist-remove","data-open-web-class":"report-reply/comment-button",onClick:this.userWhiteList.bind(this,"remove")},I.a.createElement(O.a,{textKey:"message.contextMenu.whiteList.item.remove"})),B=I.a.createElement(R.MenuItem,{key:"sharePost","data-spot-im-class":"context-menu-share-post","data-open-web-class":"report-reply/comment-button",onClick:this.share.bind(this)},I.a.createElement(O.a,{textKey:"message.share"}));if(t.status!==oe.statuses.PENDING&&(n.isSuperAdmin||n.isAdmin||n.isModerator||n.isJournalist)?"top"===t.featuredComment?f.push(M):t.featured?(f.push(k),f.push(M)):0===t.depth&&f.push(y):t.featured&&p===t.user.id&&f.push(E),h){var W=[];i&&!t.featured&&W.push(x),o&&W.push(v),f.push.apply(f,W)}else if(n.isModerator){if(t.user.isRegistered&&l)switch(t.user.isBlockListed){case void 0:f.push(I.a.createElement(F,{key:"blockUser",name:"blockUser"}));break;case!1:f.push(j);break;case!0:f.push(A)}if(t.user.isRegistered&&m)switch(t.user.isAllowListed){case void 0:f.push(I.a.createElement(F,{key:"whiteList",name:"whiteList"}));break;case!1:f.push(P);break;case!0:f.push(T)}n.isSuperAdmin&&u&&f.push(N),s&&f.push(g),a&&f.push(b)}else!c||t.featuredComment||d||f.push(D);ve&&!h&&!this.isStaffMessage(t)&&n.isRegistered&&f.push(L),t.status===oe.statuses.PENDING||d||f.push(B);var G=n.isAdmin||n.isSuperAdmin||n.isModerator;return(G||n.isCommunityModerator&&Me&&t.status===oe.statuses.PENDING&&!t.isPublished||n.isCommunityModerator&&Ee&&t.isPublished)&&(h||!r||d||f.push(C)),t.status===oe.statuses.PENDING&&!t.isPublished&&(ye&&G||n.isCommunityModerator&&ke)&&(h||t.status!==oe.statuses.PENDING||d||f.push(w)),f.filter((function(e){return e}))}},{key:"onShow",value:function(){this.setState({isDroplistOpened:!0})}},{key:"onHide",value:function(){this.setState({isDroplistOpened:!1})}},{key:"render",value:function(){var e=this.props,t=e.spotId,n=e.direction,s=e.isHidden,a=e.message,o=e.spotName,r=e.currentUser,i=e.postId,c=this.state,l=c.showTooltip,u=c.showShareModal,m=c.showBlacklistUserModal,d=this.getMenuItems();s=s||0===d.length;var p=U()(S.a.messageContextMenu,{[S.a.hide]:s,[S.a.opened]:l}),h="rtl"===n?"right-start":"left-start";return I.a.createElement("div",{title:"Options",className:p,onKeyUp:this.handleDropListKeyUp,"data-spot-im-class":"context-menu","data-open-web-class":"comment-options-menu-button"},(null==d?void 0:d.length)&&I.a.createElement(he.a,{isIcon:!0,disableHover:!0},I.a.createElement(R.Menu,{isLtr:B.t,isMobile:_.a,showMenu:l,placement:h,trigger:"click",onShowChange:this.onDroplistChange},d)),I.a.createElement(N.a,{currentUser:r,spotId:t,spotName:o,message:a,show:u,onClose:this.handleCloseShareModal,postId:i}),I.a.createElement(H,{showModal:m,onAction:this.handleBlacklistUserModalAction,onClose:this.handleCloseBlacklistUserModal}))}}]),o}(C.Component);Ce.propTypes={direction:E.a.oneOf(["rtl","ltr"]).isRequired,message:E.a.object.isRequired,currentUser:E.a.object.isRequired,onBlockUser:E.a.func,onUnblockUser:E.a.func,onDelete:E.a.func,onGlobalReject:E.a.func,onEdit:E.a.func,onReport:E.a.func,onUserWhiteList:E.a.func,onShow:E.a.func,onHide:E.a.func,confirmation:E.a.func,isHidden:E.a.bool,spotId:E.a.string.isRequired,postId:E.a.string.isRequired,enableCategoryModeration:E.a.bool,spotName:E.a.string,featuredComment:E.a.string,openFeaturedCommentModal:E.a.func,openMuteUserModal:E.a.func,userToken:E.a.string,pinFeaturedComment:E.a.func,removeFeaturedComment:E.a.func,postId:E.a.string,contentType:E.a.string,conversationId:E.a.string},Ce.defaultProps={onBlockUser:function(){},onUnblockUser:function(){},onDelete:function(){},onEdit:function(){},onReport:function(){},onUserWhiteList:function(){},confirmation:function(){},onShow:function(){},onHide:function(){},openFeaturedCommentModal:function(){},openMuteUserModal:function(){},isHidden:!1,enableViewInDashboardItem:!0,enableViewAllFromUser:!0,enableDeleteItem:!0,enableRejectItem:!0,enableEditItem:!0,enableReportItem:!0,enableBlockUser:!0,enableGlobalReject:!0,enableWhitelistUser:!0,enableCategoryModeration:!1,featuredComment:null};t.default=k()(Object(x.connect)((function(e){return{spotId:e.moduleOptions.spotId,postId:e.moduleOptions.postId,direction:e.moduleOptions.direction,currentUser:e.currentUser,isLiveBlog:e.moduleOptions.isConversationLiveBlog,userToken:e.authentication.token,enableCategoryModeration:e.moduleOptions.enableSegmentedCategory,spotName:e.moduleOptions.spotName,currentUserID:e.currentUser.id,postId:e.moduleOptions.postId,isReporter:le.m(e,e.currentUser.id),contentType:e.conversation.contentType,conversationId:e.conversation.id}}),(function(e,t){var n=t.message;return{setFeaturedComment:function(t,n,s){return e(Object(L.a)(t,n,s))},removeFeaturedComment:function(t,n){return e(Object(L.c)(t,n))},pinFeaturedComment:function(t,n){return e(Object(L.b)(t,n))},onBlockUser:function(t){var n=t.message,s=t.shouldDeleteSpotUserContent;e(z({message:n,action:"add",shouldDeleteSpotUserContent:s}))},onUnblockUser:function(t){var n=t.message;e(z({message:n,action:"remove"}))},onDelete:function(){e(Object($.a)({message:n}))},onReject:function(){e(Object(ce.a)({message:n}))},onApprove:function(t){var n=t.message;e(Object(ee.a)({message:n}))},onEdit:function(t){var s=n.id,a=n.starsRating;"string"==typeof t&&(s=t),e(Object(te.a)({messageId:s,starsRating:a}))},onUserWhiteList(t){e(Object(Z.a)(t,n))},onGlobalReject(){e(function(e){var t=e.message;return function(){var e=r()(a.a.mark((function e(n,s){var o,r,i,c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q.a.apm.start("global_reject_message"),o=s(),r=o.comments.list,0===(t=JSON.parse(JSON.stringify(t))).depth&&t.repliesCount>0?t.isDeleted=!0:t.depth>0&&(i=ae.c(r,t.rootMessageId),(c=ne.c(i).filter((function(e){return ne.d(ae.d(r,e)).parentMessageId===t.id})))&&Object.keys(c).length&&(t.isDeleted=!0)),e.next=7,Object(se.b)({messageId:t.id});case 7:n({type:Y.F,payload:{message:t}}),q.a.apm.end("global_reject_message"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),n({type:Y.F,payload:{error:e.t0},error:!0}),q.a.error("globalRejectMessage",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()}({message:n}))}}})),me()({}))(Ce)}}]);
//# sourceMappingURL=message-context-menu-bundle.js.map