(window.webpackJsonp_spotim_580132258=window.webpackJsonp_spotim_580132258||[]).push([[51],{885:function(e,a,t){"use strict";t.r(a);var n=t(22),o=t.n(n),c=t(23),r=t.n(c),s=t(36),i=t.n(s),l=t(0),u=t.n(l),d=t(840),b=t.n(d),m=t(31),p=t(11),f=t.n(p),k=t(73),v=t(45),E=t(44),h=function(e){var a=e.type,t=e.content,n=e.email,o=e.postId;return Object(E.a)("v1.0.0/user/feedback",{method:"POST",postId:o,data:{type:a,email:n,content:t}})},y=t(39),g=t(161),w=t(68),j=t(33);function O(e){var a=Object(g.a)().t,t=[{type:"Idea",logoSelector:"ideaLogo",text:a("conversation.feedback.option.idea","Idea"),dataAttribute:"feedback-idea-button"},{type:"Problem",logoSelector:"problemLogo",text:a("conversation.feedback.option.problem","Problem"),dataAttribute:"feedback-problem-button"},{type:"Question",logoSelector:"questionLogo",text:a("conversation.feedback.option.question","Question"),dataAttribute:"feedback-question-button"}],n=a("conversation.feedback.email","Your Email"),c=a("conversation.feedback.addFeedback","Add your feedback..."),s=Object(l.useState)("Idea"),d=i()(s,2),p=d[0],E=d[1],O=Object(l.useState)(!1),N=i()(O,2),S=N[0],A=N[1],x=Object(l.useState)("main"),T=i()(x,2),C=T[0],I=T[1],z=Object(l.useState)(!0),F=i()(z,2),L=F[0],M=F[1],B=Object(l.useState)(""),Z=i()(B,2),W=Z[0],_=Z[1],q=Object(l.useState)(""),P=i()(q,2),Q=P[0],J=P[1],$=Object(l.useState)(!1),G=i()($,2),R=G[0],Y=G[1],D=Object(l.useState)(!1),H=i()(D,2),K=H[0],U=H[1];Object(l.useEffect)((function(){e.showFeedbackModal&&(I("main"),E("Idea"),_(""),J(""),Y(!1),U(!1),M(!0),A(!1))}),[e.showFeedbackModal]),Object(l.useEffect)((function(){var e=setTimeout((function(){S&&(I("after"),A(!1))}),2e3);return function(){clearTimeout(e)}}),[S]),Object(l.useEffect)((function(){var e=setTimeout((function(){"after"===C&&ee()}),2e3);return function(){clearTimeout(e)}}),[C]),Object(l.useEffect)((function(){ae()}),[Q,W]);var V=function(){Object(y.b)()&&Y(!0)},X=function(e){if(Object(y.b)()){"mouseleave"!==e.type&&Y(!1);var a=e.relatedTarget;if(a)"button"===a.type&&a.click()}},ee=function(){e.onClose()},ae=function(){M(!Q||!W)},te=function(){var a=r()(o.a.mark((function a(){var t;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.postId,!/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(Q)){a.next=9;break}return U(!1),A(!0),a.next=7,h({type:p,content:W,email:Q,postId:t});case 7:a.next=10;break;case 9:U(!0);case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}(),ne="main"===C?a("conversation.feedback.title","Feedback"):u.a.createElement("div",{className:b.a.feedbackWrapper},a("conversation.feedback.titleAfterSend","Feedback sent!"),u.a.createElement(v.a,{selector:"faCircleCheck",className:b.a.sentIcon}));return u.a.createElement(m.Modal,{disableCustomBodyScroll:j.j,shadowRootCssModules:w.c?["conversation"]:void 0,isLtr:j.t,closeButton:!0,showModal:e.showFeedbackModal,className:b.a.modal,onClose:ee,modalTitle:ne,size:"md"},u.a.createElement("div",{className:b.a.feedbackWrapper},u.a.createElement("div",{className:f()(b.a.headerText,{[b.a.hidden]:!0===R})},"main"===C?a("conversation.feedback.message","We would love to hear what you think - any type of feedback will be highly appreciated!"):a("conversation.feedback.messageAfterSend","Thank you for your help.")),"main"===C&&u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:f()(b.a.buttonArea,{[b.a.hidden]:!0===R})},u.a.createElement(m.Gutter,{size:"lg"},t.map((function(e,a){var t=f()(b.a.button,{[b.a.highlight]:e.type===p});return u.a.createElement("button",{key:e.type,className:t,"data-open-web-class":e.dataAttribute,onClick:function(){return function(e){E(e)}(e.type)}},u.a.createElement(v.a,{selector:e.logoSelector,className:f()(b.a.logo,{[b.a.ideaLogo]:"Idea"===e.type,[b.a.problemLogo]:"Problem"===e.type,[b.a.questionLogo]:"Question"===e.type})}),u.a.createElement("span",{className:b.a.buttonText}," ",e.text))})))),u.a.createElement("div",{className:b.a.inputWrapper},u.a.createElement(m.TextInput,{className:b.a.input,placeholder:n,onChange:function(e){J(e.target.value)},onFocus:V,onBlur:X,onMouseLeave:X,hasError:K,"data-open-web-class":"email-input"})),u.a.createElement(m.Textarea,{className:b.a.textarea,onChange:function(e){_(e.target.value)},onFocus:V,onBlur:X,onMouseLeave:X,placeholder:c,"data-open-web-class":"feedback-input"}),"main"===C&&u.a.createElement("div",{className:b.a.gutterWrapper},K&&u.a.createElement("span",{className:f()(b.a.error,{[b.a.mobileError]:Object(y.b)()})},"Invalid Email, Try Again"),u.a.createElement("div",{className:b.a.gutter},u.a.createElement(m.Button,{mode:"secondary",onClick:ee,"data-open-web-class":"feedback-cancel-button"},a("conversation.feedback.cancel","Cancel")),u.a.createElement(m.Button,{mode:"primary",className:b.a.uiButton,onClick:te,disabled:L,"data-open-web-class":"feedback-send-button"},S?u.a.createElement("div",{className:b.a.spinnerWrapper},u.a.createElement(k.a,null)):a("conversation.feedback.send","Send")))))))}t.d(a,"default",(function(){return O}))}}]);
//# sourceMappingURL=feedback-modal-bundle.js.map