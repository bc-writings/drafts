/* Wikiwand - Minified Early JS */


$.escapeRE=function(e){return e.replace(/([\\{}()|.?*+\-\^$\[\]])/g,"\\$1")};var mediaWiki={msg:function(){},language:{months:{keys:{names:["january","february","march","april","may_long","june","july","august","september","october","november","december"],genitive:["january-gen","february-gen","march-gen","april-gen","may-gen","june-gen","july-gen","august-gen","september-gen","october-gen","november-gen","december-gen"],abbrev:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"]},names:["January","February","March","April","May","June","July","August","September","October","November","December"],genitive:["January","February","March","April","May","June","July","August","September","October","November","December"],abbrev:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}},config:{get:function(e){switch(e){case"wgSeparatorTransformTable":var t=articleData.langCodeUrl;return"fr"==t||"es"==t||"de"==t||"ru"==t||"pl"==t||"pt"==t||"nl"==t||"it"==t||"ar"==t||"hu"==t||"fi"==t?[",\t."," \t,"]:["",""];case"wgDigitTransformTable":return["",""];case"wgDefaultDateFormat":return"dmy";case"wgContentLanguage":return articleData.langCodeUrl;case"tableSorterCollation":return null;default:return""}}}};function Analytics(){var e=window.location.search.indexOf("debug_analytics=1")>-1;Analytics.prototype.gaInitialize=function(e){var t,i,o,n,r,a,s="UA-49207730-1",l="UA-49207730-5",c="UA-49207730-12";t=window,i=document,o="script",n="ga",t.GoogleAnalyticsObject=n,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=1*new Date,r=i.createElement(o),a=i.getElementsByTagName(o)[0],r.async=1,r.src="//www.google-analytics.com/analytics.js",a.parentNode.insertBefore(r,a);var d=null,u=document.cookie.match(/userID=([^;]+)/);u&&(d=u[1]),d||CURRENT_USER_ID&&(d=CURRENT_USER_ID),console.log("* Analytics: user ID is",d);ga("create",s,{cookieDomain:"none"}),ga("create",l,{cookieDomain:"none",name:"ABtesting"}),ga("require","displayfeatures");var p=serverData&&serverData.agent.extensionInstalled;!0===p&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),"undefined"!=typeof serverData&&serverData.agent&&serverData.agent.iOSWebView||"undefined"!=typeof precache_from_extension&&1==precache_from_extension||"undefined"!=typeof serverData&&serverData.config&&"popup"==serverData.config.source||(ga("send","pageview"),"wikiwand"==e&&d&&(ga("create",c,{cookieDomain:"none",userId:d,name:"retention"}),!0===p&&(ga("set","campaignMedium","wikiwand-extension"),ga("set","campaignSource","")),ga("retention.send","pageview")))},Analytics.prototype.gaEvent=function(e,t,i,o){"undefined"!=typeof ga?ga("send","event",e,t,i,o):window.setTimeout(function(){analytics.gaEvent(e,t,i,o)},500)},Analytics.prototype.gaEventIf=function(e,t,i,o,n){e?(console.log("* Analytics: reporting event: "+t+"/"+i+"/"+(o||"")),Analytics.prototype.gaEvent(t,i,o,n)):console.log("* Analytics: psuedo reporting event: "+t+"/"+i+"/"+(o||""))},Analytics.prototype.gaSetDimension=function(e,t){"undefined"!=typeof ga?ga("set","dimension"+e,t):window.setTimeout(function(){analytics.gaSetDimension(e,t)},500)},Analytics.prototype.gaPageView=function(e){serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?ga("send","pageview",e):window.setTimeout(function(){analytics.gaPageView(e)},500))},Analytics.prototype.gaVirtualPageView=function(t,i){i=i||"ABtesting",serverData&&serverData.agent&&serverData.agent.iOSWebView||("undefined"!=typeof ga?(e&&console.warn("→→→→→→→→→→ GOOGLE ANALYTICS: "+t),ga(i+".send","pageview",t)):window.setTimeout(function(){analytics.gaVirtualPageView(t)},500))},Analytics.prototype.gaVirtualPageViewIf=function(e,t,i){e?(console.log("* Analytics: reporting virtual pageview: "+t),Analytics.prototype.gaVirtualPageView(t,i)):console.log("* Analytics: psuedo reporting virtual pageview: "+t)}}!function(e,t){"use strict";var i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,o=function(){for(var e,i,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,r=o.length,a={};n<r;n++)if((e=o[n])&&e[1]in t){for(n=0,i=e.length;n<i;n++)a[o[0][n]]=e[n];return a}return!1}(),n={request:function(e){var n=o.requestFullscreen;e=e||t.documentElement,/5\.1[\.\d]* Safari/.test(navigator.userAgent)?e[n]():e[n](i&&Element.ALLOW_KEYBOARD_INPUT)},exit:function(){t[o.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(){},onerror:function(){},raw:o};o?(Object.defineProperties(n,{isFullscreen:{get:function(){return!!t[o.fullscreenElement]}},element:{enumerable:!0,get:function(){return t[o.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return!!t[o.fullscreenEnabled]}}}),t.addEventListener(o.fullscreenchange,function(e){n.onchange.call(n,e)}),t.addEventListener(o.fullscreenerror,function(e){n.onerror.call(n,e)}),e.screenfull=n):e.screenfull=!1}(window,document),function(e,t){var i,o=[];function n(e){var t,i=o.length;for(t=0;t<i;t++)if(o[t].id.toLowerCase()===e.toLowerCase())return o[t];return!1}function r(t){var i=e(t),o=i.data("sortValue");return null!==o&&void 0!==o?String(o):t?"img"===t.tagName.toLowerCase()?i.attr("alt")||"":e.map(e.makeArray(t.childNodes),function(t){return 1===t.nodeType?r(t):e.text(t)}).join(""):i.text()}function a(t,i,n){for(var a,s=o.length,l=1,c=0,d=0,u=i.length>4?5:i.length;l<s;)if(""!==(a=i[c]&&i[c].cells[n]?e.trim(r(i[c].cells[n])):""))if(o[l].is(a,t)){if(c++,++d>=u)return o[l]}else l++,c=0,d=0;else++c>i.length&&(c=0,l++);return o[0]}function s(t){var i,o,n,a,s=t.tBodies[0]&&t.tBodies[0].rows.length||0,l=t.tBodies[0].rows[0]&&t.tBodies[0].rows[0].cells.length||0,c=e(t).data("tablesorter").config,d=c.parsers,u={row:[],normalized:[]};for(i=0;i<s;++i)if(a=[],(n=e(t.tBodies[0].rows[i])).hasClass(c.cssChildRow))u.row[u.row.length-1]=u.row[u.row.length-1].add(n);else{for(u.row.push(n),o=0;o<l;++o)a.push(d[o].format(r(n[0].cells[o]),t,n[0].cells[o]));a.push(u.normalized.length),u.normalized.push(a),a=null}return u}function l(t,i){var o,n,r,a,s=i.row,l=i.normalized,c=l.length,d=l[0].length-1,u=document.createDocumentFragment();for(o=0;o<c;o++)for(r=s[n=l[o][d]].length,a=0;a<r;a++)u.appendChild(s[n][a]);t.tBodies[0].appendChild(u),e(t).trigger("sortEnd.tablesorter")}function c(t,i,o){e.each(o,function(o,n){e.each(n,function(n,r){var a=t[o],s=e(a);d(r,i)?e.each(i,function(e,t){if(t[0]===n)return s.data({order:t[1],count:t[1]+1}),!1}):s.data({order:0,count:0})})})}function d(e,t){var i,o=t.length;for(i=0;i<o;i++)if(t[i][0]===e)return!0;return!1}function u(t){var i=[];return e.each(t,function(t,o){void 0!==o&&-1===e.inArray(o,i)&&i.push(o)}),i}function p(e,t,i,o,n,r){t.removeClass(o[0]).removeClass(o[1]).attr("title",n[1]);for(var a=0;a<i.length;a++)t.eq(r[i[a][0]]).addClass(o[i[a][1]]).attr("title",n[i[a][1]])}function h(e,t){return e<t?-1:e>t?1:0}function f(e,t){return t<e?-1:t>e?1:0}function g(e,t,i){var o,n=[],r=t.length;for(o=0;o<r;o++)n[o]=t[o][1]?f:h;return i.normalized.sort(function(e,i){var o,a,s;for(o=0;o<r;o++)if(a=t[o][0],0!==(s=n[o].call(this,e[a],i[a])))return s;return h.call(this,e[e.length-1],i[i.length-1])}),i}function m(t){var i=[];return e.each(t,function(t,o){e.each(o,function(e,t){var o="desc"===t?1:0;i.push([parseInt(e,10),o])})}),i}e.tablesorter={defaultOptions:{cssHeader:"headerSort",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortMultiSortKey:"shiftKey",unsortableClass:"unsortable",parsers:{},cancelSelection:!0,sortList:[],headerList:[],headerToColumns:[],columnToHeader:[]},dateRegex:[],monthNames:{},construct:function(o,r){return o.each(function(o,h){var f,v,w,y,b,k=e(h),x=!0;function S(){x=!1,function(){if(i.collationTable=t.config.get("tableSorterCollation"),i.collationRegex=null,i.collationTable){var e,o=[];for(e in i.collationTable)i.collationTable.hasOwnProperty(e)&&o.push(e);o.length&&(i.collationRegex=new RegExp("["+o.join("")+"]","ig"))}}();var o,r=k.find("> tbody > tr.sortbottom");r.length&&((o=k.children("tfoot")).length?o.eq(0).prepend(r):k.append(e("<tfoot>").append(r))),function(t){var i,o,n,r,a,s,l,c,d,u=t.find("> tbody > tr > [rowspan]").get();if(u.length)for(t.find("> tbody > tr").each(function(){var t,i=0,o=this.cells.length;for(t=0;t<o;t++)e(this.cells[t]).data("tablesorter",{realCellIndex:i,realRowIndex:this.rowIndex}),i+=this.cells[t].colSpan}),p();u.length;)for(e.data(u[0],"tablesorter").needResort&&p(),r=u.shift(),a=e.data(r,"tablesorter"),o=r.rowSpan,n=r.colSpan,i=a.realCellIndex,r.rowSpan=1,d=e(r).parent().nextAll(),s=0;s<o-1;s++)l=e(d[s].cells).filter(h),(c=e(r).clone()).data("tablesorter",{realCellIndex:i,realRowIndex:a.realRowIndex+s,needResort:!0}),l.length?(l.each(f),l.first().before(c)):d.eq(s).append(c);function p(){var t,i,o;u=u.sort(function(n,r){return t=e.data(n,"tablesorter"),i=e.data(r,"tablesorter"),(o=t.realCellIndex-i.realCellIndex)||(o=t.realRowIndex-i.realRowIndex),o}),e.each(u,function(){e.data(this,"tablesorter").needResort=!1})}function h(){return e.data(this,"tablesorter").realCellIndex>=i}function f(){e.data(this,"tablesorter").realCellIndex+=n,this.rowSpan>1&&(e.data(this,"tablesorter").needResort=!0)}}(k),w.parsers=function(e,t){var i,o,r,s,l=e.tBodies[0].rows,c=[];if(l[0])for(o=l[0].cells.length,r=0;r<o;r++)s=!1,void 0!==(i=t.eq(r).data("sortType"))&&(s=n(i)),!1===s&&(s=a(e,l,r)),c.push(s);return c}(h,f)}h.tBodies&&(h.tHead||(function(t){var i,o,n,r=t.find("> tbody > tr");if(t.get(0).tHead||(i=e("<thead>"),r.each(function(){if(e(this).children("td").length)return!1;i.append(this)}),t.find(" > tbody:first").before(i)),!t.get(0).tFoot){for(o=e("<tfoot>"),n=r.length-1;n>=0&&!e(r[n]).children("td").length;n--)o.prepend(e(r[n]));t.append(o)}}(k),h.tHead))&&(k.addClass("jquery-tablesorter"),w=e.extend({},e.tablesorter.defaultOptions,r),e.data(h,"tablesorter",{config:w}),y=[w.cssDesc,w.cssAsc],b=[t.msg("sort-descending"),t.msg("sort-ascending")],f=function(t,i){var o,n,r,a,s,l,c,d,p=e(t).data("tablesorter").config,h=0,f=0,g=e([]),m=e("thead:eq(0) > tr",t);return m.length<=1?g=m.children("th"):(d=[],m.each(function(t,i){e.each(i.cells,function(e,i){var o,n;for(a=Number(i.rowSpan),s=Number(i.colSpan);d[t]&&void 0!==d[t][e];)++e;for(n=e;n<e+s;++n)for(o=t;o<t+a;++o)d[o]||(d[o]=[]),d[o][n]=i})}),e.each(d,function(t,i){(l=e(u(i)).filter("th").length)>=h&&(h=l,c=t)}),g=e(u(d[c])).filter("th")),g.each(function(t){for(r=e(this),o=[],n=0;n<this.colSpan;n++)p.columnToHeader[f+n]=t,o.push(f+n);p.headerToColumns[t]=o,f+=this.colSpan,r.data({headerIndex:t,order:0,count:0}),r.hasClass(p.unsortableClass)&&r.data("sortDisabled",!0),r.data("sortDisabled")||r.addClass(p.cssHeader).prop("tabIndex",0).attr({role:"columnheader button",title:i[1]}),p.headerList[t]=this}),g}(h,b),function(){var o,n,r,a,s="0123456789,.".split(""),l=t.config.get("wgSeparatorTransformTable"),c=t.config.get("wgDigitTransformTable");if(null===l||""===l[0]&&""===c[2])i.transformTable=!1;else for(i.transformTable={},o=l[0].split("\t").concat(c[0].split("\t")),n=l[1].split("\t").concat(c[1].split("\t")),r=0;r<o.length;r++)i.transformTable[n[r]]=o[r],s.push(e.escapeRE(n[r]));a="["+s.join("",s)+"]",i.numberRegex=new RegExp("^([-+−]?[0-9][0-9,]*(\\.[0-9,]*)?(E[-+−]?[0-9][0-9,]*)?|[-+−]?"+a+"+[\\s\\xa0]*%?)$","i")}(),function(){var o,n,r=[];for(i.monthNames={},o=0;o<12;o++)n=t.language.months.names[o].toLowerCase(),i.monthNames[n]=o+1,r.push(e.escapeRE(n)),n=t.language.months.genitive[o].toLowerCase(),i.monthNames[n]=o+1,r.push(e.escapeRE(n)),n=t.language.months.abbrev[o].toLowerCase().replace(".",""),i.monthNames[n]=o+1,r.push(e.escapeRE(n));r=r.join("|"),i.dateRegex[0]=new RegExp(/^\s*(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{1,2})[\,\.\-\/'\s]{1,2}(\d{2,4})\s*?/i),i.dateRegex[1]=new RegExp("^\\s*(\\d{1,2})[\\,\\.\\-\\/'\\s]+("+r+")[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i"),i.dateRegex[2]=new RegExp("^\\s*("+r+")[\\,\\.\\-\\/'\\s]+(\\d{1,2})[\\,\\.\\-\\/'\\s]+(\\d{2,4})\\s*$","i")}(),i.rgx||(i.rgx={IPAddress:[new RegExp(/^\d{1,3}[\.]\d{1,3}[\.]\d{1,3}[\.]\d{1,3}$/)],currency:[new RegExp(/(^[£$€¥]|[£$€¥]$)/),new RegExp(/[£$€¥]/g)],url:[new RegExp(/^(https?|ftp|file):\/\/$/),new RegExp(/(https?|ftp|file):\/\//)],isoDate:[new RegExp(/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/)],usLongDate:[new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/)],time:[new RegExp(/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/)]}),f.not("."+w.unsortableClass).on("keypress click",function(t){var i,o,n,r,a,u,m,$;if("click"===t.type&&"a"===t.target.nodeName.toLowerCase())return!0;if("keypress"===t.type&&13!==t.which)return!0;if(x&&S(),v=s(h),a=k[0].tBodies[0]&&k[0].tBodies[0].rows.length||0,!h.sortDisabled&&a>0){if((i=e(this)).data({order:i.data("count")%2,count:i.data("count")+1}),this,o=w.headerToColumns[i.data("headerIndex")],n=e.map(o,function(e){return[[e,i.data("order")]]}),r=o[0],t[w.sortMultiSortKey])if(d(r,w.sortList))for(u=0;u<w.sortList.length;u++)m=w.sortList[u],$=w.headerList[m[0]],d(m[0],n)&&(e($).data("count",m[1]+1),m[1]=e($).data("count")%2);else w.sortList=w.sortList.concat(n);else w.sortList=n;return c(f,w.sortList,w.headerToColumns),p(k[0],f,w.sortList,y,b,w.columnToHeader),l(k[0],g(k[0],w.sortList,v)),!1}}).mousedown(function(){if(w.cancelSelection)return this.onselectstart=function(){return!1},!1}),k.data("tablesorter").sort=function(e){x&&S(),void 0===e?e=w.sortList:e.length>0&&(e=m(e)),c(f,e,w.headerToColumns),v=s(h),p(0,f,e,y,b,w.columnToHeader),l(h,g(0,e,v))},w.sortList.length>0&&(S(),w.sortList=m(w.sortList),k.data("tablesorter").sort()))})},addParser:function(e){var t,i=o.length,n=!0;for(t=0;t<i;t++)o[t].id.toLowerCase()===e.id.toLowerCase()&&(n=!1);n&&o.push(e)},formatDigit:function(e){var t,o,n,r;if(!1!==i.transformTable){for(t="",n=0;n<e.length;n++)(o=e.charAt(n))in i.transformTable?t+=i.transformTable[o]:t+=o;e=t}return r=parseFloat(e.replace(/[, ]/g,"").replace("−","-")),isNaN(r)?0:r},formatFloat:function(e){var t=parseFloat(e);return isNaN(t)?0:t},formatInt:function(e){var t=parseInt(e,10);return isNaN(t)?0:t},clearTableBody:function(t){e(t.tBodies[0]).empty()}},i=e.tablesorter,e.fn.tablesorter=function(e){return i.construct(this,e)},i.addParser({id:"text",is:function(){return!0},format:function(t){if(t=e.trim(t.toLowerCase()),i.collationRegex){var o=i.collationTable;t=t.replace(i.collationRegex,function(e){return(o[e]?o[e]:o[e.toUpperCase()]).toLowerCase()})}return t},type:"text"}),i.addParser({id:"IPAddress",is:function(e){return i.rgx.IPAddress[0].test(e)},format:function(t){var i,o,n=t.split("."),r="",a=n.length;for(i=0;i<a;i++)1===(o=n[i]).length?r+="00"+o:2===o.length?r+="0"+o:r+=o;return e.tablesorter.formatFloat(r)},type:"numeric"}),i.addParser({id:"currency",is:function(e){return i.rgx.currency[0].test(e)},format:function(t){return e.tablesorter.formatDigit(t.replace(i.rgx.currency[1],""))},type:"numeric"}),i.addParser({id:"url",is:function(e){return i.rgx.url[0].test(e)},format:function(t){return e.trim(t.replace(i.rgx.url[1],""))},type:"text"}),i.addParser({id:"isoDate",is:function(e){return i.rgx.isoDate[0].test(e)},format:function(t){return e.tablesorter.formatFloat(""!==t?new Date(t.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"}),i.addParser({id:"usLongDate",is:function(e){return i.rgx.usLongDate[0].test(e)},format:function(t){return e.tablesorter.formatFloat(new Date(t).getTime())},type:"numeric"}),i.addParser({id:"date",is:function(e){return i.dateRegex[0].test(e)||i.dateRegex[1].test(e)||i.dateRegex[2].test(e)},format:function(o){var n,r;if(null!==(n=(o=e.trim(o.toLowerCase())).match(i.dateRegex[0])))if("mdy"===t.config.get("wgDefaultDateFormat")||"en"===t.config.get("wgContentLanguage"))o=[n[3],n[1],n[2]];else{if("dmy"!==t.config.get("wgDefaultDateFormat"))return"99999999";o=[n[3],n[2],n[1]]}else if(null!==(n=o.match(i.dateRegex[1])))o=[n[3],""+i.monthNames[n[2]],n[1]];else{if(null===(n=o.match(i.dateRegex[2])))return"99999999";o=[n[3],""+i.monthNames[n[1]],n[2]]}for(1===o[1].length&&(o[1]="0"+o[1]),1===o[2].length&&(o[2]="0"+o[2]),(r=parseInt(o[0],10))<100&&(o[0]=r<30?2e3+r:1900+r);o[0].length<4;)o[0]="0"+o[0];return parseInt(o.join(""),10)},type:"numeric"}),i.addParser({id:"time",is:function(e){return i.rgx.time[0].test(e)},format:function(t){return e.tablesorter.formatFloat(new Date("2000/01/01 "+t).getTime())},type:"numeric"}),i.addParser({id:"number",is:function(t){return e.tablesorter.numberRegex.test(e.trim(t))},format:function(t){return e.tablesorter.formatDigit(t)},type:"numeric"})}(jQuery,mediaWiki),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){var t=!1,i=!1,o=0,n=2e3,r=0,a=e,s=["ms","moz","webkit","o"],l=window.requestAnimationFrame||!1,c=window.cancelAnimationFrame||!1;if(!l)for(var d in s){var u=s[d];l||(l=window[u+"RequestAnimationFrame"]),c||(c=window[u+"CancelAnimationFrame"]||window[u+"CancelRequestAnimationFrame"])}var p=window.MutationObserver||window.WebKitMutationObserver||!1,h={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var e=document.getElementsByTagName("script"),t=e[e.length-1].src.split("?")[0];return t.split("/").length>0?t.split("/").slice(0,-1).join("/")+"/":""}()},f=!1,g=function(){if(f)return f;var e=document.createElement("DIV"),t={};t.haspointerlock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,t.isopera="opera"in window,t.isopera12=t.isopera&&"getUserMedia"in navigator,t.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),t.isie="all"in document&&"attachEvent"in e&&!t.isopera,t.isieold=t.isie&&!("msInterpolationMode"in e.style),t.isie7=!(!t.isie||t.isieold||"documentMode"in document&&7!=document.documentMode),t.isie8=t.isie&&"documentMode"in document&&8==document.documentMode,t.isie9=t.isie&&"performance"in window&&document.documentMode>=9,t.isie10=t.isie&&"performance"in window&&document.documentMode>=10,t.isie9mobile=/iemobile.9/i.test(navigator.userAgent),t.isie9mobile&&(t.isie9=!1),t.isie7mobile=!t.isie9mobile&&t.isie7&&/iemobile/i.test(navigator.userAgent),t.ismozilla="MozAppearance"in e.style,t.iswebkit="WebkitAppearance"in e.style,t.ischrome="chrome"in window,t.ischrome22=t.ischrome&&t.haspointerlock,t.ischrome26=t.ischrome&&"transition"in e.style,t.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,t.hasmstouch=window.navigator.msPointerEnabled||!1,t.ismac=/^mac$/i.test(navigator.platform),t.isios=t.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),t.isios4=t.isios&&!("seal"in Object),t.isandroid=/android/i.test(navigator.userAgent),t.trstyle=!1,t.hastransform=!1,t.hastranslate3d=!1,t.transitionstyle=!1,t.hastransition=!1,t.transitionend=!1;for(var i=["transform","msTransform","webkitTransform","MozTransform","OTransform"],o=0;o<i.length;o++)if(void 0!==e.style[i[o]]){t.trstyle=i[o];break}t.hastransform=0!=t.trstyle,t.hastransform&&(e.style[t.trstyle]="translate3d(1px,2px,3px)",t.hastranslate3d=/translate3d/.test(e.style[t.trstyle])),t.transitionstyle=!1,t.prefixstyle="",t.transitionend=!1;i=["transition","webkitTransition","MozTransition","OTransition","OTransition","msTransition","KhtmlTransition"];var n=["","-webkit-","-moz-","-o-","-o","-ms-","-khtml-"],r=["transitionend","webkitTransitionEnd","transitionend","otransitionend","oTransitionEnd","msTransitionEnd","KhtmlTransitionEnd"];for(o=0;o<i.length;o++)if(i[o]in e.style){t.transitionstyle=i[o],t.prefixstyle=n[o],t.transitionend=r[o];break}return t.ischrome26&&(t.prefixstyle=n[1]),t.hastransition=t.transitionstyle,t.cursorgrabvalue=function(){var i=["-moz-grab","-webkit-grab","grab"];(t.ischrome&&!t.ischrome22||t.isie)&&(i=[]);for(var o=0;o<i.length;o++){var n=i[o];if(e.style.cursor=n,e.style.cursor==n)return n}return"url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}(),t.hasmousecapture="setCapture"in e,t.hasMutationObserver=!1!==p,e=null,f=t,t},m=function(e,s){function d(){var e=w.doc.css(b.trstyle);return!(!e||"matrix"!=e.substr(0,6))&&e.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/)}function u(e,t,i){var o=e.css(t),n=parseFloat(o);if(isNaN(n)){var r=3==(n=S[o]||0)?i?w.win.outerHeight()-w.win.innerHeight():w.win.outerWidth()-w.win.innerWidth():1;return w.isie8&&n&&(n+=1),r?n:0}return n}function f(e,t,i,o){w._bind(e,t,function(o){var n={original:o=o||window.event,target:o.target||o.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==o.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return o.preventDefault?o.preventDefault():o.returnValue=!1,!1},stopImmediatePropagation:function(){o.stopImmediatePropagation?o.stopImmediatePropagation():o.cancelBubble=!0}};return"mousewheel"==t?(n.deltaY=-.025*o.wheelDelta,o.wheelDeltaX&&(n.deltaX=-.025*o.wheelDeltaX)):n.deltaY=o.detail,i.call(e,n)},o)}function m(e,t,i){var o,n;if(0==e.deltaMode?(o=-Math.floor(e.deltaX*(w.opt.mousescrollstep/54)),n=-Math.floor(e.deltaY*(w.opt.mousescrollstep/54))):1==e.deltaMode&&(o=-Math.floor(e.deltaX*w.opt.mousescrollstep),n=-Math.floor(e.deltaY*w.opt.mousescrollstep)),t&&w.opt.oneaxismousemode&&0==o&&n&&(o=n,n=0),o&&(w.scrollmom&&w.scrollmom.stop(),w.lastdeltax+=o,w.debounced("mousewheelx",function(){var e=w.lastdeltax;w.lastdeltax=0,w.rail.drag||w.doScrollLeftBy(e)},15)),n){if(w.opt.nativeparentscrolling&&i&&!w.ispage&&!w.zoomactive)if(0>n){if(w.getScrollTop()>=w.page.maxh)return!0}else if(w.getScrollTop()<=0)return!0;w.scrollmom&&w.scrollmom.stop(),w.lastdeltay+=n,w.debounced("mousewheely",function(){var e=w.lastdeltay;w.lastdeltay=0,w.rail.drag||w.doScrollBy(e)},15)}return e.stopImmediatePropagation(),e.preventDefault()}var w=this;if(this.version="3.5.6",this.name="nicescroll",this.me=s,this.opt={doc:a("body"),win:!1},a.extend(this.opt,h),this.opt.snapbackspeed=80,e)for(var y in w.opt)void 0!==e[y]&&(w.opt[y]=e[y]);this.doc=w.opt.doc,this.iddoc=this.doc&&this.doc[0]&&this.doc[0].id||"",this.ispage=/^BODY|HTML/.test(w.opt.win?w.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==w.opt.win,this.win=w.opt.win||(this.ispage?a(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?a(window):this.win,this.body=a("body"),this.viewport=!1,this.isfixed=!1,this.iframe=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=w.opt.autohidemode,this.onmousedown=!1,this.onmouseup=!1,this.onmousemove=!1,this.onmousewheel=!1,this.onkeypress=!1,this.ongesturezoom=!1,this.onclick=!1,this.onscrollstart=!1,this.onscrollend=!1,this.onscrollcancel=!1,this.onzoomin=!1,this.onzoomout=!1,this.view=!1,this.page=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):!0===this.opt.rtlmode,this.scrollrunning=!1,this.scrollmom=!1,this.observer=!1,this.observerremover=!1;do{this.id="ascrail"+n++}while(document.getElementById(this.id));this.rail=!1,this.cursor=!1,this.cursorfreezed=!1,this.selectiondrag=!1,this.zoom=!1,this.zoomactive=!1,this.hasfocus=!1,this.hasmousefocus=!1,this.visibility=!0,this.locked=!1,this.hidden=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=w.opt.overflowx,this.overflowy=w.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltax=0,this.lastdeltay=0,this.detected=g();var b=a.extend({},this.detected);this.canhwscroll=b.hastransform&&w.opt.hwacceleration,this.ishwscroll=this.canhwscroll&&w.haswrapper,this.istouchcapable=!1,b.cantouch&&b.iswebkit&&!b.isios&&!b.isandroid&&(this.istouchcapable=!0,b.cantouch=!1),b.cantouch&&b.ismozilla&&!b.isios&&!b.isandroid&&(this.istouchcapable=!0,b.cantouch=!1),w.opt.enablemouselockapi||(b.hasmousecapture=!1,b.haspointerlock=!1),this.delayed=function(e,t,i,o){var n=w.delaylist[e],r=(new Date).getTime();return!(!o&&n&&n.tt)&&(n&&n.tt&&clearTimeout(n.tt),void(n&&n.last+i>r&&!n.tt?w.delaylist[e]={last:r+i,tt:setTimeout(function(){w&&(w.delaylist[e].tt=0,t.call())},i)}:n&&n.tt||(w.delaylist[e]={last:r,tt:0},setTimeout(function(){t.call()},0))))},this.debounced=function(e,t,i){var o=w.delaylist[e];(new Date).getTime(),w.delaylist[e]=t,o||setTimeout(function(){var t=w.delaylist[e];w.delaylist[e]=!1,t.call()},i)};var k=!1;if(this.synched=function(e,t){return w.synclist[e]=t,k||(l(function(){for(e in k=!1,w.synclist){var t=w.synclist[e];t&&t.call(w),w.synclist[e]=!1}}),k=!0),e},this.unsynched=function(e){w.synclist[e]&&(w.synclist[e]=!1)},this.css=function(e,t){for(var i in t)w.saved.css.push([e,i,e.css(i)]),e.css(i,t[i])},this.scrollTop=function(e){return void 0===e?w.getScrollTop():w.setScrollTop(e)},this.scrollLeft=function(e){return void 0===e?w.getScrollLeft():w.setScrollLeft(e)},BezierClass=function(e,t,i,o,n,r,a){this.st=e,this.ed=t,this.spd=i,this.p1=o||0,this.p2=n||1,this.p3=r||0,this.p4=a||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(e){return 3*e*e*(1-e)},B3:function(e){return 3*e*(1-e)*(1-e)},B4:function(e){return(1-e)*(1-e)*(1-e)},getNow:function(){var e=1-((new Date).getTime()-this.ts)/this.spd,t=this.B2(e)+this.B3(e)+this.B4(e);return 0>e?this.ed:this.st+Math.round(this.df*t)},update:function(e,t){return this.st=this.getNow(),this.ed=e,this.spd=t,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},b.hastranslate3d&&b.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(e){if(!e){var t=d();if(t)return 16==t.length?-t[13]:-t[5];if(w.timerscroll&&w.timerscroll.bz)return w.timerscroll.bz.getNow()}return w.doc.translate.y},this.getScrollLeft=function(e){if(!e){var t=d();if(t)return 16==t.length?-t[12]:-t[4];if(w.timerscroll&&w.timerscroll.bh)return w.timerscroll.bh.getNow()}return w.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(e){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!1,!0,window,1),e.dispatchEvent(t)}:document.fireEvent?function(e){var t=document.createEventObject();e.fireEvent("onscroll"),t.cancelBubble=!0}:function(){};var x=this.isrtlmode?1:-1;b.hastranslate3d&&w.opt.enabletranslate3d?(this.setScrollTop=function(e,t){w.doc.translate.y=e,w.doc.translate.ty=-1*e+"px",w.doc.css(b.trstyle,"translate3d("+w.doc.translate.tx+","+w.doc.translate.ty+",0px)"),t||w.notifyScrollEvent(w.win[0])},this.setScrollLeft=function(e,t){w.doc.translate.x=e,w.doc.translate.tx=e*x+"px",w.doc.css(b.trstyle,"translate3d("+w.doc.translate.tx+","+w.doc.translate.ty+",0px)"),t||w.notifyScrollEvent(w.win[0])}):(this.setScrollTop=function(e,t){w.doc.translate.y=e,w.doc.translate.ty=-1*e+"px",w.doc.css(b.trstyle,"translate("+w.doc.translate.tx+","+w.doc.translate.ty+")"),t||w.notifyScrollEvent(w.win[0])},this.setScrollLeft=function(e,t){w.doc.translate.x=e,w.doc.translate.tx=e*x+"px",w.doc.css(b.trstyle,"translate("+w.doc.translate.tx+","+w.doc.translate.ty+")"),t||w.notifyScrollEvent(w.win[0])})}else this.getScrollTop=function(){return w.docscroll.scrollTop()},this.setScrollTop=function(e){return w.docscroll.scrollTop(e)},this.getScrollLeft=function(){return w.detected.ismozilla&&w.isrtlmode?Math.abs(w.docscroll.scrollLeft()):w.docscroll.scrollLeft()},this.setScrollLeft=function(e){return w.docscroll.scrollLeft(w.detected.ismozilla&&w.isrtlmode?-e:e)};this.getTarget=function(e){return!!e&&(e.target?e.target:!!e.srcElement&&e.srcElement)},this.hasParent=function(e,t){if(!e)return!1;for(var i=e.target||e.srcElement||e||!1;i&&i.id!=t;)i=i.parentNode||!1;return!1!==i};var S={thin:1,medium:3,thick:5};this.getOffset=function(){if(w.isfixed)return{top:parseFloat(w.win.css("top")),left:parseFloat(w.win.css("left"))};if(!w.viewport)return w.win.offset();var e=w.win.offset(),t=w.viewport.offset();return{top:e.top-t.top+w.viewport.scrollTop(),left:e.left-t.left+w.viewport.scrollLeft()}},this.updateScrollBar=function(e){if(w.ishwscroll)w.rail.css({height:w.win.innerHeight()}),w.railh&&w.railh.css({width:w.win.innerWidth()});else{var t=w.getOffset();if((o={top:t.top,left:t.left}).top+=u(w.win,"border-top-width",!0),w.win.outerWidth(),w.win.innerWidth(),o.left+=w.rail.align?w.win.outerWidth()-u(w.win,"border-right-width")-w.rail.width:u(w.win,"border-left-width"),(i=w.opt.railoffset)&&(i.top&&(o.top+=i.top),w.rail.align&&i.left&&(o.left+=i.left)),w.locked||w.rail.css({top:o.top,left:o.left,height:e?e.h:w.win.innerHeight()}),w.zoom&&w.zoom.css({top:o.top+1,left:1==w.rail.align?o.left-20:o.left+w.rail.width+4}),w.railh&&!w.locked){var i,o={top:t.top,left:t.left};(i=w.opt.railhoffset)&&(i.top&&(o.top+=i.top),i.left&&(o.left+=i.left));var n=w.railh.align?o.top+u(w.win,"border-top-width",!0)+w.win.innerHeight()-w.railh.height:o.top+u(w.win,"border-top-width",!0),r=o.left+u(w.win,"border-left-width");w.railh.css({top:n,left:r,width:w.railh.width})}}},this.doRailClick=function(e,t,i){var o,n,r,a;w.locked||(w.cancelEvent(e),t?(o=i?w.doScrollLeft:w.doScrollTop)(r=i?(e.pageX-w.railh.offset().left-w.cursorwidth/2)*w.scrollratio.x:(e.pageY-w.rail.offset().top-w.cursorheight/2)*w.scrollratio.y):(o=i?w.doScrollLeftBy:w.doScrollBy,r=i?w.scroll.x:w.scroll.y,a=i?e.pageX-w.railh.offset().left:e.pageY-w.rail.offset().top,n=i?w.view.w:w.view.h,o(r>=a?n:-n)))},w.hasanimationframe=l,w.hascancelanimationframe=c,w.hasanimationframe?w.hascancelanimationframe||(c=function(){w.cancelAnimationFrame=!0}):(l=function(e){return setTimeout(e,15-Math.floor(+new Date/1e3)%16)},c=clearInterval),this.init=function(){function e(){w.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document;e.domain}catch(t){w.iframexd=!0,e=!1}if(w.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(w.forcescreen=!0,w.isiframe&&(w.iframe={doc:a(e),html:w.doc.contents().find("html")[0],body:w.doc.contents().find("body")[0]},w.getContentSize=function(){return{w:Math.max(w.iframe.html.scrollWidth,w.iframe.body.scrollWidth),h:Math.max(w.iframe.html.scrollHeight,w.iframe.body.scrollHeight)}},w.docscroll=a(w.iframe.body)),!b.isios&&w.opt.iframeautoresize&&!w.isiframe){w.win.scrollTop(0),w.doc.height("");var t=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);w.doc.height(t)}w.lazyResize(30),b.isie7&&w.css(a(w.iframe.html),{"overflow-y":"hidden"}),w.css(a(w.iframe.body),{"overflow-y":"hidden"}),b.isios&&w.haswrapper&&w.css(a(e.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?w.bind(this.contentWindow,"scroll",w.onscroll):w.bind(e,"scroll",w.onscroll),w.opt.enablemousewheel&&w.bind(e,"mousewheel",w.onmousewheel),w.opt.enablekeyboard&&w.bind(e,b.isopera?"keypress":"keydown",w.onkeypress),(b.cantouch||w.opt.touchbehavior)&&(w.bind(e,"mousedown",w.ontouchstart),w.bind(e,"mousemove",function(e){w.ontouchmove(e,!0)}),w.opt.grabcursorenabled&&b.cursorgrabvalue&&w.css(a(e.body),{cursor:b.cursorgrabvalue})),w.bind(e,"mouseup",w.ontouchend),w.zoom&&(w.opt.dblclickzoom&&w.bind(e,"dblclick",w.doZoom),w.ongesturezoom&&w.bind(e,"gestureend",w.ongesturezoom))}if(w.saved.css=[],b.isie7mobile)return!0;if(b.isoperamini)return!0;if(b.hasmstouch&&w.css(w.ispage?a("html"):w.win,{"-ms-touch-action":"none"}),w.zindex="auto",w.zindex=w.ispage||"auto"!=w.opt.zindex?w.opt.zindex:function(){var e=w.win;if("zIndex"in e)return e.zIndex();for(;e.length>0;){if(9==e[0].nodeType)return!1;var t=e.css("zIndex");if(!isNaN(t)&&0!=t)return parseInt(t);e=e.parent()}return!1}()||"auto",w.ispage||"auto"==w.zindex||w.zindex>r&&(r=w.zindex),w.isie&&0==w.zindex&&"auto"==w.opt.zindex&&(w.zindex="auto"),!w.ispage||!b.cantouch&&!b.isieold&&!b.isie9mobile){var n=w.docscroll;w.ispage&&(n=w.haswrapper?w.win:w.doc),b.isie9mobile||w.css(n,{"overflow-y":"hidden"}),w.ispage&&b.isie7&&("BODY"==w.doc[0].nodeName?w.css(a("html"),{"overflow-y":"hidden"}):"HTML"==w.doc[0].nodeName&&w.css(a("body"),{"overflow-y":"hidden"})),!b.isios||w.ispage||w.haswrapper||w.css(a("body"),{"-webkit-overflow-scrolling":"touch"}),(f=a(document.createElement("div"))).css({position:"relative",top:0,float:"right",width:w.opt.cursorwidth,height:"0px","background-color":w.opt.cursorcolor,border:w.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":w.opt.cursorborderradius,"-moz-border-radius":w.opt.cursorborderradius,"border-radius":w.opt.cursorborderradius}),f.hborder=parseFloat(f.outerHeight()-f.innerHeight()),w.cursor=f;var s=a(document.createElement("div"));s.attr("id",w.id),s.addClass("nicescroll-rails");var l,c,d=["left","right"];for(var u in d)c=d[u],(l=w.opt.railpadding[c])?s.css("padding-"+c,l+"px"):w.opt.railpadding[c]=0;s.append(f),s.width=Math.max(parseFloat(w.opt.cursorwidth),f.outerWidth())+w.opt.railpadding.left+w.opt.railpadding.right,s.css({width:s.width+"px",zIndex:w.zindex,background:w.opt.background,cursor:"default"}),s.visibility=!0,s.scrollable=!0,s.align="left"==w.opt.railalign?0:1,w.rail=s,w.rail.drag=!1;var h=!1;if(!w.opt.boxzoom||w.ispage||b.isieold||(h=document.createElement("div"),w.bind(h,"click",w.doZoom),w.zoom=a(h),w.zoom.css({cursor:"pointer","z-index":w.zindex,backgroundImage:"url("+w.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),w.opt.dblclickzoom&&w.bind(w.win,"dblclick",w.doZoom),b.cantouch&&w.opt.gesturezoom&&(w.ongesturezoom=function(e){return e.scale>1.5&&w.doZoomIn(e),e.scale<.8&&w.doZoomOut(e),w.cancelEvent(e)},w.bind(w.win,"gestureend",w.ongesturezoom))),w.railh=!1,w.opt.horizrailenabled){var f;w.css(n,{"overflow-x":"hidden"}),(f=a(document.createElement("div"))).css({position:"absolute",top:0,height:w.opt.cursorwidth,width:"0px","background-color":w.opt.cursorcolor,border:w.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":w.opt.cursorborderradius,"-moz-border-radius":w.opt.cursorborderradius,"border-radius":w.opt.cursorborderradius}),f.wborder=parseFloat(f.outerWidth()-f.innerWidth()),w.cursorh=f;var g=a(document.createElement("div"));g.attr("id",w.id+"-hr"),g.addClass("nicescroll-rails"),g.height=Math.max(parseFloat(w.opt.cursorwidth),f.outerHeight()),g.css({height:g.height+"px",zIndex:w.zindex,background:w.opt.background}),g.append(f),g.visibility=!0,g.scrollable=!0,g.align="top"==w.opt.railvalign?0:1,w.railh=g,w.railh.drag=!1}if(w.ispage)s.css({position:"fixed",top:"0px",height:"100%"}),s.css(s.align?{right:"0px"}:{left:"0px"}),w.body.append(s),w.railh&&(g.css({position:"fixed",left:"0px",width:"100%"}),g.css(g.align?{bottom:"0px"}:{top:"0px"}),w.body.append(g));else{if(w.ishwscroll){"static"==w.win.css("position")&&w.css(w.win,{position:"relative"});var m="HTML"==w.win[0].nodeName?w.body:w.win;w.zoom&&(w.zoom.css({position:"absolute",top:1,right:0,"margin-right":s.width+4}),m.append(w.zoom)),s.css({position:"absolute",top:0}),s.css(s.align?{right:0}:{left:0}),m.append(s),g&&(g.css({position:"absolute",left:0,bottom:0}),g.css(g.align?{bottom:0}:{top:0}),m.append(g))}else{w.isfixed="fixed"==w.win.css("position");var y=w.isfixed?"fixed":"absolute";w.isfixed||(w.viewport=w.getViewport(w.win[0])),w.viewport&&(w.body=w.viewport,0==/fixed|relative|absolute/.test(w.viewport.css("position"))&&w.css(w.viewport,{position:"relative"})),s.css({position:y}),w.zoom&&w.zoom.css({position:y}),w.updateScrollBar(),w.body.append(s),w.zoom&&w.body.append(w.zoom),w.railh&&(g.css({position:y}),w.body.append(g))}b.isios&&w.css(w.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),b.isie&&w.opt.disableoutline&&w.win.attr("hideFocus","true"),b.iswebkit&&w.opt.disableoutline&&w.win.css({outline:"none"})}if(!1===w.opt.autohidemode?(w.autohidedom=!1,w.rail.css({opacity:w.opt.cursoropacitymax}),w.railh&&w.railh.css({opacity:w.opt.cursoropacitymax})):!0===w.opt.autohidemode||"leave"===w.opt.autohidemode?(w.autohidedom=a().add(w.rail),b.isie8&&(w.autohidedom=w.autohidedom.add(w.cursor)),w.railh&&(w.autohidedom=w.autohidedom.add(w.railh)),w.railh&&b.isie8&&(w.autohidedom=w.autohidedom.add(w.cursorh))):"scroll"==w.opt.autohidemode?(w.autohidedom=a().add(w.rail),w.railh&&(w.autohidedom=w.autohidedom.add(w.railh))):"cursor"==w.opt.autohidemode?(w.autohidedom=a().add(w.cursor),w.railh&&(w.autohidedom=w.autohidedom.add(w.cursorh))):"hidden"==w.opt.autohidemode&&(w.autohidedom=!1,w.hide(),w.locked=!1),b.isie9mobile){w.scrollmom=new v(w),w.onmangotouch=function(){var e=w.getScrollTop(),t=w.getScrollLeft();if(e==w.scrollmom.lastscrolly&&t==w.scrollmom.lastscrollx)return!0;var i=e-w.mangotouch.sy,o=t-w.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(o,2)+Math.pow(i,2)))){var n=0>i?-1:1,r=0>o?-1:1,a=+new Date;if(w.mangotouch.lazy&&clearTimeout(w.mangotouch.lazy),a-w.mangotouch.tm>80||w.mangotouch.dry!=n||w.mangotouch.drx!=r)w.scrollmom.stop(),w.scrollmom.reset(t,e),w.mangotouch.sy=e,w.mangotouch.ly=e,w.mangotouch.sx=t,w.mangotouch.lx=t,w.mangotouch.dry=n,w.mangotouch.drx=r,w.mangotouch.tm=a;else{w.scrollmom.stop(),w.scrollmom.update(w.mangotouch.sx-o,w.mangotouch.sy-i),w.mangotouch.tm,w.mangotouch.tm=a;var s=Math.max(Math.abs(w.mangotouch.ly-e),Math.abs(w.mangotouch.lx-t));w.mangotouch.ly=e,w.mangotouch.lx=t,s>2&&(w.mangotouch.lazy=setTimeout(function(){w.mangotouch.lazy=!1,w.mangotouch.dry=0,w.mangotouch.drx=0,w.mangotouch.tm=0,w.scrollmom.doMomentum(30)},100))}}};var k=w.getScrollTop(),x=w.getScrollLeft();w.mangotouch={sy:k,ly:k,dry:0,sx:x,lx:x,drx:0,lazy:!1,tm:0},w.bind(w.docscroll,"scroll",w.onmangotouch)}else{if(b.cantouch||w.istouchcapable||w.opt.touchbehavior||b.hasmstouch){w.scrollmom=new v(w),w.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(w.hasmoving=!1,!w.locked){if(b.hasmstouch)for(var t=!!e.target&&e.target;t;){var i=a(t).getNiceScroll();if(i.length>0&&i[0].me==w.me)break;if(i.length>0)return!1;if("DIV"==t.nodeName&&t.id==w.id)break;t=!!t.parentNode&&t.parentNode}if(w.cancelScroll(),t=w.getTarget(e))if(/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return w.stopPropagation(e);if(!("clientX"in e)&&"changedTouches"in e&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),w.forcescreen){var o=e;(e={original:e.original?e.original:e}).clientX=o.screenX,e.clientY=o.screenY}if(w.rail.drag={x:e.clientX,y:e.clientY,sx:w.scroll.x,sy:w.scroll.y,st:w.getScrollTop(),sl:w.getScrollLeft(),pt:2,dl:!1},w.ispage||!w.opt.directionlockdeadzone)w.rail.drag.dl="f";else{var n={w:a(window).width(),h:a(window).height()},r={w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},s=Math.max(0,r.h-n.h),l=Math.max(0,r.w-n.w);w.rail.drag.ck=!w.rail.scrollable&&w.railh.scrollable?s>0&&"v":!!(w.rail.scrollable&&!w.railh.scrollable&&l>0)&&"h",w.rail.drag.ck||(w.rail.drag.dl="f")}if(w.opt.touchbehavior&&w.isiframe&&b.isie){var c=w.win.position();w.rail.drag.x+=c.left,w.rail.drag.y+=c.top}if(w.hasmoving=!1,w.lastmouseup=!1,w.scrollmom.reset(e.clientX,e.clientY),!b.cantouch&&!this.istouchcapable&&!b.hasmstouch){if(!(!!t&&/INPUT|SELECT|TEXTAREA/i.test(t.nodeName)))return!w.ispage&&b.hasmousecapture&&t.setCapture(),w.opt.touchbehavior?(t.onclick&&!t._onclick&&(t._onclick=t.onclick,t.onclick=function(e){return!w.hasmoving&&void t._onclick.call(this,e)}),w.cancelEvent(e)):w.stopPropagation(e);/SUBMIT|CANCEL|BUTTON/i.test(a(t).attr("type"))&&(pc={tg:t,click:!1},w.preventclick=pc)}}},w.ontouchend=function(e){return(!e.pointerType||2==e.pointerType||"touch"==e.pointerType)&&(w.rail.drag&&2==w.rail.drag.pt&&(w.scrollmom.doMomentum(),w.rail.drag=!1,w.hasmoving&&(w.lastmouseup=!0,w.hideCursor(),b.hasmousecapture&&document.releaseCapture(),!b.cantouch))?w.cancelEvent(e):void 0)};var S=w.opt.touchbehavior&&w.isiframe&&!b.hasmousecapture;w.ontouchmove=function(e,t){if(e.pointerType&&2!=e.pointerType&&"touch"!=e.pointerType)return!1;if(w.rail.drag&&2==w.rail.drag.pt){if(b.cantouch&&void 0===e.original)return!0;if(w.hasmoving=!0,w.preventclick&&!w.preventclick.click&&(w.preventclick.click=w.preventclick.tg.onclick||!1,w.preventclick.tg.onclick=w.onpreventclick),"changedTouches"in(e=a.extend({original:e},e))&&(e.clientX=e.changedTouches[0].clientX,e.clientY=e.changedTouches[0].clientY),w.forcescreen){var i=e;(e={original:e.original?e.original:e}).clientX=i.screenX,e.clientY=i.screenY}var o=ofy=0;if(S&&!t){var n=w.win.position();o=-n.left,ofy=-n.top}var r=e.clientY+ofy,s=r-w.rail.drag.y,l=e.clientX+o,c=l-w.rail.drag.x,d=w.rail.drag.st-s;if(w.ishwscroll&&w.opt.bouncescroll?0>d?d=Math.round(d/2):d>w.page.maxh&&(d=w.page.maxh+Math.round((d-w.page.maxh)/2)):(0>d&&(d=0,r=0),d>w.page.maxh&&(d=w.page.maxh,r=0)),w.railh&&w.railh.scrollable){var u=w.isrtlmode?c-w.rail.drag.sl:w.rail.drag.sl-c;w.ishwscroll&&w.opt.bouncescroll?0>u?u=Math.round(u/2):u>w.page.maxw&&(u=w.page.maxw+Math.round((u-w.page.maxw)/2)):(0>u&&(u=0,l=0),u>w.page.maxw&&(u=w.page.maxw,l=0))}var p=!1;if(w.rail.drag.dl)p=!0,"v"==w.rail.drag.dl?u=w.rail.drag.sl:"h"==w.rail.drag.dl&&(d=w.rail.drag.st);else{var h=Math.abs(s),f=Math.abs(c),g=w.opt.directionlockdeadzone;if("v"==w.rail.drag.ck){if(h>g&&.3*h>=f)return w.rail.drag=!1,!0;f>g&&(w.rail.drag.dl="f",a("body").scrollTop(a("body").scrollTop()))}else if("h"==w.rail.drag.ck){if(f>g&&.3*f>=h)return w.rail.drag=!1,!0;h>g&&(w.rail.drag.dl="f",a("body").scrollLeft(a("body").scrollLeft()))}}if(w.synched("touchmove",function(){w.rail.drag&&2==w.rail.drag.pt&&(w.prepareTransition&&w.prepareTransition(0),w.rail.scrollable&&w.setScrollTop(d),w.scrollmom.update(l,r),w.railh&&w.railh.scrollable?(w.setScrollLeft(u),w.showCursor(d,u)):w.showCursor(d),b.isie10&&document.selection.clear())}),b.ischrome&&w.istouchcapable&&(p=!1),p)return w.cancelEvent(e)}}}w.onmousedown=function(e,t){if(!w.rail.drag||1==w.rail.drag.pt){if(w.locked)return w.cancelEvent(e);w.cancelScroll(),w.rail.drag={x:e.clientX,y:e.clientY,sx:w.scroll.x,sy:w.scroll.y,pt:1,hr:!!t};var i=w.getTarget(e);return!w.ispage&&b.hasmousecapture&&i.setCapture(),w.isiframe&&!b.hasmousecapture&&(w.saved.csspointerevents=w.doc.css("pointer-events"),w.css(w.doc,{"pointer-events":"none"})),w.hasmoving=!1,w.cancelEvent(e)}},w.onmouseup=function(e){if(w.rail.drag){if(b.hasmousecapture&&document.releaseCapture(),w.isiframe&&!b.hasmousecapture&&w.doc.css("pointer-events",w.saved.csspointerevents),1!=w.rail.drag.pt)return;return w.rail.drag=!1,w.hasmoving&&w.triggerScrollEnd(),w.cancelEvent(e)}},w.onmousemove=function(e){if(w.rail.drag){if(1!=w.rail.drag.pt)return;if(b.ischrome&&0==e.which)return w.onmouseup(e);if(w.cursorfreezed=!0,w.hasmoving=!0,w.rail.drag.hr){w.scroll.x=w.rail.drag.sx+(e.clientX-w.rail.drag.x),w.scroll.x<0&&(w.scroll.x=0);var t=w.scrollvaluemaxw;w.scroll.x>t&&(w.scroll.x=t)}else{w.scroll.y=w.rail.drag.sy+(e.clientY-w.rail.drag.y),w.scroll.y<0&&(w.scroll.y=0);var i=w.scrollvaluemax;w.scroll.y>i&&(w.scroll.y=i)}return w.synched("mousemove",function(){w.rail.drag&&1==w.rail.drag.pt&&(w.showCursor(),w.rail.drag.hr?w.doScrollLeft(Math.round(w.scroll.x*w.scrollratio.x),w.opt.cursordragspeed):w.doScrollTop(Math.round(w.scroll.y*w.scrollratio.y),w.opt.cursordragspeed))}),w.cancelEvent(e)}},b.cantouch||w.opt.touchbehavior?(w.onpreventclick=function(e){return w.preventclick?(w.preventclick.tg.onclick=w.preventclick.click,w.preventclick=!1,w.cancelEvent(e)):void 0},w.bind(w.win,"mousedown",w.ontouchstart),w.onclick=!b.isios&&function(e){return!w.lastmouseup||(w.lastmouseup=!1,w.cancelEvent(e))},w.opt.grabcursorenabled&&b.cursorgrabvalue&&(w.css(w.ispage?w.doc:w.win,{cursor:b.cursorgrabvalue}),w.css(w.rail,{cursor:b.cursorgrabvalue}))):(w.hasTextSelected="getSelection"in document?function(){return document.getSelection().rangeCount>0}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},w.onselectionstart=function(){w.ispage||(w.selectiondrag=w.win.offset())},w.onselectionend=function(){w.selectiondrag=!1},w.onselectiondrag=function(e){w.selectiondrag&&w.hasTextSelected()&&w.debounced("selectionscroll",function(){!function e(t){if(w.selectiondrag){if(t){var i=w.win.outerHeight(),o=t.pageY-w.selectiondrag.top;o>0&&i>o&&(o=0),o>=i&&(o-=i),w.selectiondrag.df=o}if(0!=w.selectiondrag.df){var n=2*-Math.floor(w.selectiondrag.df/6);w.doScrollBy(n),w.debounced("doselectionscroll",function(){e()},50)}}}(e)},250)}),b.hasmstouch&&(w.css(w.rail,{"-ms-touch-action":"none"}),w.css(w.cursor,{"-ms-touch-action":"none"}),w.bind(w.win,"MSPointerDown",w.ontouchstart),w.bind(document,"MSPointerUp",w.ontouchend),w.bind(document,"MSPointerMove",w.ontouchmove),w.bind(w.cursor,"MSGestureHold",function(e){e.preventDefault()}),w.bind(w.cursor,"contextmenu",function(e){e.preventDefault()})),this.istouchcapable&&(w.bind(w.win,"touchstart",w.ontouchstart),w.bind(document,"touchend",w.ontouchend),w.bind(document,"touchcancel",w.ontouchend),w.bind(document,"touchmove",w.ontouchmove)),w.bind(w.cursor,"mousedown",w.onmousedown),w.bind(w.cursor,"mouseup",w.onmouseup),w.railh&&(w.bind(w.cursorh,"mousedown",function(e){w.onmousedown(e,!0)}),w.bind(w.cursorh,"mouseup",w.onmouseup)),(w.opt.cursordragontouch||!b.cantouch&&!w.opt.touchbehavior)&&(w.rail.css({cursor:"default"}),w.railh&&w.railh.css({cursor:"default"}),w.jqbind(w.rail,"mouseenter",function(){return!!w.win.is(":visible")&&(w.canshowonmouseevent&&w.showCursor(),void(w.rail.active=!0))}),w.jqbind(w.rail,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}),w.opt.sensitiverail&&(w.bind(w.rail,"click",function(e){w.doRailClick(e,!1,!1)}),w.bind(w.rail,"dblclick",function(e){w.doRailClick(e,!0,!1)}),w.bind(w.cursor,"click",function(e){w.cancelEvent(e)}),w.bind(w.cursor,"dblclick",function(e){w.cancelEvent(e)})),w.railh&&(w.jqbind(w.railh,"mouseenter",function(){return!!w.win.is(":visible")&&(w.canshowonmouseevent&&w.showCursor(),void(w.rail.active=!0))}),w.jqbind(w.railh,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}),w.opt.sensitiverail&&(w.bind(w.railh,"click",function(e){w.doRailClick(e,!1,!0)}),w.bind(w.railh,"dblclick",function(e){w.doRailClick(e,!0,!0)}),w.bind(w.cursorh,"click",function(e){w.cancelEvent(e)}),w.bind(w.cursorh,"dblclick",function(e){w.cancelEvent(e)})))),b.cantouch||w.opt.touchbehavior?(w.bind(b.hasmousecapture?w.win:document,"mouseup",w.ontouchend),w.bind(document,"mousemove",w.ontouchmove),w.onclick&&w.bind(document,"click",w.onclick),w.opt.cursordragontouch&&(w.bind(w.cursor,"mousedown",w.onmousedown),w.bind(w.cursor,"mousemove",w.onmousemove),w.cursorh&&w.bind(w.cursorh,"mousedown",function(e){w.onmousedown(e,!0)}),w.cursorh&&w.bind(w.cursorh,"mousemove",w.onmousemove))):(w.bind(b.hasmousecapture?w.win:document,"mouseup",w.onmouseup),w.bind(document,"mousemove",w.onmousemove),w.onclick&&w.bind(document,"click",w.onclick),!w.ispage&&w.opt.enablescrollonselection&&(w.bind(w.win[0],"mousedown",w.onselectionstart),w.bind(document,"mouseup",w.onselectionend),w.bind(w.cursor,"mouseup",w.onselectionend),w.cursorh&&w.bind(w.cursorh,"mouseup",w.onselectionend),w.bind(document,"mousemove",w.onselectiondrag)),w.zoom&&(w.jqbind(w.zoom,"mouseenter",function(){w.canshowonmouseevent&&w.showCursor(),w.rail.active=!0}),w.jqbind(w.zoom,"mouseleave",function(){w.rail.active=!1,w.rail.drag||w.hideCursor()}))),w.opt.enablemousewheel&&(w.isiframe||w.bind(b.isie&&w.ispage?document:w.win,"mousewheel",w.onmousewheel),w.bind(w.rail,"mousewheel",w.onmousewheel),w.railh&&w.bind(w.railh,"mousewheel",w.onmousewheelhr)),w.ispage||b.cantouch||/HTML|^BODY/.test(w.win[0].nodeName)||(w.win.attr("tabindex")||w.win.attr({tabindex:o++}),w.jqbind(w.win,"focus",function(e){t=w.getTarget(e).id||!0,w.hasfocus=!0,w.canshowonmouseevent&&w.noticeCursor()}),w.jqbind(w.win,"blur",function(){t=!1,w.hasfocus=!1}),w.jqbind(w.win,"mouseenter",function(e){i=w.getTarget(e).id||!0,w.hasmousefocus=!0,w.canshowonmouseevent&&w.noticeCursor()}),w.jqbind(w.win,"mouseleave",function(){i=!1,w.hasmousefocus=!1,w.rail.drag||w.hideCursor()}))}if(w.onkeypress=function(e){if(w.locked&&0==w.page.maxh)return!0;e=e||window.e;var o=w.getTarget(e);if(o&&/INPUT|TEXTAREA|SELECT|OPTION/.test(o.nodeName)&&(!(o.getAttribute("type")||o.type||!1)||!/submit|button|cancel/i.tp))return!0;if(a(o).attr("contenteditable"))return!0;if(w.hasfocus||w.hasmousefocus&&!t||w.ispage&&!t&&!i){var n=e.keyCode;if(w.locked&&27!=n)return w.cancelEvent(e);var r=e.ctrlKey||!1,s=e.shiftKey||!1,l=!1;switch(n){case 38:case 63233:w.doScrollBy(72),l=!0;break;case 40:case 63235:w.doScrollBy(-72),l=!0;break;case 37:case 63232:w.railh&&(r?w.doScrollLeft(0):w.doScrollLeftBy(72),l=!0);break;case 39:case 63234:w.railh&&(r?w.doScrollLeft(w.page.maxw):w.doScrollLeftBy(-72),l=!0);break;case 33:case 63276:w.doScrollBy(w.view.h),l=!0;break;case 34:case 63277:w.doScrollBy(-w.view.h),l=!0;break;case 36:case 63273:w.railh&&r?w.doScrollPos(0,0):w.doScrollTo(0),l=!0;break;case 35:case 63275:w.railh&&r?w.doScrollPos(w.page.maxw,w.page.maxh):w.doScrollTo(w.page.maxh),l=!0;break;case 32:w.opt.spacebarenabled&&(w.doScrollBy(s?w.view.h:-w.view.h),l=!0);break;case 27:w.zoomactive&&(w.doZoom(),l=!0)}if(l)return w.cancelEvent(e)}},w.opt.enablekeyboard&&w.bind(document,b.isopera&&!b.isopera12?"keypress":"keydown",w.onkeypress),w.bind(document,"keydown",function(e){(e.ctrlKey||!1)&&(w.wheelprevented=!0)}),w.bind(document,"keyup",function(e){e.ctrlKey||!1||(w.wheelprevented=!1)}),w.bind(window,"resize",w.lazyResize),w.bind(window,"orientationchange",w.lazyResize),w.bind(window,"load",w.lazyResize),b.ischrome&&!w.ispage&&!w.haswrapper){var $=w.win.attr("style"),T=parseFloat(w.win.css("width"))+1;w.win.css("width",T),w.synched("chromefix",function(){w.win.attr("style",$)})}w.onAttributeChange=function(){w.lazyResize(250)},w.ispage||w.haswrapper||(!1!==p?(w.observer=new p(function(e){e.forEach(w.onAttributeChange)}),w.observer.observe(w.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),w.observerremover=new p(function(e){e.forEach(function(e){if(e.removedNodes.length>0)for(var t in e.removedNodes)if(e.removedNodes[t]==w.win[0])return w.remove()})}),w.observerremover.observe(w.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(w.bind(w.win,b.isie&&!b.isie9?"propertychange":"DOMAttrModified",w.onAttributeChange),b.isie9&&w.win[0].attachEvent("onpropertychange",w.onAttributeChange),w.bind(w.win,"DOMNodeRemoved",function(e){e.target==w.win[0]&&w.remove()}))),!w.ispage&&w.opt.boxzoom&&w.bind(window,"resize",w.resizeZoom),w.istextarea&&w.bind(w.win,"mouseup",w.lazyResize),w.lazyResize(30)}"IFRAME"==this.doc[0].nodeName&&(this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){e.call(w.doc[0],!1)},500),w.bind(this.doc,"load",e))},this.showCursor=function(e,t){w.cursortimeout&&(clearTimeout(w.cursortimeout),w.cursortimeout=0),w.rail&&(w.autohidedom&&(w.autohidedom.stop().css({opacity:w.opt.cursoropacitymax}),w.cursoractive=!0),w.rail.drag&&1==w.rail.drag.pt||(void 0!==e&&!1!==e&&(w.scroll.y=Math.round(1*e/w.scrollratio.y)),void 0!==t&&(w.scroll.x=Math.round(1*t/w.scrollratio.x))),w.cursor.css({height:w.cursorheight,top:w.scroll.y}),w.cursorh&&(w.cursorh.css(!w.rail.align&&w.rail.visibility?{width:w.cursorwidth,left:w.scroll.x+w.rail.width}:{width:w.cursorwidth,left:w.scroll.x}),w.cursoractive=!0),w.zoom&&w.zoom.stop().css({opacity:w.opt.cursoropacitymax}))},this.hideCursor=function(e){w.cursortimeout||w.rail&&w.autohidedom&&(w.hasmousefocus&&"leave"==w.opt.autohidemode||(w.cursortimeout=setTimeout(function(){w.rail.active&&w.showonmouseevent||(w.autohidedom.stop().animate({opacity:w.opt.cursoropacitymin}),w.zoom&&w.zoom.stop().animate({opacity:w.opt.cursoropacitymin}),w.cursoractive=!1),w.cursortimeout=0},e||w.opt.hidecursordelay)))},this.noticeCursor=function(e,t,i){w.showCursor(t,i),w.rail.active||w.hideCursor(e)},this.getContentSize=w.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:w.haswrapper?function(){return{w:w.doc.outerWidth()+parseInt(w.win.css("paddingLeft"))+parseInt(w.win.css("paddingRight")),h:w.doc.outerHeight()+parseInt(w.win.css("paddingTop"))+parseInt(w.win.css("paddingBottom"))}}:function(){return{w:w.docscroll[0].scrollWidth,h:w.docscroll[0].scrollHeight}},this.onResize=function(e,t){if(!w||!w.win)return!1;if(!w.haswrapper&&!w.ispage){if("none"==w.win.css("display"))return w.visibility&&w.hideRail().hideRailHr(),!1;w.hidden||w.visibility||w.showRail().showRailHr()}var i=w.page.maxh,o=w.page.maxw,n=(w.view.h,w.view.w);if(w.view={w:w.ispage?w.win.width():parseInt(w.win[0].clientWidth),h:w.ispage?w.win.height():parseInt(w.win[0].clientHeight)},w.page=t||w.getContentSize(),w.page.maxh=Math.max(0,w.page.h-w.view.h),w.page.maxw=Math.max(0,w.page.w-w.view.w),w.page.maxh==i&&w.page.maxw==o&&w.view.w==n){if(w.ispage)return w;var r=w.win.offset();if(w.lastposition){var a=w.lastposition;if(a.top==r.top&&a.left==r.left)return w}w.lastposition=r}return 0==w.page.maxh?(w.hideRail(),w.scrollvaluemax=0,w.scroll.y=0,w.scrollratio.y=0,w.cursorheight=0,w.setScrollTop(0),w.rail.scrollable=!1):w.rail.scrollable=!0,0==w.page.maxw?(w.hideRailHr(),w.scrollvaluemaxw=0,w.scroll.x=0,w.scrollratio.x=0,w.cursorwidth=0,w.setScrollLeft(0),w.railh.scrollable=!1):w.railh.scrollable=!0,w.locked=0==w.page.maxh&&0==w.page.maxw,w.locked?(w.ispage||w.updateScrollBar(w.view),!1):(w.hidden||w.visibility?w.hidden||w.railh.visibility||w.showRailHr():w.showRail().showRailHr(),w.istextarea&&w.win.css("resize")&&"none"!=w.win.css("resize")&&(w.view.h-=20),w.cursorheight=Math.min(w.view.h,Math.round(w.view.h*(w.view.h/w.page.h))),w.cursorheight=w.opt.cursorfixedheight?w.opt.cursorfixedheight:Math.max(w.opt.cursorminheight,w.cursorheight),w.cursorwidth=Math.min(w.view.w,Math.round(w.view.w*(w.view.w/w.page.w))),w.cursorwidth=w.opt.cursorfixedheight?w.opt.cursorfixedheight:Math.max(w.opt.cursorminheight,w.cursorwidth),w.scrollvaluemax=w.view.h-w.cursorheight-w.cursor.hborder,w.railh&&(w.railh.width=w.page.maxh>0?w.view.w-w.rail.width:w.view.w,w.scrollvaluemaxw=w.railh.width-w.cursorwidth-w.cursorh.wborder),w.ispage||w.updateScrollBar(w.view),w.scrollratio={x:w.page.maxw/w.scrollvaluemaxw,y:w.page.maxh/w.scrollvaluemax},w.getScrollTop()>w.page.maxh?w.doScrollTop(w.page.maxh):(w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.scroll.x=Math.round(w.getScrollLeft()*(1/w.scrollratio.x)),w.cursoractive&&w.noticeCursor()),w.scroll.y&&0==w.getScrollTop()&&w.doScrollTo(Math.floor(w.scroll.y*w.scrollratio.y)),w)},this.resize=w.onResize,this.lazyResize=function(e){return e=isNaN(e)?30:e,w.delayed("resize",w.resize,e),w},this._bind=function(e,t,i,o){w.events.push({e:e,n:t,f:i,b:o,q:!1}),e.addEventListener?e.addEventListener(t,i,o||!1):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},this.jqbind=function(e,t,i){w.events.push({e:e,n:t,f:i,q:!0}),a(e).bind(t,i)},this.bind=function(e,t,i,o){var n="jquery"in e?e[0]:e;if("mousewheel"==t)if("onwheel"in document||document.documentMode>=9)w._bind(n,"wheel",i,o||!1);else{var r=void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";f(n,r,i,o||!1),"DOMMouseScroll"==r&&f(n,"MozMousePixelScroll",i,o||!1)}else if(n.addEventListener){if(b.cantouch&&/mouseup|mousedown|mousemove/.test(t)){var a="mousedown"==t?"touchstart":"mouseup"==t?"touchend":"touchmove";w._bind(n,a,function(e){if(e.touches)e.touches.length<2&&((t=e.touches.length?e.touches[0]:e).original=e,i.call(this,t));else if(e.changedTouches){var t;(t=e.changedTouches[0]).original=e,i.call(this,t)}},o||!1)}w._bind(n,t,i,o||!1),b.cantouch&&"mouseup"==t&&w._bind(n,"touchcancel",i,o||!1)}else w._bind(n,t,function(e){return(e=e||window.event||!1)&&e.srcElement&&(e.target=e.srcElement),"pageY"in e||(e.pageX=e.clientX+document.documentElement.scrollLeft,e.pageY=e.clientY+document.documentElement.scrollTop),!1!==i.call(n,e)&&!1!==o||w.cancelEvent(e)})},this._unbind=function(e,t,i,o){e.removeEventListener?e.removeEventListener(t,i,o):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=!1},this.unbindAll=function(){for(var e=0;e<w.events.length;e++){var t=w.events[e];t.q?t.e.unbind(t.n,t.f):w._unbind(t.e,t.n,t.f,t.b)}},this.cancelEvent=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.preventManipulation&&e.preventManipulation(),e.cancelBubble=!0,e.cancel=!0,e.returnValue=!1,!1)},this.stopPropagation=function(e){return!!(e=e.original?e.original:e||(window.event||!1))&&(e.stopPropagation?e.stopPropagation():(e.cancelBubble&&(e.cancelBubble=!0),!1))},this.showRail=function(){return 0==w.page.maxh||!w.ispage&&"none"==w.win.css("display")||(w.visibility=!0,w.rail.visibility=!0,w.rail.css("display","block")),w},this.showRailHr=function(){return w.railh?(0==w.page.maxw||!w.ispage&&"none"==w.win.css("display")||(w.railh.visibility=!0,w.railh.css("display","block")),w):w},this.hideRail=function(){return w.visibility=!1,w.rail.visibility=!1,w.rail.css("display","none"),w},this.hideRailHr=function(){return w.railh?(w.railh.visibility=!1,w.railh.css("display","none"),w):w},this.show=function(){return w.hidden=!1,w.locked=!1,w.showRail().showRailHr()},this.hide=function(){return w.hidden=!0,w.locked=!0,w.hideRail().hideRailHr()},this.toggle=function(){return w.hidden?w.show():w.hide()},this.remove=function(){w.stop(),w.cursortimeout&&clearTimeout(w.cursortimeout),w.doZoomOut(),w.unbindAll(),b.isie9&&w.win[0].detachEvent("onpropertychange",w.onAttributeChange),!1!==w.observer&&w.observer.disconnect(),!1!==w.observerremover&&w.observerremover.disconnect(),w.events=null,w.cursor&&w.cursor.remove(),w.cursorh&&w.cursorh.remove(),w.rail&&w.rail.remove(),w.railh&&w.railh.remove(),w.zoom&&w.zoom.remove();for(var e=0;e<w.saved.css.length;e++){var t=w.saved.css[e];t[0].css(t[1],void 0===t[2]?"":t[2])}w.saved=!1,w.me.data("__nicescroll","");var i=a.nicescroll;for(var o in i.each(function(e){if(this&&this.id===w.id){delete i[e];for(var t=++e;t<i.length;t++,e++)i[e]=i[t];i.length--,i.length&&delete i[i.length]}}),w)w[o]=null,delete w[o];w=null},this.scrollstart=function(e){return this.onscrollstart=e,w},this.scrollend=function(e){return this.onscrollend=e,w},this.scrollcancel=function(e){return this.onscrollcancel=e,w},this.zoomin=function(e){return this.onzoomin=e,w},this.zoomout=function(e){return this.onzoomout=e,w},this.isScrollable=function(e){var t=e.target?e.target:e;if("OPTION"==t.nodeName)return!0;for(;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var i=a(t),o=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(o))return t.clientHeight!=t.scrollHeight;t=!!t.parentNode&&t.parentNode}return!1},this.getViewport=function(e){for(var t=!(!e||!e.parentNode)&&e.parentNode;t&&1==t.nodeType&&!/^BODY|HTML/.test(t.nodeName);){var i=a(t);if(/fixed|absolute/.test(i.css("position")))return i;var o=i.css("overflowY")||i.css("overflowX")||i.css("overflow")||"";if(/scroll|auto/.test(o)&&t.clientHeight!=t.scrollHeight)return i;if(i.getNiceScroll().length>0)return i;t=!!t.parentNode&&t.parentNode}return!!t&&a(t)},this.triggerScrollEnd=function(){if(w.onscrollend){var e=w.getScrollLeft(),t=w.getScrollTop(),i={type:"scrollend",current:{x:e,y:t},end:{x:e,y:t}};w.onscrollend.call(w,i)}},this.onmousewheel=function(e){if(!w.wheelprevented){if(w.locked)return w.debounced("checkunlock",w.resize,250),!0;if(w.rail.drag)return w.cancelEvent(e);if("auto"==w.opt.oneaxismousemode&&0!=e.deltaX&&(w.opt.oneaxismousemode=!1),w.opt.oneaxismousemode&&0==e.deltaX&&!w.rail.scrollable)return!w.railh||!w.railh.scrollable||w.onmousewheelhr(e);var t=+new Date,i=!1;if(w.opt.preservenativescrolling&&w.checkarea+600<t&&(w.nativescrollingarea=w.isScrollable(e),i=!0),w.checkarea=t,w.nativescrollingarea)return!0;var o=m(e,!1,i);return o&&(w.checkarea=0),o}},this.onmousewheelhr=function(e){if(!w.wheelprevented){if(w.locked||!w.railh.scrollable)return!0;if(w.rail.drag)return w.cancelEvent(e);var t=+new Date,i=!1;return w.opt.preservenativescrolling&&w.checkarea+600<t&&(w.nativescrollingarea=w.isScrollable(e),i=!0),w.checkarea=t,!!w.nativescrollingarea||(w.locked?w.cancelEvent(e):m(e,!0,i))}},this.stop=function(){return w.cancelScroll(),w.scrollmon&&w.scrollmon.stop(),w.cursorfreezed=!1,w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.noticeCursor(),w},this.getTransitionSpeed=function(e){var t=Math.round(10*w.opt.scrollspeed),i=Math.min(t,Math.round(e/20*w.opt.scrollspeed));return i>20?i:0},w.opt.smoothscroll?w.ishwscroll&&b.hastransition&&w.opt.usetransition?(this.prepareTransition=function(e,t){var i=t?e>20?e:0:w.getTransitionSpeed(e),o=i?b.prefixstyle+"transform "+i+"ms ease-out":"";return w.lasttransitionstyle&&w.lasttransitionstyle==o||(w.lasttransitionstyle=o,w.doc.css(b.transitionstyle,o)),i},this.doScrollLeft=function(e,t){var i=w.scrollrunning?w.newscrolly:w.getScrollTop();w.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=w.scrollrunning?w.newscrollx:w.getScrollLeft();w.doScrollPos(i,e,t)},this.doScrollPos=function(e,t,i){var o=w.getScrollTop(),n=w.getScrollLeft();return((w.newscrolly-o)*(t-o)<0||(w.newscrollx-n)*(e-n)<0)&&w.cancelScroll(),0==w.opt.bouncescroll&&(0>t?t=0:t>w.page.maxh&&(t=w.page.maxh),0>e?e=0:e>w.page.maxw&&(e=w.page.maxw)),(!w.scrollrunning||e!=w.newscrollx||t!=w.newscrolly)&&(w.newscrolly=t,w.newscrollx=e,w.newscrollspeed=i||!1,!w.timer&&void(w.timer=setTimeout(function(){var i=w.getScrollTop(),o=w.getScrollLeft(),n={};n.x=e-o,n.y=t-i,n.px=o,n.py=i;var r=Math.round(Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2))),a=w.newscrollspeed&&w.newscrollspeed>1?w.newscrollspeed:w.getTransitionSpeed(r);if(w.newscrollspeed&&w.newscrollspeed<=1&&(a*=w.newscrollspeed),w.prepareTransition(a,!0),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),a>0){if(!w.scrollrunning&&w.onscrollstart){var s={type:"scrollstart",current:{x:o,y:i},request:{x:e,y:t},end:{x:w.newscrollx,y:w.newscrolly},speed:a};w.onscrollstart.call(w,s)}b.transitionend?w.scrollendtrapped||(w.scrollendtrapped=!0,w.bind(w.doc,b.transitionend,w.onScrollTransitionEnd,!1)):(w.scrollendtrapped&&clearTimeout(w.scrollendtrapped),w.scrollendtrapped=setTimeout(w.onScrollTransitionEnd,a));var l=i,c=o;w.timerscroll={bz:new BezierClass(l,w.newscrolly,a,0,0,.58,1),bh:new BezierClass(c,w.newscrollx,a,0,0,.58,1)},w.cursorfreezed||(w.timerscroll.tm=setInterval(function(){w.showCursor(w.getScrollTop(),w.getScrollLeft())},60))}w.synched("doScroll-set",function(){w.timer=0,w.scrollendtrapped&&(w.scrollrunning=!0),w.setScrollTop(w.newscrolly),w.setScrollLeft(w.newscrollx),w.scrollendtrapped||w.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!w.scrollendtrapped)return!0;var e=w.getScrollTop(),t=w.getScrollLeft();return w.scrollrunning=!1,b.transitionend||clearTimeout(b.transitionend),w.scrollendtrapped=!1,w._unbind(w.doc,b.transitionend,w.onScrollTransitionEnd),w.prepareTransition(0),w.setScrollTop(e),w.railh&&w.setScrollLeft(t),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),w.timerscroll=!1,w.cursorfreezed=!1,w.showCursor(e,t),w},this.onScrollTransitionEnd=function(){w.scrollendtrapped&&w._unbind(w.doc,b.transitionend,w.onScrollTransitionEnd),w.scrollendtrapped=!1,w.prepareTransition(0),w.timerscroll&&w.timerscroll.tm&&clearInterval(w.timerscroll.tm),w.timerscroll=!1;var e=w.getScrollTop(),t=w.getScrollLeft();return w.setScrollTop(e),w.railh&&w.setScrollLeft(t),w.noticeCursor(!1,e,t),w.cursorfreezed=!1,0>e?e=0:e>w.page.maxh&&(e=w.page.maxh),0>t?t=0:t>w.page.maxw&&(t=w.page.maxw),e!=w.newscrolly||t!=w.newscrollx?w.doScrollPos(t,e,w.opt.snapbackspeed):(w.onscrollend&&w.scrollrunning&&w.triggerScrollEnd(),void(w.scrollrunning=!1))}):(this.doScrollLeft=function(e,t){var i=w.scrollrunning?w.newscrolly:w.getScrollTop();w.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=w.scrollrunning?w.newscrollx:w.getScrollLeft();w.doScrollPos(i,e,t)},this.doScrollPos=function(e,t,i){t=void 0===t||!1===t?w.getScrollTop(!0):t;if(w.timer&&w.newscrolly==t&&w.newscrollx==e)return!0;w.timer&&c(w.timer),w.timer=0;var o=w.getScrollTop(),n=w.getScrollLeft();((w.newscrolly-o)*(t-o)<0||(w.newscrollx-n)*(e-n)<0)&&w.cancelScroll(),w.newscrolly=t,w.newscrollx=e,w.bouncescroll&&w.rail.visibility||(w.newscrolly<0?w.newscrolly=0:w.newscrolly>w.page.maxh&&(w.newscrolly=w.page.maxh)),w.bouncescroll&&w.railh.visibility||(w.newscrollx<0?w.newscrollx=0:w.newscrollx>w.page.maxw&&(w.newscrollx=w.page.maxw)),w.dst={},w.dst.x=e-n,w.dst.y=t-o,w.dst.px=n,w.dst.py=o;var r=Math.round(Math.sqrt(Math.pow(w.dst.x,2)+Math.pow(w.dst.y,2)));w.dst.ax=w.dst.x/r,w.dst.ay=w.dst.y/r;var a=0,s=r;0==w.dst.x?(a=o,s=t,w.dst.ay=1,w.dst.py=0):0==w.dst.y&&(a=n,s=e,w.dst.ax=1,w.dst.px=0);var d=w.getTransitionSpeed(r);if(i&&1>=i&&(d*=i),w.bzscroll=d>0&&(w.bzscroll?w.bzscroll.update(s,d):new BezierClass(a,s,d,0,1,0,1)),!w.timer){(o==w.page.maxh&&t>=w.page.maxh||n==w.page.maxw&&e>=w.page.maxw)&&w.checkContentSize();var u=1;if(w.cancelAnimationFrame=!1,w.timer=1,w.onscrollstart&&!w.scrollrunning){var p={type:"scrollstart",current:{x:n,y:o},request:{x:e,y:t},end:{x:w.newscrollx,y:w.newscrolly},speed:d};w.onscrollstart.call(w,p)}(function e(){if(w.cancelAnimationFrame)return!0;if(w.scrollrunning=!0,u=1-u)return w.timer=l(e)||1;var t=0,i=sy=w.getScrollTop();w.dst.ay?((0>(o=(i=w.bzscroll?w.dst.py+w.bzscroll.getNow()*w.dst.ay:w.newscrolly)-sy)&&i<w.newscrolly||o>0&&i>w.newscrolly)&&(i=w.newscrolly),w.setScrollTop(i),i==w.newscrolly&&(t=1)):t=1;var o,n=sx=w.getScrollLeft();w.dst.ax?((0>(o=(n=w.bzscroll?w.dst.px+w.bzscroll.getNow()*w.dst.ax:w.newscrollx)-sx)&&n<w.newscrollx||o>0&&n>w.newscrollx)&&(n=w.newscrollx),w.setScrollLeft(n),n==w.newscrollx&&(t+=1)):t+=1;2==t?(w.timer=0,w.cursorfreezed=!1,w.bzscroll=!1,w.scrollrunning=!1,0>i?i=0:i>w.page.maxh&&(i=w.page.maxh),0>n?n=0:n>w.page.maxw&&(n=w.page.maxw),n!=w.newscrollx||i!=w.newscrolly?w.doScrollPos(n,i):w.onscrollend&&w.triggerScrollEnd()):w.timer=l(e)||1})(),(o==w.page.maxh&&t>=o||n==w.page.maxw&&e>=n)&&w.checkContentSize(),w.noticeCursor()}},this.cancelScroll=function(){return w.timer&&c(w.timer),w.timer=0,w.bzscroll=!1,w.scrollrunning=!1,w}):(this.doScrollLeft=function(e,t){var i=w.getScrollTop();w.doScrollPos(e,i,t)},this.doScrollTop=function(e,t){var i=w.getScrollLeft();w.doScrollPos(i,e,t)},this.doScrollPos=function(e,t){var i=e>w.page.maxw?w.page.maxw:e;0>i&&(i=0);var o=t>w.page.maxh?w.page.maxh:t;0>o&&(o=0),w.synched("scroll",function(){w.setScrollTop(o),w.setScrollLeft(i)})},this.cancelScroll=function(){}),this.doScrollBy=function(e,t){var i=0;t?i=Math.floor((w.scroll.y-e)*w.scrollratio.y):i=(w.timer?w.newscrolly:w.getScrollTop(!0))-e;if(w.bouncescroll){var o=Math.round(w.view.h/2);-o>i?i=-o:i>w.page.maxh+o&&(i=w.page.maxh+o)}return w.cursorfreezed=!1,py=w.getScrollTop(!0),0>i&&0>=py?w.noticeCursor():i>w.page.maxh&&py>=w.page.maxh?(w.checkContentSize(),w.noticeCursor()):void w.doScrollTop(i)},this.doScrollLeftBy=function(e,t){var i=0;t?i=Math.floor((w.scroll.x-e)*w.scrollratio.x):i=(w.timer?w.newscrollx:w.getScrollLeft(!0))-e;if(w.bouncescroll){var o=Math.round(w.view.w/2);-o>i?i=-o:i>w.page.maxw+o&&(i=w.page.maxw+o)}return w.cursorfreezed=!1,px=w.getScrollLeft(!0),0>i&&0>=px?w.noticeCursor():i>w.page.maxw&&px>=w.page.maxw?w.noticeCursor():void w.doScrollLeft(i)},this.doScrollTo=function(e,t){var i=t?Math.round(e*w.scrollratio.y):e;0>i?i=0:i>w.page.maxh&&(i=w.page.maxh),w.cursorfreezed=!1,w.doScrollTop(e)},this.checkContentSize=function(){var e=w.getContentSize();(e.h!=w.page.h||e.w!=w.page.w)&&w.resize(!1,e)},w.onscroll=function(){w.rail.drag||w.cursorfreezed||w.synched("scroll",function(){w.scroll.y=Math.round(w.getScrollTop()*(1/w.scrollratio.y)),w.railh&&(w.scroll.x=Math.round(w.getScrollLeft()*(1/w.scrollratio.x))),w.noticeCursor()})},w.bind(w.docscroll,"scroll",w.onscroll),this.doZoomIn=function(e){if(!w.zoomactive){w.zoomactive=!0,w.zoomrestore={style:{}};var t=["position","top","left","zIndex","backgroundColor","marginTop","marginBottom","marginLeft","marginRight"],i=w.win[0].style;for(var o in t){var n=t[o];w.zoomrestore.style[n]=void 0!==i[n]?i[n]:""}w.zoomrestore.style.width=w.win.css("width"),w.zoomrestore.style.height=w.win.css("height"),w.zoomrestore.padding={w:w.win.outerWidth()-w.win.width(),h:w.win.outerHeight()-w.win.height()},b.isios4&&(w.zoomrestore.scrollTop=a(window).scrollTop(),a(window).scrollTop(0)),w.win.css({position:b.isios4?"absolute":"fixed",top:0,left:0,"z-index":r+100,margin:"0px"});var s=w.win.css("backgroundColor");return(""==s||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(s))&&w.win.css("backgroundColor","#fff"),w.rail.css({"z-index":r+101}),w.zoom.css({"z-index":r+102}),w.zoom.css("backgroundPosition","0px -18px"),w.resizeZoom(),w.onzoomin&&w.onzoomin.call(w),w.cancelEvent(e)}},this.doZoomOut=function(e){return w.zoomactive?(w.zoomactive=!1,w.win.css("margin",""),w.win.css(w.zoomrestore.style),b.isios4&&a(window).scrollTop(w.zoomrestore.scrollTop),w.rail.css({"z-index":w.zindex}),w.zoom.css({"z-index":w.zindex}),w.zoomrestore=!1,w.zoom.css("backgroundPosition","0px 0px"),w.onResize(),w.onzoomout&&w.onzoomout.call(w),w.cancelEvent(e)):void 0},this.doZoom=function(e){return w.zoomactive?w.doZoomOut(e):w.doZoomIn(e)},this.resizeZoom=function(){if(w.zoomactive){var e=w.getScrollTop();w.win.css({width:a(window).width()-w.zoomrestore.padding.w+"px",height:a(window).height()-w.zoomrestore.padding.h+"px"}),w.onResize(),w.setScrollTop(Math.min(w.page.maxh,e))}},this.init(),a.nicescroll.push(this)},v=function(e){var t=this;this.nc=e,this.lastx=0,this.lasty=0,this.speedx=0,this.speedy=0,this.lasttime=0,this.steptime=0,this.snapx=!1,this.snapy=!1,this.demulx=0,this.demuly=0,this.lastscrollx=-1,this.lastscrolly=-1,this.chkx=0,this.chky=0,this.timer=0,this.time=function(){return+new Date},this.reset=function(e,i){t.stop();var o=t.time();t.steptime=0,t.lasttime=o,t.speedx=0,t.speedy=0,t.lastx=e,t.lasty=i,t.lastscrollx=-1,t.lastscrolly=-1},this.update=function(e,i){var o=t.time();t.steptime=o-t.lasttime,t.lasttime=o;var n=i-t.lasty,r=e-t.lastx,a=t.nc.getScrollTop()+n,s=t.nc.getScrollLeft()+r;t.snapx=0>s||s>t.nc.page.maxw,t.snapy=0>a||a>t.nc.page.maxh,t.speedx=r,t.speedy=n,t.lastx=e,t.lasty=i},this.stop=function(){t.nc.unsynched("domomentum2d"),t.timer&&clearTimeout(t.timer),t.timer=0,t.lastscrollx=-1,t.lastscrolly=-1},this.doSnapy=function(e,i){var o=!1;0>i?(i=0,o=!0):i>t.nc.page.maxh&&(i=t.nc.page.maxh,o=!0),0>e?(e=0,o=!0):e>t.nc.page.maxw&&(e=t.nc.page.maxw,o=!0),o?t.nc.doScrollPos(e,i,t.nc.opt.snapbackspeed):t.nc.triggerScrollEnd()},this.doMomentum=function(e){var i=t.time(),o=e?i+e:t.lasttime,n=t.nc.getScrollLeft(),r=t.nc.getScrollTop(),a=t.nc.page.maxh,s=t.nc.page.maxw;t.speedx=s>0?Math.min(60,t.speedx):0,t.speedy=a>0?Math.min(60,t.speedy):0;var l=o&&60>=i-o;(0>r||r>a||0>n||n>s)&&(l=!1);var c=!(!t.speedy||!l)&&t.speedy,d=!(!t.speedx||!l)&&t.speedx;if(c||d){var u=Math.max(16,t.steptime);if(u>50){var p=u/50;t.speedx*=p,t.speedy*=p,u=50}t.demulxy=0,t.lastscrollx=t.nc.getScrollLeft(),t.chkx=t.lastscrollx,t.lastscrolly=t.nc.getScrollTop(),t.chky=t.lastscrolly;var h=t.lastscrollx,f=t.lastscrolly,g=function(){var e=t.time()-i>600?.04:.02;t.speedx&&(h=Math.floor(t.lastscrollx-t.speedx*(1-t.demulxy)),t.lastscrollx=h,(0>h||h>s)&&(e=.1)),t.speedy&&(f=Math.floor(t.lastscrolly-t.speedy*(1-t.demulxy)),t.lastscrolly=f,(0>f||f>a)&&(e=.1)),t.demulxy=Math.min(1,t.demulxy+e),t.nc.synched("domomentum2d",function(){t.speedx&&(t.nc.getScrollLeft()!=t.chkx&&t.stop(),t.chkx=h,t.nc.setScrollLeft(h));t.speedy&&(t.nc.getScrollTop()!=t.chky&&t.stop(),t.chky=f,t.nc.setScrollTop(f));t.timer||(t.nc.hideCursor(),t.doSnapy(h,f))}),t.demulxy<1?t.timer=setTimeout(g,u):(t.stop(),t.nc.hideCursor(),t.doSnapy(h,f))};g()}else t.doSnapy(t.nc.getScrollLeft(),t.nc.getScrollTop())}},w=e.fn.scrollTop;e.cssHooks.pageYOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(e)},set:function(e,t){var i=a.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollTop(parseInt(t)):w.call(e,t),this}},e.fn.scrollTop=function(e){if(void 0===e){var t=this[0]&&a.data(this[0],"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():w.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):w.call(a(this),e)})};var y=e.fn.scrollLeft;a.cssHooks.pageXOffset={get:function(e){var t=a.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():y.call(e)},set:function(e,t){var i=a.data(e,"__nicescroll")||!1;return i&&i.ishwscroll?i.setScrollLeft(parseInt(t)):y.call(e,t),this}},e.fn.scrollLeft=function(e){if(void 0===e){var t=this[0]&&a.data(this[0],"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():y.call(this)}return this.each(function(){var t=a.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):y.call(a(this),e)})};var b=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(e){for(var i=0,o=0;i<t.length;i++)e.call(t[i],o++);return t},this.push=function(e){t[t.length]=e,t.length++},this.eq=function(e){return t[e]},e)for(var i=0;i<e.length;i++){var o=a.data(e[i],"__nicescroll")||!1;o&&(this[this.length]=o,this.length++)}return this};(function(e,t,i){for(var o=0;o<t.length;o++)i(e,t[o])})(b.prototype,["show","hide","toggle","onResize","resize","remove","stop","doScrollPos"],function(e,t){e[t]=function(){var e=arguments;return this.each(function(){this[t].apply(this,e)})}}),e.fn.getNiceScroll=function(e){return void 0===e?new b(this):this[e]&&a.data(this[e],"__nicescroll")||!1},e.extend(e.expr[":"],{nicescroll:function(e){return!!a.data(e,"__nicescroll")}}),a.fn.niceScroll=function(e,t){void 0===t&&("object"!=typeof e||"jquery"in e||(t=e,e=!1));var i=new b;void 0===t&&(t={}),e&&(t.doc=a(e),t.win=a(this));var o=!("doc"in t);return o||"win"in t||(t.win=a(this)),this.each(function(){var e=a(this).data("__nicescroll")||!1;e||(t.doc=o?a(this):t.doc,e=new m(t,a(this)),a(this).data("__nicescroll",e)),i.push(e)}),1==i.length?i[0]:i},window.NiceScroll={getjQuery:function(){return e}},a.nicescroll||(a.nicescroll=new b,a.nicescroll.options=h)}),function(){var e=this,t=e._,i={},o=Array.prototype,n=Object.prototype,r=Function.prototype,a=o.push,s=o.slice,l=o.concat,c=n.toString,d=n.hasOwnProperty,u=o.forEach,p=o.map,h=o.reduce,f=o.reduceRight,g=o.filter,m=o.every,v=o.some,w=o.indexOf,y=o.lastIndexOf,b=Array.isArray,k=Object.keys,x=r.bind,S=function(e){return e instanceof S?e:this instanceof S?void(this._wrapped=e):new S(e)};"undefined"!=typeof exports?(void 0!==module&&module.exports&&(exports=module.exports=S),exports._=S):e._=S,S.VERSION="1.6.0";var $=S.each=S.forEach=function(e,t,o){if(null==e)return e;if(u&&e.forEach===u)e.forEach(t,o);else if(e.length===+e.length){for(var n=0,r=e.length;r>n;n++)if(t.call(o,e[n],n,e)===i)return}else{var a=S.keys(e);for(n=0,r=a.length;r>n;n++)if(t.call(o,e[a[n]],a[n],e)===i)return}return e};S.map=S.collect=function(e,t,i){var o=[];return null==e?o:p&&e.map===p?e.map(t,i):($(e,function(e,n,r){o.push(t.call(i,e,n,r))}),o)};var T="Reduce of empty array with no initial value";S.reduce=S.foldl=S.inject=function(e,t,i,o){var n=arguments.length>2;if(null==e&&(e=[]),h&&e.reduce===h)return o&&(t=S.bind(t,o)),n?e.reduce(t,i):e.reduce(t);if($(e,function(e,r,a){n?i=t.call(o,i,e,r,a):(i=e,n=!0)}),!n)throw new TypeError(T);return i},S.reduceRight=S.foldr=function(e,t,i,o){var n=arguments.length>2;if(null==e&&(e=[]),f&&e.reduceRight===f)return o&&(t=S.bind(t,o)),n?e.reduceRight(t,i):e.reduceRight(t);var r=e.length;if(r!==+r){var a=S.keys(e);r=a.length}if($(e,function(s,l,c){l=a?a[--r]:--r,n?i=t.call(o,i,e[l],l,c):(i=e[l],n=!0)}),!n)throw new TypeError(T);return i},S.find=S.detect=function(e,t,i){var o;return C(e,function(e,n,r){return t.call(i,e,n,r)?(o=e,!0):void 0}),o},S.filter=S.select=function(e,t,i){var o=[];return null==e?o:g&&e.filter===g?e.filter(t,i):($(e,function(e,n,r){t.call(i,e,n,r)&&o.push(e)}),o)},S.reject=function(e,t,i){return S.filter(e,function(e,o,n){return!t.call(i,e,o,n)},i)},S.every=S.all=function(e,t,o){t||(t=S.identity);var n=!0;return null==e?n:m&&e.every===m?e.every(t,o):($(e,function(e,r,a){return(n=n&&t.call(o,e,r,a))?void 0:i}),!!n)};var C=S.some=S.any=function(e,t,o){t||(t=S.identity);var n=!1;return null==e?n:v&&e.some===v?e.some(t,o):($(e,function(e,r,a){return n||(n=t.call(o,e,r,a))?i:void 0}),!!n)};S.contains=S.include=function(e,t){return null!=e&&(w&&e.indexOf===w?-1!=e.indexOf(t):C(e,function(e){return e===t}))},S.invoke=function(e,t){var i=s.call(arguments,2),o=S.isFunction(t);return S.map(e,function(e){return(o?t:e[t]).apply(e,i)})},S.pluck=function(e,t){return S.map(e,S.property(t))},S.where=function(e,t){return S.filter(e,S.matches(t))},S.findWhere=function(e,t){return S.find(e,S.matches(t))},S.max=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);var o=-1/0,n=-1/0;return $(e,function(e,r,a){var s=t?t.call(i,e,r,a):e;s>n&&(o=e,n=s)}),o},S.min=function(e,t,i){if(!t&&S.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);var o=1/0,n=1/0;return $(e,function(e,r,a){var s=t?t.call(i,e,r,a):e;n>s&&(o=e,n=s)}),o},S.shuffle=function(e){var t,i=0,o=[];return $(e,function(e){t=S.random(i++),o[i-1]=o[t],o[t]=e}),o},S.sample=function(e,t,i){return null==t||i?(e.length!==+e.length&&(e=S.values(e)),e[S.random(e.length-1)]):S.shuffle(e).slice(0,Math.max(0,t))};var _=function(e){return null==e?S.identity:S.isFunction(e)?e:S.property(e)};S.sortBy=function(e,t,i){return t=_(t),S.pluck(S.map(e,function(e,o,n){return{value:e,index:o,criteria:t.call(i,e,o,n)}}).sort(function(e,t){var i=e.criteria,o=t.criteria;if(i!==o){if(i>o||void 0===i)return 1;if(o>i||void 0===o)return-1}return e.index-t.index}),"value")};var D=function(e){return function(t,i,o){var n={};return i=_(i),$(t,function(r,a){var s=i.call(o,r,a,t);e(n,s,r)}),n}};S.groupBy=D(function(e,t,i){S.has(e,t)?e[t].push(i):e[t]=[i]}),S.indexBy=D(function(e,t,i){e[t]=i}),S.countBy=D(function(e,t){S.has(e,t)?e[t]++:e[t]=1}),S.sortedIndex=function(e,t,i,o){for(var n=(i=_(i)).call(o,t),r=0,a=e.length;a>r;){var s=r+a>>>1;i.call(o,e[s])<n?r=s+1:a=s}return r},S.toArray=function(e){return e?S.isArray(e)?s.call(e):e.length===+e.length?S.map(e,S.identity):S.values(e):[]},S.size=function(e){return null==e?0:e.length===+e.length?e.length:S.keys(e).length},S.first=S.head=S.take=function(e,t,i){return null==e?void 0:null==t||i?e[0]:0>t?[]:s.call(e,0,t)},S.initial=function(e,t,i){return s.call(e,0,e.length-(null==t||i?1:t))},S.last=function(e,t,i){return null==e?void 0:null==t||i?e[e.length-1]:s.call(e,Math.max(e.length-t,0))},S.rest=S.tail=S.drop=function(e,t,i){return s.call(e,null==t||i?1:t)},S.compact=function(e){return S.filter(e,S.identity)};var I=function(e,t,i){return t&&S.every(e,S.isArray)?l.apply(i,e):($(e,function(e){S.isArray(e)||S.isArguments(e)?t?a.apply(i,e):I(e,t,i):i.push(e)}),i)};S.flatten=function(e,t){return I(e,t,[])},S.without=function(e){return S.difference(e,s.call(arguments,1))},S.partition=function(e,t){var i=[],o=[];return $(e,function(e){(t(e)?i:o).push(e)}),[i,o]},S.uniq=S.unique=function(e,t,i,o){S.isFunction(t)&&(o=i,i=t,t=!1);var n=i?S.map(e,i,o):e,r=[],a=[];return $(n,function(i,o){(t?o&&a[a.length-1]===i:S.contains(a,i))||(a.push(i),r.push(e[o]))}),r},S.union=function(){return S.uniq(S.flatten(arguments,!0))},S.intersection=function(e){var t=s.call(arguments,1);return S.filter(S.uniq(e),function(e){return S.every(t,function(t){return S.contains(t,e)})})},S.difference=function(e){var t=l.apply(o,s.call(arguments,1));return S.filter(e,function(e){return!S.contains(t,e)})},S.zip=function(){for(var e=S.max(S.pluck(arguments,"length").concat(0)),t=new Array(e),i=0;e>i;i++)t[i]=S.pluck(arguments,""+i);return t},S.object=function(e,t){if(null==e)return{};for(var i={},o=0,n=e.length;n>o;o++)t?i[e[o]]=t[o]:i[e[o][0]]=e[o][1];return i},S.indexOf=function(e,t,i){if(null==e)return-1;var o=0,n=e.length;if(i){if("number"!=typeof i)return e[o=S.sortedIndex(e,t)]===t?o:-1;o=0>i?Math.max(0,n+i):i}if(w&&e.indexOf===w)return e.indexOf(t,i);for(;n>o;o++)if(e[o]===t)return o;return-1},S.lastIndexOf=function(e,t,i){if(null==e)return-1;var o=null!=i;if(y&&e.lastIndexOf===y)return o?e.lastIndexOf(t,i):e.lastIndexOf(t);for(var n=o?i:e.length;n--;)if(e[n]===t)return n;return-1},S.range=function(e,t,i){arguments.length<=1&&(t=e||0,e=0),i=arguments[2]||1;for(var o=Math.max(Math.ceil((t-e)/i),0),n=0,r=new Array(o);o>n;)r[n++]=e,e+=i;return r};var A=function(){};S.bind=function(e,t){var i,o;if(x&&e.bind===x)return x.apply(e,s.call(arguments,1));if(!S.isFunction(e))throw new TypeError;return i=s.call(arguments,2),o=function(){if(!(this instanceof o))return e.apply(t,i.concat(s.call(arguments)));A.prototype=e.prototype;var n=new A;A.prototype=null;var r=e.apply(n,i.concat(s.call(arguments)));return Object(r)===r?r:n}},S.partial=function(e){var t=s.call(arguments,1);return function(){for(var i=0,o=t.slice(),n=0,r=o.length;r>n;n++)o[n]===S&&(o[n]=arguments[i++]);for(;i<arguments.length;)o.push(arguments[i++]);return e.apply(this,o)}},S.bindAll=function(e){var t=s.call(arguments,1);if(0===t.length)throw new Error("bindAll must be passed function names");return $(t,function(t){e[t]=S.bind(e[t],e)}),e},S.memoize=function(e,t){var i={};return t||(t=S.identity),function(){var o=t.apply(this,arguments);return S.has(i,o)?i[o]:i[o]=e.apply(this,arguments)}},S.delay=function(e,t){var i=s.call(arguments,2);return setTimeout(function(){return e.apply(null,i)},t)},S.defer=function(e){return S.delay.apply(S,[e,1].concat(s.call(arguments,1)))},S.throttle=function(e,t,i){var o,n,r,a=null,s=0;i||(i={});var l=function(){s=!1===i.leading?0:S.now(),a=null,r=e.apply(o,n),o=n=null};return function(){var c=S.now();s||!1!==i.leading||(s=c);var d=t-(c-s);return o=this,n=arguments,0>=d?(clearTimeout(a),a=null,s=c,r=e.apply(o,n),o=n=null):a||!1===i.trailing||(a=setTimeout(l,d)),r}},S.debounce=function(e,t,i){var o,n,r,a,s,l=function(){var c=S.now()-a;t>c?o=setTimeout(l,t-c):(o=null,i||(s=e.apply(r,n),r=n=null))};return function(){r=this,n=arguments,a=S.now();var c=i&&!o;return o||(o=setTimeout(l,t)),c&&(s=e.apply(r,n),r=n=null),s}},S.once=function(e){var t,i=!1;return function(){return i?t:(i=!0,t=e.apply(this,arguments),e=null,t)}},S.wrap=function(e,t){return S.partial(t,e)},S.compose=function(){var e=arguments;return function(){for(var t=arguments,i=e.length-1;i>=0;i--)t=[e[i].apply(this,t)];return t[0]}},S.after=function(e,t){return function(){return--e<1?t.apply(this,arguments):void 0}},S.keys=function(e){if(!S.isObject(e))return[];if(k)return k(e);var t=[];for(var i in e)S.has(e,i)&&t.push(i);return t},S.values=function(e){for(var t=S.keys(e),i=t.length,o=new Array(i),n=0;i>n;n++)o[n]=e[t[n]];return o},S.pairs=function(e){for(var t=S.keys(e),i=t.length,o=new Array(i),n=0;i>n;n++)o[n]=[t[n],e[t[n]]];return o},S.invert=function(e){for(var t={},i=S.keys(e),o=0,n=i.length;n>o;o++)t[e[i[o]]]=i[o];return t},S.functions=S.methods=function(e){var t=[];for(var i in e)S.isFunction(e[i])&&t.push(i);return t.sort()},S.extend=function(e){return $(s.call(arguments,1),function(t){if(t)for(var i in t)e[i]=t[i]}),e},S.pick=function(e){var t={},i=l.apply(o,s.call(arguments,1));return $(i,function(i){i in e&&(t[i]=e[i])}),t},S.omit=function(e){var t={},i=l.apply(o,s.call(arguments,1));for(var n in e)S.contains(i,n)||(t[n]=e[n]);return t},S.defaults=function(e){return $(s.call(arguments,1),function(t){if(t)for(var i in t)void 0===e[i]&&(e[i]=t[i])}),e},S.clone=function(e){return S.isObject(e)?S.isArray(e)?e.slice():S.extend({},e):e},S.tap=function(e,t){return t(e),e};var E=function(e,t,i,o){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof S&&(e=e._wrapped),t instanceof S&&(t=t._wrapped);var n=c.call(e);if(n!=c.call(t))return!1;switch(n){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if("object"!=typeof e||"object"!=typeof t)return!1;for(var r=i.length;r--;)if(i[r]==e)return o[r]==t;var a=e.constructor,s=t.constructor;if(a!==s&&!(S.isFunction(a)&&a instanceof a&&S.isFunction(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1;i.push(e),o.push(t);var l=0,d=!0;if("[object Array]"==n){if(d=(l=e.length)==t.length)for(;l--&&(d=E(e[l],t[l],i,o)););}else{for(var u in e)if(S.has(e,u)&&(l++,!(d=S.has(t,u)&&E(e[u],t[u],i,o))))break;if(d){for(u in t)if(S.has(t,u)&&!l--)break;d=!l}}return i.pop(),o.pop(),d};S.isEqual=function(e,t){return E(e,t,[],[])},S.isEmpty=function(e){if(null==e)return!0;if(S.isArray(e)||S.isString(e))return 0===e.length;for(var t in e)if(S.has(e,t))return!1;return!0},S.isElement=function(e){return!(!e||1!==e.nodeType)},S.isArray=b||function(e){return"[object Array]"==c.call(e)},S.isObject=function(e){return e===Object(e)},$(["Arguments","Function","String","Number","Date","RegExp"],function(e){S["is"+e]=function(t){return c.call(t)=="[object "+e+"]"}}),S.isArguments(arguments)||(S.isArguments=function(e){return!(!e||!S.has(e,"callee"))}),"function"!=typeof/./&&(S.isFunction=function(e){return"function"==typeof e}),S.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},S.isNaN=function(e){return S.isNumber(e)&&e!=+e},S.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"==c.call(e)},S.isNull=function(e){return null===e},S.isUndefined=function(e){return void 0===e},S.has=function(e,t){return d.call(e,t)},S.noConflict=function(){return e._=t,this},S.identity=function(e){return e},S.constant=function(e){return function(){return e}},S.property=function(e){return function(t){return t[e]}},S.matches=function(e){return function(t){if(t===e)return!0;for(var i in e)if(e[i]!==t[i])return!1;return!0}},S.times=function(e,t,i){for(var o=Array(Math.max(0,e)),n=0;e>n;n++)o[n]=t.call(i,n);return o},S.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},S.now=Date.now||function(){return(new Date).getTime()};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=S.invert(P.escape);var z={escape:new RegExp("["+S.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+S.keys(P.unescape).join("|")+")","g")};S.each(["escape","unescape"],function(e){S[e]=function(t){return null==t?"":(""+t).replace(z[e],function(t){return P[e][t]})}}),S.result=function(e,t){if(null!=e){var i=e[t];return S.isFunction(i)?i.call(e):i}},S.mixin=function(e){$(S.functions(e),function(t){var i=S[t]=e[t];S.prototype[t]=function(){var e=[this._wrapped];return a.apply(e,arguments),N.call(this,i.apply(S,e))}})};var M=0;S.uniqueId=function(e){var t=++M+"";return e?e+t:t},S.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var L=/(.)^/,O={"'":"'","\\":"\\","\r":"r","\n":"n","\t":"t","\u2028":"u2028","\u2029":"u2029"},R=/\\|'|\r|\n|\t|\u2028|\u2029/g;S.template=function(e,t,i){var o;i=S.defaults({},i,S.templateSettings);var n=new RegExp([(i.escape||L).source,(i.interpolate||L).source,(i.evaluate||L).source].join("|")+"|$","g"),r=0,a="__p+='";e.replace(n,function(t,i,o,n,s){return a+=e.slice(r,s).replace(R,function(e){return"\\"+O[e]}),i&&(a+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),o&&(a+="'+\n((__t=("+o+"))==null?'':__t)+\n'"),n&&(a+="';\n"+n+"\n__p+='"),r=s+t.length,t}),a+="';\n",i.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{o=new Function(i.variable||"obj","_",a)}catch(e){throw e.source=a,e}if(t)return o(t,S);var s=function(e){return o.call(this,e,S)};return s.source="function("+(i.variable||"obj")+"){\n"+a+"}",s},S.chain=function(e){return S(e).chain()};var N=function(e){return this._chain?S(e).chain():e};S.mixin(S),$(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=o[e];S.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!=e&&"splice"!=e||0!==i.length||delete i[0],N.call(this,i)}}),$(["concat","join","slice"],function(e){var t=o[e];S.prototype[e]=function(){return N.call(this,t.apply(this._wrapped,arguments))}}),S.extend(S.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}}),"function"==typeof define&&define.amd&&define("underscore",[],function(){return S})}.call(this),function(e,t,i){var o={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,debug:!0,delay:200,minWidth:0,maxWidth:null,functionInit:function(e,t){},functionBefore:function(e,t){t()},functionReady:function(e,t){},functionAfter:function(e){},hideOnClick:!1,icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,multiple:!1,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,positionTrackerCallback:function(e){"hover"==this.option("trigger")&&this.option("autoClose")&&this.hide()},restoration:"current",speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};function n(t,i){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.Content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},o,i),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.Status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this._init()}function r(t,i){var o=!0;return e.each(t,function(e,n){if(void 0===i[e]||t[e]!==i[e])return o=!1,!1}),o}n.prototype={_init:function(){var t=this;if(i.querySelector){var o=null;void 0===t.$el.data("tooltipster-initialTitle")&&(void 0===(o=t.$el.attr("title"))&&(o=null),t.$el.data("tooltipster-initialTitle",o)),null!==t.options.content?t._content_set(t.options.content):t._content_set(o);var n=t.options.functionInit.call(t.$el,t.$el,t.Content);void 0!==n&&t._content_set(n),t.$el.removeAttr("title").addClass("tooltipstered"),!a&&t.options.iconDesktop||a&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.options.iconCloning?t.$elProxy=t.options.icon.clone(!0):t.$elProxy=t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){l()&&!t.options.touchDevices||(t.mouseIsOverProxy=!0,t._show())}).on("mouseleave."+t.namespace,function(){l()&&!t.options.touchDevices||(t.mouseIsOverProxy=!1)}),a&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t._showNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){l()&&!t.options.touchDevices||t._show()})}},_show:function(){var e=this;"shown"!=e.Status&&"appearing"!=e.Status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e._showNow()},e.options.delay):e._showNow())},_showNow:function(i){var o=this;o.options.functionBefore.call(o.$el,o.$el,function(){if(o.enabled&&null!==o.Content){i&&o.callbacks.show.push(i),o.callbacks.hide=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null,o.options.onlyOne&&e(".tooltipstered").not(o.$el).each(function(t,i){var o=e(i),n=o.data("tooltipster-ns");e.each(n,function(e,t){var i=o.data(t),n=i.status(),r=i.option("autoClose");"hidden"!==n&&"disappearing"!==n&&r&&i.hide()})});var n=function(){o.Status="shown",e.each(o.callbacks.show,function(e,t){t.call(o.$el)}),o.callbacks.show=[]};if("hidden"!==o.Status){var r=0;"disappearing"===o.Status?(o.Status="appearing",c()?(o.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+o.options.animation+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.stop().fadeIn(n)):"shown"===o.Status&&n()}else{o.Status="appearing";r=o.options.speed;o.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var s="tooltipster-"+o.options.animation,l="-webkit-transition-duration: "+o.options.speed+"ms; -webkit-animation-duration: "+o.options.speed+"ms; -moz-transition-duration: "+o.options.speed+"ms; -moz-animation-duration: "+o.options.speed+"ms; -o-transition-duration: "+o.options.speed+"ms; -o-animation-duration: "+o.options.speed+"ms; -ms-transition-duration: "+o.options.speed+"ms; -ms-animation-duration: "+o.options.speed+"ms; transition-duration: "+o.options.speed+"ms; animation-duration: "+o.options.speed+"ms;",d=o.options.minWidth?"min-width:"+Math.round(o.options.minWidth)+"px;":"",u=o.options.maxWidth?"max-width:"+Math.round(o.options.maxWidth)+"px;":"",p=o.options.interactive?"pointer-events: auto;":"";if(o.$tooltip=e('<div class="tooltipster-base '+o.options.theme+'" style="'+d+" "+u+" "+p+" "+l+'"><div class="tooltipster-content"></div></div>'),c()&&o.$tooltip.addClass(s),o._content_insert(),o.$tooltip.appendTo("body"),o.reposition(),o.options.functionReady.call(o.$el,o.$el,o.$tooltip),c()?(o.$tooltip.addClass(s+"-show"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(n)):o.$tooltip.css("display","none").fadeIn(o.options.speed,n),o._interval_set(),e(t).on("scroll."+o.namespace+" resize."+o.namespace,function(){o.reposition()}),o.options.autoClose)if(e("body").off("."+o.namespace),"hover"==o.options.trigger){if(a&&setTimeout(function(){e("body").on("touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive){a&&o.$tooltip.on("touchstart."+o.namespace,function(e){e.stopPropagation()});var h=null;o.$elProxy.add(o.$tooltip).on("mouseleave."+o.namespace+"-autoClose",function(){clearTimeout(h),h=setTimeout(function(){o.hide()},o.options.interactiveTolerance)}).on("mouseenter."+o.namespace+"-autoClose",function(){clearTimeout(h)})}else o.$elProxy.on("mouseleave."+o.namespace+"-autoClose",function(){o.hide()});o.options.hideOnClick&&o.$elProxy.on("click."+o.namespace+"-autoClose",function(){o.hide()})}else"click"==o.options.trigger&&(setTimeout(function(){e("body").on("click."+o.namespace+" touchstart."+o.namespace,function(){o.hide()})},0),o.options.interactive&&o.$tooltip.on("click."+o.namespace+" touchstart."+o.namespace,function(e){e.stopPropagation()}))}o.options.timer>0&&(o.timerHide=setTimeout(function(){o.timerHide=null,o.hide()},o.options.timer+r))}})},_interval_set:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.Status||0===e("body").find(t.$tooltip).length)"shown"!=t.Status&&"appearing"!=t.Status||t.hide(),t._interval_cancel();else if(t.options.positionTracker){var i=t._repositionInfo(t.$elProxy),o=!1;r(i.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?r(i.position,t.elProxyPosition.position)&&(o=!0):r(i.offset,t.elProxyPosition.offset)&&(o=!0)),o||(t.reposition(),t.options.positionTrackerCallback.call(t,t.$el))}},200)},_interval_cancel:function(){clearInterval(this.checkInterval),this.checkInterval=null},_content_set:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.Content=e},_content_insert:function(){var e=this.$tooltip.find(".tooltipster-content");"string"!=typeof this.Content||this.options.contentAsHTML?e.empty().append(this.Content):e.text(this.Content)},_update:function(e){var t=this;t._content_set(e),null!==t.Content?"hidden"!==t.Status&&(t._content_insert(),t.reposition(),t.options.updateAnimation&&(c()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.Status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.Status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.Status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hide()},_repositionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},hide:function(i){var o=this;i&&o.callbacks.hide.push(i),o.callbacks.show=[],clearTimeout(o.timerShow),o.timerShow=null,clearTimeout(o.timerHide),o.timerHide=null;var n=function(){e.each(o.callbacks.hide,function(e,t){t.call(o.$el)}),o.callbacks.hide=[]};if("shown"==o.Status||"appearing"==o.Status){o.Status="disappearing";var r=function(){o.Status="hidden","object"==typeof o.Content&&null!==o.Content&&o.Content.detach(),o.$tooltip.remove(),o.$tooltip=null,e(t).off("."+o.namespace),e("body").off("."+o.namespace).css("overflow-x",o.bodyOverflowX),e("body").off("."+o.namespace),o.$elProxy.off("."+o.namespace+"-autoClose"),o.options.functionAfter.call(o.$el,o.$el),n()};c()?(o.$tooltip.clearQueue().removeClass("tooltipster-"+o.options.animation+"-show").addClass("tooltipster-dying"),o.options.speed>0&&o.$tooltip.delay(o.options.speed),o.$tooltip.queue(r)):o.$tooltip.stop().fadeOut(o.options.speed,r)}else"hidden"==o.Status&&n();return o},show:function(e){return this._showNow(e),this},update:function(e){return this.content(e)},content:function(e){return void 0===e?this.Content:(this._update(e),this)},reposition:function(){if(0!==e("body").find(this.$tooltip).length){this.$tooltip.css("width",""),this.elProxyPosition=this._repositionInfo(this.$elProxy);var i=null,o=e(t).width(),n=this.elProxyPosition,r=this.$tooltip.outerWidth(!1),a=(this.$tooltip.innerWidth(),this.$tooltip.outerHeight(!1));if(this.$elProxy.is("area")){var s=this.$elProxy.attr("shape"),l=this.$elProxy.parent().attr("name"),c=e('img[usemap="#'+l+'"]'),d=c.offset().left,u=c.offset().top,p=void 0!==this.$elProxy.attr("coords")?this.$elProxy.attr("coords").split(","):void 0;if("circle"==s){var h=parseInt(p[0]),f=parseInt(p[1]),g=parseInt(p[2]);n.dimension.height=2*g,n.dimension.width=2*g,n.offset.top=u+f-g,n.offset.left=d+h-g}else if("rect"==s){h=parseInt(p[0]),f=parseInt(p[1]);var m=parseInt(p[2]),v=parseInt(p[3]);n.dimension.height=v-f,n.dimension.width=m-h,n.offset.top=u+f,n.offset.left=d+h}else if("poly"==s){for(var w=0,y=0,b=0,k=0,x="even",S=0;S<p.length;S++){var $=parseInt(p[S]);"even"==x?($>b&&(b=$,0===S&&(w=b)),$<w&&(w=$),x="odd"):($>k&&(k=$,1==S&&(y=k)),$<y&&(y=$),x="even")}n.dimension.height=k-y,n.dimension.width=b-w,n.offset.top=u+y,n.offset.left=d+w}else n.dimension.height=c.outerHeight(!1),n.dimension.width=c.outerWidth(!1),n.offset.top=u,n.offset.left=d}var T=0,C=0,_=0,D=parseInt(this.options.offsetY),I=parseInt(this.options.offsetX),A=this.options.position;function E(){var n=e(t).scrollLeft();T-n<0&&(i=T-n,T=n),T+r-n>o&&(i=T-(o+n-r),T=o+n-r)}function P(i,o){n.offset.top-e(t).scrollTop()-a-D-12<0&&o.indexOf("top")>-1&&(A=i),n.offset.top+n.dimension.height+a+12+D>e(t).scrollTop()+e(t).height()&&o.indexOf("bottom")>-1&&(A=i,_=n.offset.top-a-D-12)}if("top"==A){var z=n.offset.left+r-(n.offset.left+n.dimension.width);T=n.offset.left+I-z/2,_=n.offset.top-a-D-12,E(),P("bottom","top")}if("top-left"==A&&(T=n.offset.left+I,_=n.offset.top-a-D-12,E(),P("bottom-left","top-left")),"top-right"==A&&(T=n.offset.left+n.dimension.width+I-r,_=n.offset.top-a-D-12,E(),P("bottom-right","top-right")),"bottom"==A){z=n.offset.left+r-(n.offset.left+n.dimension.width);T=n.offset.left-z/2+I,_=n.offset.top+n.dimension.height+D+12,E(),P("top","bottom")}if("bottom-left"==A&&(T=n.offset.left+I,_=n.offset.top+n.dimension.height+D+12,E(),P("top-left","bottom-left")),"bottom-right"==A&&(T=n.offset.left+n.dimension.width+I-r,_=n.offset.top+n.dimension.height+D+12,E(),P("top-right","bottom-right")),"left"==A){T=n.offset.left-I-r-12,C=n.offset.left+I+n.dimension.width+12;var M=n.offset.top+a-(n.offset.top+n.dimension.height);if(_=n.offset.top-M/2-D,T<0&&C+r>o){var L=2*parseFloat(this.$tooltip.css("border-width")),O=r+T-L;this.$tooltip.css("width",O+"px"),a=this.$tooltip.outerHeight(!1),T=n.offset.left-I-O-12-L,M=n.offset.top+a-(n.offset.top+n.dimension.height),_=n.offset.top-M/2-D}else T<0&&(T=n.offset.left+I+n.dimension.width+12,i="left")}if("right"==A){T=n.offset.left+I+n.dimension.width+12,C=n.offset.left-I-r-12;M=n.offset.top+a-(n.offset.top+n.dimension.height);if(_=n.offset.top-M/2-D,T+r>o&&C<0){L=2*parseFloat(this.$tooltip.css("border-width")),O=o-T-L;this.$tooltip.css("width",O+"px"),a=this.$tooltip.outerHeight(!1),M=n.offset.top+a-(n.offset.top+n.dimension.height),_=n.offset.top-M/2-D}else T+r>o&&(T=n.offset.left-I-r-12,i="right")}if(this.options.arrow){var R="tooltipster-arrow-"+A;if(this.options.arrowColor.length<1)var N=this.$tooltip.css("background-color");else N=this.options.arrowColor;if(i?"left"==i?(R="tooltipster-arrow-right",i=""):"right"==i?(R="tooltipster-arrow-left",i=""):i="left:"+Math.round(i)+"px;":i="","top"==A||"top-left"==A||"top-right"==A)var F=parseFloat(this.$tooltip.css("border-bottom-width")),U=this.$tooltip.css("border-bottom-color");else if("bottom"==A||"bottom-left"==A||"bottom-right"==A)F=parseFloat(this.$tooltip.css("border-top-width")),U=this.$tooltip.css("border-top-color");else if("left"==A)F=parseFloat(this.$tooltip.css("border-right-width")),U=this.$tooltip.css("border-right-color");else if("right"==A)F=parseFloat(this.$tooltip.css("border-left-width")),U=this.$tooltip.css("border-left-color");else F=parseFloat(this.$tooltip.css("border-bottom-width")),U=this.$tooltip.css("border-bottom-color");F>1&&F++;var j="";if(0!==F){var H="",W="border-color: "+U+";";-1!==R.indexOf("bottom")?H="margin-top: -"+Math.round(F)+"px;":-1!==R.indexOf("top")?H="margin-bottom: -"+Math.round(F)+"px;":-1!==R.indexOf("left")?H="margin-right: -"+Math.round(F)+"px;":-1!==R.indexOf("right")&&(H="margin-left: -"+Math.round(F)+"px;"),j='<span class="tooltipster-arrow-border" style="'+H+" "+W+';"></span>'}this.$tooltip.find(".tooltipster-arrow").remove();var B='<div class="'+R+' tooltipster-arrow" style="'+i+'">'+j+'<span style="border-color:'+N+';"></span></div>';this.$tooltip.append(B)}this.$tooltip.css({top:Math.round(_)+"px",left:Math.round(T)+"px"})}return this},enable:function(){return this.enabled=!0,this},disable:function(){return this.hide(),this.enabled=!1,this},destroy:function(){var t=this;t.hide(),t.$el[0]!==t.$elProxy[0]&&t.$elProxy.remove(),t.$el.removeData(t.namespace).off("."+t.namespace);var i=t.$el.data("tooltipster-ns");if(1===i.length){var o=null;"previous"===t.options.restoration?o=t.$el.data("tooltipster-initialTitle"):"current"===t.options.restoration&&(o="string"==typeof t.Content?t.Content:e("<div></div>").append(t.Content).html()),o&&t.$el.attr("title",o),t.$el.removeClass("tooltipstered").removeData("tooltipster-ns").removeData("tooltipster-initialTitle")}else i=e.grep(i,function(e,i){return e!==t.namespace}),t.$el.data("tooltipster-ns",i);return t},elementIcon:function(){return this.$el[0]!==this.$elProxy[0]?this.$elProxy[0]:void 0},elementTooltip:function(){return this.$tooltip?this.$tooltip[0]:void 0},option:function(e,t){return void 0===t?this.options[e]:(this.options[e]=t,this)},status:function(){return this.Status}},e.fn.tooltipster=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var i=!0;switch(t[0]){case"setDefaults":e.extend(o,t[1]);break;default:i=!1}return!!i||this}return this}if("string"==typeof t[0]){var r="#*$~&";return this.each(function(){var i=e(this).data("tooltipster-ns"),o=i?e(this).data(i[0]):null;if(!o)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');if("function"!=typeof o[t[0]])throw new Error('Unknown method .tooltipster("'+t[0]+'")');var n=o[t[0]](t[1],t[2]);if(n!==o)return r=n,!1}),"#*$~&"!==r?r:this}var a=[],s=t[0]&&void 0!==t[0].multiple,l=s&&t[0].multiple||!s&&o.multiple,c=t[0]&&void 0!==t[0].debug,d=c&&t[0].debug||!c&&o.debug;return this.each(function(){var i=!1,o=e(this).data("tooltipster-ns"),r=null;o?l?i=!0:d&&console.log('Tooltipster: one or more tooltips are already attached to this element: ignoring. Use the "multiple" option to attach more tooltips.'):i=!0,i&&(r=new n(this,t[0]),o||(o=[]),o.push(r.namespace),e(this).data("tooltipster-ns",o),e(this).data(r.namespace,r)),a.push(r)}),l?a:this};var a=!!("ontouchstart"in t),s=!1;function l(){return!s&&a}function c(){var e=(i.body||i.documentElement).style,t="transition";if("string"==typeof e[t])return!0;v=["Moz","Webkit","Khtml","O","ms"],t=t.charAt(0).toUpperCase()+t.substr(1);for(var o=0;o<v.length;o++)if("string"==typeof e[v[o]+t])return!0;return!1}e("body").one("mousemove",function(){s=!0})}(jQuery,window,document),function(e){var t=function(t){this.origHtmlMargin=parseFloat(e("html").css("margin-top")),this.options=e.extend({},e.smartbanner.defaults,t);var i=navigator.standalone,o=navigator.userAgent;if(this.options.force?this.type=this.options.force:null!=o.match(/Windows Phone 8/i)&&null!==o.match(/Touch/i)?this.type="windows":null!=o.match(/iPhone|iPod/i)||o.match(/iPad/)&&this.options.iOSUniversalApp?null!=o.match(/Safari/i)&&(null!=o.match(/CriOS/i)||window.Number(o.substr(o.indexOf("OS ")+3,3).replace("_","."))<6)&&(this.type="ios"):o.match(/\bSilk\/(.*\bMobile Safari\b)?/)||o.match(/\bKF\w/)||o.match("Kindle Fire")?this.type="kindle":null!=o.match(/Android/i)&&(this.type="android"),this.type&&!i&&!this.getCookie("sb-closed")&&!this.getCookie("sb-installed")){this.scale="auto"==this.options.scale?e(window).width()/window.screen.width:this.options.scale,this.scale<1&&(this.scale=1);var n=e("android"==this.type?'meta[name="google-play-app"]':"ios"==this.type?'meta[name="apple-itunes-app"]':"kindle"==this.type?'meta[name="kindle-fire-app"]':'meta[name="msApplication-ID"]');if(0!=n.length){if("windows"==this.type)this.appId=e('meta[name="msApplication-PackageFamilyName"]').attr("content");else{var r=/app-id=([^\s,]+)/.exec(n.attr("content"));if(!r)return;this.appId=r[1]}this.title=this.options.title?this.options.title:n.data("title")||e("title").text().replace(/\s*[|\-·].*$/,""),this.author=this.options.author?this.options.author:n.data("author")||(e('meta[name="author"]').length?e('meta[name="author"]').attr("content"):window.location.hostname),this.iconUrl=n.data("icon-url"),this.price=n.data("price"),this.create(),this.show(),this.listen()}}};t.prototype={constructor:t,create:function(){var t,i=this.options.url?this.options.url:("windows"==this.type?"ms-windows-store:navigate?appid=":"android"==this.type?"market://details?id=":"kindle"==this.type?"amzn://apps/android?asin=":"https://itunes.apple.com/"+this.options.appStoreLanguage+"/app/id")+this.appId,o=this.price||this.options.price,n=o?o+" - "+("android"==this.type?this.options.inGooglePlay:"kindle"==this.type?this.options.inAmazonAppStore:"ios"==this.type?this.options.inAppStore:this.options.inWindowsStore):"",r=null===this.options.iconGloss?"ios"==this.type:this.options.iconGloss;"android"==this.type&&this.options.GooglePlayParams&&(i=i+"&referrer="+this.options.GooglePlayParams);var a='<div id="smartbanner" class="'+this.type+'"><div class="sb-container"><a href="#" class="sb-close">&times;</a><span class="sb-icon"></span><div class="sb-info"><strong>'+this.title+"</strong><span>"+this.author+"</span><span>"+n+'</span></div><a href="'+i+'" class="sb-button"><span>'+this.options.button+"</span></a></div></div>";this.options.layer?e(this.options.appendToSelector).append(a):e(this.options.appendToSelector).prepend(a),this.options.icon?t=this.options.icon:this.iconUrl?t=this.iconUrl:e('link[rel="apple-touch-icon-precomposed"]').length>0?(t=e('link[rel="apple-touch-icon-precomposed"]').attr("href"),null===this.options.iconGloss&&(r=!1)):e('link[rel="apple-touch-icon"]').length>0?t=e('link[rel="apple-touch-icon"]').attr("href"):e('meta[name="msApplication-TileImage"]').length>0?t=e('meta[name="msApplication-TileImage"]').attr("content"):e('meta[name="msapplication-TileImage"]').length>0&&(t=e('meta[name="msapplication-TileImage"]').attr("content")),t?(e("#smartbanner .sb-icon").css("background-image","url("+t+")"),r&&e("#smartbanner .sb-icon").addClass("gloss")):e("#smartbanner").addClass("no-icon"),this.bannerHeight=e("#smartbanner").outerHeight()+2,this.scale>1&&(e("#smartbanner").css("top",parseFloat(e("#smartbanner").css("top"))*this.scale).css("height",parseFloat(e("#smartbanner").css("height"))*this.scale).hide(),e("#smartbanner .sb-container").css("-webkit-transform","scale("+this.scale+")").css("-msie-transform","scale("+this.scale+")").css("-moz-transform","scale("+this.scale+")").css("width",e(window).width()/this.scale)),e("#smartbanner").css("position",this.options.layer?"absolute":"static")},listen:function(){e("#smartbanner .sb-close").on("click",e.proxy(this.close,this)),e("#smartbanner .sb-button").on("click",e.proxy(this.install,this))},show:function(t){var i=e("#smartbanner");if(i.stop(),this.options.layer)i.animate({top:0,display:"block"},this.options.speedIn).addClass("shown").show(),e(this.pushSelector).animate({paddingTop:this.origHtmlMargin+this.bannerHeight*this.scale},this.options.speedIn,"swing",t);else if(e.support.transition){i.animate({top:0},this.options.speedIn).addClass("shown");e(this.pushSelector).addClass("sb-animation").one(e.support.transition.end,function(){e("html").removeClass("sb-animation"),t&&t()}).emulateTransitionEnd(this.options.speedIn).css("margin-top",this.origHtmlMargin+this.bannerHeight*this.scale)}else i.slideDown(this.options.speedIn).addClass("shown")},hide:function(t){var i=e("#smartbanner");if(i.stop(),this.options.layer)i.animate({top:-1*this.bannerHeight*this.scale,display:"block"},this.options.speedIn).removeClass("shown"),e(this.pushSelector).animate({paddingTop:this.origHtmlMargin},this.options.speedIn,"swing",t);else if(e.support.transition){"android"!==this.type?i.css("top",-1*this.bannerHeight*this.scale).removeClass("shown"):i.css({display:"none"}).removeClass("shown");e(this.pushSelector).addClass("sb-animation").one(e.support.transition.end,function(){e("html").removeClass("sb-animation"),t&&t()}).emulateTransitionEnd(this.options.speedOut).css("margin-top",this.origHtmlMargin)}else i.slideUp(this.options.speedOut).removeClass("shown")},close:function(e){e.preventDefault(),this.hide(),this.setCookie("sb-closed","true",this.options.daysHidden)},install:function(e){this.options.hideOnInstall&&this.hide(),this.setCookie("sb-installed","true",this.options.daysReminder)},setCookie:function(e,t,i){var o=new Date;o.setDate(o.getDate()+i),t=encodeURI(t)+(null==i?"":"; expires="+o.toUTCString()),document.cookie=e+"="+t+"; path=/;"},getCookie:function(e){var t,i,o,n=document.cookie.split(";");for(t=0;t<n.length;t++)if(i=n[t].substr(0,n[t].indexOf("=")),o=n[t].substr(n[t].indexOf("=")+1),(i=i.replace(/^\s+|\s+$/g,""))==e)return decodeURI(o);return null},switchType:function(){var t=this;this.hide(function(){t.type="android"==t.type?"ios":"android";var i=e("android"==t.type?'meta[name="google-play-app"]':'meta[name="apple-itunes-app"]').attr("content");t.appId=/app-id=([^\s,]+)/.exec(i)[1],e("#smartbanner").detach(),t.create(),t.show()})}},e.smartbanner=function(i){var o=e(window),n=o.data("smartbanner"),r="object"==typeof i&&i;n||o.data("smartbanner",n=new t(r)),"string"==typeof i&&n[i]()},e.smartbanner.defaults={title:null,author:null,price:"FREE",appStoreLanguage:"us",inAppStore:"On the App Store",inGooglePlay:"In Google Play",inAmazonAppStore:"In the Amazon Appstore",inWindowsStore:"In the Windows Store",GooglePlayParams:null,icon:null,iconGloss:null,button:"VIEW",url:null,scale:"auto",speedIn:300,speedOut:400,daysHidden:15,daysReminder:90,force:null,hideOnInstall:!0,layer:!1,iOSUniversalApp:!0,appendToSelector:"body",pushSelector:"html"},e.smartbanner.Constructor=t,void 0===e.support.transition&&(e.fn.emulateTransitionEnd=function(t){var i=!1,o=this;e(this).one(e.support.transition.end,function(){i=!0});return setTimeout(function(){i||e(o).trigger(e.support.transition.end)},t),this},e(function(){e.support.transition=function(){var e=document.createElement("smartbanner"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}()}))}(window.jQuery),function(){"use strict";function e(t,o){var n;if(o=o||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=o.touchBoundary||10,this.layer=t,this.tapDelay=o.tapDelay||200,this.tapTimeout=o.tapTimeout||700,!e.notNeeded(t)){for(var r=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],a=0,s=r.length;a<s;a++)this[r[a]]=l(this[r[a]],this);i&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,i,o){var n=Node.prototype.removeEventListener;"click"===e?n.call(t,e,i.hijacked||i,o):n.call(t,e,i,o)},t.addEventListener=function(e,i,o){var n=Node.prototype.addEventListener;"click"===e?n.call(t,e,i.hijacked||(i.hijacked=function(e){e.propagationStopped||i(e)}),o):n.call(t,e,i,o)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(e){n(e)},!1),t.onclick=null)}function l(e,t){return function(){return e.apply(t,arguments)}}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,i=navigator.userAgent.indexOf("Android")>0&&!t,o=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,n=o&&/OS 4_\d(_\d)?/.test(navigator.userAgent),r=o&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(o&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!i;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var i,o;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),o=t.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},e.prototype.determineEventType=function(e){return i&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;o&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,i;if(!(t=e.fastClickScrollParent)||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,i,r;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],o){if((r=window.getSelection()).rangeCount&&!r.isCollapsed)return!0;if(!n){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,c,d=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,r&&(c=e.changedTouches[0],(d=document.elementFromPoint(c.pageX-window.pageXOffset,c.pageY-window.pageYOffset)||d).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(s=d.tagName.toLowerCase())){if(t=this.findControl(d)){if(this.focus(d),i)return!1;d=t}}else if(this.needsFocus(d))return e.timeStamp-a>100||o&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(d),this.sendClick(d,e),o&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!o||n||!(l=d.fastClickScrollParent)||l.fastClickLastScrollTop===l.scrollTop)||(this.needsClick(d)||(e.preventDefault(),this.sendClick(d,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;i&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,o,n;if(void 0===window.ontouchstart)return!0;if(o=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!i)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(o>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]>=10&&n[2]>=3&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"none"===e.style.touchAction},e.attach=function(t,i){return new e(t,i)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return e}):void 0!==module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";var t=window.Slick||{};(t=function(){var t=0;return function(i,o){var n,r=this;r.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:e(i),appendDots:e(i),arrows:!0,asNavFor:null,prevArrow:'<button class="slick-prev" aria-label="Previous" type="button">Previous</button>',nextArrow:'<button class="slick-next" aria-label="Next" type="button">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(t,i){return e('<button type="button" />').text(i+1)},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",edgeFriction:.35,fade:!1,focusOnSelect:!1,focusOnChange:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",mobileFirst:!1,pauseOnHover:!0,pauseOnFocus:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rows:1,rtl:!1,slide:"",slidesPerRow:1,slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,useTransform:!0,variableWidth:!1,vertical:!1,verticalSwiping:!1,waitForAnimate:!0,zIndex:1e3},r.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,scrolling:!1,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,swiping:!1,$list:null,touchObject:{},transformsEnabled:!1,unslicked:!1},e.extend(r,r.initials),r.activeBreakpoint=null,r.animType=null,r.animProp=null,r.breakpoints=[],r.breakpointSettings=[],r.cssTransitions=!1,r.focussed=!1,r.interrupted=!1,r.hidden="hidden",r.paused=!0,r.positionProp=null,r.respondTo=null,r.rowCount=1,r.shouldClick=!0,r.$slider=e(i),r.$slidesCache=null,r.transformType=null,r.transitionType=null,r.visibilityChange="visibilitychange",r.windowWidth=0,r.windowTimer=null,n=e(i).data("slick")||{},r.options=e.extend({},r.defaults,o,n),r.currentSlide=r.options.initialSlide,r.originalSettings=r.options,void 0!==document.mozHidden?(r.hidden="mozHidden",r.visibilityChange="mozvisibilitychange"):void 0!==document.webkitHidden&&(r.hidden="webkitHidden",r.visibilityChange="webkitvisibilitychange"),r.autoPlay=e.proxy(r.autoPlay,r),r.autoPlayClear=e.proxy(r.autoPlayClear,r),r.autoPlayIterator=e.proxy(r.autoPlayIterator,r),r.changeSlide=e.proxy(r.changeSlide,r),r.clickHandler=e.proxy(r.clickHandler,r),r.selectHandler=e.proxy(r.selectHandler,r),r.setPosition=e.proxy(r.setPosition,r),r.swipeHandler=e.proxy(r.swipeHandler,r),r.dragHandler=e.proxy(r.dragHandler,r),r.keyHandler=e.proxy(r.keyHandler,r),r.instanceUid=t++,r.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,r.registerBreakpoints(),r.init(!0)}}()).prototype.activateADA=function(){this.$slideTrack.find(".slick-active").attr({"aria-hidden":"false"}).find("a, input, button, select").attr({tabindex:"0"})},t.prototype.addSlide=t.prototype.slickAdd=function(t,i,o){var n=this;if("boolean"==typeof i)o=i,i=null;else if(i<0||i>=n.slideCount)return!1;n.unload(),"number"==typeof i?0===i&&0===n.$slides.length?e(t).appendTo(n.$slideTrack):o?e(t).insertBefore(n.$slides.eq(i)):e(t).insertAfter(n.$slides.eq(i)):!0===o?e(t).prependTo(n.$slideTrack):e(t).appendTo(n.$slideTrack),n.$slides=n.$slideTrack.children(this.options.slide),n.$slideTrack.children(this.options.slide).detach(),n.$slideTrack.append(n.$slides),n.$slides.each(function(t,i){e(i).attr("data-slick-index",t)}),n.$slidesCache=n.$slides,n.reinit()},t.prototype.animateHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.animate({height:t},e.options.speed)}},t.prototype.animateSlide=function(t,i){var o={},n=this;n.animateHeight(),!0===n.options.rtl&&!1===n.options.vertical&&(t=-t),!1===n.transformsEnabled?!1===n.options.vertical?n.$slideTrack.animate({left:t},n.options.speed,n.options.easing,i):n.$slideTrack.animate({top:t},n.options.speed,n.options.easing,i):!1===n.cssTransitions?(!0===n.options.rtl&&(n.currentLeft=-n.currentLeft),e({animStart:n.currentLeft}).animate({animStart:t},{duration:n.options.speed,easing:n.options.easing,step:function(e){e=Math.ceil(e),!1===n.options.vertical?(o[n.animType]="translate("+e+"px, 0px)",n.$slideTrack.css(o)):(o[n.animType]="translate(0px,"+e+"px)",n.$slideTrack.css(o))},complete:function(){i&&i.call()}})):(n.applyTransition(),t=Math.ceil(t),!1===n.options.vertical?o[n.animType]="translate3d("+t+"px, 0px, 0px)":o[n.animType]="translate3d(0px,"+t+"px, 0px)",n.$slideTrack.css(o),i&&setTimeout(function(){n.disableTransition(),i.call()},n.options.speed))},t.prototype.getNavTarget=function(){var t=this.options.asNavFor;return t&&null!==t&&(t=e(t).not(this.$slider)),t},t.prototype.asNavFor=function(t){var i=this.getNavTarget();null!==i&&"object"==typeof i&&i.each(function(){var i=e(this).slick("getSlick");i.unslicked||i.slideHandler(t,!0)})},t.prototype.applyTransition=function(e){var t=this,i={};!1===t.options.fade?i[t.transitionType]=t.transformType+" "+t.options.speed+"ms "+t.options.cssEase:i[t.transitionType]="opacity "+t.options.speed+"ms "+t.options.cssEase,!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.autoPlay=function(){var e=this;e.autoPlayClear(),e.slideCount>e.options.slidesToShow&&(e.autoPlayTimer=setInterval(e.autoPlayIterator,e.options.autoplaySpeed))},t.prototype.autoPlayClear=function(){this.autoPlayTimer&&clearInterval(this.autoPlayTimer)},t.prototype.autoPlayIterator=function(){var e=this,t=e.currentSlide+e.options.slidesToScroll;e.paused||e.interrupted||e.focussed||(!1===e.options.infinite&&(1===e.direction&&e.currentSlide+1===e.slideCount-1?e.direction=0:0===e.direction&&(t=e.currentSlide-e.options.slidesToScroll,e.currentSlide-1==0&&(e.direction=1))),e.slideHandler(t))},t.prototype.buildArrows=function(){var t=this;!0===t.options.arrows&&(t.$prevArrow=e(t.options.prevArrow).addClass("slick-arrow"),t.$nextArrow=e(t.options.nextArrow).addClass("slick-arrow"),t.slideCount>t.options.slidesToShow?(t.$prevArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.$nextArrow.removeClass("slick-hidden").removeAttr("aria-hidden tabindex"),t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.prependTo(t.options.appendArrows),t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.appendTo(t.options.appendArrows),!0!==t.options.infinite&&t.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true")):t.$prevArrow.add(t.$nextArrow).addClass("slick-hidden").attr({"aria-disabled":"true",tabindex:"-1"}))},t.prototype.buildDots=function(){var t,i,o=this;if(!0===o.options.dots&&o.slideCount>o.options.slidesToShow){for(o.$slider.addClass("slick-dotted"),i=e("<ul />").addClass(o.options.dotsClass),t=0;t<=o.getDotCount();t+=1)i.append(e("<li />").append(o.options.customPaging.call(this,o,t)));o.$dots=i.appendTo(o.options.appendDots),o.$dots.find("li").first().addClass("slick-active")}},t.prototype.buildOut=function(){var t=this;t.$slides=t.$slider.children(t.options.slide+":not(.slick-cloned)").addClass("slick-slide"),t.slideCount=t.$slides.length,t.$slides.each(function(t,i){e(i).attr("data-slick-index",t).data("originalStyling",e(i).attr("style")||"")}),t.$slider.addClass("slick-slider"),t.$slideTrack=0===t.slideCount?e('<div class="slick-track"/>').appendTo(t.$slider):t.$slides.wrapAll('<div class="slick-track"/>').parent(),t.$list=t.$slideTrack.wrap('<div class="slick-list"/>').parent(),t.$slideTrack.css("opacity",0),!0!==t.options.centerMode&&!0!==t.options.swipeToSlide||(t.options.slidesToScroll=1),e("img[data-lazy]",t.$slider).not("[src]").addClass("slick-loading"),t.setupInfinite(),t.buildArrows(),t.buildDots(),t.updateDots(),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),!0===t.options.draggable&&t.$list.addClass("draggable")},t.prototype.buildRows=function(){var e,t,i,o,n,r,a,s=this;if(o=document.createDocumentFragment(),r=s.$slider.children(),s.options.rows>0){for(a=s.options.slidesPerRow*s.options.rows,n=Math.ceil(r.length/a),e=0;e<n;e++){var l=document.createElement("div");for(t=0;t<s.options.rows;t++){var c=document.createElement("div");for(i=0;i<s.options.slidesPerRow;i++){var d=e*a+(t*s.options.slidesPerRow+i);r.get(d)&&c.appendChild(r.get(d))}l.appendChild(c)}o.appendChild(l)}s.$slider.empty().append(o),s.$slider.children().children().children().css({width:100/s.options.slidesPerRow+"%",display:"inline-block"})}},t.prototype.checkResponsive=function(t,i){var o,n,r,a=this,s=!1,l=a.$slider.width(),c=window.innerWidth||e(window).width();if("window"===a.respondTo?r=c:"slider"===a.respondTo?r=l:"min"===a.respondTo&&(r=Math.min(c,l)),a.options.responsive&&a.options.responsive.length&&null!==a.options.responsive){for(o in n=null,a.breakpoints)a.breakpoints.hasOwnProperty(o)&&(!1===a.originalSettings.mobileFirst?r<a.breakpoints[o]&&(n=a.breakpoints[o]):r>a.breakpoints[o]&&(n=a.breakpoints[o]));null!==n?null!==a.activeBreakpoint?(n!==a.activeBreakpoint||i)&&(a.activeBreakpoint=n,"unslick"===a.breakpointSettings[n]?a.unslick(n):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),!0===t&&(a.currentSlide=a.options.initialSlide),a.refresh(t)),s=n):(a.activeBreakpoint=n,"unslick"===a.breakpointSettings[n]?a.unslick(n):(a.options=e.extend({},a.originalSettings,a.breakpointSettings[n]),!0===t&&(a.currentSlide=a.options.initialSlide),a.refresh(t)),s=n):null!==a.activeBreakpoint&&(a.activeBreakpoint=null,a.options=a.originalSettings,!0===t&&(a.currentSlide=a.options.initialSlide),a.refresh(t),s=n),t||!1===s||a.$slider.trigger("breakpoint",[a,s])}},t.prototype.changeSlide=function(t,i){var o,n,r=this,a=e(t.currentTarget);switch(a.is("a")&&t.preventDefault(),a.is("li")||(a=a.closest("li")),o=r.slideCount%r.options.slidesToScroll!=0?0:(r.slideCount-r.currentSlide)%r.options.slidesToScroll,t.data.message){case"previous":n=0===o?r.options.slidesToScroll:r.options.slidesToShow-o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide-n,!1,i);break;case"next":n=0===o?r.options.slidesToScroll:o,r.slideCount>r.options.slidesToShow&&r.slideHandler(r.currentSlide+n,!1,i);break;case"index":var s=0===t.data.index?0:t.data.index||a.index()*r.options.slidesToScroll;r.slideHandler(r.checkNavigable(s),!1,i),a.children().trigger("focus");break;default:return}},t.prototype.checkNavigable=function(e){var t,i;if(i=0,e>(t=this.getNavigableIndexes())[t.length-1])e=t[t.length-1];else for(var o in t){if(e<t[o]){e=i;break}i=t[o]}return e},t.prototype.cleanUpEvents=function(){var t=this;t.options.dots&&null!==t.$dots&&(e("li",t.$dots).off("click.slick",t.changeSlide).off("mouseenter.slick",e.proxy(t.interrupt,t,!0)).off("mouseleave.slick",e.proxy(t.interrupt,t,!1)),!0===t.options.accessibility&&t.$dots.off("keydown.slick",t.keyHandler)),t.$slider.off("focus.slick blur.slick"),!0===t.options.arrows&&t.slideCount>t.options.slidesToShow&&(t.$prevArrow&&t.$prevArrow.off("click.slick",t.changeSlide),t.$nextArrow&&t.$nextArrow.off("click.slick",t.changeSlide),!0===t.options.accessibility&&(t.$prevArrow&&t.$prevArrow.off("keydown.slick",t.keyHandler),t.$nextArrow&&t.$nextArrow.off("keydown.slick",t.keyHandler))),t.$list.off("touchstart.slick mousedown.slick",t.swipeHandler),t.$list.off("touchmove.slick mousemove.slick",t.swipeHandler),t.$list.off("touchend.slick mouseup.slick",t.swipeHandler),t.$list.off("touchcancel.slick mouseleave.slick",t.swipeHandler),t.$list.off("click.slick",t.clickHandler),e(document).off(t.visibilityChange,t.visibility),t.cleanUpSlideEvents(),!0===t.options.accessibility&&t.$list.off("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().off("click.slick",t.selectHandler),e(window).off("orientationchange.slick.slick-"+t.instanceUid,t.orientationChange),e(window).off("resize.slick.slick-"+t.instanceUid,t.resize),e("[draggable!=true]",t.$slideTrack).off("dragstart",t.preventDefault),e(window).off("load.slick.slick-"+t.instanceUid,t.setPosition)},t.prototype.cleanUpSlideEvents=function(){var t=this;t.$list.off("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.off("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.cleanUpRows=function(){var e,t=this;t.options.rows>0&&((e=t.$slides.children().children()).removeAttr("style"),t.$slider.empty().append(e))},t.prototype.clickHandler=function(e){!1===this.shouldClick&&(e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault())},t.prototype.destroy=function(t){var i=this;i.autoPlayClear(),i.touchObject={},i.cleanUpEvents(),e(".slick-cloned",i.$slider).detach(),i.$dots&&i.$dots.remove(),i.$prevArrow&&i.$prevArrow.length&&(i.$prevArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.prevArrow)&&i.$prevArrow.remove()),i.$nextArrow&&i.$nextArrow.length&&(i.$nextArrow.removeClass("slick-disabled slick-arrow slick-hidden").removeAttr("aria-hidden aria-disabled tabindex").css("display",""),i.htmlExpr.test(i.options.nextArrow)&&i.$nextArrow.remove()),i.$slides&&(i.$slides.removeClass("slick-slide slick-active slick-center slick-visible slick-current").removeAttr("aria-hidden").removeAttr("data-slick-index").each(function(){e(this).attr("style",e(this).data("originalStyling"))}),i.$slideTrack.children(this.options.slide).detach(),i.$slideTrack.detach(),i.$list.detach(),i.$slider.append(i.$slides)),i.cleanUpRows(),i.$slider.removeClass("slick-slider"),i.$slider.removeClass("slick-initialized"),i.$slider.removeClass("slick-dotted"),i.unslicked=!0,t||i.$slider.trigger("destroy",[i])},t.prototype.disableTransition=function(e){var t=this,i={};i[t.transitionType]="",!1===t.options.fade?t.$slideTrack.css(i):t.$slides.eq(e).css(i)},t.prototype.fadeSlide=function(e,t){var i=this;!1===i.cssTransitions?(i.$slides.eq(e).css({zIndex:i.options.zIndex}),i.$slides.eq(e).animate({opacity:1},i.options.speed,i.options.easing,t)):(i.applyTransition(e),i.$slides.eq(e).css({opacity:1,zIndex:i.options.zIndex}),t&&setTimeout(function(){i.disableTransition(e),t.call()},i.options.speed))},t.prototype.fadeSlideOut=function(e){var t=this;!1===t.cssTransitions?t.$slides.eq(e).animate({opacity:0,zIndex:t.options.zIndex-2},t.options.speed,t.options.easing):(t.applyTransition(e),t.$slides.eq(e).css({opacity:0,zIndex:t.options.zIndex-2}))},t.prototype.filterSlides=t.prototype.slickFilter=function(e){var t=this;null!==e&&(t.$slidesCache=t.$slides,t.unload(),t.$slideTrack.children(this.options.slide).detach(),t.$slidesCache.filter(e).appendTo(t.$slideTrack),t.reinit())},t.prototype.focusHandler=function(){var t=this;t.$slider.off("focus.slick blur.slick").on("focus.slick blur.slick","*",function(i){i.stopImmediatePropagation();var o=e(this);setTimeout(function(){t.options.pauseOnFocus&&(t.focussed=o.is(":focus"),t.autoPlay())},0)})},t.prototype.getCurrent=t.prototype.slickCurrentSlide=function(){return this.currentSlide},t.prototype.getDotCount=function(){var e=this,t=0,i=0,o=0;if(!0===e.options.infinite)if(e.slideCount<=e.options.slidesToShow)++o;else for(;t<e.slideCount;)++o,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else if(!0===e.options.centerMode)o=e.slideCount;else if(e.options.asNavFor)for(;t<e.slideCount;)++o,t=i+e.options.slidesToScroll,i+=e.options.slidesToScroll<=e.options.slidesToShow?e.options.slidesToScroll:e.options.slidesToShow;else o=1+Math.ceil((e.slideCount-e.options.slidesToShow)/e.options.slidesToScroll);return o-1},t.prototype.getLeft=function(e){var t,i,o,n,r=this,a=0;return r.slideOffset=0,i=r.$slides.first().outerHeight(!0),!0===r.options.infinite?(r.slideCount>r.options.slidesToShow&&(r.slideOffset=r.slideWidth*r.options.slidesToShow*-1,n=-1,!0===r.options.vertical&&!0===r.options.centerMode&&(2===r.options.slidesToShow?n=-1.5:1===r.options.slidesToShow&&(n=-2)),a=i*r.options.slidesToShow*n),r.slideCount%r.options.slidesToScroll!=0&&e+r.options.slidesToScroll>r.slideCount&&r.slideCount>r.options.slidesToShow&&(e>r.slideCount?(r.slideOffset=(r.options.slidesToShow-(e-r.slideCount))*r.slideWidth*-1,a=(r.options.slidesToShow-(e-r.slideCount))*i*-1):(r.slideOffset=r.slideCount%r.options.slidesToScroll*r.slideWidth*-1,a=r.slideCount%r.options.slidesToScroll*i*-1))):e+r.options.slidesToShow>r.slideCount&&(r.slideOffset=(e+r.options.slidesToShow-r.slideCount)*r.slideWidth,a=(e+r.options.slidesToShow-r.slideCount)*i),r.slideCount<=r.options.slidesToShow&&(r.slideOffset=0,a=0),!0===r.options.centerMode&&r.slideCount<=r.options.slidesToShow?r.slideOffset=r.slideWidth*Math.floor(r.options.slidesToShow)/2-r.slideWidth*r.slideCount/2:!0===r.options.centerMode&&!0===r.options.infinite?r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)-r.slideWidth:!0===r.options.centerMode&&(r.slideOffset=0,r.slideOffset+=r.slideWidth*Math.floor(r.options.slidesToShow/2)),t=!1===r.options.vertical?e*r.slideWidth*-1+r.slideOffset:e*i*-1+a,!0===r.options.variableWidth&&(o=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow),t=!0===r.options.rtl?o[0]?-1*(r.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,!0===r.options.centerMode&&(o=r.slideCount<=r.options.slidesToShow||!1===r.options.infinite?r.$slideTrack.children(".slick-slide").eq(e):r.$slideTrack.children(".slick-slide").eq(e+r.options.slidesToShow+1),t=!0===r.options.rtl?o[0]?-1*(r.$slideTrack.width()-o[0].offsetLeft-o.width()):0:o[0]?-1*o[0].offsetLeft:0,t+=(r.$list.width()-o.outerWidth())/2)),t},t.prototype.getOption=t.prototype.slickGetOption=function(e){return this.options[e]},t.prototype.getNavigableIndexes=function(){var e,t=this,i=0,o=0,n=[];for(!1===t.options.infinite?e=t.slideCount:(i=-1*t.options.slidesToScroll,o=-1*t.options.slidesToScroll,e=2*t.slideCount);i<e;)n.push(i),i=o+t.options.slidesToScroll,o+=t.options.slidesToScroll<=t.options.slidesToShow?t.options.slidesToScroll:t.options.slidesToShow;return n},t.prototype.getSlick=function(){return this},t.prototype.getSlideCount=function(){var t,i,o=this;return i=!0===o.options.centerMode?o.slideWidth*Math.floor(o.options.slidesToShow/2):0,!0===o.options.swipeToSlide?(o.$slideTrack.find(".slick-slide").each(function(n,r){if(r.offsetLeft-i+e(r).outerWidth()/2>-1*o.swipeLeft)return t=r,!1}),Math.abs(e(t).attr("data-slick-index")-o.currentSlide)||1):o.options.slidesToScroll},t.prototype.goTo=t.prototype.slickGoTo=function(e,t){this.changeSlide({data:{message:"index",index:parseInt(e)}},t)},t.prototype.init=function(t){var i=this;e(i.$slider).hasClass("slick-initialized")||(e(i.$slider).addClass("slick-initialized"),i.buildRows(),i.buildOut(),i.setProps(),i.startLoad(),i.loadSlider(),i.initializeEvents(),i.updateArrows(),i.updateDots(),i.checkResponsive(!0),i.focusHandler()),t&&i.$slider.trigger("init",[i]),!0===i.options.accessibility&&i.initADA(),i.options.autoplay&&(i.paused=!1,i.autoPlay())},t.prototype.initADA=function(){var t=this,i=Math.ceil(t.slideCount/t.options.slidesToShow),o=t.getNavigableIndexes().filter(function(e){return e>=0&&e<t.slideCount});t.$slides.add(t.$slideTrack.find(".slick-cloned")).attr({"aria-hidden":"true",tabindex:"-1"}).find("a, input, button, select").attr({tabindex:"-1"}),null!==t.$dots&&(t.$slides.not(t.$slideTrack.find(".slick-cloned")).each(function(i){var n=o.indexOf(i);if(e(this).attr({role:"tabpanel",id:"slick-slide"+t.instanceUid+i,tabindex:-1}),-1!==n){var r="slick-slide-control"+t.instanceUid+n;e("#"+r).length&&e(this).attr({"aria-describedby":r})}}),t.$dots.attr("role","tablist").find("li").each(function(n){var r=o[n];e(this).attr({role:"presentation"}),e(this).find("button").first().attr({role:"tab",id:"slick-slide-control"+t.instanceUid+n,"aria-controls":"slick-slide"+t.instanceUid+r,"aria-label":n+1+" of "+i,"aria-selected":null,tabindex:"-1"})}).eq(t.currentSlide).find("button").attr({"aria-selected":"true",tabindex:"0"}).end());for(var n=t.currentSlide,r=n+t.options.slidesToShow;n<r;n++)t.options.focusOnChange?t.$slides.eq(n).attr({tabindex:"0"}):t.$slides.eq(n).removeAttr("tabindex");t.activateADA()},t.prototype.initArrowEvents=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.off("click.slick").on("click.slick",{message:"previous"},e.changeSlide),e.$nextArrow.off("click.slick").on("click.slick",{message:"next"},e.changeSlide),!0===e.options.accessibility&&(e.$prevArrow.on("keydown.slick",e.keyHandler),e.$nextArrow.on("keydown.slick",e.keyHandler)))},t.prototype.initDotEvents=function(){var t=this;!0===t.options.dots&&t.slideCount>t.options.slidesToShow&&(e("li",t.$dots).on("click.slick",{message:"index"},t.changeSlide),!0===t.options.accessibility&&t.$dots.on("keydown.slick",t.keyHandler)),!0===t.options.dots&&!0===t.options.pauseOnDotsHover&&t.slideCount>t.options.slidesToShow&&e("li",t.$dots).on("mouseenter.slick",e.proxy(t.interrupt,t,!0)).on("mouseleave.slick",e.proxy(t.interrupt,t,!1))},t.prototype.initSlideEvents=function(){var t=this;t.options.pauseOnHover&&(t.$list.on("mouseenter.slick",e.proxy(t.interrupt,t,!0)),t.$list.on("mouseleave.slick",e.proxy(t.interrupt,t,!1)))},t.prototype.initializeEvents=function(){var t=this;t.initArrowEvents(),t.initDotEvents(),t.initSlideEvents(),t.$list.on("touchstart.slick mousedown.slick",{action:"start"},t.swipeHandler),t.$list.on("touchmove.slick mousemove.slick",{action:"move"},t.swipeHandler),t.$list.on("touchend.slick mouseup.slick",{action:"end"},t.swipeHandler),t.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},t.swipeHandler),t.$list.on("click.slick",t.clickHandler),e(document).on(t.visibilityChange,e.proxy(t.visibility,t)),!0===t.options.accessibility&&t.$list.on("keydown.slick",t.keyHandler),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),e(window).on("orientationchange.slick.slick-"+t.instanceUid,e.proxy(t.orientationChange,t)),e(window).on("resize.slick.slick-"+t.instanceUid,e.proxy(t.resize,t)),e("[draggable!=true]",t.$slideTrack).on("dragstart",t.preventDefault),e(window).on("load.slick.slick-"+t.instanceUid,t.setPosition),e(t.setPosition)},t.prototype.initUI=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.show(),e.$nextArrow.show()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.show()},t.prototype.keyHandler=function(e){var t=this;e.target.tagName.match("TEXTAREA|INPUT|SELECT")||(37===e.keyCode&&!0===t.options.accessibility?t.changeSlide({data:{message:!0===t.options.rtl?"next":"previous"}}):39===e.keyCode&&!0===t.options.accessibility&&t.changeSlide({data:{message:!0===t.options.rtl?"previous":"next"}}))},t.prototype.lazyLoad=function(){var t,i,o,n=this;function r(t){e("img[data-lazy]",t).each(function(){var t=e(this),i=e(this).attr("data-lazy"),o=e(this).attr("data-srcset"),r=e(this).attr("data-sizes")||n.$slider.attr("data-sizes"),a=document.createElement("img");a.onload=function(){t.animate({opacity:0},100,function(){o&&(t.attr("srcset",o),r&&t.attr("sizes",r)),t.attr("src",i).animate({opacity:1},200,function(){t.removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading")}),n.$slider.trigger("lazyLoaded",[n,t,i])})},a.onerror=function(){t.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),n.$slider.trigger("lazyLoadError",[n,t,i])},a.src=i})}if(!0===n.options.centerMode?!0===n.options.infinite?o=(i=n.currentSlide+(n.options.slidesToShow/2+1))+n.options.slidesToShow+2:(i=Math.max(0,n.currentSlide-(n.options.slidesToShow/2+1)),o=n.options.slidesToShow/2+1+2+n.currentSlide):(i=n.options.infinite?n.options.slidesToShow+n.currentSlide:n.currentSlide,o=Math.ceil(i+n.options.slidesToShow),!0===n.options.fade&&(i>0&&i--,o<=n.slideCount&&o++)),t=n.$slider.find(".slick-slide").slice(i,o),"anticipated"===n.options.lazyLoad)for(var a=i-1,s=o,l=n.$slider.find(".slick-slide"),c=0;c<n.options.slidesToScroll;c++)a<0&&(a=n.slideCount-1),t=(t=t.add(l.eq(a))).add(l.eq(s)),a--,s++;r(t),n.slideCount<=n.options.slidesToShow?r(n.$slider.find(".slick-slide")):n.currentSlide>=n.slideCount-n.options.slidesToShow?r(n.$slider.find(".slick-cloned").slice(0,n.options.slidesToShow)):0===n.currentSlide&&r(n.$slider.find(".slick-cloned").slice(-1*n.options.slidesToShow))},t.prototype.loadSlider=function(){var e=this;e.setPosition(),e.$slideTrack.css({opacity:1}),e.$slider.removeClass("slick-loading"),e.initUI(),"progressive"===e.options.lazyLoad&&e.progressiveLazyLoad()},t.prototype.next=t.prototype.slickNext=function(){this.changeSlide({data:{message:"next"}})},t.prototype.orientationChange=function(){this.checkResponsive(),this.setPosition()},t.prototype.pause=t.prototype.slickPause=function(){this.autoPlayClear(),this.paused=!0},t.prototype.play=t.prototype.slickPlay=function(){var e=this;e.autoPlay(),e.options.autoplay=!0,e.paused=!1,e.focussed=!1,e.interrupted=!1},t.prototype.postSlide=function(t){var i=this;i.unslicked||(i.$slider.trigger("afterChange",[i,t]),i.animating=!1,i.slideCount>i.options.slidesToShow&&i.setPosition(),i.swipeLeft=null,i.options.autoplay&&i.autoPlay(),!0===i.options.accessibility&&(i.initADA(),i.options.focusOnChange&&e(i.$slides.get(i.currentSlide)).attr("tabindex",0).focus()))},t.prototype.prev=t.prototype.slickPrev=function(){this.changeSlide({data:{message:"previous"}})},t.prototype.preventDefault=function(e){e.preventDefault()},t.prototype.progressiveLazyLoad=function(t){t=t||1;var i,o,n,r,a,s=this,l=e("img[data-lazy]",s.$slider);l.length?(i=l.first(),o=i.attr("data-lazy"),n=i.attr("data-srcset"),r=i.attr("data-sizes")||s.$slider.attr("data-sizes"),(a=document.createElement("img")).onload=function(){n&&(i.attr("srcset",n),r&&i.attr("sizes",r)),i.attr("src",o).removeAttr("data-lazy data-srcset data-sizes").removeClass("slick-loading"),!0===s.options.adaptiveHeight&&s.setPosition(),s.$slider.trigger("lazyLoaded",[s,i,o]),s.progressiveLazyLoad()},a.onerror=function(){t<3?setTimeout(function(){s.progressiveLazyLoad(t+1)},500):(i.removeAttr("data-lazy").removeClass("slick-loading").addClass("slick-lazyload-error"),s.$slider.trigger("lazyLoadError",[s,i,o]),s.progressiveLazyLoad())},a.src=o):s.$slider.trigger("allImagesLoaded",[s])},t.prototype.refresh=function(t){var i,o,n=this;o=n.slideCount-n.options.slidesToShow,!n.options.infinite&&n.currentSlide>o&&(n.currentSlide=o),n.slideCount<=n.options.slidesToShow&&(n.currentSlide=0),i=n.currentSlide,n.destroy(!0),e.extend(n,n.initials,{currentSlide:i}),n.init(),t||n.changeSlide({data:{message:"index",index:i}},!1)},t.prototype.registerBreakpoints=function(){var t,i,o,n=this,r=n.options.responsive||null;if("array"===e.type(r)&&r.length){for(t in n.respondTo=n.options.respondTo||"window",r)if(o=n.breakpoints.length-1,r.hasOwnProperty(t)){for(i=r[t].breakpoint;o>=0;)n.breakpoints[o]&&n.breakpoints[o]===i&&n.breakpoints.splice(o,1),o--;n.breakpoints.push(i),n.breakpointSettings[i]=r[t].settings}n.breakpoints.sort(function(e,t){return n.options.mobileFirst?e-t:t-e})}},t.prototype.reinit=function(){var t=this;t.$slides=t.$slideTrack.children(t.options.slide).addClass("slick-slide"),t.slideCount=t.$slides.length,t.currentSlide>=t.slideCount&&0!==t.currentSlide&&(t.currentSlide=t.currentSlide-t.options.slidesToScroll),t.slideCount<=t.options.slidesToShow&&(t.currentSlide=0),t.registerBreakpoints(),t.setProps(),t.setupInfinite(),t.buildArrows(),t.updateArrows(),t.initArrowEvents(),t.buildDots(),t.updateDots(),t.initDotEvents(),t.cleanUpSlideEvents(),t.initSlideEvents(),t.checkResponsive(!1,!0),!0===t.options.focusOnSelect&&e(t.$slideTrack).children().on("click.slick",t.selectHandler),t.setSlideClasses("number"==typeof t.currentSlide?t.currentSlide:0),t.setPosition(),t.focusHandler(),t.paused=!t.options.autoplay,t.autoPlay(),t.$slider.trigger("reInit",[t])},t.prototype.resize=function(){var t=this;e(window).width()!==t.windowWidth&&(clearTimeout(t.windowDelay),t.windowDelay=window.setTimeout(function(){t.windowWidth=e(window).width(),t.checkResponsive(),t.unslicked||t.setPosition()},50))},t.prototype.removeSlide=t.prototype.slickRemove=function(e,t,i){var o=this;if(e="boolean"==typeof e?!0===(t=e)?0:o.slideCount-1:!0===t?--e:e,o.slideCount<1||e<0||e>o.slideCount-1)return!1;o.unload(),!0===i?o.$slideTrack.children().remove():o.$slideTrack.children(this.options.slide).eq(e).remove(),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slidesCache=o.$slides,o.reinit()},t.prototype.setCSS=function(e){var t,i,o=this,n={};!0===o.options.rtl&&(e=-e),t="left"==o.positionProp?Math.ceil(e)+"px":"0px",i="top"==o.positionProp?Math.ceil(e)+"px":"0px",n[o.positionProp]=e,!1===o.transformsEnabled?o.$slideTrack.css(n):(n={},!1===o.cssTransitions?(n[o.animType]="translate("+t+", "+i+")",o.$slideTrack.css(n)):(n[o.animType]="translate3d("+t+", "+i+", 0px)",o.$slideTrack.css(n)))},t.prototype.setDimensions=function(){var e=this;!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth?(e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length))):!0===e.options.variableWidth?e.$slideTrack.width(5e3*e.slideCount):(e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length)));var t=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-t)},t.prototype.setFade=function(){var t,i=this;i.$slides.each(function(o,n){t=i.slideWidth*o*-1,!0===i.options.rtl?e(n).css({position:"relative",right:t,top:0,zIndex:i.options.zIndex-2,opacity:0}):e(n).css({position:"relative",left:t,top:0,zIndex:i.options.zIndex-2,opacity:0})}),i.$slides.eq(i.currentSlide).css({zIndex:i.options.zIndex-1,opacity:1})},t.prototype.setHeight=function(){var e=this;if(1===e.options.slidesToShow&&!0===e.options.adaptiveHeight&&!1===e.options.vertical){var t=e.$slides.eq(e.currentSlide).outerHeight(!0);e.$list.css("height",t)}},t.prototype.setOption=t.prototype.slickSetOption=function(){var t,i,o,n,r,a=this,s=!1;if("object"===e.type(arguments[0])?(o=arguments[0],s=arguments[1],r="multiple"):"string"===e.type(arguments[0])&&(o=arguments[0],n=arguments[1],s=arguments[2],"responsive"===arguments[0]&&"array"===e.type(arguments[1])?r="responsive":void 0!==arguments[1]&&(r="single")),"single"===r)a.options[o]=n;else if("multiple"===r)e.each(o,function(e,t){a.options[e]=t});else if("responsive"===r)for(i in n)if("array"!==e.type(a.options.responsive))a.options.responsive=[n[i]];else{for(t=a.options.responsive.length-1;t>=0;)a.options.responsive[t].breakpoint===n[i].breakpoint&&a.options.responsive.splice(t,1),t--;a.options.responsive.push(n[i])}s&&(a.unload(),a.reinit())},t.prototype.setPosition=function(){var e=this;e.setDimensions(),e.setHeight(),!1===e.options.fade?e.setCSS(e.getLeft(e.currentSlide)):e.setFade(),e.$slider.trigger("setPosition",[e])},t.prototype.setProps=function(){var e=this,t=document.body.style;e.positionProp=!0===e.options.vertical?"top":"left","top"===e.positionProp?e.$slider.addClass("slick-vertical"):e.$slider.removeClass("slick-vertical"),void 0===t.WebkitTransition&&void 0===t.MozTransition&&void 0===t.msTransition||!0===e.options.useCSS&&(e.cssTransitions=!0),e.options.fade&&("number"==typeof e.options.zIndex?e.options.zIndex<3&&(e.options.zIndex=3):e.options.zIndex=e.defaults.zIndex),void 0!==t.OTransform&&(e.animType="OTransform",e.transformType="-o-transform",e.transitionType="OTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.MozTransform&&(e.animType="MozTransform",e.transformType="-moz-transform",e.transitionType="MozTransition",void 0===t.perspectiveProperty&&void 0===t.MozPerspective&&(e.animType=!1)),void 0!==t.webkitTransform&&(e.animType="webkitTransform",e.transformType="-webkit-transform",e.transitionType="webkitTransition",void 0===t.perspectiveProperty&&void 0===t.webkitPerspective&&(e.animType=!1)),void 0!==t.msTransform&&(e.animType="msTransform",e.transformType="-ms-transform",e.transitionType="msTransition",void 0===t.msTransform&&(e.animType=!1)),void 0!==t.transform&&!1!==e.animType&&(e.animType="transform",e.transformType="transform",e.transitionType="transition"),e.transformsEnabled=e.options.useTransform&&null!==e.animType&&!1!==e.animType},t.prototype.setSlideClasses=function(e){var t,i,o,n,r=this;if(i=r.$slider.find(".slick-slide").removeClass("slick-active slick-center slick-current").attr("aria-hidden","true"),r.$slides.eq(e).addClass("slick-current"),!0===r.options.centerMode){var a=r.options.slidesToShow%2==0?1:0;t=Math.floor(r.options.slidesToShow/2),!0===r.options.infinite&&(e>=t&&e<=r.slideCount-1-t?r.$slides.slice(e-t+a,e+t+1).addClass("slick-active").attr("aria-hidden","false"):(o=r.options.slidesToShow+e,i.slice(o-t+1+a,o+t+2).addClass("slick-active").attr("aria-hidden","false")),0===e?i.eq(i.length-1-r.options.slidesToShow).addClass("slick-center"):e===r.slideCount-1&&i.eq(r.options.slidesToShow).addClass("slick-center")),r.$slides.eq(e).addClass("slick-center")}else e>=0&&e<=r.slideCount-r.options.slidesToShow?r.$slides.slice(e,e+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"):i.length<=r.options.slidesToShow?i.addClass("slick-active").attr("aria-hidden","false"):(n=r.slideCount%r.options.slidesToShow,o=!0===r.options.infinite?r.options.slidesToShow+e:e,r.options.slidesToShow==r.options.slidesToScroll&&r.slideCount-e<r.options.slidesToShow?i.slice(o-(r.options.slidesToShow-n),o+n).addClass("slick-active").attr("aria-hidden","false"):i.slice(o,o+r.options.slidesToShow).addClass("slick-active").attr("aria-hidden","false"));"ondemand"!==r.options.lazyLoad&&"anticipated"!==r.options.lazyLoad||r.lazyLoad()},t.prototype.setupInfinite=function(){var t,i,o,n=this;if(!0===n.options.fade&&(n.options.centerMode=!1),!0===n.options.infinite&&!1===n.options.fade&&(i=null,n.slideCount>n.options.slidesToShow)){for(o=!0===n.options.centerMode?n.options.slidesToShow+1:n.options.slidesToShow,t=n.slideCount;t>n.slideCount-o;t-=1)i=t-1,e(n.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i-n.slideCount).prependTo(n.$slideTrack).addClass("slick-cloned");for(t=0;t<o+n.slideCount;t+=1)i=t,e(n.$slides[i]).clone(!0).attr("id","").attr("data-slick-index",i+n.slideCount).appendTo(n.$slideTrack).addClass("slick-cloned");n.$slideTrack.find(".slick-cloned").find("[id]").each(function(){e(this).attr("id","")})}},t.prototype.interrupt=function(e){e||this.autoPlay(),this.interrupted=e},t.prototype.selectHandler=function(t){var i=this,o=e(t.target).is(".slick-slide")?e(t.target):e(t.target).parents(".slick-slide"),n=parseInt(o.attr("data-slick-index"));n||(n=0),i.slideCount<=i.options.slidesToShow?i.slideHandler(n,!1,!0):i.slideHandler(n)},t.prototype.slideHandler=function(e,t,i){var o,n,r,a,s,l,c=this;if(t=t||!1,!(!0===c.animating&&!0===c.options.waitForAnimate||!0===c.options.fade&&c.currentSlide===e))if(!1===t&&c.asNavFor(e),o=e,s=c.getLeft(o),a=c.getLeft(c.currentSlide),c.currentLeft=null===c.swipeLeft?a:c.swipeLeft,!1===c.options.infinite&&!1===c.options.centerMode&&(e<0||e>c.getDotCount()*c.options.slidesToScroll))!1===c.options.fade&&(o=c.currentSlide,!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(a,function(){c.postSlide(o)}):c.postSlide(o));else if(!1===c.options.infinite&&!0===c.options.centerMode&&(e<0||e>c.slideCount-c.options.slidesToScroll))!1===c.options.fade&&(o=c.currentSlide,!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(a,function(){c.postSlide(o)}):c.postSlide(o));else{if(c.options.autoplay&&clearInterval(c.autoPlayTimer),n=o<0?c.slideCount%c.options.slidesToScroll!=0?c.slideCount-c.slideCount%c.options.slidesToScroll:c.slideCount+o:o>=c.slideCount?c.slideCount%c.options.slidesToScroll!=0?0:o-c.slideCount:o,c.animating=!0,c.$slider.trigger("beforeChange",[c,c.currentSlide,n]),r=c.currentSlide,c.currentSlide=n,c.setSlideClasses(c.currentSlide),c.options.asNavFor&&(l=(l=c.getNavTarget()).slick("getSlick")).slideCount<=l.options.slidesToShow&&l.setSlideClasses(c.currentSlide),c.updateDots(),c.updateArrows(),!0===c.options.fade)return!0!==i?(c.fadeSlideOut(r),c.fadeSlide(n,function(){c.postSlide(n)})):c.postSlide(n),void c.animateHeight();!0!==i&&c.slideCount>c.options.slidesToShow?c.animateSlide(s,function(){c.postSlide(n)}):c.postSlide(n)}},t.prototype.startLoad=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.hide(),e.$nextArrow.hide()),!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&e.$dots.hide(),e.$slider.addClass("slick-loading")},t.prototype.swipeDirection=function(){var e,t,i,o,n=this;return e=n.touchObject.startX-n.touchObject.curX,t=n.touchObject.startY-n.touchObject.curY,i=Math.atan2(t,e),(o=Math.round(180*i/Math.PI))<0&&(o=360-Math.abs(o)),o<=45&&o>=0?!1===n.options.rtl?"left":"right":o<=360&&o>=315?!1===n.options.rtl?"left":"right":o>=135&&o<=225?!1===n.options.rtl?"right":"left":!0===n.options.verticalSwiping?o>=35&&o<=135?"down":"up":"vertical"},t.prototype.swipeEnd=function(e){var t,i,o=this;if(o.dragging=!1,o.swiping=!1,o.scrolling)return o.scrolling=!1,!1;if(o.interrupted=!1,o.shouldClick=!(o.touchObject.swipeLength>10),void 0===o.touchObject.curX)return!1;if(!0===o.touchObject.edgeHit&&o.$slider.trigger("edge",[o,o.swipeDirection()]),o.touchObject.swipeLength>=o.touchObject.minSwipe){switch(i=o.swipeDirection()){case"left":case"down":t=o.options.swipeToSlide?o.checkNavigable(o.currentSlide+o.getSlideCount()):o.currentSlide+o.getSlideCount(),o.currentDirection=0;break;case"right":case"up":t=o.options.swipeToSlide?o.checkNavigable(o.currentSlide-o.getSlideCount()):o.currentSlide-o.getSlideCount(),o.currentDirection=1}"vertical"!=i&&(o.slideHandler(t),o.touchObject={},o.$slider.trigger("swipe",[o,i]))}else o.touchObject.startX!==o.touchObject.curX&&(o.slideHandler(o.currentSlide),o.touchObject={})},t.prototype.swipeHandler=function(e){var t=this;if(!(!1===t.options.swipe||"ontouchend"in document&&!1===t.options.swipe||!1===t.options.draggable&&-1!==e.type.indexOf("mouse")))switch(t.touchObject.fingerCount=e.originalEvent&&void 0!==e.originalEvent.touches?e.originalEvent.touches.length:1,t.touchObject.minSwipe=t.listWidth/t.options.touchThreshold,!0===t.options.verticalSwiping&&(t.touchObject.minSwipe=t.listHeight/t.options.touchThreshold),e.data.action){case"start":t.swipeStart(e);break;case"move":t.swipeMove(e);break;case"end":t.swipeEnd(e)}},t.prototype.swipeMove=function(e){var t,i,o,n,r,a,s=this;return r=void 0!==e.originalEvent?e.originalEvent.touches:null,!(!s.dragging||s.scrolling||r&&1!==r.length)&&(t=s.getLeft(s.currentSlide),s.touchObject.curX=void 0!==r?r[0].pageX:e.clientX,s.touchObject.curY=void 0!==r?r[0].pageY:e.clientY,s.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(s.touchObject.curX-s.touchObject.startX,2))),a=Math.round(Math.sqrt(Math.pow(s.touchObject.curY-s.touchObject.startY,2))),!s.options.verticalSwiping&&!s.swiping&&a>4?(s.scrolling=!0,!1):(!0===s.options.verticalSwiping&&(s.touchObject.swipeLength=a),i=s.swipeDirection(),void 0!==e.originalEvent&&s.touchObject.swipeLength>4&&(s.swiping=!0,e.preventDefault()),n=(!1===s.options.rtl?1:-1)*(s.touchObject.curX>s.touchObject.startX?1:-1),!0===s.options.verticalSwiping&&(n=s.touchObject.curY>s.touchObject.startY?1:-1),o=s.touchObject.swipeLength,s.touchObject.edgeHit=!1,!1===s.options.infinite&&(0===s.currentSlide&&"right"===i||s.currentSlide>=s.getDotCount()&&"left"===i)&&(o=s.touchObject.swipeLength*s.options.edgeFriction,s.touchObject.edgeHit=!0),!1===s.options.vertical?s.swipeLeft=t+o*n:s.swipeLeft=t+o*(s.$list.height()/s.listWidth)*n,!0===s.options.verticalSwiping&&(s.swipeLeft=t+o*n),!0!==s.options.fade&&!1!==s.options.touchMove&&(!0===s.animating?(s.swipeLeft=null,!1):void s.setCSS(s.swipeLeft))))},t.prototype.swipeStart=function(e){var t,i=this;if(i.interrupted=!0,1!==i.touchObject.fingerCount||i.slideCount<=i.options.slidesToShow)return i.touchObject={},!1;void 0!==e.originalEvent&&void 0!==e.originalEvent.touches&&(t=e.originalEvent.touches[0]),i.touchObject.startX=i.touchObject.curX=void 0!==t?t.pageX:e.clientX,i.touchObject.startY=i.touchObject.curY=void 0!==t?t.pageY:e.clientY,i.dragging=!0},t.prototype.unfilterSlides=t.prototype.slickUnfilter=function(){var e=this;null!==e.$slidesCache&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.appendTo(e.$slideTrack),e.reinit())},t.prototype.unload=function(){var t=this;e(".slick-cloned",t.$slider).remove(),t.$dots&&t.$dots.remove(),t.$prevArrow&&t.htmlExpr.test(t.options.prevArrow)&&t.$prevArrow.remove(),t.$nextArrow&&t.htmlExpr.test(t.options.nextArrow)&&t.$nextArrow.remove(),t.$slides.removeClass("slick-slide slick-active slick-visible slick-current").attr("aria-hidden","true").css("width","")},t.prototype.unslick=function(e){var t=this;t.$slider.trigger("unslick",[t,e]),t.destroy()},t.prototype.updateArrows=function(){var e=this;Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&!e.options.infinite&&(e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$nextArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")):e.currentSlide>=e.slideCount-1&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled").attr("aria-disabled","true"),e.$prevArrow.removeClass("slick-disabled").attr("aria-disabled","false")))},t.prototype.updateDots=function(){var e=this;null!==e.$dots&&(e.$dots.find("li").removeClass("slick-active").end(),e.$dots.find("li").eq(Math.floor(e.currentSlide/e.options.slidesToScroll)).addClass("slick-active"))},t.prototype.visibility=function(){var e=this;e.options.autoplay&&(document[e.hidden]?e.interrupted=!0:e.interrupted=!1)},e.fn.slick=function(){var e,i,o=this,n=arguments[0],r=Array.prototype.slice.call(arguments,1),a=o.length;for(e=0;e<a;e++)if("object"==typeof n||void 0===n?o[e].slick=new t(o[e],n):i=o[e].slick[n].apply(o[e].slick,r),void 0!==i)return i;return o}}),function(e,t,i){"use strict";var o=t.module("ngRoute",["ng"]).provider("$route",function(){function e(e,i){return t.extend(Object.create(e),i)}var i={};function o(e,t){var i=t.caseInsensitiveMatch,o={originalPath:e,regexp:e},n=o.keys=[];return e=e.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(e,t,i,o){var r="?"===o?o:null,a="*"===o?o:null;return n.push({name:i,optional:!!r}),t=t||"",(r?"":t)+"(?:"+(r?t:"")+(a?"(.+?)":"([^/]+)")+(r||"")+")"+(r||"")}).replace(/([\/$\*])/g,"\\$1"),o.regexp=new RegExp("^"+e+"$",i?"i":""),o}this.when=function(e,n){var r=t.copy(n);if(t.isUndefined(r.reloadOnSearch)&&(r.reloadOnSearch=!0),t.isUndefined(r.caseInsensitiveMatch)&&(r.caseInsensitiveMatch=this.caseInsensitiveMatch),i[e]=t.extend(r,e&&o(e,r)),e){var a="/"==e[e.length-1]?e.substr(0,e.length-1):e+"/";i[a]=t.extend({redirectTo:e},o(a,r))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(e){return"string"==typeof e&&(e={redirectTo:e}),this.when(null,e),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(o,r,a,s,l,c,d){var u,p,h=!1,f={routes:i,reload:function(){h=!0,o.$evalAsync(function(){g(),m()})},updateParams:function(e){if(!this.current||!this.current.$$route)throw n("norout","Tried updating route when with no current route");e=t.extend({},this.current.params,e),r.path(v(this.current.$$route.originalPath,e)),r.search(e)}};return o.$on("$locationChangeStart",g),o.$on("$locationChangeSuccess",m),f;function g(n){var a,s,l=f.current;t.forEach(i,function(i,o){!s&&(a=function(e,t){var i=t.keys,o={};if(!t.regexp)return null;var n=t.regexp.exec(e);if(!n)return null;for(var r=1,a=n.length;r<a;++r){var s=i[r-1],l=n[r];s&&l&&(o[s.name]=l)}return o}(r.path(),i))&&((s=e(i,{params:t.extend({},r.search(),a),pathParams:a})).$$route=i)}),u=s||i.null&&e(i.null,{params:{},pathParams:{}}),(p=u&&l&&u.$$route===l.$$route&&t.equals(u.pathParams,l.pathParams)&&!u.reloadOnSearch&&!h)||!l&&!u||o.$broadcast("$routeChangeStart",u,l).defaultPrevented&&n&&n.preventDefault()}function m(){var e=f.current,i=u;p?(e.params=i.params,t.copy(e.params,a),o.$broadcast("$routeUpdate",e)):(i||e)&&(h=!1,f.current=i,i&&i.redirectTo&&(t.isString(i.redirectTo)?r.path(v(i.redirectTo,i.params)).search(i.params).replace():r.url(i.redirectTo(i.pathParams,r.path(),r.search())).replace()),s.when(i).then(function(){if(i){var e,o,n=t.extend({},i.resolve);return t.forEach(n,function(e,i){n[i]=t.isString(e)?l.get(e):l.invoke(e,null,null,i)}),t.isDefined(e=i.template)?t.isFunction(e)&&(e=e(i.params)):t.isDefined(o=i.templateUrl)&&(t.isFunction(o)&&(o=o(i.params)),o=d.getTrustedResourceUrl(o),t.isDefined(o)&&(i.loadedTemplateUrl=o,e=c(o))),t.isDefined(e)&&(n.$template=e),s.all(n)}}).then(function(n){i==f.current&&(i&&(i.locals=n,t.copy(i.params,a)),o.$broadcast("$routeChangeSuccess",i,e))},function(t){i==f.current&&o.$broadcast("$routeChangeError",i,e,t)}))}function v(e,i){var o=[];return t.forEach((e||"").split(":"),function(e,t){if(0===t)o.push(e);else{var n=e.match(/(\w+)(?:[?*])?(.*)/),r=n[1];o.push(i[r]),o.push(n[2]||""),delete i[r]}}),o.join("")}}]}),n=t.$$minErr("ngRoute");function r(e,i,o){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(n,r,a,s,l){var c,d,u,p=a.autoscroll,h=a.onload||"";function f(){u&&(o.cancel(u),u=null),c&&(c.$destroy(),c=null),d&&((u=o.leave(d)).then(function(){u=null}),d=null)}function g(){var a=e.current&&e.current.locals,s=a&&a.$template;if(t.isDefined(s)){var u=n.$new(),g=e.current,m=l(u,function(e){o.enter(e,null,d||r).then(function(){!t.isDefined(p)||p&&!n.$eval(p)||i()}),f()});d=m,(c=g.scope=u).$emit("$viewContentLoaded"),c.$eval(h)}else f()}n.$on("$routeChangeSuccess",g),g()}}}function a(e,t,i){return{restrict:"ECA",priority:-400,link:function(o,n){var r=i.current,a=r.locals;n.html(a.$template);var s=e(n.contents());if(r.controller){a.$scope=o;var l=t(r.controller,a);r.controllerAs&&(o[r.controllerAs]=l),n.data("$ngControllerController",l),n.children().data("$ngControllerController",l)}s(o)}}}o.provider("$routeParams",function(){this.$get=function(){return{}}}),o.directive("ngView",r),o.directive("ngView",a),r.$inject=["$route","$anchorScroll","$animate"],a.$inject=["$compile","$controller","$route"]}(window,window.angular),function(e,t,i){"use strict";t.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){return function(e,i,o){var n=o.ngAnimateChildren;t.isString(n)&&0===n.length?i.data("$$ngAnimateChildren",!0):e.$watch(n,function(e){i.data("$$ngAnimateChildren",!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(e,t){var i=t[0].body;return function(t){return e(function(){i.offsetWidth;t()})}}]).config(["$provide","$animateProvider",function(i,o){var n,r=t.noop,a=t.forEach,s=o.$$selectors,l=t.isArray,c=t.isString,d=t.isObject,u=1,p="$$ngAnimateState",h="$$ngAnimateChildren",f="ng-animate",g={running:!0};function m(e){for(var t=0;t<e.length;t++){var i=e[t];if(i.nodeType==u)return i}}function v(e){return e&&t.element(e)}function w(e){return t.element(m(e))}function y(e,t){return m(e)==m(t)}i.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(e,i,u,b,k,x,S,$,T,C){n=C,k.data(p,g);var _=S.$watch(function(){return T.totalPendingRequests},function(e,t){0===e&&(_(),S.$$postDigest(function(){S.$$postDigest(function(){g.running=!1})}))}),D=0,I=o.classNameFilter(),A=I?function(e){return I.test(e)}:function(){return!0};function E(e,t){var i=e.data(p)||{};return t&&(i.running=!0,i.structural=!0,e.data(p,i)),i.disabled||i.running&&i.structural}function P(e){var t,o=i.defer();return o.promise.$$cancelFn=function(){t&&t()},S.$$postDigest(function(){t=e(function(){o.resolve()})}),o.promise}function z(e){if(d(e))return e.tempClasses&&c(e.tempClasses)&&(e.tempClasses=e.tempClasses.split(/\s+/)),e}function M(e,i,o,n){var c=e[0];if(c){var d,p;n&&(n.to=n.to||{},n.from=n.from||{}),l(o)&&(d=o[0],p=o[1],d?p?o=d+" "+p:(o=d,i="addClass"):(o=p,i="removeClass"));var h="setClass"==i,f=h||"addClass"==i||"removeClass"==i||"animate"==i,g=e.attr("class")+" "+o;if(A(g)){var m=r,v=[],w=[],y=r,k=[],x=[],S=(" "+g).replace(/\s+/g,".");return a(function(e){if(e){var t=[],i={},o=e.substr(1).split(".");(b.transitions||b.animations)&&t.push(u.get(s[""]));for(var n=0;n<o.length;n++){var r=o[n],a=s[r];a&&!i[r]&&(t.push(u.get(a)),i[r]=!0)}return t}}(S),function(e){!$(e,i)&&h&&($(e,"addClass"),$(e,"removeClass"))}),{node:c,event:i,className:o,isClassBased:f,isSetClassOperation:h,applyStyles:function(){n&&e.css(t.extend(n.from||{},n.to||{}))},before:function(e){m=e,T(w,v,function(){m=r,e()})},after:function(e){y=e,T(x,k,function(){y=r,e()})},cancel:function(){v&&(a(v,function(e){(e||r)(!0)}),m(!0)),k&&(a(k,function(e){(e||r)(!0)}),y(!0))}}}}function $(e,t){var i=e[t],o=e["before"+t.charAt(0).toUpperCase()+t.substr(1)];if(i||o)return"leave"==t&&(o=i,i=null),x.push({event:t,fn:i}),w.push({event:t,fn:o}),!0}function T(t,i,s){var l=[];a(t,function(e){e.fn&&l.push(e)});var c=0;a(l,function(t,a){var u=function(){!function(e){if(i){if((i[e]||r)(),++c<l.length)return;i=null}s()}(a)};switch(t.event){case"setClass":i.push(t.fn(e,d,p,u,n));break;case"animate":i.push(t.fn(e,o,n.from,n.to,u));break;case"addClass":i.push(t.fn(e,d||o,u,n));break;case"removeClass":i.push(t.fn(e,p||o,u,n));break;default:i.push(t.fn(e,u,n))}}),i&&0===i.length&&s()}}return{animate:function(e,t,i,o,n){return o=o||"ng-inline-animate",(n=z(n)||{}).from=i?t:null,n.to=i||t,P(function(t){return L("animate",o,w(e),null,null,r,n,t)})},enter:function(i,o,n,a){return a=z(a),i=t.element(i),o=v(o),n=v(n),E(i,!0),e.enter(i,o,n),P(function(e){return L("enter","ng-enter",w(i),o,n,r,a,e)})},leave:function(i,o){return o=z(o),O(i=t.element(i)),E(i,!0),P(function(t){return L("leave","ng-leave",w(i),null,null,function(){e.leave(i)},o,t)})},move:function(i,o,n,a){return a=z(a),i=t.element(i),o=v(o),n=v(n),O(i),E(i,!0),e.move(i,o,n),P(function(e){return L("move","ng-move",w(i),o,n,r,a,e)})},addClass:function(e,t,i){return this.setClass(e,t,[],i)},removeClass:function(e,t,i){return this.setClass(e,[],t,i)},setClass:function(i,o,n,r){r=z(r);if(E(i=w(i=t.element(i))))return e.$$setClassImmediately(i,o,n,r);var s,c=i.data("$$animateClasses"),d=!!c;return c||((c={}).classes={}),s=c.classes,o=l(o)?o:o.split(" "),a(o,function(e){e&&e.length&&(s[e]=!0)}),n=l(n)?n:n.split(" "),a(n,function(e){e&&e.length&&(s[e]=!1)}),d?(r&&c.options&&(c.options=t.extend(c.options||{},r)),c.promise):(i.data("$$animateClasses",c={classes:s,options:r}),c.promise=P(function(t){var o=i.parent(),n=m(i),r=n.parentNode;if(r&&!r.$$NG_REMOVED&&!n.$$NG_REMOVED){var s=i.data("$$animateClasses");i.removeData("$$animateClasses");var l=i.data(p)||{},c=function(e,t,i){var o={};a(i=i||{},function(e,t){a(t.split(" "),function(t){o[t]=e})});var n=Object.create(null);a((e.attr("class")||"").split(/\s+/),function(e){n[e]=!0});var r=[],s=[];return a(t&&t.classes||[],function(e,t){var i=n[t],a=o[t]||{};!1===e?(i||"addClass"==a.event)&&s.push(t):!0===e&&(i&&"removeClass"!=a.event||r.push(t))}),r.length+s.length>0&&[r.join(" "),s.join(" ")]}(i,s,l.active);return c?L("setClass",c,i,o,null,function(){c[0]&&e.$$addClassImmediately(i,c[0]),c[1]&&e.$$removeClassImmediately(i,c[1])},s.options,t):t()}t()}))},cancel:function(e){e.$$cancelFn()},enabled:function(e,t){switch(arguments.length){case 2:if(e)R(t);else{var i=t.data(p)||{};i.disabled=!0,t.data(p,i)}break;case 1:g.disabled=!e;break;default:e=!g.disabled}return!!e}};function L(e,i,o,s,l,c,d,u){var m=r,v=M(o,e,i,d);if(!v)return N(),z(),L(),F(),m;e=v.event,i=v.className;var w=t.element._data(v.node);if(w=w&&w.events,s||(s=l?l.parent():o.parent()),function(e,i){if(g.disabled)return!0;if(y(e,k))return g.running;var o,n,r;do{if(0===i.length)break;var a=y(i,k),s=a?g:i.data(p)||{};if(s.disabled)return!0;if(a&&(r=!0),!1!==o){var l=i.data(h);t.isDefined(l)&&(o=l)}n=n||s.running||s.last&&!s.last.isClassBased}while(i=i.parent());return!r||!o&&n}(o,s))return N(),z(),L(),F(),m;var b=o.data(p)||{},S=b.active||{},$=b.totalActive||0,T=b.last,C=!1;if($>0){var _=[];if(v.isClassBased){if("setClass"==T.event)_.push(T),R(o,i);else if(S[i]){var I=S[i];I.event==e?C=!0:(_.push(I),R(o,i))}}else if("leave"==e&&S["ng-leave"])C=!0;else{for(var A in S)_.push(S[A]);b={},R(o,!0)}_.length>0&&a(_,function(e){e.cancel()})}if(!v.isClassBased||v.isSetClassOperation||"animate"==e||C||(C="addClass"==e==o.hasClass(i)),C)return N(),z(),L(),O(),m;S=b.active||{},$=b.totalActive||0,"leave"==e&&o.one("$destroy",function(e){var i=t.element(this),o=i.data(p);if(o){var n=o.active["ng-leave"];n&&(n.cancel(),R(i,"ng-leave"))}}),n.addClass(o,f),d&&d.tempClasses&&a(d.tempClasses,function(e){n.addClass(o,e)});var E=D++;return $++,S[i]=v,o.data(p,{last:v,active:S,index:E,totalActive:$}),z(),v.before(function(t){var n=o.data(p);t=t||!n||!n.active[i]||v.isClassBased&&n.active[i].event!=e,N(),!0===t?F():(L(),v.after(F))}),v.cancel;function P(t){var n="$animate:"+t;w&&w[n]&&w[n].length>0&&x(function(){o.triggerHandler(n,{event:e,className:i})})}function z(){P("before")}function L(){P("after")}function O(){P("close"),u()}function N(){N.hasBeenRun||(N.hasBeenRun=!0,c())}function F(){if(!F.hasBeenRun){v&&v.applyStyles(),F.hasBeenRun=!0,d&&d.tempClasses&&a(d.tempClasses,function(e){n.removeClass(o,e)});var e=o.data(p);e&&(v&&v.isClassBased?R(o,i):(x(function(){var e=o.data(p)||{};E==e.index&&R(o,i)}),o.data(p,e))),O()}}}function O(e){var i=m(e);if(i){var o=t.isFunction(i.getElementsByClassName)?i.getElementsByClassName(f):i.querySelectorAll("."+f);a(o,function(e){var i=(e=t.element(e)).data(p);i&&i.active&&a(i.active,function(e){e.cancel()})})}}function R(e,t){if(y(e,k))g.disabled||(g.running=!1,g.structural=!1);else if(t){var i=e.data(p)||{},o=!0===t;!o&&i.active&&i.active[t]&&(i.totalActive--,delete i.active[t]),!o&&i.totalActive||(n.removeClass(e,f),e.removeData(p))}}}]),o.register("",["$window","$sniffer","$timeout","$$animateReflow",function(i,o,s,d){var p,h,f,g,v="";void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(v="-webkit-",p="WebkitTransition",h="webkitTransitionEnd transitionend"):(p="transition",h="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(v="-webkit-",f="WebkitAnimation",g="webkitAnimationEnd animationend"):(f="animation",g="animationend");var w,y="Duration",b="Property",k="Delay",x="IterationCount",S="PlayState",$="$$ngAnimateKey",T="$$ngAnimateCSS3Data",C=3,_=1.5,D=1e3,I={},A=0,E=[];function P(){w||(w=d(function(){E=[],w=null,I={}}))}function z(e,t){w&&w(),E.push(t),w=d(function(){a(E,function(e){e()}),E=[],w=null,I={}})}var M=null,L=0,O=[];function R(e,i){var o=m(e);e=t.element(o),O.push(e);var n=Date.now()+i;n<=L||(s.cancel(M),L=n,M=s(function(){a(O,function(e){var t=e.data(T);t&&a(t.closeAnimationFns,function(e){e()})}),O=[]},i,!1))}function N(e,t){var o=t?I[t]:null;if(!o){var n=0,r=0,s=0,l=0;a(e,function(e){if(e.nodeType==u){var t=i.getComputedStyle(e)||{},o=t[p+y];n=Math.max(F(o),n);var a=t[p+k];r=Math.max(F(a),r);t[f+k];l=Math.max(F(t[f+k]),l);var c=F(t[f+y]);c>0&&(c*=parseInt(t[f+x],10)||1),s=Math.max(c,s)}}),o={total:0,transitionDelay:r,transitionDuration:n,animationDelay:l,animationDuration:s},t&&(I[t]=o)}return o}function F(e){var t=0,i=c(e)?e.split(/\s*,\s*/):[];return a(i,function(e){t=Math.max(parseFloat(e)||0,t)}),t}function U(e,t,i,o){var r=["ng-enter","ng-leave","ng-move"].indexOf(i)>=0,a=function(e){var t=e.parent(),i=t.data($);return i||(t.data($,++A),i=A),i+"-"+m(e).getAttribute("class")}(t),s=a+" "+i,l=I[s]?++I[s].total:0,c={};if(l>0){var d=i+"-stagger",u=a+" "+d,p=!I[u];p&&n.addClass(t,d),c=N(t,u),p&&n.removeClass(t,d)}n.addClass(t,i);var h=t.data(T)||{},f=N(t,s),g=f.transitionDuration,v=f.animationDuration;if(r&&0===g&&0===v)return n.removeClass(t,i),!1;var w=o||r&&g>0,y=v>0&&c.animationDelay>0&&0===c.animationDuration,b=h.closeAnimationFns||[];t.data(T,{stagger:c,cacheKey:s,running:h.running||0,itemIndex:l,blockTransition:w,closeAnimationFns:b});var k=m(t);return w&&(j(k,!0),o&&t.css(o)),y&&H(k,!0),!0}function j(e,t){e.style[p+b]=t?"none":""}function H(e,t){e.style[f+S]=t?"paused":""}function W(e,t,i,o){if(U(0,t,i,o))return function(e){e&&V(t,i)}}function B(e,t,i,o,r){if(t.data(T))return function(e,t,i,o,r){var l=m(t),c=t.data(T);if(-1!=l.getAttribute("class").indexOf(i)&&c){var d="",u="";a(i.split(" "),function(e,t){var i=(t>0?" ":"")+e;d+=i+"-active",u+=i+"-pending"});var p=[],f=c.itemIndex,w=c.stagger,y=0;if(f>0){var b=0;w.transitionDelay>0&&0===w.transitionDuration&&(b=w.transitionDelay*f);var k=0;w.animationDelay>0&&0===w.animationDuration&&(k=w.animationDelay*f,p.push(v+"animation-play-state")),y=Math.round(100*Math.max(b,k))/100}y||(n.addClass(t,d),c.blockTransition&&j(l,!1));var x=c.cacheKey+" "+d,S=N(t,x),$=Math.max(S.transitionDuration,S.animationDuration);if(0===$)return n.removeClass(t,d),V(t,i),void o();!y&&r&&Object.keys(r).length>0&&(S.transitionDuration||(t.css("transition",S.animationDuration+"s linear all"),p.push("transition")),t.css(r));var I=Math.max(S.transitionDelay,S.animationDelay),A=I*D;if(p.length>0){var E=l.getAttribute("style")||"";";"!==E.charAt(E.length-1)&&(E+=";"),l.setAttribute("style",E+" ")}var P,z=Date.now(),M=g+" "+h,L=(y+(I+$)*_)*D;return y>0&&(n.addClass(t,u),P=s(function(){P=null,S.transitionDuration>0&&j(l,!1),S.animationDuration>0&&H(l,!1),n.addClass(t,d),n.removeClass(t,u),r&&(0===S.transitionDuration&&t.css("transition",S.animationDuration+"s linear all"),t.css(r),p.push("transition"))},y*D,!1)),t.on(M,F),c.closeAnimationFns.push(function(){O(),o()}),c.running++,R(t,L),O}function O(){t.off(M,F),n.removeClass(t,d),n.removeClass(t,u),P&&s.cancel(P),V(t,i);var e=m(t);for(var o in p)e.style.removeProperty(p[o])}function F(e){e.stopPropagation();var t=e.originalEvent||e,i=t.$manualTimeStamp||t.timeStamp||Date.now(),n=parseFloat(t.elapsedTime.toFixed(C));Math.max(i-z,0)>=A&&n>=$&&o()}o()}(0,t,i,o,r);V(t,i),o()}function q(e,t,i,o,n){var a=W(0,t,i,n.from);if(!a)return P(),void o();var s=a;return z(0,function(){s=B(0,t,i,o,n.to)}),function(e){(s||r)(e)}}function V(e,t){n.removeClass(e,t);var i=e.data(T);i&&(i.running&&i.running--,i.running&&0!==i.running||e.removeData(T))}return{animate:function(e,t,i,o,n,r){return(r=r||{}).from=i,r.to=o,q(0,e,t,n,r)},enter:function(e,t,i){return q(0,e,"ng-enter",t,i=i||{})},leave:function(e,t,i){return q(0,e,"ng-leave",t,i=i||{})},move:function(e,t,i){return q(0,e,"ng-move",t,i=i||{})},beforeSetClass:function(e,t,i,o,n){n=n||{};var r=W(0,e,J(i,"-remove")+" "+J(t,"-add"),n.from);if(r)return z(0,o),r;P(),o()},beforeAddClass:function(e,t,i,o){o=o||{};var n=W(0,e,J(t,"-add"),o.from);if(n)return z(0,i),n;P(),i()},beforeRemoveClass:function(e,t,i,o){o=o||{};var n=W(0,e,J(t,"-remove"),o.from);if(n)return z(0,i),n;P(),i()},setClass:function(e,t,i,o,n){return n=n||{},B(0,e,(i=J(i,"-remove"))+" "+(t=J(t,"-add")),o,n.to)},addClass:function(e,t,i,o){return o=o||{},B(0,e,J(t,"-add"),i,o.to)},removeClass:function(e,t,i,o){return o=o||{},B(0,e,J(t,"-remove"),i,o.to)}};function J(e,t){var i="";return e=l(e)?e:e.split(/\s+/),a(e,function(e,o){e&&e.length>0&&(i+=(o>0?" ":"")+e+t)}),i}}])}])}(window,window.angular),function(e,t,i){"use strict";var o=t.$$minErr("$sanitize");var n=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,r=/^<\/\s*([\w:-]+)[^>]*>/,a=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,s=/^</,l=/^<\//,c=/<!--(.*?)-->/g,d=/<!DOCTYPE([^>]*?)>/i,u=/<!\[CDATA\[(.*?)]]>/g,p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^\#-~| |!])/g,f=_("area,br,col,hr,img,wbr"),g=_("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),m=_("rp,rt"),v=t.extend({},m,g),w=t.extend({},g,_("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),y=t.extend({},m,_("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),b=_("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),k=_("script,style"),x=t.extend({},f,w,y,v,b),S=_("background,cite,href,longdesc,src,usemap,xlink:href"),$=_("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),T=_("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),C=t.extend({},S,T,$);function _(e){var t,i={},o=e.split(",");for(t=0;t<o.length;t++)i[o[t]]=!0;return i}var D=document.createElement("pre"),I=/^(\s*)([\s\S]*?)(\s*)$/;function A(e){if(!e)return"";var t=I.exec(e),i=t[1],o=t[3],n=t[2];return n&&(D.innerHTML=n.replace(/</g,"&lt;"),n="textContent"in D?D.textContent:D.innerText),i+n+o}function E(e){return e.replace(/&/g,"&amp;").replace(p,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(h,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function P(e,i){var o=!1,n=t.bind(e,e.push);return{start:function(e,r,a){e=t.lowercase(e),!o&&k[e]&&(o=e),o||!0!==x[e]||(n("<"),n(e),t.forEach(r,function(o,r){var a=t.lowercase(r),s="img"===e&&"src"===a||"background"===a;!0!==C[a]||!0===S[a]&&!i(o,s)||(n(" "),n(r),n('="'),n(E(o)),n('"'))}),n(a?"/>":">"))},end:function(e){e=t.lowercase(e),o||!0!==x[e]||(n("</"),n(e),n(">")),e==o&&(o=!1)},chars:function(e){o||n(E(e))}}}t.module("ngSanitize",[]).provider("$sanitize",function(){this.$get=["$$sanitizeUri",function(e){return function(i){var p=[];return function(e,i){"string"!=typeof e&&(e=null===e||void 0===e?"":""+e);var p,h,g,m,b=[],x=e;for(b.last=function(){return b[b.length-1]};e;){if(m="",h=!0,b.last()&&k[b.last()]?(e=e.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+b.last()+"[^>]*>","i"),function(e,t){return t=t.replace(c,"$1").replace(u,"$1"),i.chars&&i.chars(A(t)),""}),$("",b.last())):(0===e.indexOf("\x3c!--")?(p=e.indexOf("--",4))>=0&&e.lastIndexOf("--\x3e",p)===p&&(i.comment&&i.comment(e.substring(4,p)),e=e.substring(p+3),h=!1):d.test(e)?(g=e.match(d))&&(e=e.replace(g[0],""),h=!1):l.test(e)?(g=e.match(r))&&(e=e.substring(g[0].length),g[0].replace(r,$),h=!1):s.test(e)&&((g=e.match(n))?(g[4]&&(e=e.substring(g[0].length),g[0].replace(n,S)),h=!1):(m+="<",e=e.substring(1))),h&&(p=e.indexOf("<"),m+=p<0?e:e.substring(0,p),e=p<0?"":e.substring(p),i.chars&&i.chars(A(m)))),e==x)throw o("badparse","The sanitizer was unable to parse the following block of html: {0}",e);x=e}function S(e,o,n,r){if(o=t.lowercase(o),w[o])for(;b.last()&&y[b.last()];)$("",b.last());v[o]&&b.last()==o&&$("",o),(r=f[o]||!!r)||b.push(o);var s={};n.replace(a,function(e,t,i,o,n){var r=i||o||n||"";s[t]=A(r)}),i.start&&i.start(o,s,r)}function $(e,o){var n,r=0;if(o=t.lowercase(o))for(r=b.length-1;r>=0&&b[r]!=o;r--);if(r>=0){for(n=b.length-1;n>=r;n--)i.end&&i.end(b[n]);b.length=r}}$()}(i,P(p,function(t,i){return!/^unsafe/.test(e(t,i))})),p.join("")}}]}),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var i=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,o=/^mailto:/;return function(n,r){if(!n)return n;for(var a,s,l,c=n,d=[];a=c.match(i);)s=a[0],a[2]||a[4]||(s=(a[3]?"http://":"mailto:")+s),l=a.index,u(c.substr(0,l)),p(s,a[0].replace(o,"")),c=c.substring(l+a[0].length);return u(c),e(d.join(""));function u(e){var i,o;e&&d.push((i=e,P(o=[],t.noop).chars(i),o.join("")))}function p(e,i){d.push("<a "),t.isDefined(r)&&d.push('target="',r,'" '),d.push('href="',e.replace(/"/g,"&quot;"),'">'),u(i),d.push("</a>")}}}])}(window,window.angular),function(e,t,i){"use strict";var o=t.module("ngTouch",[]);function n(e,i,n){o.directive(e,["$parse","$swipe",function(o,r){var a=75,s=.3,l=30;return function(c,d,u){var p,h,f=o(u[e]);var g=["touch"];t.isDefined(u.ngSwipeDisableMouse)||g.push("mouse"),r.bind(d,{start:function(e,t){p=e,h=!0},cancel:function(e){h=!1},end:function(e,t){(function(e){if(!p)return!1;var t=Math.abs(e.y-p.y),o=(e.x-p.x)*i;return h&&t<a&&o>0&&o>l&&t/o<s})(e)&&c.$apply(function(){d.triggerHandler(n),f(c,{$event:t})})}},g)}}])}o.factory("$swipe",[function(){var e={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};function i(e){var t=e.touches&&e.touches.length?e.touches:[e],i=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:i.clientX,y:i.clientY}}function o(i,o){var n=[];return t.forEach(i,function(t){var i=e[t][o];i&&n.push(i)}),n.join(" ")}return{bind:function(e,t,n){var r,a,s,l,c=!1;n=n||["mouse","touch"],e.on(o(n,"start"),function(e){s=i(e),c=!0,r=0,a=0,l=s,t.start&&t.start(s,e)});var d=o(n,"cancel");d&&e.on(d,function(e){c=!1,t.cancel&&t.cancel(e)}),e.on(o(n,"move"),function(e){if(c&&s){var o=i(e);if(r+=Math.abs(o.x-l.x),a+=Math.abs(o.y-l.y),l=o,!(r<10&&a<10))return a>r?(c=!1,void(t.cancel&&t.cancel(e))):(e.preventDefault(),void(t.move&&t.move(o,e)))}}),e.on(o(n,"end"),function(e){c&&(c=!1,t.end&&t.end(i(e),e))})}}}]),o.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),o.directive("ngClick",["$parse","$timeout","$rootElement",function(e,i,o){var n,r,a,s=2500,l=25,c="ng-click-active";function d(e,t,i){for(var o=0;o<e.length;o+=2)if(n=e[o],r=e[o+1],a=t,s=i,Math.abs(n-a)<l&&Math.abs(r-s)<l)return e.splice(o,o+2),!0;var n,r,a,s;return!1}function u(e){if(!(Date.now()-n>s)){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,o=t[0].clientY;i<1&&o<1||a&&a[0]===i&&a[1]===o||(a&&(a=null),"label"===e.target.tagName.toLowerCase()&&(a=[i,o]),d(r,i,o)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function p(e){var t=e.touches&&e.touches.length?e.touches:[e],o=t[0].clientX,n=t[0].clientY;r.push(o,n),i(function(){for(var e=0;e<r.length;e+=2)if(r[e]==o&&r[e+1]==n)return void r.splice(e,e+2)},s,!1)}return function(i,a,s){var l,h,f,g,m=e(s.ngClick),v=!1;function w(){v=!1,a.removeClass(c)}a.on("touchstart",function(e){v=!0,3==(l=e.target?e.target:e.srcElement).nodeType&&(l=l.parentNode),a.addClass(c),h=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].originalEvent||t[0];f=i.clientX,g=i.clientY}),a.on("touchmove",function(e){w()}),a.on("touchcancel",function(e){w()}),a.on("touchend",function(e){var i=Date.now()-h,c=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],m=c[0].originalEvent||c[0],y=m.clientX,b=m.clientY,k=Math.sqrt(Math.pow(y-f,2)+Math.pow(b-g,2));v&&i<750&&k<12&&(!function(e,t){r||(o[0].addEventListener("click",u,!0),o[0].addEventListener("touchstart",p,!0),r=[]),n=Date.now(),d(r,e,t)}(y,b),l&&l.blur(),t.isDefined(s.disabled)&&!1!==s.disabled||a.triggerHandler("click",[e])),w()}),a.onclick=function(e){},a.on("click",function(e,t){i.$apply(function(){m(i,{$event:t||e})})}),a.on("mousedown",function(e){a.addClass(c)}),a.on("mousemove mouseup",function(e){a.removeClass(c)})}}]),n("ngSwipeLeft",-1,"swipeleft"),n("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("ivpusic.cookie",["ipCookie"]),angular.module("ipCookie",["ng"]).factory("ipCookie",["$document",function(e){"use strict";return function(){function t(t,i,o){var n,r,a,s,l,c,d,u,p;if(o=o||{},void 0!==i)return i="object"==typeof i?JSON.stringify(i):i+"","number"==typeof o.expires&&(p=o.expires,o.expires=new Date,-1===p?o.expires=new Date("Thu, 01 Jan 1970 00:00:00 GMT"):void 0!==o.expirationUnit?"hours"===o.expirationUnit?o.expires.setHours(o.expires.getHours()+p):"minutes"===o.expirationUnit?o.expires.setMinutes(o.expires.getMinutes()+p):"seconds"===o.expirationUnit?o.expires.setSeconds(o.expires.getSeconds()+p):o.expires.setDate(o.expires.getDate()+p):o.expires.setDate(o.expires.getDate()+p)),e[0].cookie=[encodeURIComponent(t),"=",encodeURIComponent(i),o.expires?"; expires="+o.expires.toUTCString():"",o.path?"; path="+o.path:"",o.domain?"; domain="+o.domain:"",o.secure?"; secure":""].join("");for(r=[],(u=e[0].cookie)&&(r=u.split("; ")),n={},d=!1,a=0;r.length>a;++a)if(r[a]&&(l=(s=r[a]).indexOf("="),c=s.substring(0,l),i=decodeURIComponent(s.substring(l+1)),void 0===t||t===c)){try{n[c]=JSON.parse(i)}catch(e){n[c]=i}if(t===c)return n[c];d=!0}return d&&void 0===t?n:void 0}return t.remove=function(e,i){var o=void 0!==t(e);return o&&(i||(i={}),i.expires=-1,t(e,"",i)),o},t}()}]),function(e,t,i){"use strict";var o,n={},r={sdk:!1,ready:!1};t.module("facebook",[]).value("settings",n).value("flags",r).provider("Facebook",[function(){n.appId=null,this.setAppId=function(e){n.appId=e},this.getAppId=function(){return n.appId},n.locale="en_US",this.setLocale=function(e){n.locale=e},this.getLocale=function(){return n.locale},n.status=!0,this.setStatus=function(e){n.status=e},this.getStatus=function(){return n.status},n.channelUrl=null,this.setChannel=function(e){n.channelUrl=e},this.getChannel=function(){return n.channelUrl},n.cookie=!0,this.setCookie=function(e){n.cookie=e},this.getCookie=function(){return n.cookie},n.xfbml=!0,this.setXfbml=function(e){n.xfbml=e},this.getXfbml=function(){return n.xfbml},this.setAuthResponse=function(e){n.authResponse=e||!0},this.getAuthResponse=function(){return n.authResponse},n.frictionlessRequests=!1,this.setFrictionlessRequests=function(e){n.frictionlessRequests=e},this.getFrictionlessRequests=function(){return n.frictionlessRequests},n.hideFlashCallback=null,this.setHideFlashCallback=function(e){n.hideFlashCallback=e||null},this.getHideFlashCallback=function(){return n.hideFlashCallback},this.setInitCustomOption=function(e,i){return!!t.isString(e)&&(n[e]=i,n[e])},this.getInitOption=function(e){return!(!t.isString(e)||!n.hasOwnProperty(e))&&n[e]},n.loadSDK=!0,this.setLoadSDK=function(e){n.loadSDK=!!e},this.getLoadSDK=function(){return n.loadSDK},n.version="v2.0",this.setSdkVersion=function(e){n.version=e},this.getSdkVersion=function(){return n.version},this.init=function(e,i){t.isString(e)&&(n.appId=e||n.appId),t.isObject(e)&&t.extend(n,e),t.isDefined(i)&&(n.loadSDK=!!i)},this.$get=["$q","$rootScope","$timeout","$window",function(e,i,a,s){function l(){this.appId=n.appId}return l.prototype.isReady=function(){return r.ready},l.prototype.login=function(){var i,o,n=e.defer(),r=Array.prototype.slice.call(arguments);return t.forEach(r,function(e,n){t.isFunction(e)&&(i=e,o=n)}),t.isFunction(i)&&t.isNumber(o)&&r.splice(o,1,function(e){a(function(){t.isUndefined(e.error)?n.resolve(e):n.reject(e),t.isFunction(i)&&i(e)})}),this.isReady()?s.FB.login.apply(s.FB,r):a(function(){n.reject("Facebook.login() called before Facebook SDK has loaded.")}),n.promise},t.forEach(["logout","api","ui","getLoginStatus"],function(i){l.prototype[i]=function(){var n,r,l=e.defer(),c=Array.prototype.slice.call(arguments);return t.forEach(c,function(e,i){t.isFunction(e)&&(n=e,r=i)}),t.isFunction(n)&&t.isNumber(r)&&c.splice(r,1,function(e){a(function(){e&&void 0===e.error?l.resolve(e):l.reject(e),t.isFunction(n)&&n(e)})}),a(function(){o.promise.then(function(){s.FB[i].apply(FB,c)},function(){throw"Facebook API could not be initialized properly"})}),l.promise}}),l.prototype.parseXFBML=function(){var t=e.defer();return a(function(){o.promise.then(function(){s.FB.XFBML.parse(),t.resolve()},function(){throw"Facebook API could not be initialized properly"})}),t.promise},l.prototype.subscribe=function(){var i,n,r=e.defer(),l=Array.prototype.slice.call(arguments);return t.forEach(l,function(e,o){t.isFunction(e)&&(i=e,n=o)}),t.isFunction(i)&&t.isNumber(n)&&l.splice(n,1,function(e){a(function(){e&&void 0===e.error?r.resolve(e):r.reject(e),t.isFunction(i)&&i(e)})}),a(function(){o.promise.then(function(){s.FB.Event.subscribe.apply(FB,l)},function(){throw"Facebook API could not be initialized properly"})}),r.promise},l.prototype.unsubscribe=function(){var i,n,r=e.defer(),l=Array.prototype.slice.call(arguments);return t.forEach(l,function(e,o){t.isFunction(e)&&(i=e,n=o)}),t.isFunction(i)&&t.isNumber(n)&&l.splice(n,1,function(e){a(function(){e&&void 0===e.error?r.resolve(e):r.reject(e),t.isFunction(i)&&i(e)})}),a(function(){o.promise.then(function(){s.FB.Event.unsubscribe.apply(FB,l)},function(){throw"Facebook API could not be initialized properly"})}),r.promise},new l}]}]).run(["$rootScope","$q","$window","$timeout",function(e,i,a,s){o=i.defer();var l,c,d,u=n.loadSDK;delete n.loadSDK,a.fbAsyncInit=function(){s(function(){if(!n.appId)throw"Missing appId setting.";FB.init(n),r.ready=!0,t.forEach({"auth.login":"login","auth.logout":"logout","auth.prompt":"prompt","auth.sessionChange":"sessionChange","auth.statusChange":"statusChange","auth.authResponseChange":"authResponseChange","xfbml.render":"xfbmlRender","edge.create":"like","edge.remove":"unlike","comment.create":"comment","comment.remove":"uncomment"},function(t,i){FB.Event.subscribe(i,function(i){s(function(){e.$broadcast("Facebook:"+t,i)})})}),e.$broadcast("Facebook:load"),o.resolve(FB)})},(l=document.getElementById("fb-root"))||((l=document.createElement("div")).id="fb-root",document.body.insertBefore(l,document.body.childNodes[0])),u&&(c="//connect.facebook.net/"+n.locale+"/sdk.js",(d=document.createElement("script")).id="facebook-jssdk",d.async=!0,-1!==["file","file:"].indexOf(a.location.protocol)&&(c="https:"+c),d.src=c,d.onload=function(){r.sdk=!0},document.getElementsByTagName("head")[0].appendChild(d))}])}(window,angular),function(e){function t(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function i(e,t){return 100*t/(e[1]-e[0])}function o(e,t){for(var i=1;e>=t[i];)i+=1;return i}function n(e,o,n,r){for(var a in this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=o,this.direction=n,e)if(e.hasOwnProperty(a)){if(o=a,r=void 0,"number"==typeof(n=e[a])&&(n=[n]),"[object Array]"!==Object.prototype.toString.call(n))throw Error("noUiSlider: 'range' contains invalid value.");if(!t(r="min"===o?0:"max"===o?100:parseFloat(o))||!t(n[0]))throw Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(r),this.xVal.push(n[0]),r?this.xSteps.push(!isNaN(n[1])&&n[1]):isNaN(n[1])||(this.xSteps[0]=n[1])}for(a in this.xNumSteps=this.xSteps.slice(0),this.xNumSteps)this.xNumSteps.hasOwnProperty(a)&&(e=Number(a),(o=this.xNumSteps[a])&&(this.xSteps[e]=i([this.xVal[e],this.xVal[e+1]],o)/(100/(this.xPct[e+1]-this.xPct[e]))))}n.prototype.getMargin=function(e){return 2===this.xPct.length&&i(this.xVal,e)},n.prototype.toStepping=function(e){var t=this.xVal,n=this.xPct;if(e>=t.slice(-1)[0])e=100;else{var r,a,s=o(e,t);r=t[s-1],a=t[s],t=n[s-1],n=n[s],e=t+(e=i(r=[r,a],0>r[0]?e+Math.abs(r[0]):e-r[0]))/(100/(n-t))}return this.direction&&(e=100-e),e},n.prototype.fromStepping=function(e){var t;this.direction&&(e=100-e);var i=this.xVal;if(t=this.xPct,100<=e)t=i.slice(-1)[0];else{var n,r,a=o(e,t);n=i[a-1],r=i[a],i=t[a-1],n=[n,r],t=100/(t[a]-i)*(e-i)*(n[1]-n[0])/100+n[0]}return e=Math.pow(10,7),Number((Math.round(t*e)/e).toFixed(7))},n.prototype.getStep=function(e){this.direction&&(e=100-e);var t=this.xPct,i=this.xSteps,n=this.snap;if(100!==e){var r=o(e,t);n?e=e-(i=t[r-1])>((t=t[r])-i)/2?t:i:(i[r-1]?(n=t[r-1],i=i[r-1],t=n+(t=Math.round((e-t[r-1])/i)*i)):t=e,e=t)}return this.direction&&(e=100-e),e},n.prototype.getApplicableStep=function(e){var t=o(e,this.xPct);return e=100===e?2:1,[this.xNumSteps[t-2],this.xVal[t-e],this.xNumSteps[t-e]]},n.prototype.convert=function(e){return this.getStep(this.toStepping(e))},e.noUiSlider={Spectrum:n}}(window.jQuery||window.Zepto),function(e){function t(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function i(e,i){if(!t(i))throw Error("noUiSlider: 'step' is not numeric.");e.singleStep=i}function o(t,i){if("object"!=typeof i||e.isArray(i))throw Error("noUiSlider: 'range' is not an object.");if(void 0===i.min||void 0===i.max)throw Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new e.noUiSlider.Spectrum(i,t.snap,t.dir,t.singleStep)}function n(t,i){var o=i;if(i=e.isArray(o)?o:[o],!e.isArray(i)||!i.length||2<i.length)throw Error("noUiSlider: 'start' option is incorrect.");t.handles=i.length,t.start=i}function r(e,t){if(e.snap=t,"boolean"!=typeof t)throw Error("noUiSlider: 'snap' option must be a boolean.")}function a(e,t){if(e.animate=t,"boolean"!=typeof t)throw Error("noUiSlider: 'animate' option must be a boolean.")}function s(e,t){if("lower"===t&&1===e.handles)e.connect=1;else if("upper"===t&&1===e.handles)e.connect=2;else if(!0===t&&2===e.handles)e.connect=3;else{if(!1!==t)throw Error("noUiSlider: 'connect' option doesn't match handle count.");e.connect=0}}function l(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw Error("noUiSlider: 'orientation' option is invalid.")}}function c(e,i){if(!t(i))throw Error("noUiSlider: 'margin' option must be numeric.");if(e.margin=e.spectrum.getMargin(i),!e.margin)throw Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function d(e,i){if(!t(i))throw Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(i),!e.limit)throw Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function u(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1,e.connect=[0,2,1,3][e.connect];break;default:throw Error("noUiSlider: 'direction' option was not recognized.")}}function p(e,t){if("string"!=typeof t)throw Error("noUiSlider: 'behaviour' must be a string containing options.");var i=0<=t.indexOf("tap"),o=0<=t.indexOf("drag"),n=0<=t.indexOf("fixed"),r=0<=t.indexOf("snap");e.events={tap:i||r,drag:o,fixed:n,snap:r}}function h(e,t){if(e.format=t,"function"==typeof t.to&&"function"==typeof t.from)return!0;throw Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}var f={to:function(e){return e.toFixed(2)},from:Number};e.noUiSlider.testOptions=function(t){var g,m={margin:0,limit:0,animate:!0,format:f};return g={step:{r:!1,t:i},start:{r:!0,t:n},connect:{r:!0,t:s},direction:{r:!0,t:u},snap:{r:!1,t:r},animate:{r:!1,t:a},range:{r:!0,t:o},orientation:{r:!1,t:l},margin:{r:!1,t:c},limit:{r:!1,t:d},behaviour:{r:!0,t:p},format:{r:!1,t:h}},t=e.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},t),e.each(g,function(e,i){if(void 0===t[e]){if(i.r)throw Error("noUiSlider: '"+e+"' is required.");return!0}i.t(m,t[e])}),m.style=m.ort?"top":"left",m}}(window.jQuery||window.Zepto),function(e){function t(e){return Math.max(Math.min(e,100),0)}function i(e,t,i){e.addClass(t),setTimeout(function(){e.removeClass(t)},i)}function o(t,i){var o=e("<div><div/></div>").addClass(p[2]),n=["-lower","-upper"];return t&&n.reverse(),o.children().addClass(p[3]+" "+p[3]+n[i]),o}function n(e,t,i){var n,r=[];for(n=0;n<e;n+=1)r.push(o(t,n).appendTo(i));return r}function r(o,r,a){function s(){return b[["width","height"][r.ort]]()}function l(e){var t,i=[x.val()];for(t=0;t<e.length;t+=1)x.trigger(e[t],i)}function d(e){return 1===e.length?e[0]:r.dir?e.reverse():e}function h(t){var i=e.inArray(t,C);x[0].linkAPI&&x[0].linkAPI[t]&&x[0].linkAPI[t].change(T[i],k[i].children(),x)}function f(e,i,o){var n=e[0]!==k[0][0]?1:0,a=S[0]+r.margin,s=S[1]-r.margin,l=S[0]+r.limit,c=S[1]-r.limit;return 1<k.length&&(i=n?Math.max(i,a):Math.min(i,s)),!1!==o&&r.limit&&1<k.length&&(i=n?Math.min(i,l):Math.max(i,c)),i=$.getStep(i),(i=t(parseFloat(i.toFixed(7))))!==S[n]&&(e.css(r.style,i+"%"),e.is(":first-child")&&e.toggleClass(p[17],50<i),S[n]=i,T[n]=$.fromStepping(i),h(C[n]),!0)}function g(e,t,i,o){return e=e.replace(/\s/g,".nui ")+".nui",t.on(e,function(e){if(x.attr("disabled")||x.hasClass(p[14]))return!1;e.preventDefault();var t,n,a=0===e.type.indexOf("touch"),s=0===e.type.indexOf("mouse"),l=0===e.type.indexOf("pointer"),c=e;0===e.type.indexOf("MSPointer")&&(l=!0),e.originalEvent&&(e=e.originalEvent),a&&(t=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY),(s||l)&&(l||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),t=e.clientX+window.pageXOffset,n=e.clientY+window.pageYOffset),c.points=[t,n],c.cursor=s,(e=c).calcPoint=e.points[r.ort],i(e,o)})}function m(e,i){var o,n=i.handles||k,r=!1,a=(r=100*(e.calcPoint-i.start)/s(),n[0][0]!==k[0][0]?1:0),c=i.positions;o=r+c[0],r+=c[1],1<n.length?(0>o&&(r+=Math.abs(o)),100<r&&(o-=r-100),o=[t(o),t(r)]):o=[o,r],r=f(n[0],o[a],1===n.length),1<n.length&&(r=f(n[1],o[a?0:1],!1)||r),r&&l(["slide"])}function v(t){e("."+p[15]).removeClass(p[15]),t.cursor&&e("body").css("cursor","").off(".nui"),c.off(".nui"),x.removeClass(p[12]),l(["set","change"])}function w(t,i){1===i.handles.length&&i.handles[0].children().addClass(p[15]),t.stopPropagation(),g(u.move,c,m,{start:t.calcPoint,handles:i.handles,positions:[S[0],S[k.length-1]]}),g(u.end,c,v,null),t.cursor&&(e("body").css("cursor",e(t.target).css("cursor")),1<k.length&&x.addClass(p[12]),e("body").on("selectstart.nui",!1))}function y(t){var o=t.calcPoint,n=0;t.stopPropagation(),e.each(k,function(){n+=this.offset()[r.style]}),n=o<n/2||1===k.length?0:1,o=100*(o-=b.offset()[r.style])/s(),r.events.snap||i(x,p[14],300),f(k[n],o),l(["slide","set","change"]),r.events.snap&&w(t,{handles:[k[n]]})}var b,k,x=e(o),S=[-1,-1],$=r.spectrum,T=[],C=["lower","upper"].slice(0,r.handles);if(r.dir&&C.reverse(),o.LinkUpdate=h,o.LinkConfirm=function(t,i){var o=e.inArray(t,C);return i&&i.appendTo(k[o].children()),r.dir&&(o=1===o?0:1),function(e){return function(t,i){x.val([e?null:i,e?i:null],!0)}}(o)},o.LinkDefaultFormatter=r.format,o.LinkDefaultFlag="lower",o.reappend=function(){var e,t;for(e=0;e<C.length;e+=1)this.linkAPI&&this.linkAPI[t=C[e]]&&this.linkAPI[t].reconfirm(t)},x.hasClass(p[0]))throw Error("Slider was already initialized.");b=function(t,i,o){return o.addClass([p[0],p[8+t],p[4+i]].join(" ")),e("<div/>").appendTo(o).addClass(p[1])}(r.dir,r.ort,x),k=n(r.handles,r.dir,b),function(e,t,i){switch(e){case 1:t.addClass(p[7]),i[0].addClass(p[6]);break;case 3:i[1].addClass(p[6]);case 2:i[0].addClass(p[7]);case 0:t.addClass(p[6])}}(r.connect,x,k),function(e){var t;if(!e.fixed)for(t=0;t<k.length;t+=1)g(u.start,k[t].children(),w,{handles:[k[t]]});e.tap&&g(u.start,b,y,{handles:k}),e.drag&&(t=b.find("."+p[7]).addClass(p[10]),e.fixed&&(t=t.add(b.children().not(t).children())),g(u.start,t,w,{handles:k}))}(r.events),o.vSet=function(t){if(x[0].LinkIsEmitting)return this;var o,n,a,s;for(t=e.isArray(t)?t:[t],r.dir&&1<r.handles&&t.reverse(),r.animate&&-1!==S[0]&&i(x,p[14],300),o=1<k.length?3:1,1===t.length&&(o=1),r.limit&&(o+=1),n=0;n<o;n+=1)null!==(s=t[a=n%2])&&!1!==s&&("number"==typeof s&&(s=String(s)),(!1===(s=r.format.from(s))||isNaN(s)||!1===f(k[a],$.toStepping(s),n===3-r.dir))&&h(C[a]));return l(["set"]),this},o.vGet=function(){var e,t=[];for(e=0;e<r.handles;e+=1)t[e]=r.format.to(T[e]);return d(t)},o.destroy=function(){return e(this).off(".nui").removeClass(p.join(" ")).empty(),delete this.LinkUpdate,delete this.LinkConfirm,delete this.LinkDefaultFormatter,delete this.LinkDefaultFlag,delete this.reappend,delete this.vGet,delete this.vSet,delete this.getCurrentStep,delete this.getInfo,delete this.destroy,a},o.getCurrentStep=function(){return d(e.map(S,function(e,t){var i=$.getApplicableStep(e);return[[T[t]-i[2]>=i[1]?i[2]:i[0],i[2]]]}))},o.getInfo=function(){return[$,r.style,r.ort]},x.val(r.start)}function a(t){if(!this.length)throw Error("noUiSlider: Can't initialize slider on empty selection.");var i=e.noUiSlider.testOptions(t,this);return this.each(function(){r(this,i,t)})}function s(t){return this.each(function(){if(this.destroy){var i=e(this).val(),o=this.destroy(),n=e.extend({},o,t);e(this).noUiSlider(n),this.reappend(),o.start===n.start&&e(this).val(i)}else e(this).noUiSlider(t)})}function l(){return this[0][arguments.length?"vSet":"vGet"].apply(this[0],arguments)}var c=e(document),d=e.fn.val,u=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},p="noUi-target noUi-base noUi-origin noUi-handle noUi-horizontal noUi-vertical noUi-background noUi-connect noUi-ltr noUi-rtl noUi-dragable  noUi-state-drag  noUi-state-tap noUi-active  noUi-stacking".split(" ");e.fn.val=function(){var t=arguments,i=e(this[0]);return arguments.length?this.each(function(){(e(this).hasClass(p[0])?l:d).apply(e(this),t)}):(i.hasClass(p[0])?l:d).call(i)},e.fn.noUiSlider=function(e,t){return(t?s:a).call(this,e)}}(window.jQuery||window.Zepto);var analytics=new Analytics,startTime=(new Date).getTime(),loadedContent=!1,trackJsInfo=function(e,t){var i=Array.prototype.slice.call(arguments,1);e&&e.trackJs&&e.trackJs.console.info.apply(this,i)};function isLocalStorageNameSupported(){try{var e=window.localStorage;return e.setItem("test","1"),e.removeItem("test"),!0}catch(e){return location.href="/support/need-cookies",!1}}if(1==isLocalStorageNameSupported()){var modulesToLoad=["ngRoute","ngSanitize","ngTouch","ngAnimate","ipCookie"];"undefined"!=typeof DONT_LOAD_FACEBOOK&&DONT_LOAD_FACEBOOK||modulesToLoad.push("facebook");var module=angular.module("wikiwand",modulesToLoad,["$rootScopeProvider",function(e){e.digestTtl(10)}]);module.directive("selectOnClick",["$window",function(e){return{restrict:"A",link:function(t,i,o){i.on("focus",function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)}),i.on("blur",function(){})}}}]),module.config(["$routeProvider","$sceDelegateProvider","$locationProvider",function(e,t,i){i.html5Mode({enabled:!1}),t.resourceUrlWhitelist(["self",new RegExp("^https://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-1/.+$"),new RegExp("^https://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://s3.amazonaws.com/ww-article-cache-stage/.+$"),new RegExp("^http://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^https://d30ohmzj0cjdlk.cloudfront.net/.+$"),new RegExp("^http://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://db0nus869y26v.cloudfront.net/.+$"),new RegExp("^https://www.youtube-nocookie.com/.+$")])}]),module.config(["$routeProvider",function(e){e.when("/view1xyz",{templateUrl:"partials/partial1.html",controller:"MyCtrl1"}),e.when("/view2xyz",{templateUrl:"partials/partial2.html",controller:"MyCtrl2"}),e.otherwise({controller:"MyCtrl2"})}]).config(["$provide",function(e){e.decorator("$exceptionHandler",["$delegate","$window",function(e,t){return function(i,o){e(i,o);var n=(new Date).getTime()-startTime;if(console.log("error elapsed from start",n),$(".report_popup:eq(0)").is(":visible")&&($("#body_wrapp").remove(),$("#error_message").show(),setTimeout(function(){analytics.gaEvent("error-message","user-saw-message","ok")},1e3)),"undefined"==typeof dontReport){var r={};try{r.message=i.message}catch(e){r.message="none"}try{r.stack=i.stack,r.miniStack=i.stack.split("\n"),r.miniStackString=r.miniStack.join(" |"),r.miniStackString=r.miniStackString.replace(/http:[^ \)]+/g,"#"),r.miniStackString=r.miniStackString.replace(/at\s/g,"@"),r.miniStackString=r.miniStackString.replace(/\s+/g,""),r.miniStackString=r.miniStackString.substr(0,499)}catch(e){r.stack="none"}try{r.articleData=articleData}catch(e){r.articleData="none"}try{r.serverData=serverData}catch(e){r.serverData="none"}try{r.errorUrl=window.location.href}catch(e){r.errorUrl="none"}if(serverData.agent.iOSWebView&&(console.error(i.message),"production"!==serverData.config.environment&&alert(i.message)),console.info("stack trace "+JSON.stringify(r.stack)),console.log("underscore function is ",typeof _),console.log("jquery function is ",typeof $),"string"==typeof _&&console.log("["+_+"]"),"string"==typeof $&&console.log("["+$+"]"),t.trackJs&&t.trackJs.track(i),serverData&&-1!=serverData.agent.string.indexOf("Opera Mini"))alert("Sorry. Opera mini is not HTML5 compatible");else{try{$.ajax({type:"POST",url:"../api/javascript-errors",contentType:"application/json",data:angular.toJson(r)})}catch(e){console.log("error reporting message")}analytics.gaEvent("clientSide error , -",r.errorUrl,r.message),analytics.gaEvent("clientSide error 1",r.errorUrl,r.message),analytics.gaEvent("clientSide error 2",r.errorUrl,r.miniStackString)}}else console.log("don't report")}}])}])}(app=angular.module("wikiwand")).service("WikipediaApi",["$http","$log",function(e,t){var i={callApi:function(i,o,n){if(i.format="json",i.callback="JSON_CALLBACK",!o.apiLanguage)return n("Wikipedia API: must provide an 'apiLanguage' option to callApi");if(!i.action)return n("Wikipedia API: must provide an 'action' parameter to callApi");var r=[];for(var a in i){var s=i[a];"object"==typeof s&&(s=s.join("|")),r.push(a+"="+s)}var l=o.apiLanguage;"zh-"===l.substr(0,3)&&$.inArray(l,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(l="zh");var c="https://"+l+".wikipedia.org/w/api.php?"+r.join("&");o.dbg&&console.log("Wikipedia API Call: ",c),e({method:"JSONP",url:c,cache:!0,timeout:3e3,responseType:"json"}).success(function(e,o,r,a,s){if(e.error)return t.error("Wikipedia API: warning: "+JSON.stringify(e.warning)),n("Wikipedia API: error: "+JSON.stringify(e.error));e.warning&&t.warn("Wikipedia API: warning: "+JSON.stringify(e.warning));var l=e[i.action];return n(null,l,c,e.continue)}).error(function(e,i,o,r,a){return t.error("Wikipedia API: request failed: "+a),n("Wikipedia API: request failed: "+a)})}};return i}]),app.filter("reverse",function(){return function(e){return e.slice().reverse()}}),(app=angular.module("wikiwand")).service("GalleryHelper",["$http","$log",function(e,t){var i={getClickedThumbnailIndex:function(e){var i=e.currentTarget.querySelector("img:nth-child(1)"),o=$(i).data("index");return void 0===o?(t.warn("This image is not in the gallery"),-1):(console.log("Open image with index ",o),o)},loadImagesFromArticleToArray:function(e){i.findStrayImages();var t=[];e.find(".image_wrapper > .img_container img:nth-child(1):visible").each(function(){var e=$(this);i.addItemModelFromThumb(e,t)});var o=[],n=[];return{items:t=t.filter(function(e){var t=document.createElement("a");t.href=e.thumb.src,t.protocol="https:";var i=t.toString(),r=o.indexOf(i);return r>=0?(n.push(r),!1):(n.push(o.length),o.push(i),!0)}).map(function(e,t){return e.index=t,e}),itemsIndex:n}},findStrayImages:function(){$(".image.int-link").length>0&&("production"!==serverData.config.environment&&$(".image.int-link").css("border","solid 5px red"),t.warn("Found stray pictures",$(".image.int-link")))},addItemModelFromThumb:function(e,i){var o={thumb:{}};o.thumb.src=e.attr("data-original"),o.thumb.w=parseInt(e.attr("data-w")),o.thumb.h=parseInt(e.attr("data-h")),o.urlString="url("+o.thumb.src+")",o.fromEnglishWikipedia=void 0!==e.attr("data-from-english"),o.bucket={},o.bucket.src="",o.bucket.loaded=!1,o.original={},o.original.realOriginalSrc=e.attr("data-href"),o.original.src=o.thumb.src,o.original.w=parseInt(e.attr("data-fw")),o.original.h=parseInt(e.attr("data-fh")),o.info={},o.info.fetched=!1,o.info.type=e.attr("data-media-type")||"image",o.info.payload=e.attr("data-payload");var n=e.attr("data-href");if(o.wikipediaPageFullUrl=n,o.wikipediaPageFullUrl="https://"+articleData.langCodeUrl+".wikipedia.org"+o.wikipediaPageFullUrl,o.wikipediaPage=n,o.wikipediaPage)if("/wiki/"===o.wikipediaPage.substr(0,6)){o.wikipediaPage=o.wikipediaPage.substr(6);try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}else if("/w/index.php?title="===o.wikipediaPage.substr(0,19)){o.wikipediaPage=o.wikipediaPage.substr(19),o.wikipediaPage=o.wikipediaPage.split("&")[0];try{o.wikipediaPageTitle=decodeURI(o.wikipediaPage.replace(/_/g," "))}catch(e){return}}else t.warn("Invalid Wikipedia page: ",o.wikipediaPage);var r=e.parent().siblings(".caption").html()||"";o.title=r.trim(),o.titleTxt=r.replace(/(<([^>]+)>)/gi,"").replace(/"/g,"&quot"),o.index=i.length,o.original.w&&o.original.h&&o.wikipediaPage?(e.data("index",o.index),i.push(o)):"production"!==serverData.config.environment&&e.css("border","solid 5px #0e0")}};return i}]);var galleryControllerParams=["$rootScope","$scope","$timeout","$log","$sce","$sanitize","$window","Utilities","WikipediaApi","GalleryHelper",function(e,t,i,o,n,r,a,s,l,c){var d=this;function u(){s.isTouchDevice()||i(function(){angular.element(".img_enlarge").removeClass("loading")},500),t.galleryActive=!0,i(function(){$("#gallery_thumbs_scroll").getNiceScroll().resize(),d.alignFilmStrip()},10)}d.widthBuckets=[320,640,800,1024,1280,1920,2560,2880],t.fullScreenActive=!1,t.galleryActive=!1,angular.element(document).ready(function(){$(document).keydown(function(e){if(t.galleryActive){if(27===e.keyCode)t.closeGallery();else{e.preventDefault(),e.stopPropagation();var i=null,o=t.current.index;switch(e.keyCode){case 37:case 38:case 8:i=o-1;break;case 39:case 40:case 32:i=o+1;break;case 33:i=Math.max(o-5,0);break;case 34:i=Math.min(o+5,t.items.length-1);break;case 36:i=0;break;case 35:i=t.items.length-1}null!==i&&d.setActiveItemByNumber(i)}t.$apply()}})}),e.galleryOpen=function(e){if(!t.items){var o=c.loadImagesFromArticleToArray($("#content"));t.items=o.items,t.itemsIndex=o.itemsIndex}i(function(){d.initializeGalleryUi()},0);var n=c.getClickedThumbnailIndex(e);-1!==n&&(d.setActiveItemByIndex(n),s.isTouchDevice()?u():(angular.element(".img_enlarge").removeClass("loading"),angular.element(e.currentTarget).find(".img_enlarge").addClass("loading")))},screenfull.enabled&&document.addEventListener(screenfull.raw.fullscreenchange,function(){t.fullScreenActive=screenfull.isFullscreen}),t.galleryFull=!1,t.toggleFullScreen=function(){if(t.fullScreenActive=!t.fullScreenActive,screenfull.enabled){$("#gallery")[0];t.fullScreenActive?(screenfull.request(),t.galleryFull=!0):(screenfull.exit(),t.galleryFull=!1)}},t.closeGallery=function(){t.galleryFull=!1,$("#gallery .payload_container").empty(),t.galleryActive=!1,screenfull.enabled&&t.fullScreenActive&&screenfull.exit()},d.initializeGalleryUi=function(){$scroll=$("#gallery_thumbs_scroll"),s.isTouchDevice()?$("#full_screen").hide():(trackJsInfo(a,"nice scroll problem?"),trackJsInfo(a,"gallery_thumbs_scroll ",$scroll[0]),window.niceScroll||trackJsInfo(a,"niceScroll is not defined !"),$scroll.niceScroll().hide()),$("#gallery_info_wrap > ul li").on("click",function(){$(this).hasClass("open")?$(this).removeClass("open").find("ul").hide():$(this).addClass("open").find("ul").show()}),setTimeout(function(){$li=$("#gallery_thumbs > li");var e=$li.outerWidth()*($li.length+7);$("#gallery_thumbs").css("width",e)},0)},d.getNextBucketWithMinWidth=function(e){for(var t=0;t<d.widthBuckets.length;t++){var i=d.widthBuckets[t];if(i>=e)return i}return i},d.getImageDimensions=function(e){var t,i,o=$(window).width(),n=$(window).height(),r=e.original.w,a=e.original.h,s=a/r;s<n/o?(t=Math.min(o,r),i=Math.round(t*s)):(i=Math.min(n,a),t=Math.round(i/s));var l=d.getNextBucketWithMinWidth(t);return{display:{w:t,h:i},request:{w:l,h:Math.round(l*s)}}},d.setActiveItemByIndex=function(e){e>=t.itemsIndex.length?o.warn("Thumbnail index too large: ",e):e<0?o.warn("Thumbnail index too small: ",e):d.setActiveItemByNumber(t.itemsIndex[e])},d.setActiveItemByNumber=function(e){e>=t.items.length?o.warn("Thumbnail number too large: ",e):e<0?o.warn("Thumbnail number too small: ",e):d.setActiveItem(t.items[e])},d.listenToImageLoad=function(e,i){e.attr("src")!==i.bucket.src&&(t.galleryActive?e.attr("src",i.bucket.src):e.attr("src",i.bucket.src+"?"+(new Date).getTime())),console.log("listen to image load"),e.load(function(e){console.log("loaded"),i.bucket.loaded=!0,s.isTouchDevice()||!1===t.galleryActive&&u(),t.$apply()})},d.setActiveItem=function(e){if(e){var i=$(".gallery_main.bucket");i.attr("src",""),e.info.payload?(s.isTouchDevice()||!1===t.galleryActive&&u(),e.bucket.loaded=!0,$("#gallery .payload_container").html(e.info.payload),setTimeout(function(){var e=$("#gallery .payload_container video").get(0);"function"==typeof e.play&&e.play()},0)):(e.bucket.loaded=!1,$("#gallery .payload_container").empty(),d.listenToImageLoad(i,e));var o=e.index-1;o<0&&(o=0);for(var n=[];n.length<4&&o<t.items.length;){var r=t.items[o];o++,r.info.fetched||"image"===r.info.type&&(r.fromEnglishWikipedia?d.getImageInfoFromApi("en",r,function(){}):o<=e.index+3&&n.push(r))}if(n.length>0)for(var a=0;a<n.length;a++)d.getImageInfoFromApi(articleData.langCodeUrl,n[a],function(){});t.current&&(t.current.active=!1),e.active=!0,t.current=e,d.alignFilmStrip()}},d.alignFilmStrip=function(){var e=$("#gallery_thumbs li"),i=t.current.index;if(console.log("align film strip"),e.eq(i)&&e.eq(i).position()){var o=Math.round($("#gallery_thumbs_con").width()),n=Math.round(e.eq(i).width()),r=Math.round(e.eq(i).position().left),a=Math.round(r+n/2-o/2);$("#gallery_thumbs_scroll").scrollLeft(a)}},d.getImageInfoFromApi=function(e,i,r){var a=d.getImageDimensions(i).request.w,s=[i],c=_.pluck(s,"wikipediaPageTitle"),u=_.pluck(s,"thumb"),p={action:"query",prop:"imageinfo",titles:c,iiprop:["timestamp","user","url","size","mime","mediatype","extmetadata"],iiurlwidth:a,iiextmetadatafilter:["DateTime","DateTimeOriginal","ImageDescription","License","LicenseShortName","UsageTerms","LicenseUrl","Credit","Artist","Permission","GPSLatitude","GPSLongitude"]};l.callApi(p,{apiLanguage:e},function(e,i){if(!i)return console.log("No results for API call: ",p),r();var a,l=i.pages,c=function(e,t){if(e){var i=e[t];return i?i.value:void 0}},h=0;for(var f in l){var g=u[h];h++;var m=l[f],v=(m.imageinfo&&m.imageinfo.length)>0?m.imageinfo[0]:{thumburl:g.src,thumbwidth:g.w,thumbheight:g.h,user:"",timestamp:"",mediatype:"BITMAP",width:g.w,height:g.h,size:1e5,mime:"image/jpeg"},w=null;for(var y in s){console.log(s[y].wikipediaPageTitle);try{if(decodeURIComponent(s[y].wikipediaPageTitle)===m.title){w=s[y];break}}catch(e){console.log("exception retreiving data from api"),w=null}}if(w){w.bucket.src=v.thumburl,w.bucket.w=v.thumbwidth,w.bucket.h=v.thumbheight,(new Image).src=w.bucket.src;var b=v.extmetadata;w.info.fetched=!0,w.info.uploadUser=v.user,w.info.uploadDate=new Date(v.timestamp),w.info.mediatype=v.mediatype,w.info.dateRaw=c(b,"DateTime"),w.info.date=w.info.dateRaw?new Date(w.info.dateRaw):null,w.info.date&&isNaN(w.info.date.getTime())&&(w.info.date=w.info.dateRaw),w.info.dateOriginalRaw=c(b,"DateTimeOriginal"),w.info.dateOriginal=(a=w.info.dateOriginalRaw)?a.replace(/(<([^>]+)>)/gi,""):a,w.info.dateOriginal&&!w.info.dateOriginal.match(/[1-9]/)&&(w.info.dateOriginal=null),w.info.description=c(b,"ImageDescription"),w.info.descriptionSafe=n.trustAsHtml(w.info.description),w.info.gps={lat:c(b,"GPSLatitude"),long:c(b,"GPSLongitude")};var k="unknown";"True"===c(b,"Copyrighted")&&(k="yes"),"False"===c(b,"Copyrighted")&&(k="no"),w.info.license={detected:c(b,"License"),name:c(b,"LicenseShortName"),usageTerms:c(b,"UsageTerms"),url:c(b,"LicenseUrl"),permission:c(b,"Permission"),credit:c(b,"Credit"),artist:c(b,"Artist"),copyrightForPublicDomainImages:k},w.original.url=v.url,w.original.w=v.width,w.original.h=v.height,w.original.size=v.size,w.original.mime=v.mime}else o.debug("No item found for API result:",m),o.debug("List of all items scanned: ",s)}var x=$(".gallery_main.bucket");d.listenToImageLoad(x,t.current),r()})},t.onThumbClick=function(e,t){d.setActiveItem(t)},t.onNextClick=function(){d.setActiveItemByNumber(t.current.index+1)},t.onPrevClick=function(){d.setActiveItemByNumber(t.current.index-1)}}];(app=angular.module("wikiwand")).controller("GalleryController",galleryControllerParams);var app=angular.module("wikiwand"),UserVoice=null;analytics.gaInitialize("wikiwand"),app.controller("ShellController",["$window","$scope","$timeout","$q","ipCookie","Utilities","ActivationServiceRev2","userPreferences","$http","$rootScope","TestingService","MapHelper","userService",function(e,t,i,o,n,r,a,s,l,c,d,u,p){var h=articleData&&"string"==typeof articleData.rawArticlePath;c.hideToolbar=!!h,c.hideTOC=!0,c.hideCoverImageLandscape=!0,c.precache_from_extension=precache_from_extension;var f=this;window.jQuery||trackJsInfo(e,"jQuery not loaded properly");t.doc={title:document.title},t.win={location:{href:window.location.href}},c.menuOpen=!1,articleData?(articleData.cache&&articleData.cache.key&&n("lastView",articleData.cache.key,{path:"/"}),articleData.mainImage&&articleData.mainImage.full&&["urlDesktop","urlMobile","originalUrl"].forEach(function(e){articleData.mainImage.full[e]=articleData.mainImage.full[e].replace("http://","//")}),c.articleData=articleData):c.articleData={},s.updatePageStyle("init"),c.btnHover=!1,c.canvasSupported=r.isCanvasSupported(),c.touchDevices=r.isTouchDevice(),u.getMapImage(),t.initializeShellController=function(){if(1==precache_from_extension)return $("#imagePlaceHolder").css({width:"100%",height:"auto",top:"0px",left:"0px",opacity:1}),void(c.tocShow=!1);if(trackJsInfo(e,"init activation service"),a.loadState(),trackJsInfo(e,"init testing service"),d.initializeTests(),trackJsInfo(e,"init mon service"),t.hideGlobalNotice=function(){t.showGlobalNotice=!1,n("wikiwand.dont_show_global_notice","1",{path:"/",expires:1})},serverData&&serverData.settings&&serverData.settings.msg_to_all_users){var o=serverData.settings.msg_to_all_users;1==o.show&&o.text.length>3&&!n("wikiwand.dont_show_global_notice")&&(t.globalNoticeText=o.text,t.showGlobalNotice=!0)}$(document).ready(function(){if("wikiwand"==serverData.layout){var e={daysHidden:1,daysReminder:1,title:"Wikiwand for iPhone",author:"Wikiwand",iOSUniversalApp:!1};!1,$.smartbanner(e)}else"false"==serverData.showTOC?c.tocShow=!1:c.tocShow=!0}),$(window).load(function(){setTimeout(f.loadLast,3e3),1==loadedFromCache&&i(function(){f.testWikipediaRevision()},5e3),i(function(){f.testWikipediaRevision()},6e5)})},c.pressedTellAFriendLink=function(e,t){t||(t="undefined"),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t+"/"+e),analytics.gaVirtualPageView("virtualpageview/invites/sent-"+t),analytics.gaVirtualPageView("virtualpageview/invites/sent"),analytics.gaEvent("activation","sent referral",e)},c.$on("prefetchArticle",function(e,t){f.prefetch(t[0])}),c.$on("precacheArticle",function(e,t){f.precache(t[0])}),c.clickedOutside=function(){t.$broadcast("closePopups",[]);try{$("#main_menu .menu-tooltip").tooltipster("enable"),$(".disambig-wrapper").length>0&&r.isTouchDevice()&&$(".disambig-wrapper").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}},c.clickedAnywhere=function(e){1===e.which&&t.$broadcast("clickedAnywhere",[])},c.reloadArticle=function(){analytics.gaEvent("debug","reloading page","reloadArticle"),setTimeout(function(){e.location.reload()},1e3)},c.extensionPopup=function(e){a.extensionPopup(e)},c.activationHover=function(e){r.isTouchDevice()||(t.btnHover="enter"===e)},c.reportClick=function(e){analytics.gaVirtualPageView("virtualpageview/reportClick/"+e)},c.userClick=function(e,t,i){e&&(i?analytics.gaVirtualPageView("virtualpageview/userClick/"+t+"/"+i):analytics.gaVirtualPageView("virtualpageview/userClick/"+t))},c.report=function(e){analytics.gaVirtualPageView("virtualpageview/"+e)},c.reportTomer=function(){var e="virtualpageview/article-promo-TIGER-STYLE/install-click-text/"+reportText;analytics.gaVirtualPageView(e)},c.activationButtonClicked=function(e){a.activationButtonClicked(e)},c.new_visitor_notice=function(){a.new_visitor_fold_clicked()},c.reportImage=function(t,i,o){trackJsInfo(e,"reportImage"),console.log("report cover image"),analytics.gaEvent("report-"+i,articleData.cache.canonical,o);var n=s.getPref("lstrpt");s.getPref("joined")||s.setPref("joined",(new Date).getTime());var r={lstrpt:n,joined:s.getPref("joined"),type:i,articleData:articleData,url:o},a=JSON.stringify(r),d=l({method:"post",url:"/api/reportImage",data:a});c.showReportCoverImageText1=!1,c.showReportCoverImageText2=!0,d.success(function(e){s.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image",o)}),d.error(function(){})},c.suggestImage=function(t,i,o){trackJsInfo(e,"suggestImage"),console.log("suggest cover image",o),analytics.gaEvent("report-"+i,articleData.cache.canonical,o);var n={lstrpt:s.getPref("lstrpt"),joined:s.getPref("joined"),type:i,articleData:articleData,url:o},r=JSON.stringify(n);c.showSuggestImageText1=!1,c.showSuggestImageText2=!0;var a=l({method:"post",url:"/api/reportImage",data:r});a.success(function(e){s.setPref("lstrpt",(new Date).getTime()),console.log("success reporting image")}),a.error(function(){c.showSuggestImageText1=!1,c.showSuggestImageText2=!0})},f.recache=function(){trackJsInfo(e,"recache"),articleData.rawArticlePath=articleData.rawArticlePath.split("#")[0];var o="/"+articleData.langCodeUrl+"/"+articleData.rawArticlePath+"?recache=1&callback=JSON_CALLBACK&cachedate="+articleData.cache.cacheDate+"&hash="+articleData.cache.hash;try{l.jsonp(o).success(function(e){if(e.success){if(e.newArticleData){if(e.newArticleData.cache.wikiRevision==articleData.cache.wikiRevision)return void console.log("Edits were made but not yet approved");t.differenceMinutes<120&&i(function(){t.showRefreshNotice=!0},2e4)}}else console.log("not recaching ",e)}).error(function(e,t,i,o){console.log("response ",e),console.log("caught problem parsing recache response")})}catch(t){console.log("caught problem parsing recache response exception"),e.trackJs&&e.trackJs.track(t)}},f.precache=function(t){trackJsInfo(e,"precache");var i=(t=t.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";l.jsonp(i).success(function(e){e.success?console.log("successfully cached article "):console.log("failed precache",e)}).error(function(e,t,i,o){})},f.prefetch=function(t){trackJsInfo(e,"prefetch");var i=(t=t.split("#")[0])+"?precache=1&prefetch=1&callback=JSON_CALLBACK";console.log("issuing prefetch request ",i),l.jsonp(i).success(function(e){e.success?(e.CDNFileUrl?f.prefetchSingleFile(e.CDNFileUrl):e.S3FileUrl&&f.prefetchSingleFile(e.S3FileUrl),e.fullUrl&&f.prefetchSingleFile(e.fullUrl),e.wikiwandUrl&&f.prefetchSingleFile(e.wikiwandUrl)):e.redirect?(console.log("redirect to ",e.redirect),f.prefetch(e.redirect)):console.log("not prefetching ",e)}).error(function(e,t,i,o){console.log("error ",e,t,i,o)})},f.prefetchSingleFile=function(t){trackJsInfo(e,"prefetchSingleFile"),t=t.replace("https://","//").replace("http://","//"),l({method:"GET",url:t}).success(function(e,t,i,o){console.log("downloaded file (prefetch)")}).error(function(e,t,i,o){console.warn("Failed to download a file (pre-fetching). This is not a critical issue, but doesaffect loading speed. If you are using an extension which forces the use of https, you might want to go to https://www.wikiwand.com where everything will run smoother.")})},f.testWikipediaRevision=function(){if(articleData&&articleData.title&&articleData.cache&&!articleData.pageIsComparison){var i=(new Date).getTime();t.differenceMinutes=(i-articleData.cache.cacheDate)/6e4;var o=articleData.langCodeUrl;"zh-"===o.substr(0,3)&&$.inArray(o,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(o="zh");var n="https://"+o+".wikipedia.org/w/api.php?action=query&prop=revisions&format=json&rvprop=ids%7Cflags%7Ctimestamp&rvlimit=1&titles="+encodeURIComponent(decodeURIComponent(articleData.rawArticlePath))+"&redirects=1&continue=&callback=JSON_CALLBACK";try{l.jsonp(n).success(function(i){if(i&&i.query&&i.query.pages){var o=i.query.pages;for(var n in void 0!==i.warnings&&e.trackJs&&e.trackJs.track("revision: got warnings from API"),("object"!=typeof o||o&&0==o.length)&&e.trackJs&&e.trackJs.track("revision: no pages in Wikipedia API response"),o){var r=o[n];for(var a in("object"!=typeof r.revisions||r.revisions&&0==r.revisions.length)&&(void 0!==r.missing?-1==articleData.rawArticlePath.indexOf(":")&&(t.showDeletedNotice=!0):e.trackJs&&e.trackJs.track("revision: no page.revisions in Wikipedia API response")),r.revisions){var s=r.revisions[a];try{if(void 0!==s.revid){if(s.revid.toString()!=articleData.cache.wikiRevision)return f.recache()}else e.trackJs&&e.trackJs.track("revision: no revid in Wikipedia API response")}catch(t){e.trackJs&&e.trackJs.track("revision: exception parsing wikipedia revision")}break}break}}}).error(function(t,i,o,n){trackJsInfo(e,"error issuing wikipedia request:"),trackJsInfo(e,"data:",JSON.stringify(t)),trackJsInfo(e,"status:",JSON.stringify(i)),trackJsInfo(e,"headers:",JSON.stringify(o)),trackJsInfo(e,"config:",JSON.stringify(n))})}catch(t){trackJsInfo(e,"problem with making api call to wikipedia"),e.trackJs&&e.trackJs.track(t)}}else console.log("not an article")},c.loadUserVoice=function(){UserVoice?console.log("already have userVoice"):(console.log("loading uservoice"),UserVoice=window.UserVoice||[],function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//widget.uservoice.com/he5ETYZF0S28rbrL1qP0Q.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}(),UserVoice.push(["identify",{}]))},c.reportComments=function(e,i){if(e){if(i||(i=""),e.indexOf("hover")>=0){if(t["reported_comments_"+e])return;t["reported_comments_"+e]=!0}"production"!=serverData.config.environment?console.log("Sending Analytics:","fb-comments",e,i):(analytics.gaEvent("fb-comments",e,i),analytics.gaVirtualPageView("virtualpageview/fb-comments/"+e+"/"+i))}},angular.element(document).ready(function(){trackJsInfo(e,"Dom ready"),void 0===serverData.publisherHostCode&&i(function(){trackJsInfo(e,"setting tooltipster to #main_menu .menu-tooltip"),trackJsInfo(e,"jquery element is ",$("#main_menu .menu-tooltip")),$("#main_menu .menu-tooltip").tooltipster({theme:".toolbar-tooltip",arrow:!0,offsetY:10,position:"bottom",trigger:"hover",animation:"fade",speed:100,interactive:!1})},1e3),i(function(){c.precache_from_extension||(c.loadVariousPopups=!0)},3e3),i(function(){c.precache_from_extension||(c.hideToolbar=!1,c.hideTOC=!1,c.hideCoverImageLandscape=!1)},0),$(document).keydown(function(e){if($(".search_btn ").hasClass("focus")&&13===e.keyCode){var t=$("#queryinput").val();0==$(".tt-suggestion").length&&(console.log("no suggestions"),document.location="/"+articleData.langCodeUrl+"/"+t)}}),r.isCanvasSupported()||($(".html5-only").show(),$("#loading").hide()),r.isTouchDevice()&&($("#main_menu").addClass("navbar_opaque"),$("#wikiwand_toc").css("overflow","auto")),$("#splashscreen").hide(),c.rtl=$("body").hasClass("rtl")}),t.$on("articleContentReadyFromShell",function(){c.hideToolbar=!1,c.hideTOC=!1,c.hideCoverImageLandscape=!1,c.cohorts&&"newtab"==c.cohorts.mon_bottom&&($("#footer-banner-wrapper").show(),$(".wikiwand_footer").addClass("no_margin"))}),c.previewSelection="true"==localStorage.previewSelection,c.togglePreviewSelection=function(){void 0===localStorage.previewSelection?c.report("article-promo-SHORT-NOTICE/initial-toggle"):c.report("article-promo-SHORT-NOTICE/additional-toggle"),localStorage.previewSelection=c.previewSelection,toggleFrame(c.previewSelection)},c.togglePreviewSelectionFromSpan=function(){c.previewSelection=!c.previewSelection,c.togglePreviewSelection()}}]),(app=angular.module("wikiwand")).controller("CoverImageController",["$scope","$rootScope","$window",function(e,t,i){var o=this;o.calculateCoverHeight=function(){articleData.mainImage},t.initializeCoverImage=function(){trackJsInfo(i,"initializeCoverImage"),o.calculateCoverHeight(),e.finalImageURL=articleData.mainImage.full.urlDesktop.replace("http://","//").replace("https://","//")},articleData.mainImage&&t.initializeCoverImage()}]),(app=angular.module("wikiwand")).controller("PreferredLanguagesController",["$scope","$log","$timeout","LanguagePreferences",function(e,t,i,o){e.$on("openLanguagesDropdown",function(){e.list=[],i(function(){var t=o.getLangPrefs();if(articleData.availableLanguages){var i=articleData.availableLanguages,n={};_.each(t,function(e,t){1==e.fav?n[e.lang]={NameEnglish:e.NameEnglish,tooltip:"No such article in "+e.NameEnglish,hasArticle:!1,articleLink:"javascript:void(0)",langAbberviation:e.lang.slice(0,2),articleTitle:"",lang:e.lang,count:e.count,fav:e.fav}:delete n[e.lang]}),_.each(i,function(e,t){n[e.langCodeURL]&&(n[e.langCodeURL].hasArticle=!0,n[e.langCodeURL].articleLink=e.articleLink,n[e.langCodeURL].articleTitle=e.articleTitle,n[e.langCodeURL].tooltip="Read article in "+e.langEnglishName)});var r=_.sortBy(n,function(e){return-e.count});if((r=r.slice(0,6)).length>5){var a=r[5].count;Object.keys(t).length>6&&o.removeLangsLowerThanCount(a)}e.list=r}else e.list=[];var s=0;_.each(e.list,function(e,t){e.hasArticle&&s++}),e.numOfAvailablePreferredLanguages=s},0)})}]),(app=angular.module("wikiwand")).controller("AllAvailableLanguagesController",["LanguagePreferences","$scope","$timeout","$log","$rootScope","$http","Utilities",function(e,t,i,o,n,r,a){t.filterByQueryWikipedia=function(e){return!t.filterQueryWikipedia||(!!~e.NameEnglish.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())||(!!~e.NameNative.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())||!!~e.CodeURL.toLowerCase().indexOf(t.filterQueryWikipedia.toLowerCase())))},t.filterByQueryArticle=function(e){return!t.filterQuery||(!!~e.langEnglishName.toLowerCase().indexOf(t.filterQuery.toLowerCase())||(!!~e.langNativeName.toLowerCase().indexOf(t.filterQuery.toLowerCase())||!!~e.langCodeURL.toLowerCase().indexOf(t.filterQuery.toLowerCase())))},t.filterUnrecognizedLangs=function(e){return!!e.langAbberviation},t.refreshFavoritesList=function(){var e=_.filter(t.wikipediaLanguages,function(e,t){return 1==e.fav});t.favoriteLanguages=e},t.$on("showAllArticleLanguagesFunc",function(e){n.langOpenArticle=!0,articleData.availableLanguages?t.articleLanguageLinks=articleData.availableLanguages:t.articleLanguageLinks=[],i(function(){a.isTouchDevice()||$("#lang ul").niceScroll({cursorcolor:"#000",cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:"left",zindex:360}),$("#lang_input").focus()},10)}),t.$on("showAllWikipediaLanguagesFunc",function(o){a.isTouchDevice()||i(function(){$("#p-lang_search ul").niceScroll().hide()},0),n.langOpenWikipedia=!0,r.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(o,n,r,a){t.wikipediaLanguages=_.toArray(o),Object.keys(t.wikipediaLanguages).length>0&&(_.each(t.wikipediaLanguages,function(e,t){e.CodeURL&&(e.langAbberviation=e.CodeURL.slice(0,2))}),_.each(e.getLangPrefs(),function(e){_.each(t.wikipediaLanguages,function(i,o){t.wikipediaLanguages[o].CodeURL==e.lang&&(t.wikipediaLanguages[o].fav=e.fav)})}),t.refreshFavoritesList(),i(function(){$("#lang ul, #p-lang_search ul").getNiceScroll().resize(),$("#lang_input").focus()},500))})}),t.$on("hideAllArticleLanguagesFunc",function(e){t.wikipediaLanguages=[],n.langOpenArticle=!1}),t.$on("hideAllWikipediaLanguagesFunc",function(e){t.wikipediaLanguages=[],n.langOpenWikipedia=!1}),t.toggleFavorite=function(i,o){e.toggleLangFave(i,o);var n=e.getLangPrefs();_.each(t.wikipediaLanguages,function(e,o){e.CodeURL==i&&(t.wikipediaLanguages[o].fav=n[i].fav)}),t.refreshFavoritesList()}}]);var MAX_RESULTS_PER_LANG=8,MAX_PRELOADED_RESULTS=3,SEARCH_RESULTS_LINE_HEIGHT=40,RTL_LANGS=["aeb","ar","arc","arq","ary","arz","az-ara","bqi","ckb","fa","glk","ks-arab","he","lat-hebr","ps","sd","ur","ydd","yi"],preload_dict={};(app=angular.module("wikiwand")).controller("ArticleSearchControllerRev2",["$scope","$rootScope","$log","LanguagePreferences","$timeout","$http","Utilities",function(e,t,i,o,n,r,a){var s=this,l={},c=!1;s.doesConnectionExist=function(){var e=new XMLHttpRequest,t=Math.round(1e4*Math.random());e.open("HEAD","/ads.txt?rand="+t,!1);try{return e.send(),e.status>=200&&e.status<304}catch(e){return!1}},s.preloadResult=function(){},s.testCtrl=function(){c?(console.log("double click ctrl"),t.showSearch?(t.openSearch("close"),analytics.gaEvent("search","double-ctrl","close")):(t.openSearch("open"),analytics.gaEvent("search","double-ctrl","open"),setTimeout(function(){$("#queryinput").focus()},100))):(c=!0,n(function(){c=!1},300))},$(window).keyup(function(e){if(191!=e.which||t.showSearch||(t.openSearch("open"),analytics.gaEvent("search","slash hit","open"),setTimeout(function(){$("#queryinput").focus()},100)),17!=e.which)return!0;s.testCtrl()}),t.showSearch=!1,e.searchFocus=!1,t.openSearch=function(i){"open"===i?(analytics.gaEvent("search","open","open"),t.showSearch=!0,n(function(){angular.element("#queryinput").focus()},0),e.searchFocus=!0):"close"===i&&(analytics.gaEvent("search","open","close"),e.searchFocus=!1,t.showSearch=!1)};!function(){var e="؀-ۿ";e+="ݐ-ݿ",e+="ﭐ-﷿",e+="ﹰ-\ufeff",e+="֑-״";var t=new RegExp("^[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()]*["+e+"]"),i=new RegExp("^[\\.,-\\/#!$%\\^&\\*;:{}=\\-_`~()]*$");var o=function(){var e,o,n=$("#queryinput").val(),r=(e=n,o=$("body").hasClass("rtl"),""===e?o:!!e.match(t)||!!e.match(i)&&o),a=$("#queryinput");r?a.addClass("rtl"):a.removeClass("rtl")};$("#queryinput").keypress(o),$("#queryinput").keyup(o)}(),e.navigateTo=function(e){window.location.search.indexOf("in_iframe")>-1?window.top.location.href=e:window.location.href=e};var d=["en"];e.resultClicked=function(i,o){var n=-2;i.preventDefault(),_.each(e.search.results,function(t,i){t.linkEncoded==o?(e.search.results[i].selected=!0,e.search.results[i].c="loading",e.search.selectedIndex=i,n=i):e.search.results[i].selected=!1}),-2!=n?(t.searchFocus=!0,e.noSelection=!1,e.navigateTo(o)):console.log("id is null")},e.testKeyboard=function(i){i&&17==i.which&&s.testCtrl();var o=!1;if(i&&(i.preventDefault(),i.stopPropagation()),i&&27==i.which&&t.openSearch("close"),!i||33!=i.which&&36!=i.which||(e.search.selectedIndex=0,$(".results-container").scrollTop(0),o=!0),!i||34!=i.which&&35!=i.which||($(".results-container").scrollTop(1e3),e.search.selectedIndex=e.search.results.length-1,o=!0),i&&38==i.which&&(-1!=e.search.selectedIndex&&(e.search.selectedIndex=e.search.selectedIndex-1),o=!0),i&&40==i.which&&(e.search.selectedIndex!=e.search.results.length&&(e.search.selectedIndex=e.search.selectedIndex+1),o=!0),i&&13==i.which){if(1==e.fullSearch){var n="/"+articleData.langCodeUrl+"/"+e.search.query+"?fullSearch=true";return e.navigateTo(n),void(e.waiting=!0)}if(-1==e.search.selectedIndex){n="/"+articleData.langCodeUrl+"/"+e.search.query;return void e.navigateTo(n)}e.search.results[e.search.selectedIndex];var r=e.search.selectedIndex;return t.searchFocus=!0,e.search.results[e.search.selectedIndex].c="loading",void e.navigateTo(e.search.results[r].link)}if(o){_.each(e.search.results,function(t,i){i==e.search.selectedIndex?e.search.results[i].selected=!0:e.search.results[i].selected=!1}),-1==e.search.selectedIndex?e.noSelection=!0:e.noSelection=!1,e.search.selectedIndex==e.search.results.length?e.fullSearch=!0:e.fullSearch=!1;var a=$("#result_"+e.search.selectedIndex);$("#search_description").fadeOut(200),s.setHoverCard(a),a.position()&&console.log("element scrolll top ",a.position().top);var l=$(".results-container");l.scrollTop();if(a.position()){var c=a.position().top;c<SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over top of container"),l.scrollTop(l.scrollTop()-SEARCH_RESULTS_LINE_HEIGHT)),c>l.height()-2*SEARCH_RESULTS_LINE_HEIGHT&&(console.log("element over bottom of container"),l.scrollTop(l.scrollTop()+2*SEARCH_RESULTS_LINE_HEIGHT))}}},e.initSearch=function(i){e.noResults=!1,i&&(t.searchType=i,serverData.search&&"true"==serverData.search.autoFocus&&$("#queryinput").focus()),d="undefined"!=typeof articleData&&articleData.langCodeUrl?o.getTopNLangs(3,articleData.langCodeUrl):o.getTopNLangs(3,null),e.waiting=!1,e.search={},e.noSelection=!0,e.search.selectedIndex=-1,e.search.results=[],e.testKeyboard();articleData.searchTranslation&&$("#queryinput").attr("placeholder",articleData.searchTranslation),e.$watch("search.query",function(){""==e.search.query&&(e.search.results=[]),n.cancel(e.searchTriggerTimeoutPromise),n.cancel(e.preloadTimeoutPromise),e.search.selectedIndex=-1,e.noSelection=!0,e.fullSearch=!1,$(".results-container").scrollTop(0),e.searchTriggerTimeoutPromise=n(s.triggerSearch,200)},!0)},s.triggerSearch=function(){void 0!==e.search.query&&""!=e.search.query&&_.each(d,function(t,i){e.waiting=!0,s.issueSearchRequest(t,e.search.query,!1),s.issueSearchRequest(t,e.search.query,!0)})},s.issueGoogleRequest=function(t){if(void 0!==t){var i="//suggestqueries.google.com/complete/search?client=chrome&hl=en&q="+t+"&callback=JSON_CALLBACK";r.jsonp(i).success(function(t){if(""!=e.search.query){t&&t[1]&&t[1].length>0&&(t.results=t[1].slice(0,5)),e.noResults=!1,e.search.selectedIndex=-1,e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang});var i=0;_.each(t.results,function(t){if(0!=t.indexOf("http://")&&0!=t.indexOf("https://")){var o={};0==i&&(o.firstInlang=!0,o.langtag="from google"),o.lang="google-suggest",o.rtl=!1,o.T=t,o.desc=null,"true"==serverData.search.cse?o.link="/google-search?q="+t:o.link="//www.google.com/search?q="+t,o.backgroundImageSring="url(/img/google_search_icon.png)",o.linkEncoded=encodeURI(o.link),e.search.results.push(o),i++}}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(d,e.lang)}),e.noResults=0==e.search.results.length}}).error(function(t,i,o,n){if(console.log("error receiving response from google api ",i),0==s.doesConnectionExist()){var r={lang:"google-suggest",rtl:!1,T:"No internet conenction"};e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang}),e.search.results.push(r)}})}},s.issueBingRequest=function(t){if(console.log("issue bing request"),void 0!==t){var i="http://api.bing.com/osjson.aspx?query="+t+"&market=en_us&JsonType=callback&JsonCallback=JSON_CALLBACK";r.jsonp(i).success(function(t){if(""!=e.search.query){console.log("data from bing ",t),t&&t[1]&&t[1].length>0&&(t.results=t[1].slice(0,5)),e.noResults=!1,e.search.selectedIndex=-1,e.search.results=_.reject(e.search.results,function(e){return"bing-suggest"==e.lang});var i=0;_.each(t.results,function(t){if(0!=t.indexOf("http://")&&0!=t.indexOf("https://")){var o={};0==i&&(o.firstInlang=!0,o.langtag="from bing"),o.lang="bing-suggest",o.rtl=!1,o.T=t,o.desc=null,o.link="//www.bing.com/search?q="+t,o.backgroundImageSring="url(/img/bing_search_icon.png)",o.langtag="from bing",o.linkEncoded=encodeURI(o.link),e.search.results.push(o),i++}}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(d,e.lang)}),e.noResults=0==e.search.results.length}}).error(function(t,i,o,n){if(console.log("error receiving response from bing api ",i),0==s.doesConnectionExist()){var r={lang:"google-suggest",rtl:!1,T:"No internet conenction"};e.search.results=_.reject(e.search.results,function(e){return"google-suggest"==e.lang}),e.search.results.push(r)}})}},s.issueSearchRequest=function(t,i,o){var n="/api/search/"+t+"/"+i;document.location.href.indexOf("debug_search=1")>-1&&(n+="?debug_search=1"),1==o&&(n="/api/searchwiki/"+t+"/"+i),r({method:"GET",url:n}).success(function(n,r,a,s){if(""!=e.search.query&&(0==o&&(l["/"+t+"/"+i]=!0),1!=o||!l["/"+t+"/"+i])){e.noResults=!1,e.search.selectedIndex=-1,e.testKeyboard(),e.waiting=!1,e.search.results=_.reject(e.search.results,function(e){return e.lang==n.lang});var c=0;_.each(n.results,function(t){c>MAX_RESULTS_PER_LANG-1||(0==c&&(t.firstInlang=!0),t.lang=n.lang,t.rtl=-1!=_.indexOf(RTL_LANGS,n.lang),t.link="/"+n.lang+"/"+t.t.split(" ").join("_"),t.linkEncoded=encodeURI(t.link),null==t.u?t.backgroundImageSring="url(//assets.wikiwand.com/img/search_placeholder.png)":t.backgroundImageSring="url('"+t.u+"')",null==t.u?t.desc="<p>"+t.d+"</p>":null==t.d?t.desc="":t.desc="<img src='"+t.u+"' alt='wikiwand'/><p>"+t.d+"</p>","ww-c-disambig"==t.c&&(t.desc=""),e.search.results.push(t),c++)}),e.search.results=_.sortBy(e.search.results,function(e){return _.indexOf(d,e.lang)}),0==e.search.results.length?e.noResults=!0:e.noResults=!1}}).error(function(e,t,i,o){})},s.setHoverCard=function(e){var t=e,i=t.offset(),o=t.attr("desc-attr");o&&(""!=o&&o.length>20&&$("#search_description").stop().fadeIn(100).html(o).css({top:i.top-$(window).scrollTop(),left:i.left-$("#search_description").width()-32}),t.hasClass("rtl")?$("#search_description").addClass("rtl"):$("#search_description").removeClass("rtl"))},angular.element(document).ready(function(){a.isTouchDevice()||($("body").on("mouseenter",".searchResult",function(){s.setHoverCard($(this))}),$("body").on("mouseleave",".searchResult, .results-container",function(){$("#search_description").fadeOut(200),$(".searchResult").removeClass("selectedResult")}))});navigator.userAgent.toLowerCase()}]),(app=angular.module("wikiwand")).controller("ToolbarController",["$scope","$log","Utilities","ipCookie","$timeout","$rootScope","userPreferences","$route",function(e,t,i,o,n,r,a,s){function l(){try{$("#main_menu .menu-tooltip").tooltipster("disable"),$("#main_menu .menu-tooltip").tooltipster("hide")}catch(e){console.log("tooltipster not ready")}$("#header").addClass("foldfix")}$(document).keydown(function(e){if(191===e.keyCode){var t=$("#queryinput");return!!t.is(":focus")||(t.focus(),!1)}}),e.langAbbreviation=articleData.langCodeUrl.slice(0,2).toUpperCase(),e.toggleWikiwandMenu=function(t){1!=e.showWikiwandMenu?(e.closeAllMenus(),e.showWikiwandMenu=!0,l()):e.closeAllMenus(),t.stopPropagation()},e.toggleLanguageMenu=function(t){1!=e.showLanguageMenu?(e.closeAllMenus(),e.showLanguageMenu=!0,r.$broadcast("openLanguagesDropdown"),l()):e.closeAllMenus(),t.stopPropagation()},e.togglePerMenu=function(t){1!=e.showPerMenu?(e.closeAllMenus(),e.showPerMenu=!0,l(),analytics.gaEvent("preferences","popup","opened")):(e.closeAllMenus(),a.setPref("prefAttention","true")),t.stopPropagation()},e.hidePerMenu=function(t){$(".menu_per").fadeOut(),setTimeout(function(){e.showPerMenu=!1},1e3),a.setPref("prefAttention","true"),t.stopPropagation()},n(function(){if("true"!=a.getPref("prefAttention")||serverData.callToPersonalize){if(!r.activation)return;r.activation.vetek;(r.inFrame||serverData.callToInstallExtension||serverData.callToPersonalize)&&(!0,serverData.callToPersonalize&&(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/impression"),r.callToPersonalize=!0)),"homepage"==o("wikiwand.activation.first_impression")&&!0,$("body").hasClass("rtl")&&!1,i.isTouchDevice()&&!1,!1&&(e.showPerMenu=!0,l(),r.prefsTouched="true"==a.getPref("prefsTouched"),"true"!=a.getPref("prefAttention")&&n(function(){$(".per_serif").addClass("new_pref")},0),a.setPref("prefAttention","true"))}},2e3),e.showUserVoice=!1,e.showCoverReport=!1;var c=function(){if(!UserVoice)return r.loadUserVoice(),void setTimeout(c,50);UserVoice.push(["embed","#user_voice_wrapper",{trigger_style:"icon",accent_color:"#3392af",trigger_color:"white",trigger_background_color:"rgba(46, 49, 51, 0.6)",locale:"en",contact_title:"Report a Bug (English please)",smartvote_title:"What should we add next?"}])};e.openUserVoiceDialog=function(){c()},e.toggleFeedbackMenu=function(t){void 0===UserVoice&&r.loadUserVoice(),1!=e.showFeedbackMenu?(e.showUserVoice=!1,e.showCoverReport=!1,r.showReportCoverImageText1=!0,r.showReportCoverImageText2=!1,e.closeAllMenus(),e.showFeedbackMenu=!0,l()):e.closeAllMenus(),t.stopPropagation()},e.toggleShareMenu=function(t){if(1!=e.showShareMenu){e.closeAllMenus(),e.showShareMenu=!0;var i=encodeURIComponent(window.location.href);$(".share-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+i),$(".share-twitter a").attr("href","https://twitter.com/home?status="+i),$(".share-reddit a").attr("href","https://.com/share?url="+i),r.articleData.pageIsArticle&&!r.articleData.pageIsComparison?$(".share-gmail a").attr("href","https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(r.articleData.title)+" - From Wikipedia&body=Check this out%0A%0A"+i):$(".share-gmail a").attr("href","https://mail.google.com/mail/?view=cm&fs=1&tf=1&to=&su="+encodeURIComponent(document.title)+"&body=Check this out%0A%0A"+i),l()}else e.closeAllMenus();t.stopPropagation()},e.today=(new Date).getDate(),e.closeAllMenus=function(){e.showWikiwandMenu=!1,e.showLanguageMenu=!1,r.callToPersonalize||(e.showPerMenu=!1),e.showFeedbackMenu=!1,e.showShareMenu=!1,$("#header").removeClass("foldfix"),r.openFact=!1},e.clickedInside=function(e){e.stopPropagation()},e.$on("closePopups",function(t,i){e.closeAllMenus()}),angular.element(document).ready(function(){i.isTouchDevice()||($(window).on("scroll",function(){$(this).scrollTop()>250?($("#header, #gist_wrapper").addClass("fold").removeClass("hovered"),$(".new_visitor").addClass("display_after_scroll"),$('.wikipedia_tooltip:not(".new_visitor")').removeClass("active"),$("#main_menu, #bookmark_wrapper").addClass("navbar_opaque")):(r.articleData.mainImage&&("cover"==r.articleData.mainImage.mode||"new_cover"==r.articleData.mainImage.mode&&$("#cover_image_wrapper").length>0)&&$("#main_menu, #bookmark_wrapper").removeClass("navbar_opaque"),$("#header, #gist_wrapper").removeClass("fold"),$('.wikipedia_tooltip:not(".new_visitor")').addClass("active"))}),$("body").on("mouseenter","#header.fold",function(){$(this).addClass("hovered"),$("#gist_wrapper").removeClass("fold")}))})}]),(app=angular.module("wikiwand")).controller("TableOfContentsController",["$scope","$rootScope","$log","Utilities","$timeout","userPreferences",function(e,t,i,o,n,r){if(!0!==precache_from_extension){var a,s,l=this;l.$scrollableElement=$(document),l.$headerElement=$("#header"),e.button={},e.activeButton=null,$(window).resize(function(){n.cancel(s),s=n(function(){(c=$(window).width())>920?(t.tocShow=!0!==r.getPref("TOC_folded"),t.mobileRes=!1):(t.tocShow=!1,t.mobileRes=!0)},100)}),$(document).keydown(function(e){$("#gallery").is(":visible")||!0!==t.searchFocus&&(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey||(37===e.keyCode&&l.scrollToNextOrPrevSection(-1),39===e.keyCode&&l.scrollToNextOrPrevSection(1)))}),t.tocFold=function(i){console.log("toc fold"),i&&(e.rtl?t.tocShow="swipeRight"===i:t.tocShow="swipeLeft"===i),"mobile"!==i&&(t.tocShow=!t.tocShow,!1===t.tocShow?r.setPref("TOC_folded",!0):!0===t.tocShow&&r.setPref("TOC_folded",!1))},t.tocMobileFold=function(){!0===t.mobileRes&&(t.tocShow=!1)},t.tocGenerate=function(){var i=["SUP"],r=function(e){var t="toc_btn_"+e.split("%20").join("_").split(" ").join("_"),i="#"+l.escapeStringForSelector(t);try{var o=angular.element(i).children("a").eq(0)}catch(e){console.log("problem parsing hashtag")}if(o&&o.length>0){$("nav#header").addClass("fold"),l.clickTocButton(o,!0);var n=0,r=setInterval(function(){l.clickTocButton(o,!0),n=0},1e3),a=function(){r&&(clearInterval(r),r=null)};$(document).scroll(function(){n++>1&&a()}),setTimeout(function(){a()},8e3)}else console.log("error finding selector children: ",i)},a=function(e){for(var t=e,i=e.childNodes.length-1;i>=0;i--){var o=e.removeChild(e.childNodes[i]);e.parentNode.insertBefore(o,t),t=o}e.parentNode.removeChild(e)},s=function(e){if(e.text&&e.text.indexOf("<")>-1){var t=document.createElement("div");t.innerHTML=e.text,function(e){for(var t=Array.prototype.slice.apply(e.getElementsByTagName("*"),[0]),o=0;o<t.length;o++)-1===i.indexOf(t[o].nodeName)&&a(t[o])}(t),e.sanitizedText=t.innerHTML}else e.sanitizedText=e.text;if(e.children)for(var o in e.children){var n=e.children[o];n&&s(n)}};n(function(){e.articleTitle=articleData.title,articleData.TOC&&(s(articleData.TOC),e.level2=articleData.TOC.children)},0),t.$on("articleContentReadyFromShell",function(){document.querySelectorAll('a.anch-link[href^="#"]:not([href^="#cite"]):not([href^="#CITE"])').forEach(function(e){e.addEventListener("click",function(e){for(var t=e.target;t&&"a"!==t.tagName.toLowerCase();)t=t.parentNode;r(t.hash.substr(1))})})}),t.$on("articleContentReadyFromShell",function(){if(!o.isTouchDevice()){var e=window.location.hash,t="";if(e&&(t="#/"===e.substr(0,2)?e.substr(2):e.substr(1)),""!==t){if("discussions"===t)return void l.scrollToElement($("#discussions"),!0);r(t)}else l.updateTocActiveButton()}l.$scrollableElement.scroll(function(){return l.updateTocActiveButton()})})},l.updateTocActiveButton=function(){var e=$("#article_content_wrapper"),t=e.find("#overview"),i=this.$scrollableElement.scrollTop(),o=0,r=0;l.$headerElement&&(r=l.$headerElement.height());var s=$(window).height()-r;e.find("h2 .mw-headline, h3 .mw-headline").each(function(e,n){var r=$(this),a=.3*Math.min(s,o),c=l.getElementOffset(r)-a;return o=r.outerHeight(),c<=i&&(t=$(this),!0)}),n.cancel(a),a=n(function(){$(".toc_list > li, .toc_list > li a").removeClass("active"),t&&l.activateTocButtonBySection(t)},100)},this.scrollToNextOrPrevSection=function(t){var i=e.activeButton;if(i){var o=$("#wikiwand_toc").find("li"),n=o.index(i)+t;if(!(n<0||n>=o.length)){var r=o.eq(n).find("a").eq(0);r&&1===r.length&&l.clickTocButton(r)}}},l.activateTocButtonBySection=function(e){var t="#toc_btn_"+l.escapeStringForSelector(e.attr("id")),i=$(t);0!==i.length&&this.activateTocButton(i)},l.activateTocButton=function(t){e.activeButton=t;var i=t;t.parent("ol").length>0&&(i=t.parent().parent()).addClass("active").children("a").addClass("active");var o=i.position().top,n=i.outerHeight(),r=$("#wikiwand_toc").height(),a=Math.round(o-(r-n)/2);a<0&&(a=0),a>r&&(a=r);$("#wikiwand_toc").stop().animate({scrollTop:a},{duration:200}),t.addClass("active").children("a").addClass("active")},l.getElementOffset=function(e){var t=e.offset().top,i=0;return l.$headerElement&&(i=l.$headerElement.height()),Math.floor(t-i-10)},l.scrollToElement=function(e,t){if(0!==e.length)if(e.length>1)console.warn("ScrollToElement(): more than one element found: ",e);else{var i=l.getElementOffset(e),n=Math.abs(l.$scrollableElement.scrollTop()-i)/10;n<200&&(n=200),n>400&&(n=400),t&&(n=0),o.isTouchDevice()||t?$("html,body").scrollTop(i):$("html,body").stop().animate({scrollTop:i},{duration:n})}else console.warn("ScrollToElement(): element not found:",e)},$("body").on("click","#toc_btn > span",function(){$("html,body").animate({scrollTop:0},200),window.location.hash=""}),t.scrollToArticleSection=function(e,t=!1){var i=$(document.getElementById(e)),o=i.parents("div.collapse_title, div.collapse");if(o.length>0){var n=o.parent();n.children("div.collapse_title").addClass("active"),n.children("div.collapse").show()}l.scrollToElement(i,t),$("#content h2 span, #content h3 span").removeClass("active"),i.addClass("active")},l.escapeStringForSelector=function(e){return e?e.replace(/([ #;?&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"):e},l.clickTocButton=function(e,i){if(e&&1===e.length){var o=e.attr("href").substr(1);t.scrollToArticleSection(o,i)}},e.button.doClick=function(e){var t=e.currentTarget,i=angular.element(t);l.clickTocButton(i)};var c=$(window).width();c<920&&(t.tocShow=!1,t.mobileRes=!0),t.tocGenerate()}}]),(app=angular.module("wikiwand")).service("LanguagePreferences",["$rootScope","$http",function(e,t){var i={},o=function(){localStorage.wikiwand_languages_rev2||(localStorage.wikiwand_languages_rev2={}),localStorage.wikiwand_languages_rev2=angular.toJson(i)},n=function(){try{if(serverData&&serverData.agent&&serverData.agent.clientLanguages){var e={en:{count:4}},t=serverData.agent.clientLanguages.split(","),n=!1;console.log("array ",t),_.each(t,function(t,i){var o=t.split(";")[0].split("-")[0];console.log("lang",o),"en"==o||n||(e[o]={count:4},n=!0)}),localStorage.wikiwand_languages=angular.toJson(e)}else i={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},o()}catch(e){i={en:{count:1,fav:!0,lang:"en",NameEnglish:"English"},fr:{count:1,fav:!0,lang:"fr",NameEnglish:"French"}},o()}},r=function(){localStorage.wikiwand_languages_rev2&&(i=angular.fromJson(localStorage.wikiwand_languages_rev2))};return"undefined"!=typeof precache_from_extension&&precache_from_extension||function(){if(function(){try{if(localStorage.wikiwand_languages||n(),localStorage.wikiwand_languages_rev2)return;var e=angular.fromJson(localStorage.wikiwand_languages);console.log("old language pref ",e),t.get("/js/wikipedia-lang-infos-client-dictionary.js").success(function(t,n,r,a){var s=t;_.each(s,function(t,o){e[s[o].CodeURL]&&(console.log("found match ",s[o].CodeURL),e[s[o].CodeURL].fav=!0,e[s[o].CodeURL].lang=s[o].CodeURL,e[s[o].CodeURL].NameEnglish=t.NameEnglish,e[s[o].CodeURL].fav=!0,e[s[o].CodeURL].count>3&&(i[s[o].CodeURL]=e[s[o].CodeURL]))}),o()})}catch(e){console.log("migration of old languages storage failed",e)}}(),r(),"undefined"!=typeof articleData&&articleData.langCodeUrl){var e=articleData.langCodeUrl;i[e]&&(i[e].count=i[e].count+1,o())}}(),{getTopNLangs:function(e,t){for(var o in r(),i)i[o].lang=o,""===o&&delete i[o];var n=_.toArray(i),a=_.sortBy(n,function(e){var t=e.count;return e.fav&&(t+=50),t}).reverse(),s=[];for(var l in t&&s.push(t),a)a[l].lang!==t&&1==a[l].fav&&s.push(a[l].lang);return s=_.first(s,e)},getLangPrefs:function(){return i},toggleLangFave:function(e,t){i[e]?(1==i[e].fav?i[e].fav=!1:i[e].fav=!0,i[e].NameEnglish=t):i[e]={count:1,fav:!0,lang:e,NameEnglish:t},console.log("toggled fav for ",e,"new value is ",i[e].fav),o(),localStorage.wikiwand_last_save=(new Date).getTime()},removeLangsLowerThanCount:function(e){_.each(i,function(t,o){t.count<e&&delete i[t.lang]}),o()}}}]),(app=angular.module("wikiwand")).service("userPreferences",["$rootScope","Utilities","$window",function(e,t,i){e.prefsTouched=!1;var o={},n=function(){if(localStorage.wikiwand_user_prefs)try{o=angular.fromJson(localStorage.wikiwand_user_prefs)}catch(e){i.trackJs&&(trackJsInfo(i,"preferences json string is "+localStorage.wikiwand_user_prefs),i.trackJs.track("problem parsing user prefs",e.message))}return e.isHttps="https:"==location.http,o},r=function(r){if(e.articleData&&!e.articleData.pageIsArticle){if("/news"!=window.location.pathname.toLowerCase())return void console.log("not article page, not loading styling");console.log("news page")}trackJsInfo(i,"updatePageStyle "+r),1==(o=n()).TOC_folded?e.tocShow=!1:e.tocShow=!0;var a=[];t.isTouchDevice()&&a.push("touch"),t.isItInternetExplorer()&&a.push("ie");var s=!1;if(serverData.agent&&"Chrome"==serverData.agent.family&&e.activation){var l=e.activation.joined,c=new Date("Thu, 11 Jun 2015 13:30:00 GMT"),d=new Date("Sun, 28 Jun 2015 12:00:00 GMT");l>c&&l<d&&(s=!0)}"wikiwand"==serverData.layout?o.fontStyle?e.fontStyle=o.fontStyle:e.fontStyle=s?"sansSerif":"serif":(e.fontStyle="sansSerif",document.querySelector("body").classList.add(serverData.publisherHostCode)),o.themeStyle?e.themeStyle=o.themeStyle:e.themeStyle="light",o.txtSize?e.txtSize=o.txtSize:e.txtSize=s?"smallTxt":"mediumTxt",o.columnWidth?e.columnWidth=o.columnWidth:e.columnWidth=s?"full":"narrow",o.justify?e.justifyTxt="true"==o.justify:e.justifyTxt=!1,o.minimalStyle?e.minimalStyle="true"==o.minimalStyle:e.minimalStyle=!!s,"smallTxt"==e.txtSize&&a.push("small_txt"),"mediumTxt"==e.txtSize&&a.push("medium_txt"),"largeTxt"==e.txtSize&&a.push("large_txt"),"serif"==e.fontStyle&&a.push("serif"),"sansSerif"==e.fontStyle&&a.push("sans_serif"),"light"==e.themeStyle&&a.push("light"),"dark"==e.themeStyle&&a.push("dark"),"narrow"==e.columnWidth&&a.push("narrow_column"),"wide"==e.columnWidth&&a.push("wide_column"),"full"==e.columnWidth&&a.push("full_column"),1==e.justifyTxt&&a.push("justify"),1==e.minimalStyle&&a.push("minimal"),e.userBodyStyle="[ "+a.join(" ")+" ]"};return n(),function(){if("production"==serverData.config.environment){var e=["fontStyle","themeStyle","txtSize","justify","minimalStyle","columnWidth","TOC_folded"],t=Math.floor(Math.random()*e.length);for(var i in e){var n=e[i];if(i==t){var r="virtualpageview/preferences/"+n+"/"+o[n];analytics.gaVirtualPageView(r)}}}}(),{getPref:function(e){return n(),o[e]?o[e]:null},setPref:function(e,t){o[e]=t,localStorage.wikiwand_user_prefs||(localStorage.wikiwand_user_prefs={}),localStorage.wikiwand_user_prefs=angular.toJson(o),localStorage.wikiwand_last_save=(new Date).getTime(),r("update")},updatePageStyle:r}}]),(app=angular.module("wikiwand")).controller("UserPrefsController",["$scope","$rootScope","$window","Utilities","userPreferences","$timeout",function(e,t,i,o,n,r){var a=this;a.initPreferencesSliders=function(){n.updatePageStyle("update"),1===$(".per_btn").length&&($(".toggle_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[1]}}),$(".step_slider").noUiSlider({start:[0],step:1,range:{min:[0],max:[2]}}),e.Math=window.Math,e.fontStyleSlider=0,"serif"===t.fontStyle?e.fontStyleSlider=0:e.fontStyleSlider=1,$("#font_style_slider").val(e.fontStyleSlider),$("#font_style_slider").on({slide:function(){var e=Math.floor($(this).val());t.fontStyleHandler(e,!1),t.$apply()}}),e.themeSlider=0,"light"===t.themeStyle?e.themeSlider=0:e.themeSlider=1,$("#theme_slider").val(e.themeSlider),$("#theme_slider").on({slide:function(){var e=Math.floor($(this).val());t.themesHandler(e,!1),t.$apply()}}),e.fontSizeSlider=1,"smallTxt"===t.txtSize?e.fontSizeSlider=0:"mediumTxt"===t.txtSize?e.fontSizeSlider=1:"largeTxt"===t.txtSize&&(e.fontSizeSlider=2),$("#font_size_slider").val(e.fontSizeSlider),$("#font_size_slider").on({slide:function(){var e=Math.floor($(this).val());t.txtSizeHandler(e,!1),t.$apply()}}),e.columnWidthSlider=0,"narrow"===t.columnWidth?e.columnWidthSlider=0:"wide"===t.columnWidth?e.columnWidthSlider=1:"full"===t.columnWidth&&(e.columnWidthSlider=2),$("#column_slider").val(e.columnWidthSlider),$("#column_slider").on({slide:function(){var e=Math.floor($(this).val());t.columnWidthHandler(e,!1),t.$apply()}}),t.justifyTxt="true"==n.getPref("justify"))},a.prefsTouchedAnalyticsSent=!1,a.prefsTouchedHandler=function(e){console.log("Preference touched: ",e),n.setPref("prefsTouched","true"),t.prefsTouched="true"==n.getPref("prefsTouched"),a.prefsTouchedAnalyticsSent||(analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/personalized"),a.prefsTouchedAnalyticsSent=!0)},1==articleData.pageIsArticle&&(t.initPrefsController=function(){a.initPreferencesSliders(),e.preMenuReady=!0},t.fontStyleHandler=function(e,i){a.prefsTouchedHandler("fontStyle"),$(".per_serif").removeClass("new_pref"),0===e?(t.fontStyle="serif",n.setPref("fontStyle","serif")):1===e&&(t.fontStyle="sansSerif",n.setPref("fontStyle","sansSerif")),!0===i&&$("#font_style_slider").val(e)},t.themesHandler=function(e,i){a.prefsTouchedHandler("themeStyle"),$(".per_serif").removeClass("new_pref"),0===e?(t.themeStyle="light",n.setPref("themeStyle","light")):1===e&&(t.themeStyle="dark",n.setPref("themeStyle","dark")),!0===i&&$("#theme_slider").val(e)},t.txtSizeHandler=function(e,i){a.prefsTouchedHandler("txtSize"),$(".per_serif").removeClass("new_pref"),0===e?(t.txtSize="smallTxt",n.setPref("txtSize","smallTxt")):1===e?(t.txtSize="mediumTxt",n.setPref("txtSize","mediumTxt")):2===e&&(t.txtSize="largeTxt",n.setPref("txtSize","largeTxt")),!0===i&&$("#font_size_slider").val(e)},t.justifyHandler=function(e){a.prefsTouchedHandler("justify"),$(".per_serif").removeClass("new_pref"),1==e?(t.justifyTxt=!0,n.setPref("justify","true")):(t.justifyTxt=!1,n.setPref("justify","false"))},t.layoutHandler=function(e){a.prefsTouchedHandler("minimalStyle"),$(".per_serif").removeClass("new_pref"),"minimal"===e?(n.setPref("minimalStyle","true"),t.minimalStyle=!0,t.resetMinimal()):"rich"===e&&(n.setPref("minimalStyle","false"),t.minimalStyle=!1,t.resetRich())},e.prefClick=function(){n.setPref("prefAttention","true")},t.columnWidthHandler=function(e,i){a.prefsTouchedHandler("columnWidth"),$(".per_serif").removeClass("new_pref"),0===e?(t.columnWidth="narrow",n.setPref("columnWidth","narrow")):1===e?(t.columnWidth="wide",n.setPref("columnWidth","wide")):2===e&&(t.columnWidth="full",n.setPref("columnWidth","full")),!0===i&&$("#column_slider").val(e),$(".tables_wrapper").length>=1&&r(function(){t.$broadcast("runTablesOverflow",[])},100)},t.resetRich=function(){t.fontStyleHandler(0,!0),t.themesHandler(0,!0),t.txtSizeHandler(1,!0),t.columnWidthHandler(0,!0),t.justifyHandler(!1),analytics.gaEvent("preferences","popup","Rich style reset")},t.resetMinimal=function(){t.fontStyleHandler(1,!0),t.themesHandler(0,!0),t.txtSizeHandler(0,!0),t.columnWidthHandler(2,!0),t.justifyHandler(!1),analytics.gaEvent("preferences","popup","Minimal style reset")})}]);var backClicked=function(){console.log("back clicked"),$("body").scope().backClicked()},ocdClick=function(e){console.log("ocd bookmark clicked"),$("body").scope().addBookamrkFromHovercard(e)},mousePos={};(app=angular.module("wikiwand")).controller("ArticleContentController",["$rootScope","$scope","Utilities","$timeout","$compile","$window","$http","ipCookie","MonService",function(e,t,i,o,n,r,a,s,l){t.showReadMore=0;var c,d=this,u=!1,p=!1,h="none",f="wikiwand"==serverData.layout||"newTabWiki"==serverData.publisherHostCode;function g(){"dark"==e.themeStyle&&$(".article_content table td[style], .article_content table td[bgcolor], .article_content table tr[style], .article_content table tr[bgcolor], .article_content table th[style], .article_content table th[bgcolor]").each(function(){var e=$(this),t=e.css(["background-color","background"]);if(t){var i,o,n,r=m(t["background-color"]);i=e,o=r.substring(1),.2126*((n=parseInt(o,16))>>16&255)+.7152*(n>>8&255)+.0722*(n>>0&255)>135&&(i.css("color","#333"),i.find("a").css("color","#1559b5"))}})}function m(e){return(e=e.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===e.length?"#"+("0"+parseInt(e[1],10).toString(16)).slice(-2)+("0"+parseInt(e[2],10).toString(16)).slice(-2)+("0"+parseInt(e[3],10).toString(16)).slice(-2):""}e&&e.cohorts&&e.cohorts.mon_ocd&&(h=e.cohorts.mon_ocd||"none"),t.showDiscoverMore=0,"en"==articleData.langCodeUrl&&(t.showTextEnglish=!0),l.initMonService(),d.tablesOverflow=function(){var e=$("#article_content_wrapper").width();$(".tables_wrapper > table").each(function(){$(this).width()>e+5?$(this).parent().addClass("scroll"):$(this).parent().removeClass("scroll")})},e.stringSearch=function(e,t){$(".highlight_paragraph").removeClass("highlight_paragraph"),$(".currenthighlight").contents().unwrap(),e=e.replace(/\[[^\]]+\]/gi,"");var o=null;if($("#fullContent section").find("p, li, td, dd, div").each(function(t,i){if(!$(i).hasClass("img_container")&&!$(i).hasClass("image_wrapper")&&!o){var n=$(i).text().replace(/\[[^\]]+\]/gi,"");n.indexOf(e)>-1&&(o={text:n,element:i})}}),o){$(o.element).addClass("highlight_paragraph");var n,r,a,s,l=$(o.element).html(),c=l.split(" "),d=c.length,u=d,p=0;$("body").append('<div id="tempElement"></div>');for(n=d;n>1;n--){var h=c.slice(0,n);if($("#tempElement").html(h.join(" ")),!($("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(e)>-1))break;l.indexOf($("#tempElement").html())>-1&&(u=n,a=$("#tempElement").html())}for(r=0;r<u;r++){h=c.slice(r,u);if($("#tempElement").html(h.join(" ")),!($("#tempElement").text().replace(/\[[^\]]+\]/gi,"").indexOf(e)>-1))break;l.indexOf($("#tempElement").html())>-1&&(p=r,a=$("#tempElement").html())}if(s=u<d||p>0?$(o.element).html().replace(a,'<span class="currenthighlight">'+a+"</span>"):o.text.replace(e,'<span class="currenthighlight">'+e+"</span>"),$(o.element).html(s),console.log("need to scroll to bookmark?",t),1==t){try{var f=$(".currenthighlight:eq(0)").offset().top-$(window).height()/2}catch(e){f=$(".highlight_paragraph:eq(0)").offset().top-$(window).height()/3}i.isTouchDevice()?$("html,body").scrollTop(f):$("html,body").stop().animate({scrollTop:f},{duration:400})}$("#tempElement").remove()}},i.isTouchDevice()||$("body").on("mousemove",".panoramic",function(e){var t=$(this),i=t.offset().left,o=t.width(),n=t.find("img").width();if(!(n<=o)){var r=(e.pageX-i)/o,a=(r-=.5)<0;r=Math.abs(r),r=Math.pow(r,.7),a&&(r*=-1),(r+=.5)<0&&(r=0),r>1&&(r=1);var s=(n-o)*r;t.find(".img_container").scrollLeft(s)}}),e.$on("Facebook:load",function(){serverData&&serverData.config&&serverData.config.features&&serverData.config.features.comments&&(FB.Event.subscribe("comment.create",function(t){var i=!!t.parentCommentID;e.reportComments("article-comment-posted",i?"child":"parent")}),FB.Event.subscribe("comment.remove",function(t){console.log("comment deleted",t),e.reportComments("article-comment-deleted")}))}),t.scrollToDiscussions=function(){var t=$("#discussions").offset().top;i.isTouchDevice()?$("html,body").scrollTop(t):$("html,body").stop().animate({scrollTop:t},{duration:250}),e.reportComments("article-comments-link-click")},d.readMoreHandler=function(){var e=[];function i(e){for(var t=[],i=0;i<e.length;i++){var o=e.eq(i).attr("href");-1!==o.indexOf(":")||-1!==o.indexOf("#")||$(e.eq(i)).parent("small").length||t.push(o)}return t}t.readMoreArticles=[],o(function(){var o,n,r;(e=e.concat(i($("#overview p.first-paragraph").find(".int-link"))).slice()).length<10&&(e=e.concat(i($("#overview").find(".int-link"))).slice()),e.length<10&&(e=e.concat(i($("#fullContent").find(".int-link"))).slice()),e.length<3?t.showReadMore=0:(t.showReadMore=1,o=e,n=$("#fullContent").text().toLowerCase(),r={},_.each(o,function(e){var t="/"+articleData.langCodeUrl+"/",i=e.split(t).join("").split("_").join(" ");i=decodeURIComponent(i),r[e]={link:e,title:i,value:0};var o=n.split(i.toLowerCase());o.length&&(r[e].value=o.length)}),(e=_.sortBy(r,"value").reverse()).length>10?t.readMoreArticles=e.slice(3,6):t.readMoreArticles=e.slice(0,3))},500)},t.reportReadMore=function(e){analytics.gaEvent("discovery","readmore",e)},d.bottomLinkHandler=function(){t.showBottomLink=!1},d.articleArrowsHandler=function(){},d.galleryCarousel=function(){$(".ww-photo-group ul").attr("dir","ltr").slick({dots:!1,infinite:!1,centerMode:!1,variableWidth:!0,swipeToSlide:!0,speed:150})},e.$watch("themeStyle",function(e){"dark"==e&&g()},!0),$("button").click(function(){var e=m($("input").val());$(".result").html(e)}),d.handleTables=function(){g(),function(e){var t,i={};for(e.find("table").each(function(e,t){if($(t).hasClass("collapsible")){if(!t.getElementsByTagName("tr")[0])return;var o=t.getElementsByTagName("th")[0];if(!o)return;i[b]=t,t.setAttribute("id","collapsibleTable"+b);var n=document.createElement("span"),r=document.createElement("a"),a=document.createTextNode(w);n.className="collapseButton",r.style.color=o.style.color,r.setAttribute("id","collapseButton"+b),r.setAttribute("href","#"),$(r).on("click",function(e){return function(t){t.preventDefault(),k(e)}}(b)),r.appendChild(a),n.appendChild(document.createTextNode("[")),n.appendChild(r),n.appendChild(document.createTextNode("]")),o.insertBefore(n,o.firstChild),b++}}),t=0;t<b;t++)if($(i[t]).hasClass("collapsed")||b>=v&&$(i[t]).hasClass("autocollapse"))k(t);else if($(i[t]).hasClass("innercollapse"))for(var o=i[t];o=o.parentNode;)if($(o).hasClass("outercollapse")){k(t);break}}($("#fullContent")),trackJsInfo(r,"handleTables"),$("table td").each(function(){var e=getComputedStyle($(this)[0]);e&&("11px"==e["line-height"]&&$(this).css("line-height","22px"))}),$(".linked_img_wrapper").each(function(){if($(this).parent("div").length>0){var e=$(this).parent("div").attr("style");if(void 0==typeof e)return;$(this).hasClass("duplicateImage")||$(this).css("display","block"),void 0!=typeof e&&$(this).parent("div").find("br").hide()}}),$("table.sortable").tablesorter();var e=$("#article_content_wrapper").width(),t=".infobox, .infobox_v2, .infobox_v3, .sinottico, .toccolours .section_info, .collapse_title, .ambox, .vertical-navbox, .mbox-small";$(".article_content:not(#overview) > table:not("+t+"), .article_content center table:not("+t+")").each(function(){var t=$(this).width();t>e/1.5&&$(this).parent(".article_content").find(".image_wrapper").addClass("narrow_thumb"),t>e&&($(this).wrap('<div class="tables_wrapper"/>'),i.isTouchDevice()||$(".tables_wrapper").niceScroll({touchbehavior:!0,grabcursorenabled:!1,enablemousewheel:!1}).hide())}),d.tablesOverflow(),$("table.standard, .tracklist").addClass("wikitable")},d.initPortraitImage=function(){trackJsInfo(r,"initPortraitImage");var e=$(".portrait_img").first();if(e){var i=angular.element(e);n(i)(t)}},d.articleTop=function(){if(trackJsInfo(r,"articleTop"),t.articleMarginTop="noCover",articleData.mainImage&&("new_cover"===articleData.mainImage.mode||"cover"===articleData.mainImage.mode)){if(!articleData.mainImage.thumb)return;var e=articleData.mainImage.thumb.width,i=articleData.mainImage.thumb.height,o=e/i,n=i/e*100;$("#cover_image_wrapper").length>0&&(document.getElementById("cover_image_wrapper").style.paddingBottom=n+"%"),o<=1.6?t.articleMarginTop="low":o>1.6&&o<1.8?t.articleMarginTop="middle":o>=1.8&&(t.articleMarginTop="high")}},d.bindEvents=function(){trackJsInfo(r,"bindEvents"),$("body").on("click",".NavHead",function(){var e=$(this);e.parent().hasClass("collapsed")?e.parent().removeClass("collapsed"):e.parent().addClass("collapsed")});$("body").on("click","sup > a, sup > i > a",function(e){var t=$(this).attr("href"),i=$(this).children("span").eq(0).data("title"),o="";return $(this).hasClass("anch-link")&&$(t).length>0?o=$(t).html():i&&(o=t?"<a href='"+t+"' target='_blank'>"+i+"</a>":i),o&&($(this).hasClass("active")?($(".sup_pop").remove(),$("sup > a, sup > i > a").removeClass("active")):($(".sup_pop").remove(),$("sup > a, sup > i > a").removeClass("active"),$(this).addClass("active"),$(this).parent().append('<div class="sup_pop">'+o+'<div class="ex"></div></div>'))),!1}),$("body").on("click touchstart",function(){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove()}),$("body").on("click","sup",function(e){e.stopPropagation()}),$("body").on("click",".sup_pop .ex",function(e){$("sup a.anch-link").removeClass("active"),$(".sup_pop").remove(),e.stopPropagation()}),"wikiwand"!=serverData.layout&&$("body").on("click",".int-link",function(e){if(e.stopPropagation(),e.returnValue=!1,e.preventDefault(),e.target.href){var t=e.target.href.split("#");t.length>1?window.location.href=t[0]+window.location.search+"#"+t[1]:window.location.href=t[0]+window.location.search}}),$("body").on("mouseenter",".int-link",function(e){mousePos.left=e.clientX,mousePos.top=e.clientY;var t=$(this);t.attr("title",""),t.hasClass("no_hovercard")||f&&d.loadHoverCard(t)}),$("body").on("mouseleave",".int-link",function(){var e=$(this);mousePos.left=0,mousePos.top=0,e.data("ocd-mouse-inside",!1)}),$("body").on("click",".collapse_title",function(){trackJsInfo(r,"collapse_title click event");var e=$(this).parent().find("div.collapse");$(this).hasClass("active")?($(this).removeClass("active"),e.hide()):($(this).addClass("active"),e.show())}),$("body").on("click",".wiki_alert",function(){trackJsInfo(r,"wiki_alert click event"),$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$("body").on("click",".img_container",function(t){trackJsInfo(r,"openGallery event"),e.galleryOpen(t)}),$("body").on("error",".img_container img",function(e){trackJsInfo(r,"image load error, reverting to full url");var t=$(e.target).attr("src"),i=new RegExp("(.*)\\/thumb(\\/[a-zA-Z0-9]\\/[a-zA-Z0-9]{2,2}\\/[^\\/]*)","i"),o=t.match(i);if(o&&3==o.length){var n=o[1]+o[2];$(e.target).attr("src",n)}}),!1===i.isItInternetExplorer()&&(i.isTouchDevice()||($("body").on("click",".audio_wrapper",function(){var e=$(this).parent().attr("data-audio");$("#audio_player div").html(e),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500)}),$("body").on("click","#audio_player .listen",function(){$("#audio_player div").html($("#section_SpokenWikipedia").find(".mediaContainer").attr("data-audio")),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10)}),$("body").on("click","#audio_player:not(.audio_article) > i",function(){$("#audio_player").removeClass("active").find("div").fadeOut(300,function(){$(this).empty()})}))),$(window).resize(function(){clearTimeout(c),c=setTimeout(function(){d.tablesOverflow()},100)}),angular.element(window).bind("load",function(){d.tablesOverflow()}),$("body").on("click",".drop_down_arrow",function(){$(this).hasClass("active")?$(this).removeClass("active").siblings(".vs_drop_down").slideUp(300):$(this).addClass("active").siblings(".vs_drop_down").slideDown(300)}),i.isTouchDevice()||$(function(){FastClick.attach(document.body)})},d.forceLoadImages=function(e){trackJsInfo(r,"forceLoadImages");var t=0;e.each(function(){t++;var e=$(this);setTimeout(function(){var t=e.attr("data-original");e.attr("src",t),e.loaded=!0},0*t)}),e.removeClass("lazy")},d.removeDuplicatePortrait=function(){if(trackJsInfo(r,"remove duplicate image"),articleData.mainImage&&"none"!=articleData.mainImage.mode&&articleData.mainImage.full){var e=decodeURIComponent(articleData.mainImage.full.originalUrl.split("/").pop());$("#overview .image_wrapper:not(.portrait_img) .img_container  img").each(function(){"final_image"!=$(this).attr("id")&&(decodeURIComponent($(this).attr("data-href").split(":").pop())==e&&$(this).parent().parent().addClass("duplicateImage"))})}},d.initAnchorLinks=function(){trackJsInfo(r,"initAnchorLinks"),$("sup a.anch-link").each(function(){var e=$(this).attr("href");e&&$(this).attr("href","#"+e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))}),$(".references li").each(function(){var e=$(this).attr("id");e&&$(this).attr("id",e.replace(/[^a-z0-9\s]/gi,"").replace(/[_\s]/g,"-"))})},d.audioScrape=function(){if(!1===i.isItInternetExplorer()&&!i.isTouchDevice()){trackJsInfo(r,"audioScrape");var e="false";$("#section_SpokenWikipedia audio").length>0&&(e="true",$("#audio_player").addClass("open"),$("#gist_wrapper").addClass("spokenArticle"));$(".mediaContainer").each(function(){if(1===$(this).find("audio").length){var e=$(this).find("audio").parent().html();$(this).attr("data-audio",e).html("<div class='audio_wrapper'><p>Play audio file</p></div>")}}),"true"===e&&setTimeout(function(){$("#audio_player div").html($("#section_SpokenWikipedia .mediaContainer").attr("data-audio")).parent().addClass("active audio_article").find(".listen").show()},1e3),$('a[href$=".ogg"]').each(function(){-1==this.href.indexOf("//upload")&&$(this).attr("target","_blank").attr("title","Audio Info").addClass("tooltip_top ").find("img").css("vertical-align","middle")}),$('a[href$=".ogg"]').on("click",function(e){if(-1!=this.href.indexOf("//upload")){var t=$(this).attr("href");$("#audio_player div").html('<audio controls><source src="'+t+'" type="audio/ogg"></audio>'),setTimeout(function(){document.getElementById("audio_player").getElementsByTagName("audio")[0].play()},10),$("#audio_player").addClass("active open").find("div").fadeIn(300),setTimeout(function(){$("#audio_player").removeClass("open")},1500),e.preventDefault()}})}},d.clearBreaks=function(){trackJsInfo(r,"clear breaks"),$($(".article_content > div, .article_content > p > br")).each(function(){var e="clear:both;"===$(this).attr("style")||"clear: both;"===$(this).attr("style");void 0!==e&&!1!==e&&""===$.trim($(this).html())&&$(this).hide()})},d.prepareTooltipster=function(){trackJsInfo(r,"prepareTooltipster"),$(".tooltip_top").tooltipster({minWidth:!0,position:"top",trigger:"hover",animation:"fade",theme:".toolbar-tooltip",speed:100}),$(".tooltip_left").tooltipster({minWidth:!0,position:"left",trigger:"hover",animation:"fade",theme:"left-tooltip",speed:100});var e="hover";i.isTouchDevice()&&(e="click"),$(".disambig-wrapper").length>0&&$(".disambig-wrapper").tooltipster({content:articleData.disambiguations.join("<br/>"),contentAsHTML:!0,minWidth:!0,maxWidth:320,trigger:e,animation:"fade",theme:".disamb-tooltip",delay:100,speed:100,interactive:!0})},d.syntaxHighlighting=function(){trackJsInfo(r,"syntaxHighlighting");var e=$("#article_content_wrapper .mw-code pre, #article_content_wrapper .mw-highlight pre"),t=function(){e.each(function(e,t){hljs.highlightBlock(t)})};e.length>0&&(p?t():$.getScript("//assets.wikiwand.com/s3lib/highlight.pack.gzip.js").done(function(e,i){p=!0,t()}).fail(function(e,t,i){console.error("Request for highlight.pack.js failed")}))},d.initContentsJQueryProcess=function(){loadedContent=!0,console.log("initContentsJQueryProcess"),trackJsInfo(r,"initContentsJQueryProcess"),o(function(){if($("table.ambox, table.noprint:not(.navbox), .bandeau-niveau-modere").each(function(){var e=$(this).text();$(this).replaceWith('<div class="wiki_alert">'+e+"</div>")}),d.initAnchorLinks(),d.removeDuplicatePortrait(),setTimeout(function(){d.forceLoadImages($("img.lazy"))},500),d.clearBreaks(),d.handleTables(),d.audioScrape(),d.galleryCarousel(),d.syntaxHighlighting(),d.prepareTooltipster(),!i.isTouchDevice()){var t=$("body").hasClass("rtl")?"right":"left";$("#wikiwand_toc").niceScroll({cursoropacitymax:.3,cursorwidth:3,cursorborderradius:4,railpadding:{top:2,right:2,left:2,bottom:2},cursorborder:"none",railalign:t})}d.articleArrowsHandler(),d.readMoreHandler(),d.bottomLinkHandler(),s("wikiwand.bookmarks.hightlighttoopen")&&o(function(){e.stringSearch(s("wikiwand.bookmarks.hightlighttoopen"),!0),s.remove("wikiwand.bookmarks.hightlighttoopen",{path:"/"})},0)},0)},d.loadLocalContent=function(){if(1!=precache_from_extension)return 0==loadedFromCache?(console.log("loaded from cache false"),trackJsInfo(r,"loadedFromCache==false (new rendering"),void angular.element(document).ready(function(){e.$broadcast("articleContentReadyFromShell",[]),e.showArticleContents=!0})):void("undefined"==typeof localContentHtml||u?u||o(d.loadLocalContent,10):(trackJsInfo(r,"loading content into wrapper"),u=!0,console.time("time to load localContentHtml"),$("#fullContent").html(localContentHtml),console.timeEnd("time to load localContentHtml"),articleData.mainImage&&"portrait"==articleData.mainImage.mode&&d.initPortraitImage(),e.showArticleContents=!0,console.timeEnd("time up to showArticleContents"),d.removeDuplicatePortrait(),o(function(){trackJsInfo(r,"broadcast articlecontent ready"),e.$broadcast("articleContentReadyFromShell",[])},0)))},t.disambigHandler=function(t){trackJsInfo(r,"disambigHandler"),e.showDis=!e.showDis,t.stopPropagation()},d.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},d.getArticleHrefForHovercard=function(e){var t,i;if(!(t=e.attr("href")))return null;if("/"==!t.charAt[0])return null;var o=(t=t.substr(1)).indexOf("/");if(-1==o)return null;var n=t.substr(0,o),r=t.substr(o+1);return n!==articleData.langCodeUrl?null:-1!==(i=(i=decodeURIComponent(r)).split("#")[0]).indexOf(":")?null:"vs"===i?null:i},d.showHoverCard=function(e,t){var i,o,n;trackJsInfo(r,"showHoverCard");if(e.data("ocd-mouse-inside"))return n=e.data("ocd-hover-time"),o=(new Date).getTime()-n,i=Math.max(0,700-o),setTimeout(function(){if(e.data("ocd-mouse-inside")){!1;var i={content:t,contentAsHTML:!0,theme:".tooltipster-ocd",maxWidth:480,interactive:!0,autoClose:!0,interactiveTolerance:500,animation:"fade",delay:100,speed:50,updateAnimation:!1,functionBefore:function(e,t){return t()},functionReady:function(e,t){var i=$(e).offset();console.log("offset for link ",i);var o=$(".tooltipster-arrow-border:eq(0)").offset();console.log("caretOffset",o),console.log("mouse offset ",mousePos),setTimeout(function(){if(Math.abs(i.left-mousePos.left)>200){console.log("moving");var e=$(t).offset();e.left=mousePos.left-$(".tooltipster-base").width()/2,$(".tooltipster-base").offset(e)}})},functionAfter:function(){}};return"none"!=h&&(i.arrowColor=$("body").hasClass("dark")?"#3a3538":"#eeeeee"),e.tooltipster(i),e.tooltipster("show")}},i)},d.loadHoverCard=function(e){var t,i,o,n,r;if(t=e,i=d.getArticleHrefForHovercard(t)){if(t.data("ocd-mouse-inside",!0),t.data("ocd-hover-time",(new Date).getTime()),n=function(){t.tooltipster("hide")},o=t.data("ocd-cache"))return d.showHoverCard(t,o);var a=articleData.langCodeUrl;return"zh-"===a.substr(0,3)&&$.inArray(a,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(a="zh"),r="https://"+a+".wikipedia.org/w/api.php",$.ajax({dataType:"jsonp",url:r,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:300,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:i},success:function(e){var i,o;if(o='<div class="ocd-content"></div>',null!=e.error)return console.log("OCD: got error",e),n();var r=e.query.pageids[0],a=e.query.pages[r];i=t.attr("href"),o="",o+='<div class="ocd-content">',null!=a.thumbnail&&(o+="<div class='image'><img src='"+d.escapeHtml(a.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=a.title&&(o+="<div class='title'>"+d.escapeHtml(a.title)+"</div>"),null!=a.extract&&(o+="<div class='text'>"+d.escapeHtml(a.extract)+"</div>"),"en"!=articleData.langCodeUrl&&"simple"!=articleData.langCodeUrl||"true"!=localStorage.ww_hovercards_anywhere||(o+="<span class='ctrl-ocd'>Pro tip: Ctrl+Click any word on any website for quick definition</span>"),o+="<div class='inline_block_mid read-full-article'><a href='"+i+"' target='_blank'></a></div>",o+="</div>",t.data("ocd-cache",o),d.showHoverCard(t,o)},error:function(e,t,i){return n()}})}},t.$on("articleContentReadyFromShell",function(){angular.element(document).ready(d.initContentsJQueryProcess)}),t.$on("runTablesOverflow",function(){angular.element(document).ready(d.tablesOverflow)}),e.showArticleContents=!1,d.articleTop(),d.loadLocalContent(),d.bindEvents();var v=2,w="hide",y="show",b=0;function k(e){var t=document.getElementById("collapseButton"+e),i=document.getElementById("collapsibleTable"+e);if(!i||!t)return!1;var o,n=i.rows;if(t.firstChild.data===w){for(o=1;o<n.length;o++)n[o].style.display="none";t.firstChild.data=y}else{for(o=1;o<n.length;o++)n[o].style.display=n[0].style.display;t.firstChild.data=w}}}]);var DISABLE_GOOGLE_MAPS=!0;(app=angular.module("wikiwand")).service("MapHelper",["$http","$log","$rootScope","$window","$timeout",function(e,t,i,o,n){var r={getMapImage:function(){if(!DISABLE_GOOGLE_MAPS&&(console.log("get map image"),trackJsInfo(o,"getMapImage"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo&&articleData.wikidataInfo.geo.lat&&articleData.wikidataInfo.geo)){var e=r.getMapZoom();i.mapImageUrl="https://maps.googleapis.com/maps/api/staticmap?center="+articleData.wikidataInfo.geo.lat+","+articleData.wikidataInfo.geo.lon+"&zoom="+(e+3)+"&size=800x400";var t="<div id='miniMap' onClick='loadGoogleMaps();'><img class='map' src='"+i.mapImageUrl+"'/><img class='center'  src='/img/location.png'/><img style='margin-top:"+r.pseudoRand(articleData.wikidataInfo.geo.lat,173)+"px; margin-left:-"+r.pseudoRand(articleData.wikidataInfo.geo.lat,9)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+r.pseudoRand(articleData.wikidataInfo.geo.lat,3)+"px; margin-left:"+r.pseudoRand(articleData.wikidataInfo.geo.lat,829)+"px;' src='/img/sub_location.png'/><img style='margin-top:"+r.pseudoRand(articleData.wikidataInfo.geo.lat,631)+"px; margin-left:-"+r.pseudoRand(articleData.wikidataInfo.geo.lat,313)+"px;' src='/img/sub_location.png'/><img style='margin-top:-"+r.pseudoRand(articleData.wikidataInfo.geo.lat,11)+"px; margin-left:"+r.pseudoRand(articleData.wikidataInfo.geo.lat,2)+"px;' src='/img/sub_location.png'/></div>";0==$("#fullContent").html().length?i.$on("articleContentReadyFromShell",function(){r.displayMiniMap(t)}):r.displayMiniMap(t)}},displayMiniMap:function(e){console.log("display mini map"),n(function(){$(".ww_ib_1").length>0?$(".ww_ib_1").prepend('<tr><td colspan="12">'+e+"</td></tr>"):0==$(".ww_ib_1").length&&$("#fullContent .portrait_img").length>0?($("#fullContent .portrait_img").after(e),$("#miniMap").addClass("float")):($(".title_wrapper").after(e),$("#miniMap").addClass("float"))},10)},getMapZoom:function(){var e=1;if(articleData.wikidataInfo.geo.dimension){var t=articleData.wikidataInfo.geo.dimension;t>0&&(e=13),t>5&&(e=10),t>10&&(e=9),t>50&&(e=6),t>100&&(e=4),t>500&&(e=3),t>2e3&&(e=0)}return e},pseudoRand:function(e,t){return Math.round(3466732*e/t)%71/71*70}};return r}]);var maps_script,infoWindowLatch2=!1;if("undefined"!=typeof serverData)var DEBUG_GEO=serverData&&serverData.config&&"development"===serverData.config.environment;var fetchResultsDelay=500;function initializeGoogleMaps(){"function"==typeof $("body").scope().initMap?$("body").scope().initMap():setTimeout(initializeGoogleMaps,300)}function infoWindowMouseIn(){var e=$("#map_wrapper").scope();infoWindowLatch2=!0,e.testCloseInfoWindow()}function infoWindowMouseOut(){var e=$("#map_wrapper").scope();infoWindowLatch2=!1,e.testCloseInfoWindow()}function loadGoogleMaps(){maps_script?$("body").scope().map?$("body").scope().map.showMap=!0:setTimeout(loadGoogleMaps,300):((maps_script=document.createElement("script")).type="text/javascript",maps_script.src="https://maps.googleapis.com/maps/api/js?v=3.exp&callback=initializeGoogleMaps",document.body&&document.body.appendChild(maps_script))}function getObjectKeys(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t}(app=angular.module("wikiwand")).controller("MapController",["$rootScope","$scope","Utilities","WikipediaApi","$timeout","$http","$window","MapHelper",function(e,t,i,o,n,r,a,s){var l,c,d=this;i.isTouchDevice()?(l="click",c=""):(l="mouseover",c="mouseout"),e.mapOut=function(){angular.element("#miniMap").removeClass("loading"),trackJsInfo(a,"mapOut")},t.testCloseInfoWindow=function(){n(function(){!1===t.infowindowLatch1&&!1===infoWindowLatch2&&t.infowindow.close()},500)},t.initializeMapController=function(){trackJsInfo(a,"initializeMapController"),n(function(){e.map={},e.map.exists=!!articleData.geo,e.map.exists,e.map.showMap=!1,t.infowindowLatch1=!1,infoWindowLatch2=!1,e.initMap=function(){n(function(){if(trackJsInfo(a,"initMap"),articleData&&articleData.wikidataInfo&&articleData.wikidataInfo.geo){e.map={},analytics.gaEvent("rich-map","opened"),angular.element("#miniMap").addClass("loading"),t.entries={};var i=new google.maps.LatLng(articleData.wikidataInfo.geo.lat,articleData.wikidataInfo.geo.lon),o=google.maps.MapTypeId.ROADMAP,n={zoom:s.getMapZoom()+2,center:i,mapTypeId:o,scrollwheel:!0},r=document.getElementById("map_canvas");r||(console.log("no map canvas"),trackJsInfo(a,"could not find map canvas")),t.map=new google.maps.Map(r,n),t.mainInfoWindow=new google.maps.InfoWindow({content:'<div class="main-map-infobox">'+articleData.title+"</div>",disableAutoPan:!0,zIndex:1e4});var u=new google.maps.Marker({position:i,map:t.map,title:"",name:articleData.title,icon:"//assets.wikiwand.com/img/location.png",zIndex:1e3,url:articleData.cache.key,draggable:!1});t.infowindow=new google.maps.InfoWindow({content:"infobox",disableAutoPan:!0,maxWidth:300,zIndex:10001}),google.maps.event.addListener(u,"click",function(){t.map.panTo(u.getPosition())}),google.maps.event.addListener(u,l,function(){infoWindowMouseOut(),t.mainInfoWindow.open(t.map,u)}),google.maps.event.addListener(u,c,function(){t.mainInfoWindow.close()}),google.maps.event.addListener(t.map,"center_changed",function(){d.mapChangeEvent()}),google.maps.event.addListener(t.map,"zoom_changed",function(){d.mapChangeEvent()}),e.map.showMap=!0,d.loadMarkersIntoMap()}},200)}},0)},d.escapeHtml=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},d.showMapInfobox=function(e,t){var i=articleData.langCodeUrl;"zh-"===i.substr(0,3)&&$.inArray(i,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(i="zh");var o="https://"+i+".wikipedia.org/w/api.php";$.ajax({dataType:"jsonp",url:o,data:{action:"query",format:"json",prop:"extracts|pageimages|revisions|info",redirects:!0,exintro:!0,exsentences:2,explaintext:!0,piprop:"thumbnail",pithumbsize:320,rvprop:"timestamp",inprop:"watched",indexpageids:!0,titles:e.name},success:function(i){var o;if(null!=i.error)return t(null);var n=i.query.pageids[0],r=i.query.pages[n];return e.url,o="",o+='<div onMouseOver="infoWindowMouseIn();"  onMouseOut="infoWindowMouseOut();"   class="map-ocd unselectable"><div class="tooltipster-content"><div class="ocd-content">',null!=r.thumbnail&&(o+="<div class='image'><img src='"+d.escapeHtml(r.thumbnail.source)+"' onerror='this.style.display=\"none\"' /></div>"),null!=r.title&&(o+="<div class='title'>"+d.escapeHtml(r.title)+"</div>"),null!=r.extract?r.length>500?o+="<div class='text'>"+d.escapeHtml(r.extract)+"</div>":o+="<div class='text'>There are multiple articles with this name. Click to see disambiguation.</div>":o+="<div class='text'>There isn't an article for this place. Click to search Wikiwand.</div>",o+="<div class='read-full-article'><a href='"+e.url+"'  target='_blank'></a></div>",t(o+="</div></div></div>")},error:function(e,i,o){return t(null)}})},d.mapChangeEvent=function(){var e=(new Date).getTime();t.lastEventTime=e,n(d.testLastEvent,fetchResultsDelay+50)},d.testLastEvent=function(){t.lastEventTime&&((new Date).getTime()-t.lastEventTime>fetchResultsDelay?(t.infowindow.close(),d.loadMarkersIntoMap(),t.lastEventTime=null):n(d.testLastEvent,fetchResultsDelay+50))},d.loadMarkersIntoMap=function(){var e=t.map.getCenter(),i=e.lat(),o=e.lng();if(!i||!o)return a.trackJs&&a.trackJs.track("Cannot find longitude/latitude from Google Maps data"),void console.error("Cannot find longitude/latitude from Google Maps data"+JSON.stringify(e));var n=i.toString(),r=o.toString(),s=t.map.getZoom(),u=Math.round(Math.max(Math.pow(16-s,3),1)),p=t.map.getBounds();try{var h=Math.abs(p.Da.j-p.Da.k);u=Math.round(60*h)}catch(e){}var f=articleData.langCodeUrl;"zh-"===f.substr(0,3)&&$.inArray(f,["zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","zh-hant","zh-hans"])>=0&&(f="zh");var g="https://"+f+".wikipedia.org/w/api.php";if(console.log("Shown map radius: ",m+"km"),!(u>200)){var m=Math.min(1e3*u,1e4);$.ajax({dataType:"jsonp",url:g,data:{action:"query",format:"json",prop:"info|coordinates",inprop:"watchers",coprop:"type|name|dim|country|region",colimit:500,generator:"geosearch",ggsradius:m,ggscoord:n+"|"+r,ggslimit:500,ggsmaxdim:1e3,ggsprop:"type|name|country|region"},success:function(e){if(null!=e.error)return console.error("geolocation call: got error",e);if(!e.query)return console.info("geolocation call: no query",e);if(!e.query.pages)return console.info("geolocation call: no query.geosearch",e);var i=[];$.each(e.query.pages,function(e,t){if(!t.coordinates||0==t.coordinates.length)return!0;var o=t.coordinates[0],n="/"+articleData.langCodeUrl+"/"+t.title.replace(/ /g,"_"),r=t.title,a=t.watchers||0;if(null==n)return!0;if(n==articleData.rawArticlePath)return!0;if(!o.lat||!o.lon)return!0;var s={key:n,name:r,lat:o.lat,lon:o.lon,watchers:a};i.push(s)}),i.sort(function(e,t){return e.watchers-t.watchers}),i=i.slice(0,50),console.log("Received "+i.length+" entries");var o=[];$.each(i,function(e,i){if(t.entries[i.key])return!0;t.entries[i.key]=!0,o[e]=new google.maps.Marker({position:new google.maps.LatLng(i.lat,i.lon),map:t.map,title:"",name:i.name,icon:"//assets.wikiwand.com/img/sub_location.png",url:i.key,draggable:!1}),function(e){google.maps.event.addListener(o[e],l,function(){d.showMapInfobox(o[e],function(i){i?(t.infowindow.setContent(i),t.infowindow.open(t.map,o[e]),t.infowindowLatch1=!0):console.log("no html")})}),google.maps.event.addListener(o[e],c,function(){t.infowindowLatch1=!1,t.testCloseInfoWindow()})}(e)})},error:function(e,t,i){console.error("geolocation call: got error",t)}})}}}]),function(e,t){var i=e.googletag||{};i.cmd=i.cmd||[],t.controller("AdsController",["$rootScope","$scope","$timeout",function(e,t,o){var n=this;n.addArticleAdsInsideContent=function(){try{var e=i.sizeMapping().addSize([0,0],[300,250]).addSize([730,200],[728,90]).build(),t=document.querySelectorAll('#fullContent section.article_content:not(.collapsed_section):not([id*="navigation-section"])');Array.prototype.slice.call(t,1,4).forEach(function(t,o){!function(e,t){var o=t.slotName,n=document.createElement("div");n.id=o,e.parentNode.insertBefore(n,e),i.cmd.push(function(){var e=i.defineSlot(t.adUnitPath,t.size,o).addService(i.pubads());t.sizeMapping&&e.defineSizeMapping(t.sizeMapping),i.display(o),i.pubads().refresh([e])})}(t,{slotName:"div-gpt-ad-1565180846046-"+(o+2),adUnitPath:"/339474670/Wikiwand/Content_"+(o+1)+"_Wikiwand",size:[[728,90],[300,250]],sizeMapping:e})})}catch(e){console.error("Error during ads display (main): "+e)}},n.addSidebarAds=function(){try{var e=document.querySelector(".sideplacement[id^=div-gpt-ad]");e.classList.contains("sideplacement-visible")||e.classList.add("sideplacement-visible")}catch(e){console.error("Error during ads display (sidebar): "+e)}},t.$on("articleContentReadyFromShell",function(){o(n.addArticleAdsInsideContent,3e3),o(n.addSidebarAds,3e3)})}])}(window,angular.module("wikiwand")),(app=angular.module("wikiwand")).service("ActivationServiceRev2",["$http","$rootScope","$timeout","$injector","ipCookie","Utilities",function(e,t,i,o,n,r){const a=n("wikiwand.firstLandingType"),s=n("wikiwand.firstLandingPage");var l;analytics.gaVirtualPageView("/virtualpageview/landing/referrer/impression/"+a),analytics.gaVirtualPageView("/virtualpageview/landing/page/impression/"+s),t.reportCopy=function(e,i,o){var n=!!i;e.keyCode&&67==e.keyCode&&e.ctrlKey&&(console.log("detected CTRL+C"),n=!0),"mouseup"==e.type&&2==e.button&&(console.log("detected right mouse click"),n=!0),n&&(console.log("reporting"),c.reportUserActivity({action:"sent",refID:t.activation.userID,type:o},function(e,i){e?console.log("failed to credit landing",e):(console.log("written user activity",i),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_sent_"+o),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_sent_"+o))}))};var c={reportUserActivity:function(t,i){var o=JSON.stringify(t);console.log("report user activity",o);var n=e({method:"post",url:"/api/reportUserActivity",data:o});n.success(function(e){return e.err?i(err,null):(console.log("success reporting user activity",e.data),i(null,null))}),n.error(function(){return i("error reporting user activity",null)})},getMyCredits:function(i){console.log("get my credits");var o=e({method:"post",url:"/api/user/getMyCredits",data:{userID:t.activation.userID}});o.success(function(e){return i(e.err,e.data)}),o.error(function(){return i("error in get my credits api call",null)})},loadState:function(){if(console.log("in load state"),t.walkthrough={},t.activation={},localStorage.wikiwand_activation)try{t.activation=angular.fromJson(localStorage.wikiwand_activation)}catch(e){$window.trackJs&&(trackJsInfo($window,"activation json string is "+localStorage.wikiwand_activation),$window.trackJs.track("problem parsing activation",exception.message))}if(localStorage.wikiwand_walkthrough)try{t.walkthrough=angular.fromJson(localStorage.wikiwand_walkthrough)}catch(e){$window.trackJs&&(trackJsInfo($window,"wikiwand_walkthrough json string is "+localStorage.wikiwand_walkthrough),$window.trackJs.track("problem parsing wikiwand_walkthrough",exception.message))}t.activation.showShare=!1,t.activation.instructions=!1,t.lightboxOpened=!1,t.extPopShow=!1,t.extPopAnim=!1,0!=t.walkthrough.new_visitor&&(t.walkthrough.new_visitor=1!=t.activation.extensionInstalled),t.activation.extensionInstalled&&"Chrome"==serverData.agent.family&&-1==document.location.search.indexOf("in_iframe")?t.activation.showSwitchToWikipedia=!0:t.activation.showSwitchToWikipedia=!1;var e=document.location.search.indexOf("debug_fast=1")>-1?3:15;serverData.callToInstallExtension&&$(document).one("mousemove",function(){i(function(){var e=serverData&&serverData.agent.extensionInstalled,i=-1!==document.cookie.indexOf("wikiwand.extension.popupAlreadyShown");e||i||(console.log("showing popup"),n("wikiwand.extension.popupAlreadyShown","true",{path:"/",expires:5}),t.extPopShow||t.lightboxOpened||(serverData&&serverData.settings&&serverData.settings.monPlus&&(t.extPopShow=!0),t.lightboxOpened=!0,t.extPopAnim=!0))},1e3*e)}),serverData.callToPersonalize;var r=function(e){n("wikiwand.activation.first_impression")||(n("wikiwand.activation.first_impression",e,{path:"/",expires:1}),analytics.gaVirtualPageView("/virtualpageview/article-promo/impression/"+e))};if("/extension/thank-you"==location.pathname)analytics.gaVirtualPageView("/virtualpageview/article-promo/install-complete/"+(n("wikiwand.activation.first_impression")||"external-source"));else if("/"==location.pathname)r("homepage");else if(articleData&&articleData.rawArticlePath){r("promo_"+(n("wikiwand.activation.article_promo_name")||"unknown"))}else r("other-page");c.normalizeData();try{o.get("userPreferences").updatePageStyle("update")}catch(e){}},normalizeData:function(){if(t.activation||(t.activation={}),serverData&&serverData.agent.extensionInstalled?(t.activation.extensionInstalled||(t.activation.installTime=(new Date).getTime()),t.activation.extensionInstalled=!0):t.activation.extensionInstalled=!1,!t.activation.userID){console.log("creating new user ID");var e=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i=0;i<8;i++)e+=t.charAt(Math.floor(Math.random()*t.length));return e}();t.activation.userID=e,0==t.activation.extensionInstalled&&("/"==window.location.pathname?(console.log("new user homepage"),analytics.gaVirtualPageView("virtualpageview/landing/homepage")):(console.log("new user article page"),analytics.gaVirtualPageView("virtualpageview/landing/article-page")))}n("wikiwand.userID",t.activation.userID,{path:"/",expires:1e5}),t.refString="%3Fref%3D"+t.activation.userID,n("reset-referal")&&(console.log("resetting referal"),t.activation.userRefererNew=null,t.activation.userReferralCredited=!1,t.activation.userFollowCredited=!1,t.activation.achievedReferralCredits=!1,n.remove("wikiwand.userRefererNew",{path:"/"}),n.remove("reset-referal",{path:"/"})),console.log("activation state",t.activation),n("wikiwand.userRefererNew")&&!t.activation.userRefererNew&&(console.log("setting user referer"),t.activation.userRefererNew=n("wikiwand.userRefererNew"),t.activation.userReferralCredited=!1,t.activation.userFollowCredited=!1,n.remove("wikiwand.userRefererNew",{path:"/"}),console.log("saved referer")),t.activation.userRefererNew&&1!=t.activation.userReferralCredited&&t.activation.userRefererNew!=t.activation.userID&&(1==t.activation.extensionInstalled?(t.activation.userReferralCredited=!0,c.reportUserActivity({action:"install",refID:t.activation.userRefererNew,"http-ref":n("wikiwand.userHTTP_Referer")},function(e,i){e?console.log("failed to credit referral",e):(console.log("marking as credited"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_install"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_install"),c.saveState())})):1!=t.activation.userFollowCredited&&(t.activation.userFollowCredited=!0,c.reportUserActivity({action:"landing",refID:t.activation.userRefererNew,"http-ref":n("wikiwand.userHTTP_Referer")},function(e,i){e?console.log("failed to credit landing",e):(analytics.gaVirtualPageViewIf(!0,"virtualpageview/payment/referal_landing"),analytics.gaVirtualPageViewIf(!0,"virtualpageview/pay-"+t.cohort+"/referal_landing"),c.saveState())}))),t.activation.browser=serverData.agent.family?serverData.agent.family:"Other",serverData.agent.string.indexOf("OPR")>-1&&(t.activation.browser="Opera"),t.activation.windows=serverData.agent.os.family.indexOf("Windows")>-1,t.activation.touch=!!r.isTouchDevice(),t.activation.viewedPages?-1==document.location.search.indexOf("in_iframe")&&t.activation.viewedPages++:t.activation.viewedPages=1,null==t.activation.joined&&(t.activation.joined=(new Date).getTime());var i=(new Date).getTime();if(t.activation.vetek=Math.round((i-t.activation.joined)/864e5,1),t.activation.vetek>=1&&(localStorage.wikiwand_last_save=(new Date).getTime()),null==t.activation.installextension&&(t.activation.installextension={},t.activation.installextension.random=Math.round(10*Math.random(),1),t.activation.installextension.randomText=Math.round(100*Math.random(),1),t.activation.installextension.finished=!1),t.activation.ABRateShare||(t.activation.ABRateShare=Math.round(10*Math.random(),1)),null==t.activation.rateextension&&(t.activation.rateextension={},t.activation.rateextension.finished=!1),t.activation.nextAction||(t.activation.nextAction="activation_install"),1==t.activation.extensionInstalled&&(t.activation.ABRateShare>0&&t.activation.vetek<10&&t.activation.nextAction,t.activation.nextAction="activation_share"),0==t.activation.extensionInstalled&&(t.activation.nextAction="activation_install"),"Other"==t.activation.browser&&(t.activation.nextAction="activation_share"),1==t.activation.touch&&(t.activation.nextAction="activation_share"),t.inFrame=document.location.search.indexOf("in_iframe")>-1,t.inFrame&&(t.activation.nextAction=""),t.activation.ratedText="","Chrome"==t.activation.browser&&(t.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on the Chrome Web Store"),"Firefox"==t.activation.browser&&(t.activation.ratedText="Rated <span>&#9733;&#9733;&#9733;&#9733;&#9733;</span> on Mozilla Add-ons"),"Safari"==t.activation.browser&&(t.activation.ratedText="Featured on the Safari extensions gallery"),"activation_install"==t.activation.nextAction){switch(t.activation.installextension.randomText%3+1){case 1:t.activation.text="Upgrade Wikipedia";break;case 2:t.activation.text="Install Wikiwand";break;case 3:t.activation.text="Get Wikiwand";break;default:t.activation.text="Upgrade Wikipedia"}t.activation.tooltip="Click to install Wikiwand",t.activation.installextension.popupHeadline="Install our extension to set Wikiwand as your default Wikipedia interface",articleData.title&&analytics.gaVirtualPageView("virtualpageview/install-impression/"+t.activation.text.split(" ").join("-"))}"activation_rate"==t.activation.nextAction&&(t.activation.tooltip="Click to rate",t.activation.text="Rate us",t.activation.nextAction="activation_share"),"activation_share"===t.activation.nextAction&&(t.activation.tooltip="Tell a friend",t.activation.text="Tell a friend",t.activation.toolbarText=""),c.saveState()},saveState:function(){localStorage.wikiwand_activation=angular.toJson(t.activation),localStorage.wikiwand_walkthrough=angular.toJson(t.walkthrough)},extensionPopup:function(e){"activation_install"===t.activation.nextAction&&("enter"===e&&(l=i(function(){t.extPopShow=!0,t.lightboxOpened=!0,i(function(){t.extPopAnim=!0},10),analytics.gaVirtualPageView("virtualpageview/install-popup/"+t.activation.text.split(" ").join("-"))},500)),"leave"===e&&i.cancel(l),"click"===e&&(serverData.callToInstallExtension?analytics.gaVirtualPageView("/virtualpageview/article-promo-lightbox/install-click"):serverData.callToPersonalize&&analytics.gaVirtualPageView("/virtualpageview/article-promo-pers/install-click"),1==t.activation.instructions&&(t.extPopShow=!0,t.lightboxOpened=!0,l=i(function(){t.extPopAnim=!0},10)))),"clickClose"===e&&(i.cancel(l),t.extPopAnim=!1,i(function(){t.extPopShow=!1,t.activation.instructions=!1},500))},activationButtonClicked:function(e){var o,n;if(console.log(e),e&&""!==e&&e,"activation_share"===t.activation.nextAction&&(analytics.gaEvent("activation","share-click",t.activation.browser),analytics.gaVirtualPageView("virtualpageview/share-click"),analytics.gaVirtualPageView("virtualpageview/invites/clicked"),t.activation.showShare=!0,i(function(){t.activation.animShare=!0},100)),"activation_rate"===t.activation.nextAction&&("Chrome"===t.activation.browser&&(o="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj/reviews"),"Firefox"===t.activation.browser&&(o="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/reviews/add"),analytics.gaEvent("activation","rate-click",serverData.agent.family),analytics.gaVirtualPageView("virtualpageview/rate-click"),n&&n.close(),n=window.open(o,"_blank"),t.activation.rateextension.finished=!0,t.activation.nextAction="activation_share"),"activation_install"===t.activation.nextAction)switch(analytics.gaEvent("activation","install-click",t.activation.vetek),analytics.gaVirtualPageView("virtualpageview/install-click/"+t.activation.text.split(" ").join("-")),n&&n.close(),t.activation.browser){case"Opera":o="/extension/install-wikiwand-on-opera",n=window.open(o,"_blank"),analytics.gaVirtualPageView("virtualpageview/install-chrome-opera");break;case"Chrome":o="https://chrome.google.com/webstore/detail/wikiwand-wikipedia-modern/emffkefkbkpkgpdeeooapgaicgmcbolj",t.activation.nextAction="activation_share",analytics.gaVirtualPageView("virtualpageview/install-chrome-store"),t.activation.installextension.finished=!0,i(function(){window.location=o},500);break;case"Firefox":o="https://addons.mozilla.org/en-US/firefox/addon/wikiwand-wikipedia-modernized/",n=window.open(o,"_blank"),t.activation.nextAction="activation_share",t.activation.installextension.finished=!0,analytics.gaVirtualPageView("virtualpageview/install-firefox-store");break;case"Safari":t.activation.instructions=!0,t.extensionPopup("click"),analytics.gaVirtualPageView("virtualpageview/install-safari-inline"),o="//assets.wikiwand.com/extension/safari/wikiwand.safariextz",setTimeout(function(){n=window.open(o,"_self")},2e3),t.activation.installextension.finished=!0,t.activation.nextAction="activation_share"}else t.extPopShow=!1;c.normalizeData()},new_visitor_fold_clicked:function(){t.walkthrough.new_visitor=!1,c.normalizeData()}};return c}]),(app=angular.module("wikiwand")).service("TestingService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,t,i,o,n){return{initializeTests:function(){var e=window.location.search.indexOf("debug_tests=1")>-1,i={};if(t.cohorts={mon_footer:"none",mon_footer_b:"none",mon_bottom:"none",mon_ocd:"none",mon_p:"none"},serverData.settings&&serverData.settings.tests){for(var o in e&&jQuery.isEmptyObject(serverData.settings.tests)&&console.warn("Tests settings not loaded from database yet, please retry in a few seconds"),serverData.settings.tests){var n=serverData.settings.tests[o],r=0,a={name:o,options:[]};for(var s in n){var l=n[s],c=r,d=Math.min(c+l,100);r=d,a.options.push({min:c,max:d,val:s})}r<100&&a.options.push({min:r,max:100,val:"none"}),i[a.name]=a}for(var u in e&&console.info("Tests:",i),i){var p="wikiwand_test_"+(a=i[u]).name;localStorage[p]||(localStorage[p]=Math.floor(100*Math.random()));var h=localStorage[p];for(var u in a.options){var f=a.options[u];if(f.min!=f.max&&(h>=f.min&&h<f.max)){t.cohorts[a.name]=f.val;break}}}e&&console.info("User Cohorts:",t.cohorts)}}}}]);var adsenseInstallClick=function(){console.log("adsense install clicked");var e=$("body").scope();e.activation.nextAction,e.reportClick("below-adsense"),e.activationButtonClicked(""),analytics.gaVirtualPageView("virtualpageview/install-below-adsense-clicked")};function getWatchers(e){function t(e){return e&&e.$$watchers||[]}return function e(i){var o=t(i.data().$isolateScope),n=t(i.data().$scope).concat(o);return angular.forEach(i.children(),function(t){n=n.concat(e(angular.element(t)))}),n}(e=angular.element(e||document.documentElement))}function sw(){return getWatchers().length}(app=angular.module("wikiwand")).service("MonService",["$http","$rootScope","$timeout","ipCookie","Utilities",function(e,t,i,o,n){var r=window.location.search.indexOf("debug_from_search=1")>-1;return{initMonService:function(){if(!precache_from_extension&&serverData.settings&&serverData.settings.monPlus){r&&console.log("MonService: started");var e="none";if(serverData.settings&&serverData.settings.monPlus&&(e="adsense"),"adsense"==e){articleData.taboo?(e="none",r&&console.log("MonService: Will not use AdSense due to taboo content"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-taboo")):-1==$.inArray(articleData.langCodeUrl,["ar","arz","el","ro","bg","he","ru","zh","zh-hans","zh-hant","zh-tw","zh-hk","zh-mo","zh-sg","zh-cn","hi","sr","hu","sk","hr","id","sl","cs","it","es","da","ja","sv","nl","ko","th","en","simple","lv","tr","et","lt","uk","fi","no","nn","vi","fr","pl","de","pt"])?(e="none",r&&console.log("MonService: Will not use AdSense due to unsupported language"),analytics.gaVirtualPageView("virtualpageview/monetization/strategy/none-lang")):analytics.gaVirtualPageView("virtualpageview/monetization/strategy/adsense")}r&&console.info("Selected footer monetization:",e),"adsense"==e&&t.$on("articleContentReadyFromShell",function(){r&&console.info("Loading AdSense");var e=function(e,i,o){var n='<div class="install"><a href="javascript:void(0);" onclick="adsenseInstallClick();">Install Wikiwand to remove all ads</a></div>';1==t.activation.touch&&(n="");var r='<script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script><div class="bnr-adsense '+e+'"><div class="wrappers">'+o+"</div>";return i&&(r+=n),r+="</div>"};i(function(){var t=e("sky",!1,'<ins class="adsbygoogle" style="display:inline-block;width:300px;height:600px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="2726044164"></ins>');$("#fullContent").eq(0).prepend(t);var i=e("top",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="5958712165" data-ad-format="auto"></ins>');$("#fullContent").eq(0).prepend(i);var o=e("after2",!0,'<ins class="adsbygoogle" style="display:inline-block;width:336px;height:280px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="4143901763"></ins>');$("#fullContent section").eq(1).append(o);var n=e("after3",!0,'<ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6877042168" data-ad-format="auto"></ins>');$("#fullContent section").eq(2).append(n);var r=e("tocbnr",!1,'<ins class="adsbygoogle" style="display:inline-block;width:180px;height:150px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="6534658165"></ins>');$("#toc_wrapper").append(r),$("#wikiwand_toc").addClass("with_bnr"),$(document).ready(function(){var e=$(".bnr-adsense.sky").offset().top+400;$(window).on("scroll",function(){$(this).scrollTop()>e?$("#fixed_bnr").addClass("open"):$("#fixed_bnr").removeClass("open")})});var a=e("fixedbottom",!0,'<ins class="adsbygoogle" style="display:inline-block;width:728px;height:90px" data-ad-client="ca-pub-9383599848936891" data-ad-slot="8650519762"></ins>');$("#content").append('<div id="fixed_bnr">'+a+"</div>")}),jQuery.getScript("//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js",function(e,t,i){200==i.status?r&&console.log("MonService: AdSense loaded successfully"):console.log("MonService: AdSense load failed: ",i.status,"/",e,"/",t)})}),"none"!=e?$(window).load(function(){var t=!0;"adsense"==e&&(t=$(".adsbygoogle iframe").length>0),r&&console.log("MonService: Ads are "+(t?"VISIBLE":"BLOCKED")),analytics.gaVirtualPageView("virtualpageview/monetization/visibility/adsense/"+(t?"visible":"blocked")),t||$(".bnr-adsense").hide()}):r&&console.log("MonService: not loading any ads")}}}}]),(app=angular.module("wikiwand")).service("Utilities",function(){var e=navigator.userAgent.toLowerCase(),t=e.match(/(iphone|ipod|ipad)/)||e.match(/(android)/)||e.match(/(iemobile)/)||e.match(/iphone/i)||e.match(/ipad/i)||e.match(/ipod/i)||e.match(/blackberry/i)||e.match(/bada/i),i=!1;return document.documentMode&&(i=!0),{isItInternetExplorer:function(){return i},isCanvasSupported:function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},isTouchDevice:function(){return t},agent:serverData.agent}});var getFacebookSdkLocale=function(){var e={en:"en_US",de:"de_DE",fr:"fr_FR",ja:"ja_JP",es:"es_LA",ru:"ru_RU",zh:"zh_CN","zh-tw":"zh_TW","zh-hk":"zh_HK","zh-mo":"zh_CN","zh-sg":"zh_CN","zh-cn":"zh_CN","zh-hant":"zh_TW","zh-hans":"zh_CN",it:"it_IT",th:"th_TH",pt:"pt_BR",ar:"ar_AR",pl:"pl_PL",nl:"nl_NL",id:"id_ID",sv:"sv_SE",fa:"fa_IR",uk:"uk_UA",hu:"hu_HU",vi:"vi_VN",da:"da_DK",he:"he_IL"},t="en_US",i="undefined"!=typeof articleData?articleData.langCodeUrl:"en";return e[i]&&(t=e[i]),t};app.config(["FacebookProvider",function(e){var t=getFacebookSdkLocale();e.setLocale(t),console.log("init facebook provider with app id","823404911083396"),e.init("823404911083396")}]),app.service("userService",["$timeout","$http","Facebook","$rootScope","ipCookie",function(e,t,i,o,n){o.facebookInitialized=!1;var r="object"==typeof userData,a=!1,s=!1;o.initializedUser=!1,o.user={};o.$on("Facebook:load",function(){o.facebookInitialized=!0});var l=function(e){r&&(a=!0,localStorage.removeItem("wikiwand.user.authenticated"),t.get("/api/nouser/logout",{dataType:"json",cache:!1}).then(function(t){userData=t.data,"function"==typeof e&&e(null,userData)}))},c=function(e){r&&i.getLoginStatus(function(i){if("not_authorized"==i.status)userData&&userData.logins&&userData.logins&&userData.logins.facebook.isActive?l(e):e(null,userData);else if("connected"==i.status){var o=function(){if(r){var e={stats:{topLangsUsed:{},pagesViewed:null,dateJoined:null},settings:{favoriteLangs:[],clientPrefs:null}};try{var t=JSON.parse(localStorage.wikiwand_languages_rev2);Object.keys(t).forEach(function(i){var o=t[i];o.fav&&e.settings.favoriteLangs.push(o.lang),e.stats.topLangsUsed[o.lang]=o.count})}catch(e){console.log("Error while parsing wikiwand_languages_rev2",e)}try{e.settings.clientPrefs=JSON.parse(localStorage.wikiwand_user_prefs)}catch(e){console.log("Error while parsing wikiwand_user_prefs",e)}try{var i=JSON.parse(localStorage.wikiwand_activation);e.stats.dateJoined=i.joined?new Date(i.joined).toISOString():null,e.stats.pagesViewed=i.viewedPages}catch(e){console.log("Error while parsing wikiwand_activation",e)}return e}}(),n={authResponse:i.authResponse,userInfo:o};t.get("/api/user/facebook-authenticated",{dataType:"json",params:{data:JSON.stringify(n)},cache:!1}).then(function(t){a?l(function(t,i){e(null,i)}):(userData=t.data,localStorage.setItem("wikiwand.user.authenticated",t.data.userId+"/"+(new Date).getTime().toString()),"function"==typeof e&&e(null,t.data))})}else e(null,userData)})},d=function(){r&&(o.user=userData,2==userData.permissions.role&&(o.user.isAdmin=!0),o.$broadcast("userStatusUpdated",{user:o.user}))},u=null;return r&&(d(),function(e){if(r){var t=!1,i=localStorage.getItem("wikiwand.user.authenticated");if(i){var o=i.split("/");if(2==o.length){o[0];var n=parseInt(o[1]);(new Date).getTime()-n>36e5&&(t=!0)}userData.logins.facebook&&userData.logins.facebook.isActive||(t=!0)}t?c(e):e(null,userData)}}(function(e,t){d(),e||(o.initializedUser=!0)})),{onUserInitialized:function(e){r&&o.$watch("initializedUser",function(){o.initializedUser&&e(null,null)})},getUserCohort:function(e){if(!u){var t="";if(userData)t=userData.userId;else{var i=navigator.languages?navigator.languages[0]:navigator.language||navigator.userLanguage;t=navigator.userAgent.slice(-40)+"|"+i.slice(-40)+"|"+window.screen.width+"|"+window.screen.height}var o=(n="j9Qt"+e+"8jW"+t+"mYo4Ua",Math.abs(function(e){var t,i,o=0;if(0===e.length)return o;for(t=0,i=e.length;t<i;t++)o=(o<<5)-o+e.charCodeAt(t),o|=0;return o}(n)));u=o%100}var n;return u},loginToFacebook:function(e,t){if(r){if(a=!1,!r||!s&&!(s=i&&i.isReady()))return t("Facebook is not loaded yet, please try again shortly");i.login(function(i){"connected"==i.status&&("function"==typeof e&&e(),c(function(e,i){userData=i,d(),"function"==typeof t&&t(e,i)}))},{scope:["public_profile","email","user_friends"]})}},logoutFromFacebook:l,isLoggedIn:function(){return!!r&&!!(o.user&&o.user.logins&&o.user.logins.facebook&&1==o.user.logins.facebook.isActive)},saveUserKVP:function(e,i,n){var r={category:e,key:i,val:n};t.post("/api/user/set-kvp",r).success(function(t){console.log("setUserKVP successfully: ",e+"."+i+" = "+n+" / setting KVP to: ",t.kvp),o.user.kvp=t.kvp}).error(function(t){console.log("setUserKVP error for ",e+"."+i+" = "+n+": ",t)})}}}]);
//# sourceMappingURL=wikiwand.early.min.5b613c02.js.map