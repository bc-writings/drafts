var citation=function(){var e=function(e){var t=e.closest(".js-post-menu"),n=t.attr("data-post-id"),i=t.find(".js-menu-popup-container");if(!(i.find(".js-cite-popup").length>0)){var r=$('<div class="js-cite-popup popup popup d-block ws6 c-auto">    <div class="js-cite-example mb4"></div>    <form class="grid gs8">        <label class="grid--cell"><input type="radio" class="s-radio js-cite-bibtex" name="reftype" checked="checked"/> BibTeX</label>        <label class="grid--cell"><input type="radio" class="s-radio js-cite-amsrefs" name="reftype" /> amsrefs</label>    </form>    <textarea class="js-cite-text s-textarea w100 d-block mt4" rows="9"></textarea>    <button type="button" class="s-btn js-cite-close mt8 mbn4 p2">Close</button></div>');r.find(".js-cite-close").click(function(){r.fadeOutAndRemove()}),r.find("form").on("submit",function(e){e.preventDefault()});var o=r.find(".js-cite-example"),a=r.find(".js-cite-bibtex"),s=r.find(".js-cite-amsrefs"),c=r.find(".js-cite-text");i.append(r),StackExchange.helpers.addSpinner(o),$.ajax({"type":"GET","url":"/posts/"+n+"/citation","dataType":"json","success":function(e){StackExchange.helpers.removeSpinner(),o.html(e.example),c.val(e.bibtex),a.click(function(){c.val(e.bibtex)}),s.click(function(){c.val(e.amsref)})}})}};return{"show":function(t){e(t)}}}();