!function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/public/js",i(i.s=14)}([function(t,e,i){"use strict";i.d(e,"a",function(){return u}),i.d(e,"b",function(){return f}),i.d(e,"c",function(){return m}),i.d(e,"d",function(){return p}),i.d(e,"e",function(){return a}),i.d(e,"f",function(){return n}),i.d(e,"g",function(){return s}),i.d(e,"h",function(){return o}),i.d(e,"i",function(){return d}),i.d(e,"j",function(){return h}),i.d(e,"k",function(){return c}),i.d(e,"l",function(){return r}),i.d(e,"m",function(){return l}),i.d(e,"r",function(){return v}),i.d(e,"s",function(){return g}),i.d(e,"o",function(){return b}),i.d(e,"n",function(){return _}),i.d(e,"q",function(){return y}),i.d(e,"p",function(){return x});var n="/ajax/session",a="/ajax/session/banner",s="/ajax/session/judge",o="/ajax/session/problem",r="/ajax/session/team",l="/ajax/session/team/member",h="/ajax/session/short-name-available",d="/ajax/session/publish",c="/ajax/session/start-flexible",u="/ajax/author",p="/ajax/course_offering/teacher",m="/ajax/course_offering/short-name-available",f="/ajax/commentary",g="/users",v="/sessions/{0}/edit",b="/internal-api/contest/{0}/pick-problems-automatically",_="/internal-api/contest/{0}/missing-students",y="/internal-api/contest/{0}/teams",x="/internal-api/contest/{0}/problems"},function(t,e,i){"use strict";function n(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(t){var e=t.match(/^(\d\d\d\d)-(\d\d)-(\d\d)$/);if(null===e)return!1;var i=parseInt(e[1],10),n=parseInt(e[2],10),a=parseInt(e[3],10);if(i<1970||i>2100||0===n||n>12)return!1;var s=[31,28,31,30,31,30,31,31,30,31,30,31];return(i%400==0||i%100!=0&&i%4==0)&&(s[1]=29),a>0&&a<=s[n-1]}function s(t){var e=t.match(/^(\d\d):(\d\d)(:(\d\d))?$/);if(null===e)return!1;var i=parseInt(e[1],10),n=parseInt(e[2],10),a=void 0===e[4]?null:parseInt(e[4],10);return i<24&&n<60&&(null===a||a<60)}function o(t){return(t<10?"0":"")+t}function r(t,e,i){if(t<0)return"-".concat(r(-t,e,i));var a,s=Math.floor(t),l=Math.floor(s/60),h=Math.floor(l/60),d=Math.floor(h/24),c=i?d:0,u=c>0?h%24:h,p=l%60,m=s%60;return a=1===c?["1 day ".concat(u)]:c>0?["".concat(c," days ").concat(u)]:e||u>0?[u]:[],[].concat(n(a),[o(p),o(m)]).join(":")}i.d(e,"a",function(){return r}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return s}),i.d(e,"d",function(){return o})},function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){"use strict";(function(t){var n=i(0);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s,o=t.jQuery,r={},l={};function h(t){var e,i,n,s,o=t.time,h=t.message,d=t.problems,c=t.teams,u=document.createTextNode(o||"â€”"),p=document.createElement("span");p.append.apply(p,a((i=a((e=h).matchAll(/(?:#p([0-9a-z]+|[A-Z])|#t([1-9][0-9]*))/g)).filter(function(t){return t[1]&&r[t[1]]||l[t[2]]}),n=[],s=0,i.forEach(function(t){s<t.index&&(n.push(e.substring(s,t.index)),s=t.index);var i=document.createElement("a");void 0!==t[1]?(i.setAttribute("href","/problems/".concat(encodeURIComponent(r[t[1]].name),"/commentary")),i.textContent=r[t[1]].title):(i.setAttribute("href","/teams/".concat(encodeURIComponent(l[t[2]].team_id),"/commentary")),i.textContent=l[t[2]].team_name),i.setAttribute("title",t[0]),n.push(i),s+=t[0].length}),s<e.length&&n.push(e.substring(s)),n)));var m=document.createElement("ul");m.className="inline-list",m.append.apply(m,a(d.map(function(t){var e=document.createElement("li");if(r[t]){var i=document.createElement("a");i.setAttribute("href","/problems/".concat(encodeURIComponent(t),"/commentary")),i.setAttribute("title",r[t].title),i.textContent=t,e.appendChild(i)}else e.textContent=t;return e})));var f=document.createElement("ul");f.className="inline-list",f.append.apply(f,a(c.map(function(t){var e=document.createElement("li");if(l[t]){var i=document.createElement("a");i.setAttribute("href","/teams/".concat(encodeURIComponent(t),"/commentary")),i.setAttribute("title",l[t].team_name),i.textContent=t,e.appendChild(i)}else e.textContent=t;return e})));var g=document.createElement("tr");return g.append.apply(g,a([u,p,m,f].map(function(t){var e=document.createElement("td");return e.appendChild(t),e}))),g}function d(t){return Object.keys(a(t.matchAll(/#t([1-9][0-9]*)/g)).map(function(t){return+t[1]}).reduce(function(t,e){return t[e]=!0,t},{})).map(function(t){return+t}).sort(function(t,e){return t-e})}var c=!1;e.a=function(t){var e=document.getElementById("input-message"),i=document.getElementById("submit-button"),u=document.getElementById("table-messages").getElementsByTagName("tbody")[1],p=document.getElementById("spinner-row"),m=t.contest,f=t.csrf_token,g=t.problem,v=t.team;t.problems.forEach(function(t){r[t.name]=t,r[t.label]=t}),t.teams.forEach(function(t){l[t.team_id]=t});var b=function(t){if(!c){c=!0;var e={};null!==g&&(e.problem=g),null!==v&&(e.team=v),void 0!==s&&(e.since=s),o.ajax({type:"GET",url:n.b,data:e}).always(function(){"function"==typeof t&&t(),c=!1}).done(function(t){var e=t.response;e.commentary.length>0&&(s=e.commentary[0].time);var i=e.commentary.map(function(t){return h({time:t.contest_time,message:t.message,problems:t.problem_ids,teams:t.team_ids})});i.forEach(function(t){t.classList.add("appear-animated","appearing")}),window.requestAnimationFrame(function(){window.setTimeout(function(){i.forEach(function(t){t.classList.remove("appearing")})},20)}),u.prepend.apply(u,a(i))})}};document.getElementById("form-message").addEventListener("submit",function(t){t.preventDefault();var s=document.getElementById("message-prefix"),h=e.value.trim();if(0!==h.length){var c,u=s?"".concat(s.textContent," ").concat(h):h;e.disabled=!0,i.disabled=!0,o.ajax({type:"POST",url:n.b,contentType:"application/json",data:JSON.stringify({csrf_token:f,contest:m,message:u,problem_ids:(c=u,Object.keys(a(c.matchAll(/#p([0-9a-z]+|[A-Z])/g)).map(function(t){return r[t[1]]?r[t[1]].name:t[1]}).reduce(function(t,e){return t[e]=!0,t},{})).sort()).filter(function(t){return r[t]}),team_ids:d(u).filter(function(t){return l[t]})})}).always(function(){e.disabled=!1,i.disabled=!1,e.focus()}).done(function(){e.value="",b()})}}),document.getElementById("filter").addEventListener("change",function(t){var e=t.target;e.disabled=!0;var i=e.value.match(/^(?:p(.+)|t(.+))$/);i?i[1]?window.location.href="/problems/".concat(encodeURIComponent(i[1]),"/commentary"):window.location.href="/teams/".concat(encodeURIComponent(i[2]),"/commentary"):window.location.href="/commentary"}),b(function(){p.style.display="none"}),window.setInterval(function(){b()},3e3)}}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var i=t.jQuery;e.a=function(){i(".sample pre").each(function(t,e){var n=document.createElement("span");n.classList.add("copy-to-clipboard"),e.appendChild(n),i(n).tooltip({placement:"bottom",container:"body",trigger:"manual",title:i(n).closest("[data-copied-to-clipboard-text]").attr("data-copied-to-clipboard-text"),animation:!1}).click(function(){!function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-999px",e.style.top="-999px",document.body.appendChild(e);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),document.body.removeChild(e),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}(e.textContent),i(n).tooltip("show")}).mouseout(function(){i(n).tooltip("hide")})})}}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(1),n=t.jQuery;n.extend(n.ns("Kattis.views.contest.header"),{tick:function(){var t=Math.floor(this.elapsedSeconds+(new Date-this.loadedAt)/1e3);if(!document.hidden){var i=t>=this.reload1Time,a=t>=this.reload2Time,s=!this.pastReload1&&i||!this.pastReload2&&a;this.refreshAtStart&&s&&window.location.reload(),this.pastReload1=i,this.pastReload2=a}var o=!1,r=!1,l=!1,h=!1;this.hasStart?t<0?l=!0:t>=this.durationSeconds?r=!0:this.durationSeconds-t<=900&&(o=!0):(h=!0,t=0);var d=n(".contest-progress");d.toggleClass("session-nostart",h),d.toggleClass("session-notstarted",l),d.toggleClass("session-nearend",o),d.toggleClass("session-finished",r),t<0&&d.find(".countdown").text(Object(e.a)(-t,!1,!0));var c=Math.min(this.durationSeconds,Math.max(t,0)),u=0;h||(u=100*c/this.durationSeconds),d.find(".count_elapsed").text(Object(e.a)(c,!0)),d.find(".count_remaining").text(Object(e.a)(this.durationSeconds-c,!0)),d.find(".progress-bar").css("width","".concat(u,"%"))},initContestHeader:function(e,i,n,a){var s=this;this.hasStart=e,this.elapsedSeconds=i,this.durationSeconds=n,this.loadedAt=t.page_loaded_at,this.refreshAtStart=a,this.reload1Time=this.elapsedSeconds<-600?-(300+5*Math.random()*60):-1/0,this.reload2Time=this.elapsedSeconds<0?30*Math.random():-1/0,this.pastReload1=this.elapsedSeconds>=this.reload1Time,this.pastReload2=this.elapsedSeconds>=this.reload2Time,setInterval(function(){s.tick()},1e3)},updateContestHeader:function(t,e,i){this.hasStart=t,this.elapsedSeconds=e,this.durationSeconds=i,this.loadedAt=new Date,this.tick()},init:function(){var t=document.getElementById("contest_time");if(t){var e=JSON.parse(t.dataset.props);this.initContestHeader(e.has_start,e.elapsed_seconds,e.total_seconds,e.refresh_at_start)}},update:function(){var t=document.getElementById("contest_time");if(t){var e=JSON.parse(t.dataset.props);this.updateContestHeader(e.has_start,e.elapsed_seconds,e.total_seconds)}}})}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(0),n=i(1);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=t,o=s.jQuery,r=s.tmpl,l=o.ns("Kattis");o.extend(o.ns("Kattis.views.contest.edit"),{MAX_INT_32:Math.pow(2,31)-1,MAX_UNPRIVILEGED_DURATION:604800,DEFAULT_SCORE:100,init:function(t){var e=this;if(this.data=t,this.timehintsValid=!0,this.shortnameValid=!0,this.btnCreateSession=o("#create-btn"),this.btnCreateSession.bind("click",this.createSession.bind(this)),this.txtStartTime=o("#start-time"),this.spanStartHint=o("#start-hint"),this.startTimeVal=null,this.txtStartTime.bind("change keyup input",this.startTimeModified.bind(this)),this.txtDuration=o("#duration"),this.spanFinishHint=o("#finish-hint"),this.durationVal=null,this.txtDuration.bind("change keyup input",this.durationModified.bind(this)),this.spanDurationHint=o("#duration-hint"),this.txtEndTime=o("#end-time"),this.endTimeVal=null,this.txtEndTime.bind("change keyup input",this.endTimeModified.bind(this)),this.lockDurationToStartEnd=o("#lock-duration-to-start-end").is(":checked"),o("#lock-duration-to-start-end").bind("change",this.onLockDurationToStartEndChange.bind(this)),this.txtSessionName=o("#session-name"),this.sessionNameHint=o("#session-name-hint"),this.sessionNameValid=this.data.existing,this.data.existing||this.sessionNameHint.text(this.txtSessionName.data("cant-be-empty-msg")),this.txtSessionName.on("change keyup input",this.modifySessionNameHint.bind(this)),this.selStandingsType=o("#standings-type"),this.spanStandingsTypeHint=o("#standings-type-hint"),this.selStandingsType.bind("change",this.modifyStandingsType.bind(this)),this.modifyStandingsType(),(this.data.is_privileged||this.data.is_head_teacher)&&(this.txtCutoff=o("#cutoff"),this.spanCutoffHint=o("#cutoff-hint"),this.cutoffVal=null,this.txtCutoff.bind("change keyup input",this.modifyTimeHints.bind(this)),this.txtShortName=o("#short-name"),this.spanShortNameHint=o("#short-name-hint"),this.txtShortName.bind("change keyup input",this.onContestShortNameChange.bind(this)),o("#remove-banner").bind("click",this.onRemoveBannerClick.bind(this))),this.data.existing){this.btnPublishSession=o("#publish-btn"),this.spanPublishProgress=o("#publish-progress"),this.btnPublishSession.bind("click",this.publishSession.bind(this)),o("#basic-settings").on("change input",":input",this.onBasicSettingChange.bind(this)),o("#tblProblems").on("mousedown mouseup",".dndhandle",function(){o(this).toggleClass("grab grabbing")}),o("#pick-problems-auto-btn").bind("click",this.onPickProblemsAutomatically.bind(this)),o("#add-unregistered-students-btn").bind("click",this.onAddUnregisteredStudents.bind(this)),o("#remove-all-teams-btn").bind("click",this.onRemoveAllTeams.bind(this)),this.updateStudentsNotInSession(),o("#add-problem-btn").bind("click",this.onAddProblem.bind(this)),o("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").bind("change keyup input",this.onAddProblemInputChange.bind(this)),o("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").keypress(function(t){13!==t.keyCode||o("#add-problem-btn").prop("disabled")||o("#add-problem-btn").click()}),this.resetProblems(),this.setUpProblemsSorting(),this.data.is_privileged&&(this.tbodyJudge=o("#tblJudges tbody"),this.judge_tmpl=r("judge_tmpl"),o("#add-judge-btn").bind("click",this.onAddJudge.bind(this)),o("#add-judge-username").bind("change keyup input",function(){o("#add-judge-btn").prop("disabled",""===o(this).val())}),o("#add-judge-username").keypress(function(t){13!==t.keyCode||o("#add-judge-btn").prop("disabled")||o("#add-judge-btn").click()}),this.data.judges.forEach(this.addJudgeRow,this)),this.tbodyTeam=o("#tblTeams tbody"),this.team_tmpl=r("team_tmpl"),this.team_member_tmpl=r("team_member_tmpl"),this.autoaccept=!1,this.tbodyTeam.on("click","input.team-member-accepted",function(t){e.autoaccept=o(t.target).is(":checked"),e.tbodyTeam.find("input.team-member-accepted").prop("checked",e.autoaccept)}),o("#add-team-btn").bind("click",this.onAddTeam.bind(this));var i="#add-team-name".concat(this.data.is_privileged||this.data.is_head_teacher?", #add-team-penalty":"");o(i).keyup(function(t){13!==t.keyCode||o("#add-team-btn").prop("disabled")||o("#add-team-btn").click()}),o(document).on("focusin",function(t){var e=t.target;o("#tblTeams tbody tr").has(".team-edit:hidden").each(function(){o(this).has(e).length||o(this).find(".team-done").click()})}),this.data.teams.forEach(this.addTeamRow,this);var a=this,s=o("#add-problem-available-from");o(".enable-add-problem-popover").popover({placement:"top",html:!0,sanitize:!1,container:"body",content:'<input type="text" class="form-control problem-available-date">'}).on("show.bs.popover",function(){s.prop("disabled",!0)}).on("hide.bs.popover",function(){s.prop("disabled",!1)}).on("shown.bs.popover",function(){var t=a.getTimeFromString(a.startTimeVal),e=s.val().split(":"),i=e[1],r=e[0],l=o(".problem-available-date");if("infinity"!==t&&null!==t){var h=new Date(t.getTime()+6e4*i+36e5*r);l.val(a.getTimeStringFromDateObject(h))}l.on("change keyup paste",function(){if("infinity"!==t&&null!==t){var e=a.getTimeFromString(l.val());if(null!==e){var i=e-t;i>=0&&s.val("".concat(Math.floor(i/36e5),":").concat(Object(n.d)(Math.floor(i/6e4)%60)))}}})})}this.modifyTimeHints(),o("body").on("hidden.bs.popover",function(t){o(t.target).data("bs.popover").inState.click=!1})},getTimeStringFromDateObject:function(t){return"".concat(t.getUTCFullYear(),"-").concat(Object(n.d)(t.getUTCMonth()+1),"-").concat(Object(n.d)(t.getUTCDate())," ").concat(Object(n.d)(t.getUTCHours()),":").concat(Object(n.d)(t.getUTCMinutes()),":").concat(Object(n.d)(t.getUTCSeconds()))},modifySessionNameHint:function(t){""===o(t.target).val().trim()?(this.sessionNameHint.text(this.txtSessionName.data("cant-be-empty-msg")),this.sessionNameValid=!1):(this.sessionNameHint.text(""),this.sessionNameValid=!0),this.updateSaveButton()},isValid:function(){return this.timehintsValid&&this.shortnameValid&&this.sessionNameValid},updateSaveButton:function(t){t=void 0===t?this.isValid():t,this.btnCreateSession.prop("disabled",!t),this.data.existing&&(t?o("#unsaved-changes").removeClass("hidden"):o("#unsaved-changes").addClass("hidden"))},onBasicSettingChange:function(t){o(t.target).closest("div.form-group").addClass("has-warning"),this.updateSaveButton()},onLockDurationToStartEndChange:function(t){this.lockDurationToStartEnd=o(t.target).is(":checked");var e="yes";this.lockDurationToStartEnd&&(this.updateDurationFromStartEnd(),e="no"),o("#basic-settings").attr("data-flexible-enabled",e),this.modifyTimeHints()},onAddProblemInputChange:function(){var t=!0,e=!1,i=!1,n=o("#add-problem-name").val(),a=null;this.data.all_problems.forEach(function(t){t[0]===n&&(a=t)});var s=o("#add-problem-type"),r=o("#add-problem-score");if(a)if(i=!(e=a.length>1),e){s.text(s.attr("data-text-scoring"));var l=a[1];r.text("Infinity"===l?"?":l)}else s.text(s.attr("data-text-pass-fail")),r.find("input").length||r.html('<input type="text" id="add-problem-score-input" value="'.concat(this.DEFAULT_SCORE,'" class="form-control">'));else t=!1,s.empty(),r.empty();o("#tblProblems").toggleClass("adding-passfail-problem",i),o("#tblProblems").toggleClass("adding-scoring-problem",e),(this.data.is_privileged||this.data.is_head_teacher)&&null===this.parse_formatted_interval(o("#add-problem-available-from").val())&&(t=!1),o("#add-problem-btn").prop("disabled",!t)},setUpProblemsSorting:function(){var t=this;o("#tblProblems tbody").sortable({handle:"> .dndhandle",items:"> tr",helper:function(t,e){return e.parent().children().children().each(function(){o(this).width(o(this).width())}),e},update:function(i,n){var a={short_name:t.data.short_name,problem_name:n.item.attr("data-name"),index:n.item.index(),csrf_token:t.data.csrf_token};o.ajax({type:"PUT",url:e.h,contentType:"application/json",data:JSON.stringify(a)}).done(function(e){t.replaceProblems(e.response.problems)}).fail(function(e){l.error.show_xhr_msg(n.item,e),t.resetProblems()})}})},onContestShortNameChange:function(){var t=this,i="glyphicon glyphicon-ok text-success",n="glyphicon glyphicon-remove text-danger",a="fa fa-spinner fa-spin",s=[i,n,a].join(" "),r={};return this.shortNameChangeToken=r,this.data.short_name===this.txtShortName.val()?(this.spanShortNameHint.removeClass(s).addClass(i),this.data.existing&&this.btnPublishSession.prop("disabled",!1),this.shortnameValid=!0,void this.updateSaveButton()):""===this.txtShortName.val()?(this.spanShortNameHint.removeClass(s),this.shortnameValid=!0,void this.updateSaveButton()):(this.spanShortNameHint.removeClass(s).addClass(a),this.updateSaveButton(!1),this.data.existing&&this.btnPublishSession.prop("disabled",!0),void setTimeout(function(){r===t.shortNameChangeToken&&o.ajax({type:"GET",url:e.j,data:{name:t.txtShortName.val()}}).done(function(e){r===t.shortNameChangeToken&&(t.shortnameValid=e.response.available,t.spanShortNameHint.removeClass(s),t.spanShortNameHint.addClass(t.shortnameValid?i:n),t.updateSaveButton())}).fail(function(){r===t.shortNameChangeToken&&(t.shortnameValid=!1,t.spanShortNameHint.removeClass(s),t.spanShortNameHint.addClass(n),t.updateSaveButton())})},750))},problem_tmpl:function(t){var e=r("problem_tmpl");return t.format_minutes=this.format_minutes,e(t)},onPickProblemsAutomatically:function(i){var n=this,s=o(i.target);if(t.confirm(s.data("confirm-msg"))){s.prop("disabled",!0);var r={num_problems:+o("#pick-problems-auto-number").val(),difficulty_low:+o("#pick-problems-auto-difficulty-low").val(),difficulty_high:+o("#pick-problems-auto-difficulty-high").val()};o.ajax({type:"GET",url:e.o.replace("{0}",this.data.short_name),data:r}).done(function(t){var i,h;t.length!==r.num_problems&&l.error.show_msg(s.data("insufficient-problems-msg").replace("{0}",t.length)),i=t,h=e.p.replace("{0}",n.data.short_name),o.ajax({type:"DELETE",url:h,data:{csrf_token:n.data.csrf_token}}).then(function(){var t=i.map(function(t,e){return o.ajax({type:"POST",url:h,data:{problem_name:t,problem_number:e+1,csrf_token:n.data.csrf_token}})});return o.when.apply(o,a(t))}).then(function(){return o.ajax({type:"GET",url:h})}).then(function(t){return n.replaceProblems(t)}).always(function(){return s.prop("disabled",!1)}).fail(function(t){return l.error.show_xhr_msg(s,t)})}).fail(function(t){l.error.show_xhr_msg(s,t)})}},onAddProblem:function(t){var i=this,n=o(t.target);o("#add-problem-btn, #add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!0);var a,s=o("#tblProblems").attr("data-is-scoring"),r=o("#add-problem-score-input").val();a=null==r?1:s?r:this.DEFAULT_SCORE;var h={short_name:this.data.short_name,problem_name:o("#add-problem-name").val(),score_scale:a,color_name:o("#add-problem-color-name").val(),rgb:o("#add-problem-color-rgb").val(),csrf_token:this.data.csrf_token};(this.data.is_privileged||this.data.is_head_teacher)&&(h.available_in_session_from=this.parse_formatted_interval(o("#add-problem-available-from").val())),o.ajax({type:"POST",url:e.h,contentType:"application/json",data:JSON.stringify(h)}).always(function(){o("#add-problem-name, #add-problem-available-from, #add-problem-color-name, #add-problem-color-rgb").prop("disabled",!1),o("#add-problem-name").focus(),o(".enable-add-problem-popover").popover("hide")}).done(function(t){o("#add-problem-name").val(""),o("#add-problem-type").empty(),o("#add-problem-score").empty(),o("#add-problem-available-from").val("0:00"),o("#add-problem-color-name").val(""),o("#add-problem-color-rgb").val(""),o("#tblProblems").removeClass("adding-passfail-problem"),o("#tblProblems").removeClass("adding-scoring-problem"),i.replaceProblems(t.response.problems)}).fail(function(t){n.prop("disabled",!1),l.error.show_xhr_msg(n,t)})},onAddJudge:function(t){var i=this,n=o(t.target),a=o("#add-judge-username").val();if(this.tbodyJudge.find("[data-username='".concat(a,"']")).length>0)alert(n.attr("data-nonunique-msg"));else{n.prop("disabled",!0);var s={short_name:this.data.short_name,username:o("#add-judge-username").val(),may_clarify:o("#add-judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token};o.ajax({type:"POST",url:e.g,contentType:"application/json",data:JSON.stringify(s)}).always(function(){o("#add-judge-username").focus()}).done(function(t){o("#add-judge-username").val(""),o("#add-judge-may-clarify").prop("checked",!0),i.addJudgeRow(t.response,!0)}).fail(function(t){n.prop("disabled",!1),l.error.show_xhr_msg(n,t)})}},onAddTeam:function(t){var i=this,n=o(t.target),a=n.closest("tr").find(":input");a.prop("disabled",!0);var s={short_name:this.data.short_name,team_name:o("#add-team-name").val(),csrf_token:this.data.csrf_token};(this.data.is_privileged||this.data.is_head_teacher)&&(s.penalty_adjustment=o("#add-team-penalty").val()),o.ajax({type:"POST",url:e.l,contentType:"application/json",data:JSON.stringify(s)}).always(function(){a.prop("disabled",!1)}).done(function(t){o("#add-team-name").val(""),(i.data.is_privileged||i.data.is_head_teacher)&&o("#add-team-penalty").val(0),i.addTeamRow(t.response.team,!0,!0)}).fail(function(t){l.error.show_xhr_msg(n,t)})},updateStudentsNotInSession:function(){var t=o("#students-not-in-session");t.length>0&&o.ajax({type:"GET",url:e.n.replace("{0}",this.data.short_name)}).then(function(e){0===e.length?t.html(t.data("all-registered-msg")):t.html("".concat(t.data("missing-msg"),": ").concat(e.join(", ")))})},onRemoveAllTeams:function(i){var n=this,a=o(i.target);t.confirm(a.data("confirm-msg"))&&(a.prop("disabled",!0),o.ajax({type:"DELETE",url:e.q.replace("{0}",this.data.short_name),data:{csrf_token:this.data.csrf_token}}).then(function(){return n.tbodyTeam.children("tr").remove()}).always(function(){a.prop("disabled",!1),n.updateStudentsNotInSession()}).fail(function(t){return l.error.show_xhr_msg(a,t)}))},onAddUnregisteredStudents:function(i){var n=this,a=o(i.target),s=parseInt(o("#add-unregistered-students-group-size").val(),10),r=e.q.replace("{0}",this.data.short_name);if(t.confirm(a.data("confirm-msg"))){a.prop("disabled",!0),o.ajax({type:"GET",url:e.n.replace("{0}",this.data.short_name)}).then(function(t){for(var e,i=((e=t.map(function(t){return[Math.random(),t]})).sort(),e.map(function(t){return t[1]})),h=[],d=0;d<i.length;d+=s)h.push(o.ajax({type:"POST",url:r,data:{members:i.slice(d,d+s),csrf_token:n.data.csrf_token}}));var c=a.data("result-msg");return l.error.show_msg(c.replace("{0}",t.length).replace("{1}",h.length)),o.when.apply(o,h)}).then(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var a=0===e.length||Array.isArray(e[0])?e:[e];a.forEach(function(t){return n.addTeamRow(t[0])})}).always(function(){a.prop("disabled",!1),n.updateStudentsNotInSession()}).fail(function(t){return l.error.show_xhr_msg(a,t)})}},onRemoveBannerClick:function(t){var i=o(t.target);i.prop("disabled",!0),o.ajax({type:"DELETE",url:e.e,contentType:"application/json",data:JSON.stringify({short_name:this.data.short_name,csrf_token:this.data.csrf_token})}).always(function(){i.prop("disabled",!1)}).done(function(){i.hide(),o("#session_banner").remove()}).fail(function(t){l.error.show_xhr_msg(i,t)})},createSession:function(){var t=this;this.btnCreateSession.prop("disabled",!0);var e=this.getSessionStartTimeUTC();if(null!==e){var i=this.getSessionEndTimeUTC(),n="infinity"===i||null===i?i:i.toISOString(),a={session_name:this.txtSessionName.val().trim(),start_time:"infinity"===e?"infinity":e.toISOString(),duration:this.parse_formatted_interval(this.txtDuration.val()),is_open:o("#is-open").is(":checked"),session_abbreviated_name:o("#session-abbreviated-name").val(),standings_type:this.selStandingsType.data("standings-type-key"),csrf_token:this.data.csrf_token,flexible:!this.lockDurationToStartEnd,endtime:n};if(this.data.existing&&o.extend(a,{old_short_name:this.data.short_name}),(this.data.is_privileged||this.data.is_head_teacher)&&o.extend(a,{cutoff:this.parse_formatted_interval(this.txtCutoff.val()),is_ranked:this.selStandingsType.data("ranked"),show_first_to_solve:o("#show-first-to-solve").is(":checked"),show_group_leaders:o("#show-group-leaders").is(":checked"),show_flags:o("#show-flags").is(":checked"),show_logos:o("#show-logos").is(":checked"),submission_penalty:o("#submission-penalty").val(),scoreboard_limit:o("#scoreboard-limit").val(),scoreboard_submission_threshold:o("#scoreboard-submission-threshold").val(),scoreboard_solved_threshold:o("#scoreboard-solved-threshold").val(),timestep_in_seconds:o("#timestep-in-seconds").val()}),this.data.is_privileged&&o.extend(a,{short_name:this.txtShortName.val(),autofinalize:o("#autofinalize").is(":checked"),clics_api:o("#clics-api").is(":checked"),classification:o("#classification").val()}),this.data.is_privileged){a.banner_image=null;var s=document.getElementById("banner-image");if(s.files&&s.files[0]){var r=new FileReader;r.onload=function(e){a.banner_image=btoa(e.target.result),t.internalCreateSession(a)},r.readAsBinaryString(s.files[0])}else this.internalCreateSession(a)}else this.internalCreateSession(a)}},internalCreateSession:function(i){var n=this;o.ajax({type:"PUT",url:e.f,contentType:"application/json",data:JSON.stringify(i)}).always(function(){n.btnCreateSession.prop("disabled",!1)}).done(function(e){t.location.replace(e.response.redirect)}).fail(function(t){l.error.show_xhr_msg(n.btnCreateSession,t)})},publishSession:function(){var i=this;if(t.confirm(this.btnPublishSession.data("confirm-msg"))){this.btnPublishSession.prop("disabled",!0),this.spanPublishProgress.html('<i class="fa fa-spinner fa-spin"></i>');var n={csrf_token:this.data.csrf_token,short_name:this.data.short_name};o.ajax({type:"PUT",url:e.i,contentType:"application/json",data:JSON.stringify(n)}).done(function(){i.spanPublishProgress.html('<i class="glyphicon glyphicon-ok"></i>'),t.location.reload(!0)}).fail(function(t){i.spanPublishProgress.html('<i class="glyphicon glyphicon-remove"></i>'),i.btnPublishSession.prop("disabled",!1),l.error.show_xhr_msg(i.btnPublishSession,t)})}},getTimeFromString:function(t){if(!/^\d\d\d\d-\d\d-\d\d \d\d:\d\d(:\d\d)?$/.test(t))return null;var e=t.split(" "),i=e[0],a=e[1];return Object(n.b)(i)&&Object(n.c)(a)?new Date("".concat(i,"T").concat(a,"Z")):null},getTimeUTC:function(t){var e=t.val();return"infinity"===e?e:this.getTimeFromString(e)},getSessionStartTimeUTC:function(){return this.getTimeUTC(this.txtStartTime)},getSessionEndTimeUTC:function(){return this.getTimeUTC(this.txtEndTime)},parse_formatted_interval:function(t){var e=/^(\d+):([0-5]\d)(?::([0-5]\d))?$/.exec(t);if(null===e)return null;var i=60*(60*+e[1]+ +e[2])+(+e[3]||0);return i>this.MAX_INT_32?null:i},format_seconds:function(t){var e=Math.floor(t),i=e%60,a=Math.floor(e/60),s=a%60,o=Math.floor(a/60);return"".concat(o,":").concat(Object(n.d)(s),":").concat(Object(n.d)(i))},format_minutes:function(t){var e=Math.floor(t),i=e%60,a=Math.floor(e/60);return"".concat(a,":").concat(Object(n.d)(i))},areTimeFieldsChanged:function(){return this.startTimeVal!==this.txtStartTime.val()||this.durationVal!==this.txtDuration.val()||this.endTimeVal!==this.txtEndTime.val()||!(!this.data.is_privileged&&!this.data.is_head_teacher||this.cutoffVal===this.txtCutoff.val())},validateEndTime:function(){var t=null;if(!this.validateStartTime())return!1;var e=this.getSessionStartTimeUTC(),i=this.getSessionEndTimeUTC();if(null===i||"infinity"===e!=("infinity"===i)?t=this.txtEndTime.data("invalid-end-time-msg"):i<e&&(t=this.txtEndTime.data("start-end-order-msg")),null!==t)return this.spanFinishHint.text(t),!1;if(this.lockDurationToStartEnd&&(!(this.data.is_privileged||this.data.is_head_teacher)&&(i-e)/1e3>this.MAX_UNPRIVILEGED_DURATION))return this.spanFinishHint.text(this.txtDuration.data("maximal-duration-msg")),!1;var n=i<new Date,a=this.txtStartTime.data("time-in-past-msg");return this.spanFinishHint.text(i.toString()+(n?a:"")),!0},validateStartTime:function(){var t=this.getSessionStartTimeUTC(),e=this.txtStartTime.data("invalid-start-time-msg");if(null===t)return this.spanStartHint.text(e),this.spanFinishHint.text(e),(this.data.is_privileged||this.is_head_teacher)&&this.spanCutoffHint.text(e),!1;var i="infinity"!==t&&t<new Date,n=this.txtStartTime.data("time-in-past-msg");return this.spanStartHint.text(t.toString()+(i?n:"")),!0},validateDuration:function(){var t=this.parse_formatted_interval(this.txtDuration.val());if(null===t){var e=this.txtDuration.data("invalid-duration-msg");return this.spanDurationHint.text(e),!1}return!(!this.data.is_privileged&&!this.data.is_head_teacher&&t>this.MAX_UNPRIVILEGED_DURATION)||(this.spanFinishHint.text(this.txtDuration.data("maximal-duration-msg")),!1)},validateStartEndDuration:function(){var t=this.getSessionStartTimeUTC(),e=this.getSessionEndTimeUTC();if("infinity"!==t&&"infinity"!==e){var i=e-t,n=1e3*this.parse_formatted_interval(this.txtDuration.val());if(this.lockDurationToStartEnd){if(i!==n)return this.spanDurationHint.text(this.txtDuration.data("duration-must-equal-start-end-msg")),!1}else if(i<n)return this.spanDurationHint.text(this.txtDuration.data("duration-exceeds-start-end-msg")),!1}return!0},validateCutoff:function(){if(!this.data.is_privileged&&!this.data.is_head_teacher)return!0;var t=this.parse_formatted_interval(this.txtDuration.val()),e=this.parse_formatted_interval(this.txtCutoff.val());if(null===e||e>t)return this.spanCutoffHint.text(this.txtCutoff.data("invalid-cutoff-msg")),!1;if(0===e)this.spanCutoffHint.text(this.txtCutoff.data("no-cutoff-msg"));else{var i,n=this.getSessionStartTimeUTC(),a=t-e;i="infinity"===n?"infinity":this.lockDurationToStartEnd?new Date(n.getTime()+1e3*a).toString():"start + ".concat(this.format_seconds(a)),this.spanCutoffHint.text(i)}return!0},updateDurationFromStartEnd:function(){var t=this.getSessionStartTimeUTC(),e=this.getSessionEndTimeUTC();if("infinity"!==t&&"infinity"!==e){var i=Math.max(0,(e-t)/1e3);this.txtDuration.val(this.format_seconds(i))}},updateEndFromStartDuration:function(){var t=this.getSessionStartTimeUTC(),e=this.parse_formatted_interval(this.txtDuration.val());if("infinity"!==t){var i=new Date(t.getTime()+1e3*e).toISOString().replace(/T/," ").replace(/[.].*Z/,"");this.txtEndTime.val(i)}},timevalModified:function(t,e){t()?this.lockDurationToStartEnd&&e():(this.timehintsValid=!1,this.updateSaveButton()),this.modifyTimeHints()},startTimeModified:function(){var t=this;return this.timevalModified(function(){return t.validateStartTime()},function(){return t.updateDurationFromStartEnd()})},endTimeModified:function(){var t=this;return this.timevalModified(function(){return t.validateStartTime()&&t.validateEndTime()},function(){return t.updateDurationFromStartEnd()})},durationModified:function(){var t=this;return this.timevalModified(function(){return t.validateStartTime()&&t.validateDuration()},function(){return t.updateEndFromStartDuration()})},modifyTimeHints:function(){this.areTimeFieldsChanged()&&(this.timehintsValid=!0,this.startTimeVal=this.txtStartTime.val(),this.durationVal=this.txtDuration.val(),this.endTimeVal=this.txtEndTime.val(),(this.data.is_privileged||this.data.is_head_teacher)&&(this.cutoffVal=this.txtCutoff.val()),this.timehintsValid=this.validateStartTime()&&this.validateEndTime()&&this.validateDuration()&&this.validateStartEndDuration()&&this.validateCutoff(),this.timehintsValid&&this.spanDurationHint.text(""),this.data.existing||this.updateSaveButton())},modifyStandingsType:function(){var t=this.selStandingsType[0],e=t.options[t.selectedIndex];this.spanStandingsTypeHint.text(e.getAttribute("data-desc"));var i=Boolean(e.getAttribute("data-ranked"));this.selStandingsType.data("ranked",i),this.selStandingsType.data("standings-type-key",e.getAttribute("data-key")),o(".only-in-ranked-standings").toggle(i),o("#tblProblems").attr("data-is-scoring",e.getAttribute("data-scoring"))},addProblemRow:function(t,e){var i=o(this.problem_tmpl(t)),n=e?i.children("td").children("div"):o();i.find(".problem-remove").bind("click",this.removeProblem.bind(this)),n.attr("style","display: none;"),o("#tblProblems tbody").append(i),n.slideDown("fast")},removeProblem:function(t){var i=this,n=o(t.target),a=n.closest("tr"),s=n.closest("tr").find(":input");s.prop("disabled",!0);var r={short_name:this.data.short_name,problem_name:a.attr("data-name"),csrf_token:this.data.csrf_token};o.ajax({type:"DELETE",url:e.h,contentType:"application/json",data:JSON.stringify(r)}).done(function(t){i.replaceProblems(t.response.problems)}).fail(function(t){s.prop("disabled",!1),l.error.show_xhr_msg(n,t),i.resetProblems()})},resetProblems:function(){var t=this,e=!1,i=!1,n=new Set;o("#tblProblems tbody").empty(),this.data.selected_problems.forEach(function(a){t.addProblemRow(a),n.add(a.name),"pass"===a.objective?e=!0:i=!0}),o("#tblProblems").toggleClass("has-passfail-problem",e),o("#tblProblems").toggleClass("has-scoring-problem",i);var a=[];this.data.all_problems.forEach(function(t){var e=t[0];n.has(e)||a.push(o("<option />").attr("value",e))});var s=o('<datalist id="problems" />').append(a);o("#problems").replaceWith(s)},replaceProblems:function(t){this.data.selected_problems=t,this.resetProblems()},addJudgeRow:function(t,e){var i=o(this.judge_tmpl(t)),n=e?i.children("td").children("div"):o();i.find(".judge-remove").bind("click",this.removeJudge.bind(this)),i.find(".judge-may-clarify").bind("change",this.updateJudge.bind(this)),n.attr("style","display: none;"),this.tbodyJudge.append(i),n.slideDown("fast")},removeJudge:function(t){var i=o(t.target);i.prop("disabled",!0);var n=i.closest("tr"),a={short_name:this.data.short_name,username:n.attr("data-username"),csrf_token:this.data.csrf_token};o.ajax({type:"DELETE",url:e.g,contentType:"application/json",data:JSON.stringify(a),context:this}).done(function(){n.children("td").children("div").slideUp("fast",function(){n.remove()})}).fail(function(t){i.prop("disabled",!1),l.error.show_xhr_msg(i,t)})},updateJudge:function(t){var i=o(t.target);i.prop("disabled",!0);var n=i.closest("tr"),a={short_name:this.data.short_name,username:n.attr("data-username"),may_clarify:n.find(".judge-may-clarify").is(":checked"),csrf_token:this.data.csrf_token};o.ajax({type:"PUT",url:e.g,contentType:"application/json",data:JSON.stringify(a),context:this}).always(function(){i.prop("disabled",!1)}).done(function(t){n.find(".judge-username a").text(t.username).attr("href",t.profile_url),n.find(".judge-name").text(t.name),n.find(".judge-may-clarify").prop("checked",t.may_clarify)}).fail(function(t){l.error.show_xhr_msg(i,t)})},addTeamRow:function(t,e,i){var n=this,a=o(this.team_tmpl(t));t.members.forEach(function(t){var i=o(n.team_member_tmpl(t));i.find(".team-member-remove").bind("click",n.removeTeamMember.bind(n)),a.find("li.team-member-add").before(i),t.accepted||(!0===e?o("#pending-invitation-info").slideDown("fast"):o("#pending-invitation-info").show())}),!0===i?a.find(".show-no-edit").hide():a.find(".show-edit").hide(),a.find(".team-member-accepted").prop("checked",this.autoaccept),a.find(".team-edit").bind("click",function(){o(this).closest("tr").find(".show-edit, .show-no-edit").toggle()}),a.find(".team-done").bind("click",this.updateTeam.bind(this)),a.find(".team-name").keypress(function(t){var e=a.find("button.team-done");13!==t.keyCode||e.prop("disabled")||e.click()}),a.find(".team-remove").bind("click",this.removeTeam.bind(this)),a.find("button.team-member-add").bind("click",this.onAddTeamMember.bind(this)),a.find("input.team-member-username").bind("change keyup input",function(){a.find("button.team-member-add").prop("disabled",""===o(this).val())}),a.find("input.team-member-username").keyup(function(t){var e=a.find("button.team-member-add");13!==t.keyCode||e.prop("disabled")||e.click()}),this.tbodyTeam.append(a),!0===i&&a.find(".team-member-username").focus()},onAddTeamMember:function(t){var i=this,n=o(t.target),a=n.closest("li");n.prop("disabled",!0);var s=n.closest("tr"),r={team_id:s.attr("data-team-id"),username:a.find("input.team-member-username").val(),accepted:this.autoaccept,csrf_token:this.data.csrf_token};o.ajax({type:"POST",url:e.m,contentType:"application/json",data:JSON.stringify(r)}).always(function(){s.find("input.team-member-username").focus()}).done(function(t){var e=o(i.team_member_tmpl(t.response.team_member));e.find(".team-member-remove").bind("click",i.removeTeamMember.bind(i)),a.before(e),s.find("input.team-member-username").val(""),e.accepted||o("#pending-invitation-info").slideDown("fast"),i.updateStudentsNotInSession()}).fail(function(t){n.prop("disabled",!1),l.error.show_xhr_msg(n,t)})},removeTeam:function(t){var i=this,n=o(t.target),a=n.closest("tr"),s=a.find(":input");s.prop("disabled",!0);var r={short_name:this.data.short_name,team_id:a.attr("data-team-id"),csrf_token:this.data.csrf_token};o.ajax({type:"DELETE",url:e.l,contentType:"application/json",data:JSON.stringify(r),context:this}).done(function(){a.children("td").children("div").slideUp("fast",function(){a.remove()}),o('[data-invitation-state="pending"]').length||o("#pending-invitation-info").slideUp("fast"),i.updateStudentsNotInSession()}).fail(function(t){s.prop("disabled",!1),a.find("button.team-member-add").prop("disabled",""===a.find(".team-member-username").val()),l.error.show_xhr_msg(n,t)})},updateTeam:function(t){var i=this,n=o(t.target),a=n.closest("tr"),s=a.find(":input");s.prop("disabled",!0);var r={short_name:this.data.short_name,team_id:a.attr("data-team-id"),team_name:a.find("input.team-name").val(),csrf_token:this.data.csrf_token};(this.data.is_privileged||this.data.is_head_teacher)&&(r.penalty_adjustment=a.find("input.team-penalty").val()),o.ajax({type:"PUT",url:e.l,contentType:"application/json",data:JSON.stringify(r)}).always(function(){s.prop("disabled",!1),a.find("button.team-member-add").prop("disabled",""===a.find(".team-member-username").val()),a.find(".show-edit, .show-no-edit").toggle()}).done(function(t){var e=t.response.team;a.find("input.team-name").val(e.team_name),a.find("span.team-name").text(e.team_name),(i.data.is_privileged||i.data.is_head_teacher)&&(a.find("input.team-penalty").val(e.penalty_adjustment),a.find("span.team-penalty").text(e.penalty_adjustment)),i.updateStudentsNotInSession()}).fail(function(t){l.error.show_xhr_msg(n,t)})},removeTeamMember:function(t){var i=this,n=o(t.target);n.prop("disabled",!0);var a=n.closest("li"),s={team_id:n.closest("tr").attr("data-team-id"),username:a.attr("data-username"),csrf_token:this.data.csrf_token};o.ajax({type:"DELETE",url:e.m,contentType:"application/json",data:JSON.stringify(s),context:this}).done(function(){a.remove(),o('[data-invitation-state="pending"]').length||o("#pending-invitation-info").slideUp("fast"),i.updateStudentsNotInSession()}).fail(function(t){n.prop("disabled",!1),l.error.show_xhr_msg(n,t)})}})}).call(this,i(2))},function(t,e,i){(function(t){var e=t,i=e.jQuery,n=e.tmpl;i.extend(i.ns("Kattis.views.contest.resolver"),{init:function(){for(var e=this.data,a=e.info,s=a.cutoff,o=a.length,r=0;r<e.teams.length;r++)e.teams[r].name=this.team_names[e.teams[r].id];i(function(i){var a=t.open("","Kattis Resolver","width=450, height=400");function r(t){return i(a.document.getElementById(t))}function l(){i(".team_problem_cell").css("width","".concat(r("resolver_cell_width").val(),"px"))}a.document.open(),a.document.write(i("#resolver_controls_wrapper").html()),a.document.title="Controls",r("resolver_cell_width").change(l);var h=n("table_header_tmpl"),d=n("team_row_tmpl");function c(e,n){i("html, body").stop().animate({scrollTop:e.offset().top-i(t).height()/2+e.height()/2},200,function(){n&&n()})}function u(t,e){for(var n=i(d({team:t,problems:e})),a=n.children(".rank"),r=n.children(".score"),l=n.children(".time"),h=n.children(".team_problem_cell"),c={},u=0;u<e.length;u++){c[e[u].id]={cell:i(h[u]),score:0,submissions:0,pending:[],last_improvement:0,max_score:e[u].max_score}}return{id:t.id,name:t.name,row:n,cur_row:n,no_cell:a,points_cell:r,time_cell:l,problems:c,points:0,get_last_improvement:function(){for(var t=0,e=0;e<g.length;e++)t=Math.max(t,this.problems[g[e]].last_improvement);return t},reset:function(){this.no_cell.text(""),this.points_cell.text("0"),this.time_cell.text("0"),this.points=0;for(var t=0;t<g.length;t++){var e=g[t];this.problems[e].score=0,this.problems[e].submissions=0,this.problems[e].last_improvement=0,this.problems[e].pending=[],this.problems[e].cell.empty(),this.problems[e].cell.removeClass("solved attempted partial-score pending")}},handle_submission:function(t,e){var i=this.problems[t.problem],n=t.time>=(o-s)/60;if(n&&!e||(i.submissions+=1,this.points-=i.score,t.score>i.score+1e-9?(i.score=t.score,i.last_improvement=Math.floor(t.time)):Math.abs(t.score-i.score)<1e-9&&(i.last_improvement=Math.min(i.last_improvement,Math.floor(t.time))),this.points+=i.score),n)if(e){for(var a=0;a<i.pending.length&&i.pending[a]!==t;)a+=1;a<i.pending.length&&(i.pending[a]=i.pending[i.pending.length-1],i.pending.pop()),i.pending.sort(function(t,e){return e.time-t.time})}else i.pending.push(t);this.points_cell.text(this.points),this.time_cell.text(this.get_last_improvement()),i.cell.html("".concat(i.score,"<br/>").concat(i.submissions).concat(i.pending.length>0?"+".concat(i.pending.length):"")),i.cell.removeClass("solved attempted partial-score pending"),Math.abs(i.score-i.max_score)<1e-9?i.cell.addClass("solved"):i.pending.length>0?i.cell.addClass("pending"):0===i.score?i.cell.addClass("attempted"):i.cell.addClass("partial-score")}}}function p(t,e,n){t.sort(function(t,e){if(t.points!==e.points)return e.points-t.points;var i=t.get_last_improvement(),n=e.get_last_improvement();return Math.abs(i-n)>1e-9?i-n:t.name!==e.name?t.name.localeCompare(e.name):0});var a=0;!function s(){if(a===t.length)n&&n();else{var o=t[a].row.index()+1,l=a+1;if(t[a].points>0?t[a].no_cell.text(l):t[a].no_cell.text(""),l<o)if(e){var h=parseInt(r("resolver_row_animate_time").val(),10)*(Math.abs(l-o)+1);!function(t,e,n,a,s,o){for(var r=a.offset(),l=a.height(),h=a.width(),d=[],c=0;c<2;c++)d.push(i("<tr></tr>").append(i("<td></td>",{colspan:4+f.length}).css({height:"0",margin:"0",padding:"0"})));d[0].height(0).width(h),a.replaceWith(d[1]),t.cur_row=d[1],d[1].height(l).width(h),a.height(l).width(h);var u=i("<div></div>");u.append(i("<table></table>").addClass("table table-kattis kattis-table-contest-standings").css({"border-top":"none","border-radius":"none"}).append(i("<tbody></tbody>").append(a))).width(h).height(l).css({position:"absolute",top:"".concat(r.top,"px"),left:"".concat(r.left+1,"px")}).appendTo(i("#wrapper")),0===s?d[0].prependTo(i("#standings tbody")):d[0].insertAfter(n[s-1].row),t.cur_row=d[0],d[1].animate({height:"0"},e),d[0].animate({height:l},e),u.animate({top:"".concat(d[0].offset().top,"px")},e,function(){a.width("auto").height("auto"),d[0].replaceWith(a),t.cur_row=a,u.remove(),d[1].remove(),o&&o()})}(t[a],h,t,t[a].row,l-1,function(){a+=1,s()})}else t[a].row.detach(),1===l?t[a].row.prependTo(i("#standings tbody")):t[a].row.insertAfter(t[a-1].row),a+=1,s();else a+=1,s()}}()}var m=h({all_captions:!0,problems:e.problems});i("#standings thead").append(m);for(var f=e.problems,g=[],v=0;v<e.problems.length;v++)g.push(e.problems[v].id);for(var b={},_=[],y=[],x=0;x<e.teams.length;x++){var w=new u(e.teams[x],f);b[w.id]=w,_.push(w.id),i("#standings tbody").append(w.row),y.push(w)}i("#standings tbody").append(h({all_captions:!1,problems:e.problems}));var S=e.runs;S.sort(function(t,e){return t.time-e.time});for(var k=[],T=0;T<S.length;T++){var C=S[T];C.judged&&"CE"!==C.result&&k.push(C)}var E=function(t){var e=0,n=y.length-1,a=0,s=!1,o=!1,l=!1,h=["resolver_reset","resolver_playback_step","resolver_playback_play","resolver_playback_pause","resolver_playback_skip","resolver_resolve_step","resolver_resolve_play","resolver_resolve_pause"];function d(){for(var t=0;t<h.length;t++)r(h[t]).prop("disabled",!0).css("color","gray")}function u(){var i={};e>0&&!l&&(i.resolver_reset=!0),e<t.length&&(l?i.resolver_playback_pause=!0:(i.resolver_playback_step=!0,i.resolver_playback_play=!0,i.resolver_playback_skip=!0)),e>=t.length&&n>=0&&(l?i.resolver_resolve_pause=!0:(i.resolver_resolve_step=!0,i.resolver_resolve_play=!0));for(var a=0;a<h.length;a++){var s=i.hasOwnProperty(h[a]);r(h[a]).prop("disabled",!s).css("color",s?"black":"gray")}}return{reset:function(){e=0,n=y.length-1,i("#standings tr").removeClass("highlight"),i("#standings td").removeClass("resolve-problem"),s=!1,o=!1,d();for(var t=0;t<_.length;t++)b[_[t]].reset();p(y,!1,u)},playback_step:function(){d();var i=t[e];b[i.team].handle_submission(i,!1),e+=1,p(y,!0,u)},playback_skip:function(){for(d();e<t.length;){var i=t[e];b[i.team].handle_submission(i,!1),e+=1}p(y,!1,u)},playback_play:function(){l=!0;var i=this,n=!0,a=!1;function s(){a||(i.playback_stop=null,l=!1,u())}function o(){var i=0===e?0:t[e-1].time;return 60*(t[e].time-i)*1e3*parseFloat(r("resolver_time_multiplier").val())}var h=null;this.playback_pause=function(){n=!1,d(),clearTimeout(h),s()},h=setTimeout(function i(){if(n){var r=t[e];b[r.team].handle_submission(r,!1),e+=1,a=!0,p(y,!0,function(){a=!1,e<t.length&&n?h=setTimeout(i,o()):s()})}else s()},o()),u()},resolve_step:function(t,e){function i(){t||u(),e&&e()}if(t||d(),s)if(o){for(var r=y[n].problems[g[a]],l=-1,h=0;h<r.pending.length;h++)r.pending[h].score>r.score&&(l<0||r.pending[h].score<l)&&(l=r.pending[h].score);l=Math.max(l,r.score);for(var m=0;m<r.pending.length;m++)r.pending[m].score<=l&&(y[n].handle_submission(r.pending[m],!0),m=-1);var v=y[n].row;y[n].problems[g[a]].cell.removeClass("resolve-problem"),c(y[n].row),p(y,!0,function(){v.removeClass("highlight"),s=!0,o=!1,a=0,y[n].row.addClass("highlight"),i()})}else{for(;a<f.length&&!(y[n].problems[g[a]].pending.length>0);)a+=1;a<f.length?(y[n].problems[g[a]].cell.addClass("resolve-problem"),o=!0):(y[n].row.removeClass("highlight"),a=0,(n-=1)>=0&&(y[n].row.addClass("highlight"),s=!0,o=!1)),n>=0&&c(y[n].row),i()}else y[n].row.addClass("highlight"),c(y[n].row),s=!0,i()},resolve_play:function(t){if(!(n<t)){l=!0;var e=this,i=!0,a=!1,s=null;this.resolve_pause=function(){i=!1,d(),clearTimeout(s),o()},u(),function l(){i?(a=!0,e.resolve_step(!0,function(){a=!1,n>=t?s=setTimeout(l,parseInt(r("resolver_resolve_timestep").val(),10)):o()})):o()}()}function o(){a||(e.resolve_stop=null,l=!1,u())}}}}(k);E.reset(),r("resolver_controls").submit(function(){return!1}),r("resolver_reset").click(function(){E.reset()}),r("resolver_playback_step").click(function(){E.playback_step()}),r("resolver_playback_play").click(function(){E.playback_play()}),r("resolver_playback_pause").click(function(){E.playback_pause()}),r("resolver_playback_skip").click(function(){E.playback_skip()}),r("resolver_resolve_step").click(function(){E.resolve_step()}),r("resolver_resolve_play").click(function(){E.resolve_play(parseInt(r("resolver_resolve_play_upto").val(),10))}),r("resolver_resolve_pause").click(function(){E.resolve_pause()}),i(a.document).on("keydown",function(t){var e=[];39===t.keyCode?e=["resolver_playback_step","resolver_resolve_step"]:32===t.keyCode&&(e=["resolver_playback_play","resolver_playback_pause","resolver_resolve_play","resolver_resolve_pause"]);for(var i=0;i<e.length;i++){var n=r(e[i]);if(!n.prop("disabled")){n.click();break}}}),l()})}})}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(0),n=t.jQuery,a=n.ns("Kattis");n.extend(n.ns("Kattis.views.contest.flexible_start"),{init:function(){},start:function(i){var s={session_id:this.data.session_id,csrf_token:this.data.csrf_token};n.ajax({type:"POST",url:e.k,contentType:"application/json",data:JSON.stringify(s)}).done(function(){t.location.reload()}).fail(function(t){a.error.show_xhr_msg(n(i),t)})}})}).call(this,i(2))},function(t,e,i){(function(t){var e=t,i=e.ace,n=e.getAceMode,a=e.jQuery;a.extend(a.ns("Kattis.views.submissions.create"),{init:function(){var t=this;this.editors=[],this.initProblemSelector(),this.initLanguageSelector(),this.initProblems(),this.initLanguages(),this.initEditors(),a("#submit-solution-form").on("submit",this.setEditorValues.bind(this));var e=a("#sub_files_input");e.on("change",this.onSubmissionFilesChanged.bind(this)),e.on("keydown",this.onSubmissionFilesKeyDown.bind(this)),e.each(function(e,i){t.update_file_list(i)}),this.mainBox(this.data.languages.default,this.data.form_mainclass),a('[name="editor_visible"]').click(this.onSwitchToEditor.bind(this)),a("#file-upload").click(this.onSwitchToFileUpload.bind(this)),a("#cancel").click(this.onCancelClicked.bind(this))},initProblemSelector:function(){var t=this.data.is_contest?"fulltitle":"problem_name";a("#problem_select").select2({placeholder:this.data.problems.placeholder,data:this.data.problems.available.map(function(e){return{id:e.problem_name,text:e[t]}})})},initLanguageSelector:function(){var t=a("#language_select");t.select2({placeholder:this.data.languages.placeholder,data:this.data.languages.available.map(function(t){return{id:t.language_name,text:t.language_name}})}),t.on("change",this.onLanguageChanged.bind(this))},initProblems:function(){this.problems={},this.data.problems.available.forEach(function(t){if(this.problems[t.problem_name]=t.problem_name,this.data.is_contest){var e=t.fulltitle.split(" - ")[0].toLowerCase();this.problems[e]=t.problem_name}},this)},initLanguages:function(){this.languages={},this.data.languages.available.forEach(function(t){this.languages[t.language_name]=!0},this)},onLanguageChanged:function(){this.setLanguage(this.getSelectedLanguage(),"")},initEditors:function(){var t=this;a(".source-code-editor").each(function(){var e=t.newEditor(this.id),i="ace/mode/".concat(n(t.data.languages.default));e.setTheme("ace/theme/textmate"),e.getSession().setMode(i),e.setShowPrintMargin(!1),e.session.setUseWorker(!1),a(this).parents("#editor_resize").resizable({handles:"se",grid:[1e4,1],resize:function(){e.resize()}})})},mainBox:function(e,i){var n,s=this.data.filecount>1||this.editors.length>1,o="",r="",l=!0,h=!0;if(0===(e=e.toLowerCase()).indexOf("java")&&0!==e.indexOf("javascript")?(n="java",h=!1):0===e.indexOf("javascript")&&s?n="javascript":0===e.indexOf("rust")?n="rust":0===e.indexOf("pascal")?n="pascal":0===e.indexOf("php")&&s?n="php":0===e.indexOf("python")&&s?n="python":0===e.indexOf("ruby")&&s?n="ruby":0===e.indexOf("scala")?(n="scala",h=!1):0===e.indexOf("kotlin")?(n="kotlin",h=!1):0===e.indexOf("common lisp")?n="lisp":l=!1,l){var d=this.data.main_box_msg[n];o=d.help,r=d.label}var c=a("#mainBox"),u=c.find("#main_select");i||(u.length>0&&(i=u.val()),s&&h&&(i=this.adjustFilename(i)));var p="";l&&(p=["<div class='form-group'>","<label for='main_select' title='".concat(o,"'>"),r,"</label>","<input class='form-control' id='main_select' title='".concat(o,"' type='text' name='mainclass' ")+"value='".concat(t.escapeHtml(i),"' tabindex='4' />"),"</div>"].join("")),c.html(p)},hideEditor:function(){a("input[name='type']").val("files"),a("#editor_resize").css("display","none")},showEditor:function(){a("input[name='type']").val("editor"),a("#editor_resize").css("display","block")},newEditor:function(t){var e=i.edit(t);return this.editors.push({name:t,editor:e}),e},setEditorValues:function(){for(var t=this.editors,e=0;e<t.length;++e){var i="".concat(t[e].name,"_submit"),n=t[e].editor.getValue();a("#".concat(i)).val(n)}},setEditorLanguage:function(t){for(var e="ace/mode/".concat(n(t)),i=this.editors,a=0;a<i.length;++a)i[a].editor.getSession().setMode(e)},setLanguage:function(t,e){this.setEditorLanguage(t),this.mainBox(t,e)},getSelectedLanguage:function(){return a("#language_select").val()},adjustFilename:function(t){if(!a("#file_dialog").is(":visible"))return t;var e=a("#sub_files_input")[0].files;if(!e)return t;for(var i=0;i<e.length;i++)if(/^[Mm]ain\./.test(e[i].name))return e[i].name;for(var n=0;n<e.length;n++)if(e[n].name===t)return t;return e[0]?e[0].name:t},fileDialogEnabled:function(t,e){var i=this.getSelectedLanguage();this.data.filecount=t.files?t.files.length:1,this.mainBox(i,e||"")},editorEnabled:function(){var t=this.getSelectedLanguage();this.data.filecount=1,this.mainBox(t,"")},submitForm:function(t){"function"==typeof t.submit?t.submit():t.submit.click()},isLanguageAvailable:function(t){return!!this.languages[t]},languageFromExtension:function(t,e){var i={c:"C","c#":"C#","c++":"C++",C:"C++",cc:"C++",cpp:"C++",cs:"C#",cxx:"C++",go:"Go",hs:"Haskell",java:"Java",js:"JavaScript (Node.js)",m:"Objective-C",pas:"Pascal",php:"PHP",pl:"Prolog",rb:"Ruby",scala:"Scala",sc:"Scala",kt:"Kotlin",rs:"Rust",ml:"OCaml",lisp:"Common Lisp",cl:"Common Lisp",cob:"COBOL",cbl:"COBOL",cpy:"COBOL"};if("C"===t)return"C++";if(t=t.toLowerCase(),i.hasOwnProperty(t))return i[t];if("h"===t){for(var n=!1,a=0;a<e.length;a++)"c"===e[a]&&(n=!0);return!this.isLanguageAvailable("C++")||this.isLanguageAvailable("C")&&n?"C":"C++"}return null},isPython2:function(t){if(!this.isLanguageAvailable("Python 2"))return!1;if(!this.isLanguageAvailable("Python 3"))return!0;var e=/^\s*\bprint\b *[^ (),\]]|\braw_input\b/,i=t.split("\n");if(0===t.lastIndexOf("#!",0)){if(-1!==i[0].indexOf("python2"))return!0;if(-1!==i[0].indexOf("python3"))return!1}for(var n=0;n<i.length;n++){var a=i[n],s=a.indexOf("#");if(-1!==s&&(a=a.substr(0,s)),e.test(a))return!0}return!1},readFile:function(t,e){var i=e.scope||this,n=new FileReader;n.onload=function(){var t=n.result,a=t.indexOf("base64,");-1!==a?(t=atob(t.substr(a+7)),e.success.call(i,t)):e.failure.call(i)},n.onabort=function(){e.failure.call(i)},n.onerror=n.onabort,n.readAsDataURL(t)},guessProblem:function(t,e){if(t)for(var i=0;i<t.length;i++){var n=t[i].name.toLowerCase(),a=n.indexOf(".");if(-1!==a&&(n=n.substr(0,a)),this.problems.hasOwnProperty(n))return void e.call(this,this.problems[n])}},extractMainFromPascal:function(t,e){return/^\s*[Pp]rogram\b/.test(e)?t:null},extractMainFromRust:function(t,e){return/\bfn main\(\)/.test(e)?t:null},extractMainFromJava:function(t,e){if(!/ main\s*\(/.test(e))return null;if(-1===e.indexOf("class ".concat(t))){var i=e.match(/\bclass\s*(\w+)/);t=i?i[1]:t}var n=e.match(/(?:\n|^)package +([\w.]+) *;/);return(n?"".concat(n[1],"."):"")+t},extractMainFromScala:function(t,e){if(!/ main\s*\(/.test(e))return null;if(-1===e.indexOf("class ".concat(t))&&-1===e.indexOf("object ".concat(t))){var i=e.match(/\b(?:class|object)\s*(\w+)/);t=i?i[1]:t}var n=e.match(/(?:\n|^)package +([\w.]+)/);return(n?"".concat(n[1],"."):"")+t},extractMainFromKotlin:function(t,e){if(!/\bfun\s+main\s*\(/.test(e))return null;var i=e.match(/(?:\n|^)package +([\w.]+)/);return(i?"".concat(i[1],"."):"")+t},guessMain:function(t,e,i,n,a,s){for(var o=0;o<t.length;o++)if(/^[Mm]ain\.\w+$/.test(t[o].name)&&this.languageFromExtension(e[o],e)===i)return void s(a(t[o].name));var r=0,l=function(){if(r>=t.length)s("");else{var o=t[r],h=o.name.split(".").reverse()[0]||"";if(r+=1,this.languageFromExtension(h,e)!==i)return void l();this.readFile(o,{success:function(t){var e=n(a(o.name),t);e?s(e):l()},failure:l,scope:this})}}.bind(this);l()},guessPython:function(t,e){this.readFile(t,{success:function(t){e(this.isPython2(t)?"Python 2":"Python 3")},failure:function(){e("Python 3")},scope:this})},guessLanguage:function(t,e){for(var i=t?t.length:0,n=[],a=0;a<i;a++)n.push(t[a].name.split(".").reverse()[0]||"");function s(t){return t.split(".").slice(0,-1).join(".")}function o(t){var e=s(t);return"".concat(e.charAt(0).toUpperCase()+e.slice(1),"Kt")}function r(t){return t}for(var l=0;l<i;l++){var h=t[l],d=n[l],c=this.languageFromExtension(d,n),u=e.bind(null,c);if("Java"===c)return void this.guessMain(t,n,c,this.extractMainFromJava,s,u);if("Scala"===c)return void this.guessMain(t,n,c,this.extractMainFromScala,s,u);if("Kotlin"===c)return void this.guessMain(t,n,c,this.extractMainFromKotlin,o,u);if("Rust"===c)return void this.guessMain(t,n,c,this.extractMainFromRust,r,u);if("Common Lisp"===c){return void this.guessMain(t,n,c,function(t){return t},s,u)}if("Pascal"===c)return void this.guessMain(t,n,c,this.extractMainFromPascal,r,u);if(null!==c)return void e(c);if("py"===d)return void this.guessPython(h,e)}e()},update_file_list:function(t){var e=a(t).parent();if(e.removeClass("has_files"),0!==t.files.length){e.addClass("has_files");var i=e.find(".file_list");i.empty();for(var n=0;n<t.files.length;++n)i.append(a("<li/>").text(t.files[n].name))}},onSubmissionFilesChanged:function(t){var e=this,i=t.target;this.hideEditor(),a("#cancel").prop("disabled",!1),this.guessLanguage(i.files,function(t,n){if(t&&e.isLanguageAvailable(t)){var s=a("#language_select");s.val(t),s.trigger("change")}e.fileDialogEnabled(i,n)});var n=a("#problem_select");n&&!n.val()&&this.guessProblem(i.files,function(t){n.val(t),n.trigger("change")}),this.update_file_list(i)},onSubmissionFilesKeyDown:function(t){13===t.which&&t.ctrlKey&&(this.submitForm(t.target.form),t.preventDefault(),t.stopPropagation())},onSwitchToEditor:function(){this.showEditor(),a("#file_dialog").hide(),a("#editor_dialog").show(),a("#cancel").prop("disabled",!1),this.editorEnabled()},onSwitchToFileUpload:function(){this.hideEditor(),a("#file_dialog").show(),a("#editor_dialog").hide(),a("#cancel").prop("disabled",!0)},onCancelClicked:function(){t.location=this.data.location}})}).call(this,i(2))},function(t,e,i){(function(t){var e,i,n=t.jQuery;n.extend(n.ns("Kattis.views.recruiting.view_candidate"),(e={MIN_DIFFICULTY:1,MAX_DIFFICULTY:10,PDF_CURVE_STEPS:30,init:function(){this.checkModalDialogs(),this.data.has_recruiter_rights||this.drawGraph(),this.initTests()},checkModalDialogs:function(){["#assign-tasks","#request-ratings","#request-test"].forEach(function(e){t.location.hash===e&&n(e).modal("show")})},initTests:function(){var t=n("#test-summary");t.circliful(),0!==this.data.tests.length&&n(".circle-text-half").replaceWith(function(){var e=n.trim(n(this).text()),i=n.trim(t.data("link"));return i&&(e='<a href="'.concat(i,'">').concat(e,"</a>")),'<span class="circle-text-half" style="line-height: 179.31px; font-size: 40px;">'.concat(e,"</span>")})},getPixelRatio:function(e){var i=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(t.devicePixelRatio||1)/i},rayleigh:function(t){var e=Math.pow(2.8385,2);return t/e*Math.exp(-t*t/(2*e))},renderPDFcurve:function(t,e){for(var i,n=[],a=0,s=0;s<this.PDF_CURVE_STEPS;++s){i=(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY)*s/this.PDF_CURVE_STEPS+this.MIN_DIFFICULTY;var o=this.rayleigh(i);a=Math.max(a,o),n.push([i,o])}var r=t.height,l=t.width;e.translate(0,-77.5),e.beginPath(),e.moveTo(0,r);for(var h=0;h<n.length;++h){i=n[h][0]*l/(this.MAX_DIFFICULTY-this.MIN_DIFFICULTY+1);var d=r-n[h][1]*(r-77.5)/a*.9;e.lineTo(i,d)}e.lineTo(i,r),e.closePath(),e.fillStyle="#E7E7E7",e.fill()},drawGraphTail:function(t,e){if(this.data.is_set_hardest_accepted){var i=t.height,n=t.width;e.globalCompositeOperation="source-atop",e.beginPath();var a=this.data.hardest_accepted_array,s=this.data.hardest_accepted_after;e.moveTo(a.problem_difficulty*(n/10)-50,50),e.lineTo(s.problem_difficulty*(n/10)-50,50),e.lineTo(s.problem_difficulty*(n/10)-50,i),e.lineTo(a.problem_difficulty*(n/10)-50,i),e.closePath(),e.fillStyle="#449fe1",e.fill(),e.globalCompositeOperation="source-over"}},drawBreakpoint:function(t,e){for(var i=t.height,n=t.width,a=[this.data.recommendation_limit],s=[],o=0;o<a.length;o++)s.push(a[o]*(n/10)-50);for(var r=0;r<s.length;r++)e.beginPath(),e.lineWidth=10,e.strokeStyle="black",e.moveTo(s[r],20),e.lineTo(s[r],i),e.strokeStyle="#f0b034",e.stroke()},drawXAxisTicks:function(t,e){for(var i=t.height,n=t.width,a=1;a<=this.MAX_DIFFICULTY;a++)e.font="bold 24px Arial",e.fillStyle="#1E1E1E",e.fillText(a,n/10*a-57,i+36)},drawProblemsInfo:function(t,e){for(var i=t.height,n=t.width,a=[],s=[],o=[],r=0;r<this.data.values_to_plot.length;++r){var l=this.data.values_to_plot[r];a.push(l.problem_difficulty),!0===l.solved?o.push("#52BB50"):!1===l.solved?o.push("#F20708"):o.push("#C7C7C7")}for(var h=0;h<a.length;h++)s.push(a[h]*(n/10)-50);for(var d=this.data.height_top_offset,c=0;c<s.length;c++)e.beginPath(),e.lineWidth=2,e.strokeStyle="black",e.moveTo(s[c],d),e.lineTo(s[c],i),e.stroke();s.forEach(function(t,i){e.beginPath(),e.arc(t,d,10,0,2*Math.PI,!1),e.fillStyle=o[i],e.fill(),e.lineWidth=2,e.stroke()})},drawGraph:function(){var t=document.getElementById("curve");if(t){var e=this.data.initial_width,i=t.getContext("2d");t.width=2*e,t.height=360,t.style.width="".concat(e,"px"),t.style.height="".concat(180,"px"),i.scale(this.getPixelRatio,this.getPixelRatio),this.renderPDFcurve(t,i),this.drawXAxisTicks(t,i),this.drawGraphTail(t,i),this.drawBreakpoint(t,i),this.drawProblemsInfo(t,i)}}},i=!1,{init:function(){i||(i=!0,e.data=this.data,this.data=null,e.init())}}))}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e,n,a=i(0),s=i(1),o=t,r=o.jQuery,l=o.tmpl,h=r.ns("Kattis");r.extend(r.ns("Kattis.views.admin.course_offering_edit"),(e={init:function(){this.createBtn=r(".create-btn"),r(".field_toggle_null").on("change",this.onCheckboxClick.bind(this)),r("#offering_offering_short_name").on("keyup input",this.onOfferingShortNameChanged.bind(this)),r("#offering_offering_end").on("change keyup input",this.onOfferingEndChanged.bind(this)),r("#offering_offering_registration_key").on("change keyup input",this.onRegistrationKeyChanged.bind(this)),r(".course-offering-form input[pattern], .course-offering-form input[type=checkbox]").on("change keyup input",this.onFormFieldChanged.bind(this)),this.initTeachers(),this.initSessions()},initTeachers:function(){this.teacher_tbody=r(".table-teachers tbody"),this.teacher_tmpl=l("teacher_tmpl"),r(".add-teacher-btn").on("click",this.onAddTeacher.bind(this)),r(".add-teacher-username").bind("change keyup input",function(){r(".add-teacher-btn").prop("disabled",""===r(this).val())}),r(".add-teacher-username").keypress(function(t){if(13===t.keyCode&&!r(".add-teacher-btn").prop("disabled"))return r(".add-teacher-btn").click(),t.preventDefault(),!1}),this.data.teachers.forEach(function(t,e){this.addTeacherRow({teacher_no:e,name:t.name,username:t.username,link:"".concat(a.s,"/").concat(t.username),teaching_assistant:t.teaching_assistant,teaching_assistant_checked:t.teaching_assistant?"checked":""},!1)},this),this.teacher_no=this.data.teachers.length},initSessions:function(){this.session_tbody=r(".table-sessions tbody"),this.session_tmpl_old=l("session_tmpl_old"),this.session_tmpl_new=l("session_tmpl_new"),r("#input_session_name").on("change keyup",function(t){var e=!r.trim(r(t.target).val());r(".add_session").attr("disabled",e)}),r(".add_session").on("click",this.onAddSession.bind(this)),this.data.sessions.forEach(function(t,e){var i=t.short_name?a.r.replace("{0}",t.short_name):"";this.addSessionRow({session_no:e,short_name:t.short_name,session_name:t.session_name,link:i},!1)},this),this.session_no=this.data.sessions.length},addTeacherRow:function(t,e){var i=r(this.teacher_tmpl(t)),n=e?i.children("td"):r();i.find(".remove-teacher-btn").bind("click",this.onRemoveTeacher.bind(this)),n.attr("style","display: none;"),this.teacher_tbody.append(i),n.slideDown("fast")},addSessionRow:function(t,e){var i=void 0===t.short_name?this.session_tmpl_new:this.session_tmpl_old,n=r(i(t)),a=e?n.children("td"):r();n.find(".remove-session-btn").bind("click",this.onRemoveSession.bind(this)),a.attr("style","display: none;"),this.session_tbody.append(n),a.slideDown("fast")},removeTableRow:function(t){t.children("td").slideUp("fast",function(){t.remove()})},isValid:function(){for(var t=r(".course-offering-form input[pattern]:not([disabled])").toArray(),e=r(".course-offering-form .form-group.has-error"),i=r(".course-offering-form span.fa"),n=0===e.length&&0===i.length,a=0;a<t.length;++a){var s=r(t[a]);n=n&&this.isPatternFieldValid(s)}return n},updateCreateBtn:function(){this.createBtn.prop("disabled",!this.isValid())},onFormFieldChanged:function(t){9!==t.keyCode&&16!==t.keyCode&&(r(t.target).closest("div.form-group").addClass("has-warning"),this.updateCreateBtn())},toggleInputValidation:function(t,e){t.parents(".form-group").toggleClass("has-error",!e)},isPatternFieldValid:function(t){return new RegExp(t.attr("pattern")).test(t.val())},validatePatternField:function(t){var e=this.isPatternFieldValid(t);return this.toggleInputValidation(t,e),e},onRegistrationKeyChanged:function(t){this.validatePatternField(r(t.target))},onOfferingEndChanged:function(t){var e=r(t.target),i=e.val();if(this.validatePatternField(e)){var n="infinity"===i||Object(s.b)(i);this.toggleInputValidation(e,n)}},onOfferingShortNameChanged:function(t){var e=this,i=r(t.target),n=i.parent().children("span"),s=i.val(),o="fa fa-spinner fa-spin",l="glyphicon glyphicon-remove text-danger",h="glyphicon glyphicon-ok text-success",d=[o,l,h].join(" ");if(this.call_id=(this.call_id||0)+1,this.hintTimeout&&(clearTimeout(this.hintTimeout),this.hintTimeout=null),this.validatePatternField(i)){if(this.data.offering_short_name===s)return n.removeClass(d),void this.toggleInputValidation(i,!0);n.removeClass(d).addClass(o),this.createBtn.prop("disabled",!0),this.hintTimeout=setTimeout(function(t){r.ajax({type:"GET",url:a.c,data:{course_short_name:e.data.course_short_name,offering_short_name:s},context:e}).always(function(){n.removeClass(d)}).done(function(e){t===this.call_id&&(this.toggleInputValidation(i,e.response.available),n.addClass(e.response.available?h:l),this.updateCreateBtn())}).fail(function(){t===this.call_id&&(this.toggleInputValidation(i,!1),n.addClass(l),this.updateCreateBtn())})},750,this.call_id)}else n.removeClass(d)},onCheckboxClick:function(t){var e=r(t.target),i=e.prop("checked"),n=e.data("toggleid"),a=r("#".concat(n));a.prop("disabled",!i),i?this.validatePatternField(a):this.toggleInputValidation(a,!0)},onRemoveTeacher:function(t){var e=r(t.target);e.prop("disabled",!0);var i=e.closest("tr");if(this.data.is_new)return this.removeTableRow(i),i.closest("div.form-group").addClass("has-warning"),void this.updateCreateBtn();var n={course_short_name:this.data.course_short_name,offering_short_name:this.data.offering_short_name,user_name:i.attr("data-username"),csrf_token:this.data.csrf_token};r.ajax({type:"DELETE",url:a.d,contentType:"application/json",data:JSON.stringify(n),context:this}).done(function(){this.removeTableRow(i)}).fail(function(t){e.prop("disabled",!1),h.error.show_xhr_msg(e,t)})},onAddTeacher:function(t){var e=r(t.target),i=r(".add-teacher-username"),n=i.val(),s=r(".add-teacher-teaching-assistant"),o=s.prop("checked");e.prop("disabled",!0);var l={always:function(){i.focus()},done:function(t){i.val(""),s.prop("checked",!0),this.addTeacherRow({teacher_no:this.teacher_no,username:t.response.username,name:t.response.name,link:"".concat(a.s,"/").concat(t.response.username),teaching_assistant:o,teaching_assistant_checked:o?"checked":""},!0),this.teacher_no+=1,this.data.is_new&&(i.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn())},fail:function(t){e.prop("disabled",!1),h.error.show_xhr_msg(e,t)},scope:this};this.data.is_new?this.getAuthor(n,l):this.postTeacher(n,o,l)},postTeacher:function(t,e,i){var n={course_short_name:this.data.course_short_name,offering_short_name:this.data.offering_short_name,user_name:t,teaching_assistant:e,csrf_token:this.data.csrf_token};r.ajax({type:"POST",url:a.d,contentType:"application/json",data:JSON.stringify(n),context:i.scope||this}).always(i.always).done(i.done).fail(i.fail)},getAuthor:function(t,e){r.ajax({type:"GET",url:a.a,contentType:"application/json",data:{username:t},context:e.scope||this}).always(e.always).done(e.done).fail(e.fail)},onRemoveSession:function(t){var e=r(t.target);this.removeTableRow(e.closest("tr")),e.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn()},onAddSession:function(){var t=r("#input_session_name"),e=r("#session_register_all_students"),i={session_name:t.val(),register_students:e.prop("checked"),session_no:this.session_no};this.session_no+=1,this.addSessionRow(i,!0),t.closest("div.form-group").addClass("has-warning"),this.updateCreateBtn(),t.val(""),r(".add_session").attr("disabled",!0)}},n=!1,{init:function(t){n||(n=!0,e.data=t,e.init())}}))}).call(this,i(2))},function(t,e,i){"use strict";(function(t){var e=i(3),n=i(4),a=t.jQuery,s=a.ns("Kattis");a.extend(a.ns("Kattis.main"),{init:function(){a(".selectify-this").select2(),a('[data-toggle="tooltip"]').tooltip(),a(".site-search > a").on("click",function(){a(this).parent().find("input").focus()}),a(".site-search > input").on("focus",function(){a(this).parent().addClass("active")}),a("body").on("click",function(t){a(".site-search").each(function(){a(this).is(t.target)||0!==a(this).has(t.target).length||a(this).removeClass("active")})}),a("#filter li a").click(function(){var t=a(this).text(),e=a(this).parent().attr("data-value");a("#main_filter_text").text(t),a("#filter_by").val(e),"all"===e?a("#filter_by_value").prop("disabled",!0):a("#filter_by_value").prop("disabled",!1).focus()})}});var o,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};t.escapeHtml=function(t){return String(t).replace(/[&<>"'\/]/g,function(t){return r[t]})},a.extend(a.ns("Kattis"),(o={"page-master-layout":s.main,"page-contest":s.views.contest.header,"page-contest-edit":s.views.contest.edit,"page-contest-resolver":s.views.contest.resolver,"page-submit":s.views.submissions.create,"page-problem":{init:n.a},"page-view-candidate":s.views.recruiting.view_candidate,"page-course-offering-edit":s.views.admin.course_offering_edit,"page-commentary":{init:e.a}},{init:function(){document.body.attributes.class.value.split(/\s+/g).forEach(this.run_module,this)},run_module:function(t){var e=document.body.dataset.kattis,i="string"==typeof e?JSON.parse(e):void 0;o[t]&&o[t].init.call(o[t],i)}})),a(s.init.bind(s))}).call(this,i(2))},,function(t,e,i){"use strict";i.r(e);i(15),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12)},function(t,e,n){(function(t){var e,n=t,a=n.jQuery,s=n.Raphael;!function(){for(var e,i=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],a=n.length,s=t.console=t.console||{};a--;)s[e=n[a]]||(s[e]=i)}(),function(){var e,n,o,r,l=[].slice,h={}.hasOwnProperty,d=function(t,e){for(var i in e)h.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},c=function(t,e){return function(){return t.apply(e,arguments)}},u=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};n=t.Morris={},e=a,n.EventEmitter=function(){function t(){}return t.prototype.on=function(t,e){return null==this.handlers&&(this.handlers={}),null==this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e)},t.prototype.fire=function(){var t,e,i,n,a,s,o;if(i=arguments[0],t=2<=arguments.length?l.call(arguments,1):[],null!=this.handlers&&null!=this.handlers[i]){for(o=[],n=0,a=(s=this.handlers[i]).length;n<a;n++)e=s[n],o.push(e.apply(null,t));return o}},t}(),n.commas=function(t){var e,i,n,a;return null!=t?(n=t<0?"-":"",e=Math.abs(t),n+=(i=Math.floor(e).toFixed(0)).replace(/(?=(?:\d{3})+$)(?!^)/g,","),(a=e.toString()).length>i.length&&(n+=a.slice(i.length)),n):"-"},n.pad2=function(t){return(t<10?"0":"")+t},n.Grid=function(t){function a(t){var i=this;if("string"==typeof t.element?this.el=e(document.getElementById(t.element)):this.el=e(t.element),null==this.el||0===this.el.length)throw new Error("Graph container element not found");"static"===this.el.css("position")&&this.el.css("position","relative"),this.options=e.extend({},this.gridDefaults,this.defaults||{},t),"string"==typeof this.options.units&&(this.options.postUnits=t.units),this.raphael=new s(this.el[0]),this.elementWidth=null,this.elementHeight=null,this.dirty=!1,this.init&&this.init(),this.setData(this.options.data),this.el.bind("mousemove",function(t){var e;return e=i.el.offset(),i.fire("hovermove",t.pageX-e.left,t.pageY-e.top)}),this.el.bind("mouseout",function(t){return i.fire("hoverout")}),this.el.bind("touchstart touchmove touchend",function(t){var e,n;return n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],e=i.el.offset(),i.fire("hover",n.pageX-e.left,n.pageY-e.top),n}),this.postInit&&this.postInit()}return d(a,t),a.prototype.gridDefaults={dateFormat:null,axes:!0,grid:!0,gridLineColor:"#aaa",gridStrokeWidth:.5,gridTextColor:"#888",gridTextSize:12,hideHover:!1,yLabelFormat:null,numLines:5,padding:25,parseTime:!0,postUnits:"",preUnits:"",ymax:"auto",ymin:"auto 0",goals:[],goalStrokeWidth:1,goalLineColors:["#666633","#999966","#cc6666","#663333"],events:[],eventStrokeWidth:1,eventLineColors:["#005a04","#ccffbb","#3a5f0b","#005502"]},a.prototype.setData=function(t,e){var i,a,s,o,r,l,h,d,c,u,p,m;return null==e&&(e=!0),null==t||0===t.length?(this.data=[],this.raphael.clear(),void(null!=this.hover&&this.hover.hide())):(u=this.cumulative?0:null,p=this.cumulative?0:null,this.options.goals.length>0&&(r=Math.min.apply(null,this.options.goals),o=Math.max.apply(null,this.options.goals),p=null!=p?Math.min(p,r):r,u=null!=u?Math.max(u,o):o),this.data=function(){var e,i,o;for(o=[],s=e=0,i=t.length;e<i;s=++e)h=t[s],(l={}).label=h[this.options.xkey],this.options.parseTime?(l.x=n.parseDate(l.label),this.options.dateFormat?l.label=this.options.dateFormat(l.x):"number"==typeof l.label&&(l.label=new Date(l.label).toString())):l.x=s,d=0,l.y=function(){var t,e,i,n;for(i=this.options.ykeys,n=[],a=t=0,e=i.length;t<e;a=++t)c=i[a],"string"==typeof(m=h[c])&&(m=parseFloat(m)),null!=m&&"number"!=typeof m&&(m=null),null!=m&&(this.cumulative?d+=m:null!=u?(u=Math.max(m,u),p=Math.min(m,p)):u=p=m),this.cumulative&&null!=d&&(u=Math.max(d,u),p=Math.min(d,p)),n.push(m);return n}.call(this),o.push(l);return o}.call(this),this.options.parseTime&&(this.data=this.data.sort(function(t,e){return(t.x>e.x)-(e.x>t.x)})),this.xmin=this.data[0].x,this.xmax=this.data[this.data.length-1].x,this.events=[],this.options.parseTime&&this.options.events.length>0&&(this.events=function(){var t,e,a,s;for(s=[],t=0,e=(a=this.options.events).length;t<e;t++)i=a[t],s.push(n.parseDate(i));return s}.call(this),this.xmax=Math.max(this.xmax,Math.max.apply(null,this.events)),this.xmin=Math.min(this.xmin,Math.min.apply(null,this.events))),this.xmin===this.xmax&&(this.xmin-=1,this.xmax+=1),this.ymin=this.yboundary("min",p),this.ymax=this.yboundary("max",u),this.ymin===this.ymax&&(p&&(this.ymin-=1),this.ymax+=1),this.yInterval=(this.ymax-this.ymin)/(this.options.numLines-1),this.yInterval>0&&this.yInterval<1?this.precision=-Math.floor(Math.log(this.yInterval)/Math.log(10)):this.precision=0,this.dirty=!0,e?this.redraw():void 0)},a.prototype.yboundary=function(t,e){var i,n;return"string"==typeof(i=this.options["y"+t])?"auto"===i.slice(0,4)?i.length>5?(n=parseInt(i.slice(5),10),null==e?n:Math[t](e,n)):null!=e?e:0:parseInt(i,10):i},a.prototype._calc=function(){var t,e,i;if(i=this.el.width(),t=this.el.height(),(this.elementWidth!==i||this.elementHeight!==t||this.dirty)&&(this.elementWidth=i,this.elementHeight=t,this.dirty=!1,this.left=this.options.padding,this.right=this.elementWidth-this.options.padding,this.top=this.options.padding,this.bottom=this.elementHeight-this.options.padding,this.options.axes&&(e=Math.max(this.measureText(this.yAxisFormat(this.ymin),this.options.gridTextSize).width,this.measureText(this.yAxisFormat(this.ymax),this.options.gridTextSize).width),this.left+=e,this.bottom-=1.5*this.options.gridTextSize),this.width=this.right-this.left,this.height=this.bottom-this.top,this.dx=this.width/(this.xmax-this.xmin),this.dy=this.height/(this.ymax-this.ymin),this.calc))return this.calc()},a.prototype.transY=function(t){return this.bottom-(t-this.ymin)*this.dy},a.prototype.transX=function(t){return 1===this.data.length?(this.left+this.right)/2:this.left+(t-this.xmin)*this.dx},a.prototype.redraw=function(){if(this.raphael.clear(),this._calc(),this.drawGrid(),this.drawGoals(),this.drawEvents(),this.draw)return this.draw()},a.prototype.drawGoals=function(){var t,e,i,n,a,s;for(s=[],e=i=0,n=(a=this.options.goals).length;i<n;e=++i)t=a[e],s.push(this.drawGoal("M"+this.left+","+this.transY(t)+"H"+(this.left+this.width)));return s},a.prototype.drawEvents=function(){var t,e,i,n,a,s;for(s=[],e=i=0,n=(a=this.events).length;i<n;e=++i)t=a[e],s.push(this.drawEvent("M"+this.transX(t)+","+this.bottom+"V"+this.top));return s},a.prototype.drawGrid=function(){var t,e,i,n,a,s,o,r;if(!1!==this.options.grid||!1!==this.options.axes){for(t=this.ymin,e=this.ymax,r=[],i=s=t,o=this.yInterval;t<=e?s<=e:s>=e;i=s+=o)n=parseFloat(i.toFixed(this.precision)),a=this.transY(n),this.options.axes&&this.drawYAxisLabel(this.left-this.options.padding/2,a,this.yAxisFormat(n)),this.options.grid?r.push(this.drawGridLine("M"+this.left+","+a+"H"+(this.left+this.width))):r.push(void 0);return r}},a.prototype.measureText=function(t,e){var i,n;return null==e&&(e=12),i=(n=this.raphael.text(100,100,t).attr("font-size",e)).getBBox(),n.remove(),i},a.prototype.yAxisFormat=function(t){return this.yLabelFormat(t)},a.prototype.yLabelFormat=function(t){return"function"==typeof this.options.yLabelFormat?this.options.yLabelFormat(t):""+this.options.preUnits+n.commas(t)+this.options.postUnits},a.prototype.updateHover=function(t,e){var i,n;if(null!=(i=this.hitTest(t,e)))return(n=this.hover).update.apply(n,i)},a.prototype.drawGoal=function(t){return this.raphael.path(t).attr("stroke",this.options.goalLineColors[i%this.options.goalLineColors.length]).attr("stroke-width",this.options.goalStrokeWidth)},a.prototype.drawEvent=function(t){return this.raphael.path(t).attr("stroke",this.options.eventLineColors[i%this.options.eventLineColors.length]).attr("stroke-width",this.options.eventStrokeWidth)},a.prototype.drawYAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor).attr("text-anchor","end")},a.prototype.drawGridLine=function(t){return this.raphael.path(t).attr("stroke",this.options.gridLineColor).attr("stroke-width",this.options.gridStrokeWidth)},a}(n.EventEmitter),n.parseDate=function(t){var e,i,n,a,s,o,r,l,h,d,c;return"number"==typeof t?t:(i=t.match(/^(\d+) Q(\d)$/),a=t.match(/^(\d+)-(\d+)$/),s=t.match(/^(\d+)-(\d+)-(\d+)$/),r=t.match(/^(\d+) W(\d+)$/),l=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/),h=t.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/),i?new Date(parseInt(i[1],10),3*parseInt(i[2],10)-1,1).getTime():a?new Date(parseInt(a[1],10),parseInt(a[2],10)-1,1).getTime():s?new Date(parseInt(s[1],10),parseInt(s[2],10)-1,parseInt(s[3],10)).getTime():r?(4!==(d=new Date(parseInt(r[1],10),0,1)).getDay()&&d.setMonth(0,1+(4-d.getDay()+7)%7),d.getTime()+6048e5*parseInt(r[2],10)):l?l[6]?(o=0,"Z"!==l[6]&&(o=60*parseInt(l[8],10)+parseInt(l[9],10),"+"===l[7]&&(o=0-o)),Date.UTC(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)+o)):new Date(parseInt(l[1],10),parseInt(l[2],10)-1,parseInt(l[3],10),parseInt(l[4],10),parseInt(l[5],10)).getTime():h?(c=parseFloat(h[6]),e=Math.floor(c),n=Math.round(1e3*(c-e)),h[8]?(o=0,"Z"!==h[8]&&(o=60*parseInt(h[10],10)+parseInt(h[11],10),"+"===h[9]&&(o=0-o)),Date.UTC(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10)+o,e,n)):new Date(parseInt(h[1],10),parseInt(h[2],10)-1,parseInt(h[3],10),parseInt(h[4],10),parseInt(h[5],10),e,n).getTime()):new Date(parseInt(t,10),0,1).getTime())},n.Hover=function(){function t(t){null==t&&(t={}),this.options=e.extend({},n.Hover.defaults,t),this.el=e("<div class='"+this.options.class+"'></div>"),this.el.hide(),this.options.parent.append(this.el)}return t.defaults={class:"morris-hover morris-default-style"},t.prototype.update=function(t,e,i){return this.html(t),this.show(),this.moveTo(e,i)},t.prototype.html=function(t){return this.el.html(t)},t.prototype.moveTo=function(t,e){var i,n,a,s,o,r;return o=this.options.parent.innerWidth(),s=this.options.parent.innerHeight(),n=this.el.outerWidth(),i=this.el.outerHeight(),a=Math.min(Math.max(0,t-n/2),o-n),null!=e?(r=e-i-10)<0&&(r=e+10)+i>s&&(r=s/2-i/2):r=s/2-i/2,this.el.css({left:a+"px",top:r+"px"})},t.prototype.show=function(){return this.el.show()},t.prototype.hide=function(){return this.el.hide()},t}(),n.Line=function(t){function e(t){if(this.hilight=c(this.hilight,this),this.onHoverOut=c(this.onHoverOut,this),this.onHoverMove=c(this.onHoverMove,this),!(this instanceof n.Line))return new n.Line(t);e.__super__.constructor.call(this,t)}return d(e,t),e.prototype.init=function(){if(this.pointGrow=s.animation({r:this.options.pointSize+3},25,"linear"),this.pointShrink=s.animation({r:this.options.pointSize},25,"linear"),"always"!==this.options.hideHover)return this.hover=new n.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)},e.prototype.defaults={lineWidth:3,pointSize:4,lineColors:["#0b62a4","#7A92A3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],pointWidths:[1],pointStrokeColors:["#ffffff"],pointFillColors:[],smooth:!0,xLabels:"auto",xLabelFormat:null,xLabelMargin:50,continuousLine:!0,hideHover:!1},e.prototype.calc=function(){return this.calcPoints(),this.generatePaths()},e.prototype.calcPoints=function(){var t,e,i,n,a,s;for(s=[],i=0,n=(a=this.data).length;i<n;i++)(t=a[i])._x=this.transX(t.x),t._y=function(){var i,n,a,s;for(s=[],i=0,n=(a=t.y).length;i<n;i++)null!=(e=a[i])?s.push(this.transY(e)):s.push(e);return s}.call(this),s.push(t._ymax=Math.min.apply(null,[this.bottom].concat(function(){var i,n,a,s;for(s=[],i=0,n=(a=t._y).length;i<n;i++)null!=(e=a[i])&&s.push(e);return s}())));return s},e.prototype.hitTest=function(t,e){var i,n,a,s;if(0===this.data.length)return null;for(i=n=0,a=(s=this.data.slice(1)).length;n<a&&!(t<(s[i]._x+this.data[i]._x)/2);i=++n);return i},e.prototype.onHoverMove=function(t,e){var i;return i=this.hitTest(t,e),this.displayHoverForRow(i)},e.prototype.onHoverOut=function(){if("auto"===this.options.hideHover)return this.displayHoverForRow(null)},e.prototype.displayHoverForRow=function(t){var e;return null!=t?((e=this.hover).update.apply(e,this.hoverContentForRow(t)),this.hilight(t)):(this.hover.hide(),this.hilight())},e.prototype.hoverContentForRow=function(t){var e,i,n,a,s,o,r;if(n=this.data[t],"function"==typeof this.options.hoverCallback)e=this.options.hoverCallback(t,this.options);else for(e="<div class='morris-hover-row-label'>"+n.label+"</div>",i=s=0,o=(r=n.y).length;s<o;i=++s)a=r[i],e+="<div class='morris-hover-point' style='color: "+this.colorFor(n,i,"label")+"'>\n  "+this.options.labels[i]+":\n  "+this.yLabelFormat(a)+"\n</div>";return[e,n._x,n._ymax]},e.prototype.generatePaths=function(){var t,e,i,a,s;return this.paths=function(){var o,r,l,h;for(h=[],i=o=0,r=this.options.ykeys.length;0<=r?o<r:o>r;i=0<=r?++o:--o)s=!0===this.options.smooth||(l=this.options.ykeys[i],u.call(this.options.smooth,l)>=0),e=function(){var t,e,n,s;for(s=[],t=0,e=(n=this.data).length;t<e;t++)void 0!==(a=n[t])._y[i]&&s.push({x:a._x,y:a._y[i]});return s}.call(this),this.options.continuousLine&&(e=function(){var i,n,a;for(a=[],i=0,n=e.length;i<n;i++)null!==(t=e[i]).y&&a.push(t);return a}()),e.length>1?h.push(n.Line.createPath(e,s,this.bottom)):h.push(null);return h}.call(this)},e.prototype.draw=function(){if(this.options.axes&&this.drawXAxis(),this.drawSeries(),!1===this.options.hideHover)return this.displayHoverForRow(this.data.length-1)},e.prototype.drawXAxis=function(){var t,e,i,a,s,o,r,l,h,d=this;for(o=this.bottom+1.25*this.options.gridTextSize,a=null,t=function(t,e){var i,n;return n=(i=d.drawXAxisLabel(d.transX(e),o,t)).getBBox(),(null==a||a>=n.x+n.width)&&n.x>=0&&n.x+n.width<d.el.width()?a=n.x-d.options.xLabelMargin:i.remove()},(i=this.options.parseTime?1===this.data.length&&"auto"===this.options.xLabels?[[this.data[0].label,this.data[0].x]]:n.labelSeries(this.xmin,this.xmax,this.width,this.options.xLabels,this.options.xLabelFormat):function(){var t,e,i,n;for(n=[],t=0,e=(i=this.data).length;t<e;t++)s=i[t],n.push([s.label,s.x]);return n}.call(this)).reverse(),h=[],r=0,l=i.length;r<l;r++)e=i[r],h.push(t(e[0],e[1]));return h},e.prototype.drawSeries=function(){var t,e,i,n,a,s,o,r,l;for(e=a=o=this.options.ykeys.length-1;o<=0?a<=0:a>=0;e=o<=0?++a:--a)null!==(i=this.paths[e])&&this.drawLinePath(i,this.colorFor(n,e,"line"));for(this.seriesPoints=function(){var t,i,n;for(n=[],e=t=0,i=this.options.ykeys.length;0<=i?t<i:t>i;e=0<=i?++t:--t)n.push([]);return n}.call(this),l=[],e=s=r=this.options.ykeys.length-1;r<=0?s<=0:s>=0;e=r<=0?++s:--s)l.push(function(){var i,a,s,o;for(o=[],i=0,a=(s=this.data).length;i<a;i++)n=s[i],t=null!=n._y[e]?this.drawLinePoint(n._x,n._y[e],this.options.pointSize,this.colorFor(n,e,"point"),e):null,o.push(this.seriesPoints[e].push(t));return o}.call(this));return l},e.createPath=function(t,e,i){var a,s,o,r,l,h,d,c,u,p;for(d="",e&&(o=n.Line.gradients(t)),c={y:null},r=u=0,p=t.length;u<p;r=++u)null!=(a=t[r]).y&&(null!=c.y?e?(s=o[r],h=o[r-1],l=(a.x-c.x)/4,d+="C"+(c.x+l)+","+Math.min(i,c.y+l*h)+","+(a.x-l)+","+Math.min(i,a.y-l*s)+","+a.x+","+a.y):d+="L"+a.x+","+a.y:e&&null==o[r]||(d+="M"+a.x+","+a.y)),c=a;return d},e.gradients=function(t){var e,i,n,a,s,o,r,l;for(i=function(t,e){return(t.y-e.y)/(t.x-e.x)},l=[],n=o=0,r=t.length;o<r;n=++o)null!=(e=t[n]).y?(a=t[n+1]||{y:null},null!=(s=t[n-1]||{y:null}).y&&null!=a.y?l.push(i(s,a)):null!=s.y?l.push(i(s,e)):null!=a.y?l.push(i(e,a)):l.push(null)):l.push(null);return l},e.prototype.hilight=function(t){var e,i,n,a,s;if(null!==this.prevHilight&&this.prevHilight!==t)for(e=i=0,a=this.seriesPoints.length-1;0<=a?i<=a:i>=a;e=0<=a?++i:--i)this.seriesPoints[e][this.prevHilight]&&this.seriesPoints[e][this.prevHilight].animate(this.pointShrink);if(null!==t&&this.prevHilight!==t)for(e=n=0,s=this.seriesPoints.length-1;0<=s?n<=s:n>=s;e=0<=s?++n:--n)this.seriesPoints[e][t]&&this.seriesPoints[e][t].animate(this.pointGrow);return this.prevHilight=t},e.prototype.colorFor=function(t,e,i){return"function"==typeof this.options.lineColors?this.options.lineColors.call(this,t,e,i):"point"===i&&this.options.pointFillColors[e%this.options.pointFillColors.length]||this.options.lineColors[e%this.options.lineColors.length]},e.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)},e.prototype.drawLinePath=function(t,e){return this.raphael.path(t).attr("stroke",e).attr("stroke-width",this.options.lineWidth)},e.prototype.drawLinePoint=function(t,e,i,n,a){return this.raphael.circle(t,e,i).attr("fill",n).attr("stroke-width",this.strokeWidthForSeries(a)).attr("stroke",this.strokeForSeries(a))},e.prototype.strokeWidthForSeries=function(t){return this.options.pointWidths[t%this.options.pointWidths.length]},e.prototype.strokeForSeries=function(t){return this.options.pointStrokeColors[t%this.options.pointStrokeColors.length]},e}(n.Grid),n.labelSeries=function(t,i,a,s,o){var r,l,h,d,c,u,p,m,f,g,v;if(h=200*(i-t)/a,l=new Date(t),void 0===(p=n.LABEL_SPECS[s]))for(f=0,g=(v=n.AUTO_LABEL_ORDER).length;f<g;f++)if(d=v[f],h>=(u=n.LABEL_SPECS[d]).span){p=u;break}for(void 0===p&&(p=n.LABEL_SPECS.second),o&&(p=e.extend({},p,{fmt:o})),r=p.start(l),c=[];(m=r.getTime())<=i;)m>=t&&c.push([p.fmt(r),m]),p.incr(r);return c},o=function(t){return{span:60*t*1e3,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours())},fmt:function(t){return n.pad2(t.getHours())+":"+n.pad2(t.getMinutes())},incr:function(e){return e.setMinutes(e.getMinutes()+t)}}},r=function(t){return{span:1e3*t,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes())},fmt:function(t){return n.pad2(t.getHours())+":"+n.pad2(t.getMinutes())+":"+n.pad2(t.getSeconds())},incr:function(e){return e.setSeconds(e.getSeconds()+t)}}},n.LABEL_SPECS={decade:{span:1728e8,start:function(t){return new Date(t.getFullYear()-t.getFullYear()%10,0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+10)}},year:{span:1728e7,start:function(t){return new Date(t.getFullYear(),0,1)},fmt:function(t){return""+t.getFullYear()},incr:function(t){return t.setFullYear(t.getFullYear()+1)}},month:{span:24192e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),1)},fmt:function(t){return t.getFullYear()+"-"+n.pad2(t.getMonth()+1)},incr:function(t){return t.setMonth(t.getMonth()+1)}},day:{span:864e5,start:function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},fmt:function(t){return t.getFullYear()+"-"+n.pad2(t.getMonth()+1)+"-"+n.pad2(t.getDate())},incr:function(t){return t.setDate(t.getDate()+1)}},hour:o(60),"30min":o(30),"15min":o(15),"10min":o(10),"5min":o(5),minute:o(1),"30sec":r(30),"15sec":r(15),"10sec":r(10),"5sec":r(5),second:r(1)},n.AUTO_LABEL_ORDER=["decade","year","month","day","hour","30min","15min","10min","5min","minute","30sec","15sec","10sec","5sec","second"],n.Area=function(t){function e(t){if(!(this instanceof n.Area))return new n.Area(t);this.cumulative=!0,e.__super__.constructor.call(this,t)}return d(e,t),e.prototype.calcPoints=function(){var t,e,i,n,a,s,o;for(o=[],n=0,a=(s=this.data).length;n<a;n++)(t=s[n])._x=this.transX(t.x),e=0,t._y=function(){var n,a,s,o;for(o=[],n=0,a=(s=t.y).length;n<a;n++)i=s[n],e+=i||0,o.push(this.transY(e));return o}.call(this),o.push(t._ymax=t._y[t._y.length-1]);return o},e.prototype.drawSeries=function(){var t,i,n,a;for(t=n=a=this.options.ykeys.length-1;a<=0?n<=0:n>=0;t=a<=0?++n:--n)null!==(i=this.paths[t])&&(i=i+"L"+this.transX(this.xmax)+","+this.bottom+"L"+this.transX(this.xmin)+","+this.bottom+"Z",this.drawFilledPath(i,this.fillForSeries(t)));return e.__super__.drawSeries.call(this)},e.prototype.fillForSeries=function(t){var e;return e=s.rgb2hsl(this.colorFor(this.data[t],t,"line")),s.hsl(e.h,Math.min(255,.75*e.s),Math.min(255,1.25*e.l))},e.prototype.drawFilledPath=function(t,e){return this.raphael.path(t).attr("fill",e).attr("stroke-width",0)},e}(n.Line),n.Bar=function(t){function i(t){if(this.onHoverOut=c(this.onHoverOut,this),this.onHoverMove=c(this.onHoverMove,this),!(this instanceof n.Bar))return new n.Bar(t);i.__super__.constructor.call(this,e.extend({},t,{parseTime:!1}))}return d(i,t),i.prototype.init=function(){if(this.cumulative=this.options.stacked,"always"!==this.options.hideHover)return this.hover=new n.Hover({parent:this.el}),this.on("hovermove",this.onHoverMove),this.on("hoverout",this.onHoverOut)},i.prototype.defaults={barSizeRatio:.75,barGap:3,barColors:["#0b62a4","#7a92a3","#4da74d","#afd8f8","#edc240","#cb4b4b","#9440ed"],xLabelMargin:50},i.prototype.calc=function(){var t;if(this.calcBars(),!1===this.options.hideHover)return(t=this.hover).update.apply(t,this.hoverContentForRow(this.data.length-1))},i.prototype.calcBars=function(){var t,e,i,n,a,s,o;for(o=[],t=n=0,a=(s=this.data).length;n<a;t=++n)(e=s[t])._x=this.left+this.width*(t+.5)/this.data.length,o.push(e._y=function(){var t,n,a,s;for(s=[],t=0,n=(a=e.y).length;t<n;t++)null!=(i=a[t])?s.push(this.transY(i)):s.push(null);return s}.call(this));return o},i.prototype.draw=function(){return this.options.axes&&this.drawXAxis(),this.drawSeries()},i.prototype.drawXAxis=function(){var t,e,i,n,a,s,o,r,l;for(s=this.bottom+1.25*this.options.gridTextSize,n=null,l=[],t=o=0,r=this.data.length;0<=r?o<r:o>r;t=0<=r?++o:--o)a=this.data[this.data.length-1-t],i=(e=this.drawXAxisLabel(a._x,s,a.label)).getBBox(),(null==n||n>=i.x+i.width)&&i.x>=0&&i.x+i.width<this.el.width()?l.push(n=i.x-this.options.xLabelMargin):l.push(e.remove());return l},i.prototype.drawSeries=function(){var t,e,i,n,a,s,o,r,l,h,d,c,u,p;return i=this.width/this.options.data.length,r=null!=this.options.stacked?1:this.options.ykeys.length,t=(i*this.options.barSizeRatio-this.options.barGap*(r-1))/r,o=i*(1-this.options.barSizeRatio)/2,p=this.ymin<=0&&this.ymax>=0?this.transY(0):null,this.bars=function(){var r,m,f,g;for(f=this.data,g=[],n=r=0,m=f.length;r<m;n=++r)l=f[n],a=0,g.push(function(){var r,m,f,g;for(f=l._y,g=[],h=r=0,m=f.length;r<m;h=++r)null!==(u=f[h])?(p?(c=Math.min(u,p),e=Math.max(u,p)):(c=u,e=this.bottom),s=this.left+n*i+o,this.options.stacked||(s+=h*(t+this.options.barGap)),d=e-c,this.options.stacked&&(c-=a),this.drawBar(s,c,t,d,this.colorFor(l,h,"bar")),g.push(a+=d)):g.push(null);return g}.call(this));return g}.call(this)},i.prototype.colorFor=function(t,e,i){var n,a;return"function"==typeof this.options.barColors?(n={x:t.x,y:t.y[e],label:t.label},a={index:e,key:this.options.ykeys[e],label:this.options.labels[e]},this.options.barColors.call(this,n,a,i)):this.options.barColors[e%this.options.barColors.length]},i.prototype.hitTest=function(t,e){return 0===this.data.length?null:(t=Math.max(Math.min(t,this.right),this.left),Math.min(this.data.length-1,Math.floor((t-this.left)/(this.width/this.data.length))))},i.prototype.onHoverMove=function(t,e){var i,n;return i=this.hitTest(t,e),(n=this.hover).update.apply(n,this.hoverContentForRow(i))},i.prototype.onHoverOut=function(){if("auto"===this.options.hideHover)return this.hover.hide()},i.prototype.hoverContentForRow=function(t){var e,i,n,a,s,o,r;if("function"==typeof this.options.hoverCallback)e=this.options.hoverCallback(t,this.options);else for(e="<div class='morris-hover-row-label'>"+(n=this.data[t]).label+"</div>",i=s=0,o=(r=n.y).length;s<o;i=++s)a=r[i],e+="<div class='morris-hover-point'> <span class='label-1'><strong class='language' style='background-color: "+this.colorFor(n,i,"label")+"'>\n "+this.options.labels[i]+":\n </strong></span><span> "+this.yLabelFormat(a)+"\n</span></div>";return[e,this.left+(t+.5)*this.width/this.data.length]},i.prototype.drawXAxisLabel=function(t,e,i){return this.raphael.text(t,e,i).attr("font-size",this.options.gridTextSize).attr("fill",this.options.gridTextColor)},i.prototype.drawBar=function(t,e,i,n,a){return this.raphael.rect(t,e,i,n).attr("fill",a).attr("stroke-width",0)},i}(n.Grid),n.Donut=function(){function t(t){if(this.select=c(this.select,this),!(this instanceof n.Donut))return new n.Donut(t);if("string"==typeof t.element?this.el=e(document.getElementById(t.element)):this.el=e(t.element),this.options=e.extend({},this.defaults,t),null===this.el||0===this.el.length)throw new Error("Graph placeholder not found.");void 0!==t.data&&0!==t.data.length&&(this.data=t.data,this.redraw())}return t.prototype.defaults={colors:["#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],backgroundColor:"#FFFFFF",labelColor:"#000000",valueColor:"#000000",formatter:n.commas},t.prototype.redraw=function(){var t,e,i,a,o,r,l,h,d,c,u,p,m,f,g,v,b,_,y,x,w,S;for(this.el.empty(),this.raphael=new s(this.el[0]),e=this.el.width()/2,i=this.el.height()/2,p=(Math.min(e,i)-10)/3,u=0,m=0,v=(y=this.data).length;m<v;m++)u+=y[m].value;for(h=5/(2*p),t=1.9999*Math.PI-h*this.data.length,r=0,o=0,this.segments=[],f=0,b=(x=this.data).length;f<b;f++)d=r+h+t*((a=x[f]).value/u),(c=new n.DonutSegment(e,i,2*p,p,r,d,this.options.colors[o%this.options.colors.length],this.options.backgroundColor,a,this.raphael)).render(),this.segments.push(c),c.on("hover",this.select),r=d,o+=1;for(this.text1=this.drawEmptyDonutLabel(e,i-10,this.options.labelColor,15,800),this.text2=this.drawEmptyDonutLabel(e,i+10,this.options.valueColor,14,800),l=Math.max.apply(null,function(){var t,e,i,n;for(n=[],t=0,e=(i=this.data).length;t<e;t++)a=i[t],n.push(a.value);return n}.call(this)),o=0,S=[],g=0,_=(w=this.data).length;g<_;g++){if((a=w[g]).value===l){this.select(o);break}S.push(o+=1)}return S},t.prototype.select=function(t){var e,i,n,a;for(i=0,n=(a=this.segments).length;i<n;i++)a[i].deselect();return(e="number"==typeof t?this.segments[t]:t).select(),this.setLabels(e.data.label,this.options.formatter(e.data.value,e.data))},t.prototype.setLabels=function(t,e){var i,n,a,s,o,r,l,h;return s=1.8*(i=2*(Math.min(this.el.width()/2,this.el.height()/2)-10)/3),a=i/2,n=i/3,this.text1.attr({text:t,transform:""}),o=this.text1.getBBox(),r=Math.min(s/o.width,a/o.height),this.text1.attr({transform:"S"+r+","+r+","+(o.x+o.width/2)+","+(o.y+o.height)}),this.text2.attr({text:e,transform:""}),l=this.text2.getBBox(),h=Math.min(s/l.width,n/l.height),this.text2.attr({transform:"S"+h+","+h+","+(l.x+l.width/2)+","+l.y})},t.prototype.drawEmptyDonutLabel=function(t,e,i,n,a){var s;return s=this.raphael.text(t,e,"").attr("font-size",n).attr("fill",i),null!=a&&s.attr("font-weight",a),s},t}(),n.DonutSegment=function(t){function e(t,e,i,n,a,s,o,r,l,h){this.cx=t,this.cy=e,this.inner=i,this.outer=n,this.color=o,this.backgroundColor=r,this.data=l,this.raphael=h,this.deselect=c(this.deselect,this),this.select=c(this.select,this),this.sin_p0=Math.sin(a),this.cos_p0=Math.cos(a),this.sin_p1=Math.sin(s),this.cos_p1=Math.cos(s),this.is_long=s-a>Math.PI?1:0,this.path=this.calcSegment(this.inner+3,this.inner+this.outer-5),this.selectedPath=this.calcSegment(this.inner+3,this.inner+this.outer),this.hilight=this.calcArc(this.inner)}return d(e,t),e.prototype.calcArcPoints=function(t){return[this.cx+t*this.sin_p0,this.cy+t*this.cos_p0,this.cx+t*this.sin_p1,this.cy+t*this.cos_p1]},e.prototype.calcSegment=function(t,e){var i,n,a,s,o,r,l,h,d,c;return i=(d=this.calcArcPoints(t))[0],a=d[1],n=d[2],s=d[3],o=(c=this.calcArcPoints(e))[0],l=c[1],r=c[2],h=c[3],"M"+i+","+a+"A"+t+","+t+",0,"+this.is_long+",0,"+n+","+s+"L"+r+","+h+"A"+e+","+e+",0,"+this.is_long+",1,"+o+","+l+"Z"},e.prototype.calcArc=function(t){var e,i,n,a,s;return e=(s=this.calcArcPoints(t))[0],n=s[1],i=s[2],a=s[3],"M"+e+","+n+"A"+t+","+t+",0,"+this.is_long+",0,"+i+","+a},e.prototype.render=function(){var t=this;return this.arc=this.drawDonutArc(this.hilight,this.color),this.seg=this.drawDonutSegment(this.path,this.color,this.backgroundColor,function(){return t.fire("hover",t)})},e.prototype.drawDonutArc=function(t,e){return this.raphael.path(t).attr({stroke:e,"stroke-width":2,opacity:0})},e.prototype.drawDonutSegment=function(t,e,i,n){return this.raphael.path(t).attr({fill:e,stroke:i,"stroke-width":3}).hover(n)},e.prototype.select=function(){if(!this.selected)return this.seg.animate({path:this.selectedPath},150,"<>"),this.arc.animate({opacity:1},150,"<>"),this.selected=!0},e.prototype.deselect=function(){if(this.selected)return this.seg.animate({path:this.path},150,"<>"),this.arc.animate({opacity:0},150,"<>"),this.selected=!1},e}(n.EventEmitter)}.call(this),e={},t.tmpl=function t(i,n){var a=/\W/.test(i)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+i.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):e[i]=e[i]||t(document.getElementById(i).innerHTML);return n?a(n):a}}).call(this,n(2))}]);