var ConfigWrapper=function(){"use strict";function t(t){function e(t,e){var i,n,r=e.replace(/\[(\w+)\]/g,".$1").replace(/^\./,"").split("."),o=r.length;for(i=0;i<o;i+=1){if(n=r[i],!(n in t))return null;t=t[n]}return t}this.get=function(i,n){var r,o=n;return 0===arguments.length?JSON.parse(JSON.stringify(t)):(1===arguments.length&&(o=null),r=e(t,i),null==r&&(r=o),r?JSON.parse(JSON.stringify(r)):r)}}return t}(),utils=function(){"use strict";var t={};return t.canAccessTopWindow=function(){return t.canAccessWindow(window.top)},t.canAccessWindow=function(t){var e;try{return e=t.location.href,!!e}catch(i){return!1}},t.getRealDomain=function(){var e,i,n;if(t.canAccessTopWindow())i=window.top.location.href;else{for(e=window;t.canAccessWindow(e.parent);)e=e.parent;i=e.document.referrer}return n=i.match(/^https?\:\/\/(?:www\.)?([^\/:?#]+)(?:[\/:?#]|$)/i),n&&n[1]},t.isString=function(t){return"string"==typeof t||t instanceof String},t}();!function(t,e){"use strict";function i(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return h[f]=n,p(f),f++}function n(t){delete h[t]}function r(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}function o(t){if(m)setTimeout(o,0,t);else{var e=h[t];if(e){m=!0;try{r(e)}finally{n(t),m=!1}}}}function s(){p=function(e){t.setImmediate(function(){o(e)})}}function a(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}function l(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&o(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),p=function(i){t.postMessage(e+i,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;o(e)},p=function(e){t.port2.postMessage(e)}}function u(){var t=v.documentElement;p=function(e){var i=v.createElement("script");i.onreadystatechange=function(){o(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}function d(){p=function(t){setTimeout(o,0,t)}}var p,f=1,h={},m=!1,v=t.document;t.setImmediate?s():a()?l():t.MessageChannel?c():v&&"onreadystatechange"in v.createElement("script")?u():d(),e.setImmediate=i,e.clearImmediate=n}(window,utils);var EventEmitter=function(){"use strict";function t(){this.listeners={}}var e=function(t,e,i){null!=t[e]&&i>=0&&t[e].length>i&&(t[e][i]=null)},i=function(t,e){null!=t[e]&&(t[e]=null)};return t.prototype.emit=function(t,e){null!=this.listeners[t]&&this.listeners[t].forEach(function(t){null!=t&&utils.setImmediate(function(){t(e)})})},t.prototype.emitSync=function(t,e){null!=this.listeners[t]&&this.listeners[t].forEach(function(t){null!=t&&t(e)})},t.prototype.on=function(t,e){return this.listeners[t]?this.listeners[t].push(e):this.listeners[t]=[e],this.listeners[t].length-1},t.prototype.once=function(t,e){var i=this.on(t,function(n){this.listeners[t][i]&&(this.off(t,i),e(n))}.bind(this));return i},t.prototype.off=function(){switch(arguments.length){case 0:this.listeners={};break;case 1:i(this.listeners,arguments[0]);break;default:e(this.listeners,arguments[0],arguments[1])}},t}(),ajax=function(){"use strict";var t={},e=function(t,e,i,n){var r=!0,o={UNSET:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},s=[200,201,202,204,206,304,1223],a=function(){try{return new XDomainRequest}catch(t){r=!1}try{return new XMLHttpRequest}catch(t){}try{return new ActiveXObject("Msxml3.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}return null},l=a(),c=e?"POST":"GET";l&&(l.open(c,t,!0),r?(l.onload=function(){i&&i(l.responseText)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){n&&n()}):l.onreadystatechange=function(){l.readyState===o.DONE&&(s.indexOf(l.status)>-1?i&&i(l.responseText):n&&n())},"withCredentials"in l&&(l.withCredentials=!0),e&&l.setRequestHeader("Content-type","application/json"),l.send(e))};return t.get=function(t,i,n){return e(t,null,i,n)},t.post=function(t,i,n,r){var o=i?JSON.stringify(i):"{}";return e(t,o,n,r)},t}(),publishingPlatform={AMP:"amp",FACEBOOK_INSTANT_ARTICLES:"fbia",APPLE_NEWS:"an",OEMBED:"oembed"},apiAdapter={STANDARD:"standard",AMP_AD:"amp-ad",AMP_VIDEO_IFRAME:"amp-video-iframe",AMP_IFRAME:"amp-iframe",AMP_VIRALIZE_PLAYER:"amp-viralize-player",FACEBOOK_INSTANT_ARTICLES:"fbia",APPLE_NEWS:"an",OEMBED:"oembed"},inDapIF=window!==window.top&&utils.canAccessTopWindow(),wnd=inDapIF?window.top:window,doc=wnd.document,injectorPlayerEmitter=new EventEmitter,Log;Log=function(){"use strict";function t(t){this.prefix="["+(t||"VR-LOG")+"]"}return t.prototype.debug=function(){},t.prototype.info=function(){},t.prototype.warn=function(){},t.prototype.error=function(){},t}();var PlayerDependencies={player:{debug:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.js","https://polyfill.io/v3/polyfill.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated","//imasdk.googleapis.com/js/sdkloader/ima3_debug.js"],default:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js","https://polyfill.io/v3/polyfill.min.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated","//imasdk.googleapis.com/js/sdkloader/ima3.js"]},mobi:{debug:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.js","https://polyfill.io/v3/polyfill.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"],default:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js","https://polyfill.io/v3/polyfill.min.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"]},banner:{debug:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.js","https://polyfill.io/v3/polyfill.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"],default:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js","https://polyfill.io/v3/polyfill.min.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"]},strip:{debug:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.js","https://polyfill.io/v3/polyfill.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"],default:["//ajax.googleapis.com/ajax/libs/jquery/1.12.1/jquery.min.js","https://polyfill.io/v3/polyfill.min.js?features=default,es2015,es2016,es2017,es2018,es2019,es5,es6,es7&flags=gated"]},sentry:"//cdn.ravenjs.com/3.17.0/raven.min.js"},TemplateLoader=function(){"use strict";var t={};return t.render=function(t,e){var i=t;return Object.keys(e).forEach(function(t){var n=new RegExp("{{"+t+"}}","g");i=i.replace(n,e[t])}),i},t}(),MaxInstancesError=function(){"use strict";function t(t){this.message=t}return t.prototype=new Error,t}(),DuplicateInjectorError=function(){"use strict";function t(t){this.message=t}return t.prototype=new Error,t}(),ViewabilityUnavailableError=function(){"use strict";function t(t){this.message=t}return t.prototype=new Error,t}(),ViewabilityClassNotFoundError=function(){"use strict";function t(t){this.message=t}return t.prototype=new Error,t}(),DuplicatedViewabilityImplementationError=function(){"use strict";function t(t){this.message=t}return t.prototype=new Error,t}(),Constants={ADUNIT_REQUEST_ERRORS:{SCRIPT_NOT_FOUND:30001,LOCATION_INLINE_ERROR:30002,LOCATION_AUTO_ERROR:30003,LOCATION_BY_ID_ERROR:30004,LOCATION_BY_SELECTOR_ERROR:30005,SCRIPT_IN_HEAD:30006,INVALID_VPT_CONFIGURATION:50001}},detect=function(t){"use strict";var e={};return e.detectAutoplay=function(){var e,i=[/mobile/i,/android/i,/(iphone|ipad|ipod)/i,/silk-accelerated/i];for(e=0;e<i.length;e++)if(t.navigator&&t.navigator.userAgent&&t.navigator.userAgent.match(i[e]))return!1;return!0},e.detectMobile=function(){return navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)},e.detectiOS=function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream},e.detectAndroidVersion=function(){var t=navigator.userAgent.toLowerCase(),e=t.match(/android\s([0-9\.]*)/);return e[1]},e.isPassiveListenersSupported=function(){var t,e=!1;try{t=Object.defineProperty({},"passive",{get:function(){e=!0}}),window.addEventListener("testPassive",null,t),window.removeEventListener("testPassive",null,t)}catch(i){}return e},e}(wnd);utils=function(t,e,i){"use strict";try{new CustomEvent("?"),i.CustomEvent=CustomEvent}catch(n){i.CustomEvent=function(t,i){function n(n,o){var s=e.createEvent(t);return null!==n?r.call(s,n,(o||(o=i)).bubbles,o.cancelable,o.detail):s.initCustomEvent=r,s}function r(e,i,n,r){this["init"+t](e,i,n,r),"detail"in this||(this.detail=r)}return n}(t.CustomEvent?"CustomEvent":"Event",{bubbles:!1,cancelable:!1,detail:null})}return i.matchMedia=function(i){if(t.matchMedia)return t.matchMedia(i);var n=t.styleMedia||t.media;if(!n){var r=e.createElement("style"),o=e.getElementsByTagName("script")[0],s=null;r.type="text/css",r.id="matchmediajs-test",o.parentNode.insertBefore(r,o),s="getComputedStyle"in t&&t.getComputedStyle(r,null)||r.currentStyle,n={matchMedium:function(t){var e="@media "+t+"{ #matchmediajs-test { width: 1px; } }";return r.styleSheet?r.styleSheet.cssText=e:r.textContent=e,"1px"===s.width}}}return{matches:n.matchMedium(i||"all"),media:i||"all"}},i.sessionStorage=function(){var e=!0;try{if(t.sessionStorage.setItem("VR_TEST_SESSIONSTORAGE","test"),"test"!==t.sessionStorage.getItem("VR_TEST_SESSIONSTORAGE"))throw new Error("sessionStorage unavailable")}catch(i){t.VR_sessionStorageFallback=t.VR_sessionStorageFallback||{},e=!1}return e?t.sessionStorage:{setItem:function(e,i){t.VR_sessionStorageFallback[e]=i},getItem:function(e){return t.VR_sessionStorageFallback[e]||null},removeItem:function(e){try{delete t.VR_sessionStorageFallback[e]}catch(i){}},clear:function(){t.VR_sessionStorageFallback={}}}},i}(wnd,doc,utils||{}),utils=function(t,e,i){"use strict";var n={AT:!0,BE:!0,BG:!0,HR:!0,CY:!0,CZ:!0,DK:!0,EE:!0,FI:!0,FR:!0,DE:!0,GR:!0,HU:!0,IE:!0,IT:!0,LV:!0,LT:!0,LU:!0,MT:!0,NL:!0,PL:!0,PT:!0,RO:!0,SK:!0,SI:!0,ES:!0,SE:!0,GB:!0,GF:!0,GP:!0,MQ:!0,ME:!0,YT:!0,RE:!0,MF:!0,GI:!0,AX:!0,PM:!0,GL:!0,BL:!0,SX:!0,AW:!0,CW:!0,WF:!0,PF:!0,NC:!0,TF:!0,AI:!0,BM:!0,IO:!0,VG:!0,KY:!0,FK:!0,MS:!0,PN:!0,SH:!0,GS:!0,TC:!0,AD:!0,LI:!0,MC:!0,SM:!0,VA:!0,JE:!0,GG:!0,EU:!0,CH:!0},r={mov:"mp4",mkv:"x-matroska","3gp":"3gpp","3g2":"3gpp2",h261:"h261",h263:"h263",h264:"h264",jpgv:"jpeg",jpm:"jpm",mj2:"mj2",mp4:"mp4",mpeg:"mpeg",ogv:"ogg",qt:"quicktime",uvh:"vnd.dece.hd",uvm:"vnd.dece.mobile",uvp:"vnd.dece.pd",uvs:"vnd.dece.sd",uvv:"vnd.dece.video",fvt:"vnd.fvt",mxu:"vnd.mpegurl",pyv:"vnd.ms-playready.media.pyv",uvu:"vnd.uvvu.mp4",viv:"vnd.vivo",webm:"webm",f4v:"x-f4v",fli:"x-fli",flv:"x-flv",m4v:"x-m4v",asf:"x-ms-asf",wm:"x-ms-wm",wmv:"x-ms-wmv",wmx:"x-ms-wmx",wvx:"x-ms-wvx",avi:"x-msvideo",movie:"x-sgi-movie"};return i.urlEncode=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(i+"="+encodeURIComponent(t[i]));return e.join("&")},i.getViewportSize=function(t){var e="inner",i=t;return"innerWidth"in t||(e="client",i=i.document.documentElement||i.document.body),{width:i[e+"Width"],height:i[e+"Height"]}},i.getScreenSize=function(t){return{width:t.screen.width,height:t.screen.height}},i.getPageSize=function(t){return{width:t.document.body.scrollWidth,height:t.document.body.scrollHeight}},i.setCookie=function(t,i,n){var r=(new Date).valueOf(),o=new Date(864e5+r);o.setHours(0,0,0,0),n=n||o;var s=Math.floor((n-r)/1e3),a=t+"="+i+";path=/;max-age="+s+";expires="+n.toUTCString();return e.cookie=a,a},i.getCookie=function(i){i=t.encodeURIComponent(i),i=i.replace(/[\-\.\+\*]/g,"\\$&");var n=new RegExp("(?:(?:^|.*;)\\s*"+i+"\\s*\\=\\s*([^;]*).*$)|^.*$"),r=e.cookie.replace(n,"$1");return""!==r?t.decodeURIComponent(r):null},i.deleteCookie=function(t){e.cookie=t+"=; path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;"},i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},i.extend=function(){for(var t=1;t<arguments.length;t++)for(var e in arguments[t])arguments[t].hasOwnProperty(e)&&(arguments[0][e]=arguments[t][e]);return arguments[0]},i.filter=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];e(r)&&i.push(r)}return i},i.classNamePrefix=function(t,e){for(var i=0,n=e.length;i<n;i++)e[i]=t+"-"+e[i];return e.join(" ")},i.addEventListener=function(t,e,i,n){var r=!1;t.addEventListener?(n&&detect.isPassiveListenersSupported()&&(r={passive:!0}),t.addEventListener(e,i,r)):t.attachEvent&&t.attachEvent("on"+e,i)},i.removeEventListener=function(t,e,i,n){var r=!1;t.removeEventListener?(n&&detect.isPassiveListenersSupported()&&(r={passive:!0}),t.removeEventListener(e,i,r)):t.detachEvent&&t.detachEvent("on"+e,i)},i.bind=function(t,e){return function(){return t.apply(e,Array.prototype.slice.call(arguments))}},i.hashCode=function(t){var e,i,n,r=0;if(0===t.length)return r;for(e=0,n=t.length;e<n;e++)i=t.charCodeAt(e),r=(r<<5)-r+i,r|=0;return r},i.pad=function(t,e){for(var i=String(t);i.length<(e||2);)i="0"+i;return i},i.throwException=function(t){setTimeout(function(){throw t},0)},i.getCustomCss=function(t){var e=t.getAttribute("data-custom-style"),i="";if(e){var n=document.getElementById(e);n?i=n.innerHTML:this.throwException("Couldn't find the custom style tag "+e)}return i},i.onDOMContentLoaded=function(t,n){var r=n||"complete";e.readyState===r||"complete"===e.readyState?t():i.addEventListener(e,"readystatechange",function(){e.readyState===r&&t()})},i.trackRequestEvent=function(t,e){var i=e||"ok",n=7,r=config.get("scheme")+"://"+config.get("endpoint_host")+"/track/?session_id="+config.get("sid")+"&request_session_id="+config.get("sid")+"&label="+t+"&ver="+n+"&reason="+i+"&type=event&category=request_session",o=new Image;o.onload=function(){},o.src=r},i.trackUrl=function(t){var e=new Image;e.onload=function(){},e.src=t},i.getVPTInstance=function(t){var e=t.get("is_preview"),i=t.get("is_test");return"instream"===t.get("format_family")&&(e||i)?null:viralize.__VR&&viralize.__VR.vptimpl},i.getAdditionalPlayerConfig=function(t,e){var n=null,r=i.getVPTInstance(t);return null!=r&&null!=r.getConfig&&(n=r.getConfig(e)),n},i.loadPlayerIframe=function(t,e,n,r,o,s,a){var l=n.get("sentry",null),c=n.get("player.mobi"),u="banner"===n.get("format_family"),d=n.get("player.script"),p=u?templates.banner:templates.player,f=a||injectorPlayerEmitter;ajax.get(e,function(e){var o,a,l=t.elem.contentWindow||t.elem;try{o=JSON.parse(e)}catch(c){throw i.reportError(c,"jsonParse"),c}if(o.error)return void f.emit("event::loadPlayerError");s&&s(o);try{a=i.getVPTInstance(n)}catch(c){throw i.reportError(c,"getVPTInstance"),c}f.once("pl::playerReady",function(){var t;i.setupHeavyAdReporting(l,f),t=null!=a&&(null==o.extra||null==o.extra.session_counter||1===o.extra.session_counter),t&&a.emit(a.EVENTS.PLAYER_READY,r,o.environment.zone.format_family)}),l.onPlayerReady?l.onPlayerReady(o,f,a):(l.config=o,l.injectorPlayerEmitter=f,l.vpt=a)});var h=c?"mobi":u?"banner":"player",m=TemplateLoader.render(p,{scripts:function(){var t=PlayerDependencies[h],e=n.get("debug",!1)?t.debug.slice():t["default"].slice();return l&&e.unshift(PlayerDependencies.sentry),e.push(d),e.reduce(function(t,e){return/https?:/i.test(location.protocol)||/^https?/i.test(e)||(e=n.get("scheme")+":"+e),t+'<script type="text/javascript" src="'+e+'"></script>'},"")},ecgEndpoint:n.get("scheme")+"://"+n.get("endpoint_host")+"/track/",sentryConfig:function(){return l?JSON.stringify({dsn:l.dsn,sampleRate:l.sample_rate}):null}});f.once("cmd::dmp_user_data",function(t){o&&o(t.data)}),i.loadFriendlyIframeWithTemplate(t,m)},i.loadFriendlyIframeWithTemplate=function(t,e){var i=t.elem||t,n=i.contentDocument||i.contentWindow.document;n.open("text/html","replace"),n.write(e),n.close()},i.isUrl=function(t){var e=/(http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/;return e.test(t)},i.getOrigin=function(t){return i.isUrl(t.location.origin)?t.location.origin:config.get("scheme")+"://"+e.domain},i.isInUE=function(t){return n[t]||!1},i.getFifAbsolutePosition=function(t){for(var e,i,n,r={top:0,left:0},o=t;o!==window.top;)e=o.frameElement.getBoundingClientRect(),i=o.parent.pageYOffset||o.parent.document.documentElement.scrollTop||o.parent.document.body.scrollTop||0,n=o.parent.pageXOffset||o.parent.document.documentElement.scrollLeft||o.parent.document.body.scrollLeft||0,r.top+=e.top+i,r.left+=e.left+n,o=o.parent;return r},i.copyString=function(t){return(" "+t).slice(1)},i.getFileExtension=function(t){return null==t?"":t.split(".").pop()},i.getMimetype=function(t){var e=i.getFileExtension(t);return r[e.toLowerCase()]||""},i.trackPlayerEvent=function(t,e){var i=e||"ok",n=10,r=config.get("scheme")+"://"+config.get("endpoint_host")+"/track/?session_id="+config.get("sid")+":0&player_session_id=0&label="+t+"&ver="+n+"&reason="+i+"&type=event&category=player_session",o=new Image;o.onload=function(){},o.src=r},i.setupHeavyAdReporting=function(t,e){var n,r,o=!1,s="HeavyAdIntervention",a="60000",l=!1,c=function(t){var n=!1;for(r=0;r<t.length;r+=1)t[r].body.id===s&&(n=!0,i.trackPlayerEvent("player_error",a));n&&!l&&(l=!0,"native"===config.get("format_family")?e.emit("cmd::pullup",{adFilled:o,skipped:!1,eventsFlushed:!0}):e.emit("cmd::remove",{impression:o,skipped:!1}))};t.ReportingObserver&&(e.on("adFilled",function(){o=!0}),n=new t.ReportingObserver(c,{buffered:!0}),t.addEventListener("unload",c),n.observe())},i.getAmpAdContext=function(){var t=i.getAmpAdWindowWithContext();if(null!=t)return t.context},i.getAmpAdWindowWithContext=function(){var t=window;try{for(;t!==window.top;){if(null!=t.context&&null!=t.context.observeIntersection)return t;t=t.parent}}catch(e){}},i.getAmpVideoIframe=function(){var t=window;try{for(;t!==window.top;){if(null!=t.AmpVideoIframe)return t.AmpVideoIframe;t=t.parent}}catch(e){}},i.isAmpIframe=function(){var t=window;try{for(;i.canAccessWindow(t);){if(i.isWindowAmpIframe(t))return!0;if(t.parent===t)return!1;t=t.parent}return!1}catch(e){return!1}},i.isWindowAmpIframe=function(t){var e;try{return e=(t.name||"").toLowerCase(),e.startsWith("amp_iframe")}catch(i){return!1}},i.getVptId=function(t){var e=config.get("zid"),i=e;return t.hasAttribute("data-alias")&&(i=t.getAttribute("data-alias")),i},i.reportError=function(e,i){t.Raven&&null!=e&&(e.message&&e.message.startsWith("You are trying to put the player into the head")||t.Raven.captureException(e,{tags:{injector_error:i}}))},i}(wnd,doc,utils||{}),utils=function(t,e,i){"use strict";function n(t){return this instanceof n?void(this.elem=t):new n(t)}return n.create=function(t,i){var r=new n(e.createElement(t));if(i)for(var o in i)r.attr(o,i[o]);return r},n.get=function(t){var i=e.querySelector(t);return null!==i&&(i=new n(i)),i},n.getById=function(t){var i=e.getElementById(t);return null!==i&&(i=new n(i)),i},n.getAll=function(t){for(var i=e.querySelectorAll(t),r=[],o=0;o<i.length;o++)r[o]=new n(i[o]);return r},n.remove=function(t){var i=e.getElementById(t);null!==i&&i.parentNode&&i.parentNode.removeChild(i)},n.removeByClass=function(t){for(var i=e.getElementsByClassName(t),n=i.length-1;n>=0;n--){var r=i[n];r.parentNode.removeChild(r)}},n.insertHTMLBefore=function(t,e,n){if(""===n)return null;var r=i.Element.create("ins",{id:e});r.elem.innerHTML=n,t.parentNode.insertBefore(r.elem,t);for(var o=r.elem.getElementsByTagName("script"),s=0;s<o.length;s++){for(var a=document.createElement("script"),l=o[s].attributes,c=0;c<l.length;c++)a.setAttribute(l[c].nodeName,l[c].value);o[s].innerHTML&&(a.text=o[s].innerHTML),o[s].parentNode.replaceChild(a,o[s])}return this},n.prototype.remove=function(){this.elem.parentNode.removeChild(this.elem)},n.prototype.attr=function(t,e){return this.elem.setAttribute(t,e),this},n.prototype.appendTo=function(t){return t.appendChild(this.elem),this},n.prototype.append=function(t){return t.nextSibling?t.parentNode.insertBefore(this.elem,t.nextSibling):t.parentNode.appendChild(this.elem),this},n.prototype.prepend=function(t){return t.parentNode.insertBefore(this.elem,t),this},n.prototype.text=function(t){return void 0===t?"textContent"in this.elem?this.elem.textContent:this.elem.innerText:("textContent"in this.elem?this.elem.textContent=t:this.elem.innerText=t,this)},n.prototype.offset=function(){var i=this.elem.getBoundingClientRect(),n=e.body,r=e.documentElement,o=t.pageYOffset||r.scrollTop||n.scrollTop,s=t.pageXOffset||r.scrollLeft||n.scrollLeft,a=r.clientTop||n.clientTop||0,l=r.clientLeft||n.clientLeft||0,c=i.top+o-a,u=i.left+s-l;return{top:Math.round(c),left:Math.round(u)}},n.prototype.hasClass=function(t){return new RegExp(" "+t+" ").test(" "+this.elem.className+" ")},n.prototype.addClass=function(t){return this.hasClass(t)||(this.elem.className+=(this.elem.className.length?" ":"")+t),this},n.prototype.removeClass=function(t){return this.hasClass(t)&&(this.elem.className=this.elem.className.replace(t,"").replace(/\s+$/g,"")),this},n.prototype.hide=function(){return this.elem.style.display="none",this.elem.style.visibility="hidden",this},n.prototype.show=function(){return this.elem.style.visibility="visible",this.elem.style.display="",this},i.Element=n,i}(wnd,doc,utils||{});var ViewabilityFactory=function(){"use strict";var t={},e={};return t.register=function(t,i){var n=e[t];if(n)throw new DuplicatedViewabilityImplementationError(n+" is already registered for the identifier "+t);e[t]=i},t.getInstance=function(t,i,n,r,o){var s=e[t];if(!s)throw new ViewabilityClassNotFoundError("No viewabilityClass registered for the identifier "+t);return new s(i,n,r,o)},t}(),Viewability=function(t){"use strict";function e(t,e,i,n){this.reasons={OUT_OF_VIEWPORT:0,HIDDEN:1,NOT_IN_FOCUS:2,TOO_SMALL:3,IN_VIEWPORT:4,FIXED_VIEWABILITY:5},this.elem=t,this.wnd=e,this.forceViewability=i,this.onViewabilityChange=n}return e.prototype.start=function(){if(this.isViewabilityUnavailable())throw new ViewabilityUnavailableError;this.stop(),this.attachListeners(t.bind(this.notifier,this)),this.notifier()},e.prototype.stop=function(){this.detachListeners()},e.prototype.notifier=function(){this.onViewabilityChange(this.computeViewability())},e}(utils),viewabilityPercentageCalculator=function(t,e){"use strict";var i=t.getBoundingClientRect(),n=i.width*i.height,r=Math.ceil(Math.max(0,i.left)),o=Math.ceil(Math.min(e.width,i.right)),s=Math.ceil(Math.max(0,i.top)),a=Math.ceil(Math.min(e.height,i.bottom)),l=(o-r)*(a-s),c=Math.floor(l/n*100);return c},IntersectionViewabilityObserver=function(t,e){"use strict";function i(t,e){this.callback=null,this.intersectionObserver=null,this.intersectionData=null,this.elem=e,this.wnd=t}return i.prototype.start=function(t){var e=this,i={root:null,rootMargin:"0px",threshold:this.createIntersectionObserverThresholds()};this.callback=t,this.intersectionObserver=new IntersectionObserver(function(t){0!==t.length&&(e.intersectionData=e.parseIntersectionData(t),e.callback())},i),this.intersectionObserver.observe(this.elem)},i.prototype.createIntersectionObserverThresholds=function(){var t,e,i=100,n=[];for(e=0;e<=i;e+=1)t=e/i,n.push(t);return n},i.prototype.parseIntersectionData=function(t){var e=t[t.length-1];return Math.min(100,Math.round(100*e.intersectionRatio))},i.prototype.stop=function(){this.intersectionObserver&&(this.intersectionObserver.disconnect&&this.intersectionObserver.disconnect(),this.intersectionObserver.unobserve&&this.intersectionObserver.unobserve(this.elem),this.intersectionObserver=null)},i.prototype.computeViewabilityPercentage=function(){var i,n=e.getViewportSize(this.wnd);return this.intersectionObserver.takeRecords&&(i=this.intersectionObserver.takeRecords(),i.length>0&&(this.intersectionData=this.parseIntersectionData(i))),null!=this.intersectionData?this.intersectionData:t(this.elem,n)},i}(viewabilityPercentageCalculator,utils),MutationViewabilityObserver=function(t,e){"use strict";function i(t,e){this.callback=null,this.viewabilityObserver=null,this.elem=e,this.wnd=t}return i.prototype.start=function(t){function i(t){var e,i;for(i=0;i<t.length;i+=1)if(e=t[i],e.target.contains(this.elem))return void this.callback()}this.callback=t,this.viewabilityObserver=new this.wnd.MutationObserver(e.bind(i,this)),this.viewabilityObserver.observe(this.wnd.document.body,{attributes:!0,subtree:!0})},i.prototype.stop=function(){this.viewabilityObserver&&(this.viewabilityObserver.disconnect(),this.viewabilityObserver=null)},i.prototype.computeViewabilityPercentage=function(){var i=e.getViewportSize(this.wnd);return t(this.elem,i)},i}(viewabilityPercentageCalculator,utils),PollingViewabilityObserver=function(t,e){"use strict";function i(t,e){this.callback=null,this.viewabilityLoopTimer=null,this.elem=e,this.wnd=t,this.loopInterval=250}return i.prototype.start=function(t){function e(){i.callback(),i.viewabilityLoopTimer=i.wnd.setTimeout(e,i.loopInterval)}var i=this;this.callback=t,e()},i.prototype.stop=function(){this.viewabilityLoopTimer&&(this.wnd.clearTimeout(this.viewabilityLoopTimer),this.viewabilityLoopTimer=null)},i.prototype.computeViewabilityPercentage=function(){var i=e.getViewportSize(this.wnd);return t(this.elem,i)},i}(viewabilityPercentageCalculator,utils),StandardViewability=function(t,e,i,n,r){"use strict";function o(t,e,o,s){Viewability.call(this,t,e,o,s),this.callback=null,this.windowEvents=["focus","blur","check","checkAndNotify"],this.documentEvents=["visibilitychange","mozvisibilitychange","msvisibilitychange","webkitvisibilitychange"],this.hiddenProperty=function(){var t,e=["hidden","mozHidden","webkitHidden","msHidden","oHidden"],i=null;for(t=0;t<e.length;t++)if(i=e[t],i in document)return i;return i}(),this.minElementArea=1,this.ancestors=this.getElementAncestors(),this.viewabilityObserver=null,window.IntersectionObserver?this.viewabilityObserver=new r(this.wnd,this.elem):(this.windowEvents=this.windowEvents.concat(["scroll","resize"]),window.MutationObserver?this.viewabilityObserver=new n(this.wnd,this.elem):this.viewabilityObserver=new i(this.wnd,this.elem))}return o.prototype=Object.create(Viewability.prototype),o.prototype.constructor=o,o.prototype.getElementAncestors=function(){for(var t=[],e=this.elem;e;)t.unshift(e),e=e.parentNode;return t},o.prototype.isViewabilityUnavailable=function(){return!window.IntersectionObserver&&this.isInIframe()},o.prototype.isInIframe=function(){var t,e;if(this.wnd.top!==this.wnd.self)return!0;for(t=this.wnd.top.document.getElementsByTagName("iframe"),e=0;e<t.length;e+=1)if(t[e]===this.elem)return!1;return!0},o.prototype.computeViewability=function(){var t=this.inFocus(),e=this.computeViewabilityReason(t),i={reason:e,focus:t};return!this.forceViewability()||e!==this.reasons.OUT_OF_VIEWPORT&&e!==this.reasons.IN_VIEWPORT?e!==this.reasons.IN_VIEWPORT?(i.perc=0,i):(i.perc=this.viewabilityObserver.computeViewabilityPercentage(),i):(i.perc=100,i)},o.prototype.computeViewabilityReason=function(t){var i,n,r=this.elem,o=e.getViewportSize(this.wnd),s=r.getBoundingClientRect(),a=s.width*s.height,l=this.ancestors;if("none"===r.style.display||"hidden"===r.style.visibility)return this.reasons.HIDDEN;for(i=0;i<l.length;i+=1)if(n=l[i].style,n&&("none"===n.display||"hidden"===n.visibility))return this.reasons.HIDDEN;return t?s.bottom<=0||s.right<=0||s.top>=o.height||s.left>=o.width?this.reasons.OUT_OF_VIEWPORT:a<this.minElementArea?this.reasons.TOO_SMALL:this.reasons.IN_VIEWPORT:this.reasons.NOT_IN_FOCUS},o.prototype.inFocus=function(){var t=this.wnd.document[this.hiddenProperty];return void 0!==t?!t:!e.canAccessTopWindow()||"function"!=typeof window.top.document.hasFocus||window.top.document.hasFocus()},o.prototype.attachListeners=function(t){var i;for(this.callback=t,i=0;i<this.windowEvents.length;i+=1)e.addEventListener(this.wnd,this.windowEvents[i],t,!0);for(i=0;i<this.documentEvents.length;i+=1)e.addEventListener(this.wnd.document,this.documentEvents[i],t,!0);this.viewabilityObserver.start(t)},o.prototype.detachListeners=function(){var t;for(t=0;t<this.windowEvents.length;t+=1)e.removeEventListener(this.wnd,this.windowEvents[t],this.callback,!0);for(t=0;t<this.documentEvents.length;t+=1)e.removeEventListener(this.wnd.document,this.documentEvents[t],this.callback,!0);this.viewabilityObserver.stop()},t.register(apiAdapter.STANDARD,o),t.register(apiAdapter.APPLE_NEWS,o),t.register(apiAdapter.OEMBED,o),t.register(apiAdapter.AMP_VIRALIZE_PLAYER,o),t.register(apiAdapter.AMP_IFRAME,o),o}(ViewabilityFactory,utils,PollingViewabilityObserver,MutationViewabilityObserver,IntersectionViewabilityObserver),AmpAdViewability=function(t){"use strict";function e(t,e,i,n){Viewability.call(this,t,e,i,n),this.detachViewabilityObserver=null,this.currentViewability=null,this.ampAdContext=utils.getAmpAdContext(),this.minElementArea=1}return e.prototype=Object.create(Viewability.prototype),e.prototype.constructor=e,e.prototype.isViewabilityUnavailable=function(){return!1},e.prototype.computeViewability=function(){var t=!this.ampAdContext.hidden,e=this.computeViewabilityReason(t),i={reason:e,focus:t};return e!==this.reasons.IN_VIEWPORT?(i.perc=0,i):(i.perc=this.currentViewability?Math.min(100,Math.round(100*this.currentViewability.intersectionRatio)):0,i)},e.prototype.computeViewabilityReason=function(t){var e,i;return null==this.currentViewability?this.reasons.FIXED_VIEWABILITY:(e=this.currentViewability.boundingClientRect,i=e.width*e.height,t?this.currentViewability.intersectionRatio<=0?this.reasons.OUT_OF_VIEWPORT:i<this.minElementArea?this.reasons.TOO_SMALL:this.reasons.IN_VIEWPORT:this.reasons.NOT_IN_FOCUS)},e.prototype.attachListeners=function(t){var e=this;this.detachViewabilityObserver=this.ampAdContext.observeIntersection(function(i){e.currentViewability=i[i.length-1],t()})},e.prototype.detachListeners=function(){this.detachViewabilityObserver&&this.detachViewabilityObserver()},t.register(apiAdapter.AMP_AD,e),e}(ViewabilityFactory),AmpVideoIframeViewability=function(t){"use strict";function e(t,e,i,n){Viewability.call(this,t,e,i,n),this.currentIntersectionRatio=0,this.refreshFunctionId=void 0,this.ampVideoIframe=utils.getAmpVideoIframe(),this.hiddenProperty=function(){var t,e=["hidden","mozHidden","webkitHidden","msHidden","oHidden"],i=null;for(t=0;t<e.length;t+=1)if(i=e[t],i in document)return i;return i}()}var i=250;return e.prototype=Object.create(Viewability.prototype),e.prototype.constructor=e,e.prototype.isViewabilityUnavailable=function(){return!1},e.prototype.computeViewability=function(){var t,e=this.inFocus();return t=e?this.currentIntersectionRatio>0?this.reasons.IN_VIEWPORT:this.reasons.OUT_OF_VIEWPORT:this.reasons.NOT_IN_FOCUS,{reason:t,focus:e,perc:Math.min(100,Math.round(100*this.currentIntersectionRatio))}},e.prototype.attachListeners=function(t){var e=this;this.ampVideoIframe.push(function(n){function r(){n.getIntersection(function(i){e.currentIntersectionRatio=i.intersectionRatio,t()})}r(),e.refreshFunctionId=setInterval(r,i)})},e.prototype.detachListeners=function(){clearInterval(this.refreshFunctionId)},e.prototype.inFocus=function(){var t=this.wnd.document[this.hiddenProperty];return void 0===t||!t},t.register(apiAdapter.AMP_VIDEO_IFRAME,e),e}(ViewabilityFactory),FBiaViewability=function(t,e){"use strict";function i(t,i,n,r){Viewability.call(this,t,i,n,r),this.boundedListener=e.bind(this.receiveMessage,this),this.callback=null}var n={enters_viewport:1,center_enters_viewport:100,center_exits_viewport:49,exits_viewport:-1};return i.prototype=Object.create(Viewability.prototype),i.prototype.constructor=i,i.prototype.isViewabilityUnavailable=function(){return!1},i.prototype.computeViewability=function(){return{reason:this.wnd.viewabilityPerc>0?this.reasons.IN_VIEWPORT:this.reasons.OUT_OF_VIEWPORT,focus:!0,perc:this.wnd.viewabilityPerc}},i.prototype.attachListeners=function(t){this.wnd.viewabilityPerc=n[this.wnd.lastViewabilityMessage],
this.callback=t,this.wnd.addEventListener("message",this.boundedListener)},i.prototype.detachListeners=function(){this.wnd.removeEventListener("message",this.boundedListener)},i.prototype.receiveMessage=function(t){n[t.data]&&(this.wnd.viewabilityPerc=n[t.data],this.callback&&this.callback())},t.register(apiAdapter.FACEBOOK_INSTANT_ARTICLES,i),i}(ViewabilityFactory,utils),IABViewability=function(){"use strict";function t(t,e,i){var n=i||2;this.viewability=t,this.callback=e,this.iabViewabilityTimeout=null,this.counter=8,this.loopInterval=n/this.counter*1e3}return t.prototype.start=function(){function t(){var n=e.viewability.computeViewability();n.perc>=50?(i-=1,0===i?e.callback():e.iabViewabilityTimeout=window.setTimeout(t,e.loopInterval)):(i=e.counter,e.iabViewabilityTimeout=window.setTimeout(t,e.loopInterval))}var e=this,i=this.counter;if(this.stop(),this.viewability.isViewabilityUnavailable())throw new ViewabilityUnavailableError;this.iabViewabilityTimeout=window.setTimeout(t,e.loopInterval)},t.prototype.stop=function(){window.clearTimeout(this.iabViewabilityTimeout)},t}(),CmpV1=function(){"use strict";var t="1",e=2e3,i=function(t){for(var e,i,n,r,o,s,a,l=window;!e;){try{l.frames.__cmpLocator&&(e=l)}catch(c){}if(l===window.top)break;l=l.parent}return i={},t.__cmp=function(t,o,s){return e?(n=Math.random().toString(32).substr(2),r={__cmpCall:{command:t,parameter:o,callId:n}},i[n]=s,void e.postMessage(r,"*")):void s({msg:"CMP not found"},!1)},a=function(t){try{o="string"==typeof t.data?JSON.parse(t.data):t.data,o.__cmpReturn&&(s=o.__cmpReturn,i[s.callId]&&(i[s.callId](s.returnValue,s.success),i[s.callId]=null))}catch(e){}},utils.addEventListener(window,"message",a),function(){utils.removeEventListener(window,"message",a)}},n=function(n,r){var o,s,a=utils.canAccessTopWindow(),l=a?window.top:window,c=function(){l.__cmp("getConsentData",null,function(e,i){var s,a,l;if(null!=o){if(i&&null==e.consentData)return void setTimeout(c,0);clearTimeout(o),o=null,i?(s="available",a=e.gdprApplies?1:0,l=e.consentData):(s="error",a=utils.isInUE(n)?1:0,l=""),r(t,s,a,l)}})};return a||(s=i(l)),l.__cmp?(o=setTimeout(function(){o=null,s&&s(),r(t,"timeout",utils.isInUE(n)?1:0,"")},e),void c()):void r("","unavailable",utils.isInUE(n)?1:0,"")};return{readCMPData:n,constructCMPPostMessageStub:i}}(),CmpV2=function(){"use strict";var t,e="2",i=2e3,n=function(){for(var t,e=window;e;){try{if(e.frames.__tcfapiLocator){t=e;break}}catch(i){}if(e===window.top)break;e=e.parent}return t},r=function(t){function e(t){var e,i={};try{i="string"==typeof t.data?JSON.parse(t.data):t.data}catch(n){}e=i.__tcfapiReturn,e&&"function"==typeof r[e.callId]&&(r[e.callId](e.returnValue,e.success),r[e.callId]=null)}var i=n(),r={};return t.__tcfapi=function(t,e,n,o){var s,a;i?(s=Math.random()+"",a={__tcfapiCall:{command:t,parameter:o,version:e,callId:s}},r[s]=n,i.postMessage(a,"*")):n({msg:"CMP not found"},!1)},utils.addEventListener(window,"message",e),function(){utils.removeEventListener(window,"message",e)}},o=function(n,o){var s,a,l,c,u,d;return t()?(u=utils.canAccessTopWindow(),d=u?window.top:window,null==d.__tcfapi&&(l=r(d)),s=function(){null!=a&&(clearTimeout(a),a=null),l&&l(),c&&(c=null,d.__tcfapi("removeEventListener",2,function(){},c))},a=setTimeout(function(){s(),o(e,"timeout",utils.isInUE(n)?1:0,"")},i),void d.__tcfapi("addEventListener",2,function(t,i){if(c=t.listenerId,null!=a)return i?i&&"tcloaded"===t.eventStatus?(s(),void o(e,"available",t.gdprApplies?1:0,t.tcString)):void(i&&"useractioncomplete"===t.eventStatus&&(s(),o(e,"available",t.gdprApplies?1:0,t.tcString))):(s(),void o(e,"error",utils.isInUE(n)?1:0,""))})):void o("","unavailable",utils.isInUE(n)?1:0,"")};return t=function(){return null!=window.__tcfapi||null!=n()},{isPresent:t,readCMPData:o,constructCMPPostMessageStub:r}}(),Cmp=function(){"use strict";var t=function(t,e){CmpV2.isPresent()?CmpV2.readCMPData(t,e):CmpV1.readCMPData(t,e)},e=function(t){CmpV2.isPresent()?null==t.__tcfapi&&CmpV2.constructCMPPostMessageStub(t):null==t.__cmp&&CmpV1.constructCMPPostMessageStub(t)};return{readCMPData:t,constructCMPPostMessageStub:e}}(),viralize=function(t,e){"use strict";var i=inDapIF?window.top:t;i.__VR=i.__VR||{},i.__VR.widgets=i.__VR.widgets||[],i.__VR.customScripts=i.__VR.customScripts||{},i.__VR.dataLayers=i.__VR.dataLayers||{};var n="((https?:)?//)?{endpoint_host}/.*[?&]",r="kxviralize_segs",o="_kxviralize_segs",s="VR-DMP-COLLECT",a="VR-INJECTOR-INSTANCES-MAP",l={},c={};return c.__VR=i.__VR,c.findScript=function(t,e){var i=document.getElementsByTagName("script"),r=null,o=null,s=null;"undefined"!=typeof e&&null!==e&&(o=n+"zid="+e,o=o.replace("{endpoint_host}",t),s=new RegExp(o,"gi"));for(var a=function(t){return!t.hasAttribute("data-injected")&&!!(null!==t.getAttribute("data-wid")||s&&s.test(t.getAttribute("src")))},l=i.length;l--;)if(a(i[l])){r=i[l];break}return r},c.findIframe=function(){return inDapIF?window.frameElement:null},c.generateSuffixId=function(){return Math.random().toString(32).substr(2)},c.markAsInjected=function(t){t.hasAttribute("data-injected")||t.setAttribute("data-injected",!0)},c.register=function(t,e,i){var n,r,o,s,l,u;if(e&&i&&this.registerOnSafeFrameApi(e,i),n={},r=utils.sessionStorage().getItem(a),null!=r&&(n=JSON.parse(utils.sessionStorage().getItem(a))),o=n[t.injectorName]||{count:0,instances:{}},s=o.count,l=t.config.get("max_family_instances",0),u=t.config.get("sid"),l>0&&s>=l)throw new MaxInstancesError("Sorry, but the "+t.injectorName+" format can be used at most "+l+" times.");if(o.instances[u])throw new DuplicateInjectorError("Duplicated injector for sid: "+u);o.instances[u]=!0,o.count+=1,n[t.injectorName]=o,utils.sessionStorage().setItem(a,JSON.stringify(n)),c.__VR.widgets.push(t)},c.registerOnSafeFrameApi=function(e,i){t.$sf&&t.$sf.ext&&t.$sf.ext.register(e,i)},c.unRegister=function(t){var e,i,n,r={},o=utils.sessionStorage().getItem(a);for(null!=o&&(r=JSON.parse(utils.sessionStorage().getItem(a))),e=r[t.injectorName]||{count:0,instances:{}},i=t.config.get("sid"),e.count>0&&(e.count-=1),r[t.injectorName]=e,utils.sessionStorage().setItem(a,JSON.stringify(r)),n=0;n<c.__VR.widgets.length;n+=1)c.__VR.widgets[n].config.get("sid")===i&&c.__VR.widgets.splice(n,1)},c.replaceInjector=function(t){for(var i=e.createElement("script"),n=t.attributes,r=0;r<n.length;r++)"data-injected"!==n[r].nodeName&&i.setAttribute(n[r].nodeName,n[r].value);i.src=i.src+"&cb="+(new Date).getTime();var o=t.parentNode;o.insertBefore(i,t),o.removeChild(t)},c.createIframe=function(t,i,n){var r=i?i+"px":"100%",o=n?n+"px":"100%",s={allowfullscreen:!0,webkitallowfullscreen:e.webkitFullscreenEnabled,mozallowfullscreen:e.mozFullScreenEnabled},a=utils.Element.create("iframe",{id:t,src:"about:blank",scrolling:"no",frameborder:0,marginheight:0,marginwidth:0,allow:"autoplay; fullscreen",width:r,height:o});for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&a.attr(l,s[l]);return a.elem.style.width=r,a.elem.style.height=o,a},c.createPageId=function(e){function i(){var t,e=52,i="",n=(new Date).getTime();for(n=utils.pad(n.toString(16),12),t=0;t<e;t+=1)i+=Math.round(Math.random()).toString();return i=parseInt(i,2).toString(16),n+i}var n,r,o=c.getApiAdapter(e),s=t.navigator?t.navigator:null,a=e.get("publisher"),l=e.get("page_url"),u=s?s.userAgent||"":"",d=utils.hashCode(a+l+u),p=utils.pad((16777215&d).toString(16),6),f=0;return o===apiAdapter.AMP_AD?(r=utils.getAmpAdWindowWithContext(),r.context.computeInMasterFrame(r,"VR-PAGEID-PREFIX",function(t){t(i())},function(t){n=t})):n=i(),n+p+f},c.getDetectedPublishingPlatform=function(t){var e=t.get("pub_platform","");return null!=utils.getAmpAdContext()||null!=utils.getAmpVideoIframe()||utils.isAmpIframe()?publishingPlatform.AMP:e},c.getApiAdapter=function(t){var e=t.get("pub_platform","");return null!=utils.getAmpAdContext()?apiAdapter.AMP_AD:null!=utils.getAmpVideoIframe()?apiAdapter.AMP_VIDEO_IFRAME:utils.isAmpIframe()?apiAdapter.AMP_IFRAME:""===e?apiAdapter.STANDARD:e},c.createSrc=function(i,n,r,o,s){var a,l,u={},d=utils.getRealDomain();return c.__VR.pageId=c.__VR.pageId||c.createPageId(o),l=s||{},l.player_size||(l.player_size={width:0,height:0}),a={page_id:c.__VR.pageId,screen:utils.getScreenSize(t),page:utils.getPageSize(t),viewport:utils.getViewportSize(t),player_size:{width:Math.round(l.player_size.width),height:Math.round(l.player_size.height)},semantic_data:l.semantic_data},l.player_position&&(a.player_position={top:Math.round(l.player_position.top),left:Math.round(l.player_position.left)}),u.player_session=JSON.stringify(a),e.referrer&&(u.r=e.referrer),l.cid&&(u.cid=l.cid),l.sound&&(u.sound=l.sound),l.gallery_init&&(u.gallery_init=l.gallery_init),l.sessionCounter>0&&(u.sc=l.sessionCounter),l.pub_platform&&(u.pub_platform=l.pub_platform),l.inj_api_adapter&&(u.inj_api_adapter=l.inj_api_adapter),l.activation&&(u.activation=l.activation),l.cs&&(u.cs=l.cs),null!=l.gdpr&&(u.gdpr=l.gdpr),l.cmp&&(u.cmp=l.cmp),d&&(u.dd=d),i+"/"+n+"/?"+r+"&"+utils.urlEncode(u)},c.createPlayerSrc=function(t,e){var i=t.get("is_preview"),n=t.get("is_test"),r=i?"preview":n?"test":"player",o=e||{};return c.createSrc(t.get("scheme")+"://"+t.get("endpoint_host"),r,t.get("base_query"),t,o)},c.findInjectionElem=function(t,e){var i={script:"",iframe:""};return i.iframe=c.findIframe(),i.script=document.currentScript||c.findScript(t,e),null===i.script&&utils.trackRequestEvent("adunit_request_error",Constants.ADUNIT_REQUEST_ERRORS.SCRIPT_NOT_FOUND),i},c.isInHead=function(t){for(var e=t.parentNode;null!=e;){if("head"===e.nodeName.toLowerCase())return!0;e=e.parentNode}return!1},c.setElementRemovedListener=function(t,e,i){function n(t,e){for(var i=e;null!=i;){if(t===i)return!0;i=i.parentNode}return!1}var r={childList:!0,subtree:!0};this.unsetElementRemovedListener();try{l=new MutationObserver(function(t){t.forEach(function(t){if(t.removedNodes.length>0)for(var r=0;r<t.removedNodes.length;r++)n(t.removedNodes[r],e)&&i()})}),l.observe(t,r)}catch(o){}},c.unsetElementRemovedListener=function(){l.disconnect&&(l.disconnect(),l={})},c.addPluginsForNotBlacklisted=function(t,e,i){var n={179:!0,358:!0,711:!0};null!=i&&null!=n[i]||c.addCustomScripts(t,null,e)},c.addCustomScripts=function(t,i,n){function r(t){var e=t;return n&&Object.keys(n).forEach(function(t){var i=new RegExp("{"+t+"}","g"),r=n[t];e=e.replace(i,r)}),e}function o(t){var i=e.createElement("script");i.setAttribute("id",u+t.id),i.src=r(t.src),i.setAttribute("async",""),i=e.body.appendChild(i)}function s(t){utils.Element.insertHTMLBefore(a,u+t.id,r(t.content))}var a,l,u="";for(i&&(u=i+"-"),a=e.createElement("placeholder"),e.body.appendChild(a),l=0;l<t.length;l+=1)c.__VR.customScripts[t[l].id]||(t[l].src?o(t[l]):t[l].content&&s(t[l]),c.__VR.customScripts[t[l].id]=!0);e.body.removeChild(a)},c.getInjectionPoint=function(i,n,r,o){for(var s=utils.Element.getAll(i),a=parseInt((r-n)/o)||1,l=function(t){return function(e){return 0!==e.offset().top&&e.text().length>t}},c=[],u=!1,d=r;d>=n;d-=a)if(c=utils.filter(s,utils.bind(l(d),this)),c.length>0){u=!0;break}if(u){var p=t.innerHeight;void 0===p&&(p=e.documentElement.clientHeight),c=utils.filter(c,function(t){return t.offset().top>p});var f=c.sort(function(t,e){return t.offset().top-e.offset().top});return f[0]?f[~~(f.length/2)]:null}return null},c.searchPlayerLocation=function(e,i,n){var r,o,s,a=function(t){for(var e=window,i=e.document.getElementById(t);null==i&&e!==e.parent&&utils.canAccessWindow(e.parent);)e=e.parent,i=e.document.getElementById(t);return null!==i&&(i=new utils.Element(i)),i},l=function(t){for(var e=window,i=e.document.querySelector(t);null==i&&e!==e.parent&&utils.canAccessWindow(e.parent);)e=e.parent,i=e.document.querySelector(t);return null!==i&&(i=new utils.Element(i)),i},u=new RegExp(/^id-.*/),d=new RegExp(/^sel-.*/),p=e.length,f="article p",h=10,m=100,v=20,y={auto:Constants.ADUNIT_REQUEST_ERRORS.LOCATION_AUTO_ERROR,inline:Constants.ADUNIT_REQUEST_ERRORS.LOCATION_INLINE_ERROR,idSelector:Constants.ADUNIT_REQUEST_ERRORS.LOCATION_BY_ID_ERROR,querySelector:Constants.ADUNIT_REQUEST_ERRORS.LOCATION_BY_SELECTOR_ERROR};for(s=0;s<p;s+=1){if(r=e[s],"inline"===r)return!n||""!==i&&i||utils.trackRequestEvent("adunit_request_error",y.inline),{playerLocation:i,usedCriteria:r};if("auto"===r?o=c.getInjectionPoint(f,h,m,v):u.test(r)?(o=a(r.slice(3)),r="idSelector"):d.test(r)&&(o=l(t.decodeURIComponent(r.slice(4))),r="querySelector"),o)return{playerLocation:o.elem,usedCriteria:r}}return n&&utils.trackRequestEvent("adunit_request_error",y[r]),{playerLocation:null,usedCriteria:null}},c.sendDmpData=function(e,i,n){c.readDmpUserSegments(r,function(t){c.setCookieSyncPixel(e,t)},n),c.__VR.dataLayers.dmp=c.__VR.dataLayers.dmp||{collected:!1,data:{}},c.__VR.dataLayers.dmp.collected||(c.__VR.dataLayers.dmp.collected=!0,c.__VR.dataLayers.dmp.data=i||{},t.dispatchEvent(new utils.CustomEvent(s)))},c.readDmpUserSegments=function(t,e,i){var n=250,r=function(t){function e(t){var e,i,n,r=t.length;for(i=0;i<r;i++){for(e=t[i],n=i-1;n>-1&&t[n]>e;n--)t[n+1]=t[n];t[n+1]=e}return t}return t?e(t.split(",")).join(","):""},s=r(i),a=localStorage.getItem(o),l=0,c=2,u=function(){var i,d=localStorage.getItem(o)!==a;d?(l+=1,i=r(localStorage.getItem(t)),i!==s?e(i):l<c&&setTimeout(u,n)):setTimeout(u,n)};setTimeout(u,n)},c.setCookieSyncPixel=function(t,e){var i=window.encodeURIComponent(e),n=t+"/u-segment/?seg="+i,r=new Image;r.onload=function(){},r.src=n},c.readCMPData=function(t,e){var i,n=t.get("gdpr");return n?(i=n.cs||"",void e("",n.cmp,n.gdpr?1:0,i)):void Cmp.readCMPData(t.get("country"),function(t,n,r,o){i=o||"",e(t,n,r,i)})},c.setupVPT=function(t){var e,i,n={EVENTS:t.EVENTS,ALL_ZID:t.ALL_ZID,queue:t.queue,on:t.on,once:t.once,off:t.off,addConfig:t.addConfig,getConfig:t.getConfig,play:t.play,pause:t.pause,mute:t.mute,unmute:t.unmute,enterFullscreen:t.enterFullscreen,exitFullscreen:t.exitFullscreen,showControls:t.showControls,hideControls:t.hideControls};i=window,utils.canAccessTopWindow()&&(i=window.top),null!=i.vpt?"[object Array]"===Object.prototype.toString.call(i.vpt.queue)&&(e=i.vpt.queue,i.vpt=n,c.__VR.vptimpl=t,e.forEach(function(t){t()})):(i.vpt=n,c.__VR.vptimpl=t)},c.evaluatePlayerPosition=function(e,i){var n,r,o,s,a=null,l=e.getBoundingClientRect();return i===apiAdapter.AMP_AD?(s=utils.getAmpAdContext(),a={top:s.initialLayoutRect.top,left:s.initialLayoutRect.left}):t!==window.top?inDapIF?(a=utils.getFifAbsolutePosition(t),a.top+=l.top,a.left+=l.left):t.$sf&&t.$sf.ext&&(o=t.$sf.ext.geom(),null!=o&&null!=o.self&&null!=o.self.t&&null!=o.self.l&&(a={top:o.self.t,left:o.self.l})):(n=t.pageYOffset||t.document.documentElement.scrollTop||t.document.body.scrollTop||0,r=t.pageXOffset||t.document.documentElement.scrollLeft||t.document.body.scrollLeft||0,a={top:l.top+n,left:l.left+r}),a},c}(wnd,doc),setupVPTImpl=function(){"use strict";function t(t,e){var i,n=r.getVrApis(e);if(null!=n)for(i=0;i<n.length;i+=1)n[i][t]()}var e={},i={},n={},r={},o="DELETED",s=function(t,e){var i=t+";"+e,n=Math.random().toString(32).substr(2);return i+";"+n},a=function(t,i,n){null!=e[t]&&null!=e[t][i]&&null!=e[t][i][n]&&(e[t][i][n]=o)},l=function(t,i){null!=e[t]&&null!=e[t][i]&&Object.keys(e[t][i]).forEach(function(e){a(t,i,e)})},c=function(t){var e={event:r.EVENTS.ALL,zid:r.ALL_ZID};return utils.isString(t)?e.event=t:(e.event=t.event||e.event,e.zid=t.zid||e.zid),e},u=function(t,e){Object.keys(e).forEach(function(i){t.push(e[i])})},d=function(t,i){var n=[],o=r.ALL_ZID,s=r.EVENTS.ALL;return e[o]&&e[o][s]&&u(n,e[o][s]),i!==o&&e[i]&&e[i][s]&&u(n,e[i][s]),t!==s&&(e[o]&&e[o][t]&&u(n,e[o][t]),e[i]&&e[i][t]&&u(n,e[i][t])),n};return r.emit=function(t,e,i,n){var r=d(t,e),s={event:t,zid:e,format:i,data:n,timestamp:(new Date).getTime()};r.forEach(function(t){t!==o&&utils.setImmediate(function(){t(s)})})},r.on=function(t,i){var n=c(t),r=s(n.zid,n.event);for(e[n.zid]||(e[n.zid]={}),e[n.zid][n.event]||(e[n.zid][n.event]={});null!=e[n.zid][n.event][r];)r=s(n.zid,n.event);return e[n.zid][n.event][r]=i,r},r.once=function(t,i){var n=c(t),s=r.on(n,function(t){e[n.zid][n.event][s]!==o&&(r.off(n,s),i(t))});return s},r.off=function(t,e){var i=c(t);null!=e?a(i.zid,i.event,e):l(i.zid,i.event)},r.EVENTS={ALL:"VPT-EVENT::*",PLAYER_READY:"VPT-EVENT::PLAYER_READY",ACTIVATION:"VPT-EVENT::ACTIVATION",COLLAPSE:"VPT-EVENT::COLLAPSE",END:"VPT-EVENT::END",AD_SESSION_START:"VPT-EVENT::AD_SESSION_START",AD_SESSION_END:"VPT-EVENT::AD_SESSION_END",AD_IMPRESSION:"VPT-EVENT::AD_IMPRESSION",START:"VPT-EVENT::START",FIRST_QUARTILE:"VPT-EVENT::FIRST_QUARTILE",MID_POINT:"VPT-EVENT::MID_POINT",THIRD_QUARTILE:"VPT-EVENT::THIRD_POINT",COMPLETE:"VPT-EVENT::COMPLETE",CONTENT_START:"VPT-EVENT::CONTENT_START",CONTENT_END:"VPT-EVENT::CONTENT_END",ERROR:"VPT-EVENT::ERROR",CLICK:"VPT-EVENT::CLICK",SKIP:"VPT-EVENT::SKIP",PLAYING:"VPT-EVENT::PLAYING",PAUSED:"VPT-EVENT::PAUSED",MUTED:"VPT-EVENT::MUTED",UNMUTED:"VPT-EVENT::UNMUTED"},r.ALL_ZID="VPT-ZID::*",r.queue={push:function(t){setTimeout(t,0)}},r.addConfig=function(){var t,e;utils.isString(arguments[0])?(t=arguments[0],e=arguments[1]):(t=r.ALL_ZID,e=arguments[0]),i[t]=e},r.getConfig=function(t){return null!=i[t]?i[t]:i[r.ALL_ZID]},r.addVrApi=function(t,e){return null==n[t]&&(n[t]=[]),n[t].push(e),n[t].length-1},r.removeVrApi=function(t,e){null!=n[t]&&null!=n[t][e]&&(n[t][e]=null)},r.play=function(){t("play",Array.prototype.slice.call(arguments))},r.pause=function(){t("pause",Array.prototype.slice.call(arguments))},r.mute=function(){t("mute",Array.prototype.slice.call(arguments))},r.unmute=function(){t("unmute",Array.prototype.slice.call(arguments))},r.enterFullscreen=function(){t("enterFullscreen",Array.prototype.slice.call(arguments))},r.exitFullscreen=function(){t("exitFullscreen",Array.prototype.slice.call(arguments))},r.showControls=function(){t("showControls",Array.prototype.slice.call(arguments))},r.hideControls=function(){t("hideControls",Array.prototype.slice.call(arguments))},r.getVrApis=function(t){var e,i;return e=t.length>0&&utils.isString(t[0])?t[0]:r.ALL_ZID,e!==r.ALL_ZID?i=n[e]:(i=[],Object.keys(n).forEach(function(t){i=i.concat(n[t])})),null==i||0===i.length?[]:utils.filter(i,function(t){return null!=t})},function(){viralize.setupVPT(r)}}(),VpaidVideoPlayerBase=function(){this._slot=null,this._eventsCallbacks={},this._attributes={companions:"",desiredBitrate:256,duration:-2,expanded:!1,height:0,icons:!1,linear:!0,remainingTime:-2,skippableState:!1,viewMode:"normal",width:0,volume:1},this._viralizePlayerToVpaidEventMap={"event::start":["AdVideoStart"],"event::firstQuartile":["AdVideoFirstQuartile"],"event::midpoint":["AdVideoMidpoint"],"event::thirdQuartile":["AdVideoThirdQuartile"],"event::clickthrough":["AdClickThru"],"event::pause":["AdPaused"],"event::resume":["AdPlaying"],"event::error":["AdError"],"event::mute":["AdVolumeChange"],"event::unmute":["AdVolumeChange"],"event::setInteractionMode":["AdInteraction"]},this._parameters={},this._skippedOrCompleted=!1,this._slotWindow=null,this.config=null,this.viralize_player_url=null,this.detectedPlatform=null,this.apiAdapter=null,this.loadEvent="event::adLoaded",this._supportsMultiRun=!1,this._maxSessions=null,this._maxRunTime=60,this._runTimeSoFar=0,this._sessionCounter=1,this._firstRunEvents=["event::start","event::adLoaded","event::controllerLoaded"],this.impressionDone=!1,this.log=new Log("VPAID")};VpaidVideoPlayerBase.prototype.initAd=function(t,e,i,n,r,o){var s=o.slot.ownerDocument;this._slot=o.slot,this._attributes.desiredBitrate=n,this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this._parameters=JSON.parse(r.AdParameters),this._slotWindow=s.defaultView||s.parentWindow,this.config=new ConfigWrapper(this._parameters.config),this.detectedPlatform=viralize.getDetectedPublishingPlatform(this.config),this.apiAdapter=viralize.getApiAdapter(this.config),this._maxSessions=this.config.get("reload_to_impressions",null),this._supportsMultiRun=null!==this._maxSessions&&this._maxSessions>1,this.loadEvent=this.config.get("rl",!1)?"event::adLoaded":"event::controllerLoaded",this._viralizePlayerToVpaidEventMap[this.loadEvent]=["AdLoaded"],this._getPlayerUrl(this._parameters.viralize_player_url,utils.bind(function(t){this.viralize_player_url=t,this.viralize_player_url?this._initAd():this._invalidParametersWhileLoading()},this))},VpaidVideoPlayerBase.prototype.loadPlayer=function(t){var e,i=this.config.get("zid"),n=this.config.get("gdpr",{}),r=this.config.get("country"),o=viralize.createIframe("viralize-player-iframe-"+viralize.generateSuffixId());o.appendTo(this._slot),this._playerIframe=o.elem,this._hide(),e={"gdpr_consent_?\\d*":n.cs||"",gdpr:n.gdpr?1:0,country:r},viralize.addPluginsForNotBlacklisted(this.config.get("plugins",[]),e,this.config.get("publisher")),this._setupCommunication(),this._initViewability(),injectorPlayerEmitter.on("event::loadPlayerError",utils.bind(function(){this._callEvent("AdError")},this)),utils.loadPlayerIframe(o,t,this.config,i),this._playerIframe.style.cssText="top: 0; left: 0; position: absolute;"+this._playerIframe.style.cssText},VpaidVideoPlayerBase.prototype._setupCommunication=function(){injectorPlayerEmitter.on("event::impression",utils.bind(function(){this.impressionDone=!0,this._show(),this._callEvent("AdImpression")},this)),injectorPlayerEmitter.on("event::skip",utils.bind(function(){this._skippedOrCompleted=!0,this._callEvent("AdSkipped"),injectorPlayerEmitter.emit("cmd::skipAd")},this)),injectorPlayerEmitter.on("event::complete",utils.bind(function(){this._skippedOrCompleted=!0,this._callEvent("AdVideoComplete"),injectorPlayerEmitter.emit("cmd::complete")},this)),injectorPlayerEmitter.on("cmd::remove",utils.bind(function(t){null!==t&&this._canContinue(t)?(this._hide(),this._sessionCounter+=1,this._deregisterAllEvents(),this._skippedOrCompleted=!1,this._getPlayerUrl(this._parameters.viralize_player_url,utils.bind(function(t){this.viralize_player_url=t,this.viralize_player_url?(injectorPlayerEmitter.on(this.loadEvent,function(){injectorPlayerEmitter.emit("cmd::startAd")}),this._initAd()):this._invalidParametersWhileLoading()},this))):(this._skippedOrCompleted||this.impressionDone||this._callEvent("AdError"),this._callEvent("AdStopped"))},this)),injectorPlayerEmitter.on("event::timeupdate",utils.bind(function(t){var e=t.data;this._attributes.duration<0||(this._attributes.remainingTime=this._attributes.duration-e)},this)),injectorPlayerEmitter.on("event::durationchange",utils.bind(function(t){this._attributes.duration=t.data,this._attributes.remainingTime=t.data,this._runTimeSoFar+=this._attributes.duration,this._callEvent("AdDurationChange")},this)),injectorPlayerEmitter.on("cmd::showskip",utils.bind(function(){this._attributes.skippableState=!0,this._callEvent("AdSkippableStateChange")},this));for(var t in this._viralizePlayerToVpaidEventMap)this._firstRunEvents.includes(t)&&this._sessionCounter>1||this._viralizePlayerToVpaidEventMap.hasOwnProperty(t)&&this._viralizePlayerToVpaidEventMap[t].forEach(function(e){injectorPlayerEmitter.on(t,utils.bind(function(){this._callEvent(e)},this))},this)},VpaidVideoPlayerBase.prototype._invalidParametersWhileLoading=function(){this._callEvent("AdError",'Incorrect VAST AdParameters: expected a json containing "viralize_player_url" and "config" properties')},VpaidVideoPlayerBase.prototype._deregisterAllEvents=function(){injectorPlayerEmitter.off()},VpaidVideoPlayerBase.prototype._canContinue=function(t){return this._supportsMultiRun&&!t.skipped&&t.impression&&this._runTimeSoFar<this._maxRunTime&&this._sessionCounter<this._maxSessions},VpaidVideoPlayerBase.prototype._initViewability=function(){var t=ViewabilityFactory.getInstance(this.apiAdapter,this._playerIframe,this._slotWindow,function(){return!1},utils.bind(function(t){injectorPlayerEmitter.emit("inj::viewability",t)},this)),e=new IABViewability(t,utils.bind(function(){injectorPlayerEmitter.emit("inj::viewable")},this));injectorPlayerEmitter.on("cmd::startViewability",utils.bind(function(){try{t.start(),e.start(),injectorPlayerEmitter.emit("inj::viewabilityAvailable")}catch(i){injectorPlayerEmitter.emit("inj::viewabilityNotAvailable")}},this)),injectorPlayerEmitter.on("cmd::stopViewability",function(){t.stop(),e.stop()})},VpaidVideoPlayerBase.prototype._callEvent=function(t,e){var i=e||"";null!=this._eventsCallbacks[t]&&this._eventsCallbacks[t](i)},VpaidVideoPlayerBase.prototype.handshakeVersion=function(){return"2.0"},VpaidVideoPlayerBase.prototype.startAd=function(){injectorPlayerEmitter.emit("cmd::startAd"),this._callEvent("AdStarted")},VpaidVideoPlayerBase.prototype.stopAd=function(){injectorPlayerEmitter.emit("cmd::stopAd")},VpaidVideoPlayerBase.prototype.setAdVolume=function(t){t>0&&!this.impressionDone||(injectorPlayerEmitter.emit("cmd::setAdVolume",{volume:t}),this._attributes.volume=t)},VpaidVideoPlayerBase.prototype.getAdVolume=function(){return this._attributes.volume},VpaidVideoPlayerBase.prototype.resizeAd=function(t,e,i){this._attributes.width=t,this._attributes.height=e,this._attributes.viewMode=i,this._playerIframe.style.width=t+"px",this._playerIframe.style.height=e+"px"},VpaidVideoPlayerBase.prototype.pauseAd=function(){injectorPlayerEmitter.emit("cmd::pauseAd")},VpaidVideoPlayerBase.prototype.resumeAd=function(){injectorPlayerEmitter.emit("cmd::resumeAd")},VpaidVideoPlayerBase.prototype.expandAd=function(){this._attributes.expanded=!0,injectorPlayerEmitter.emit("cmd::expand")},VpaidVideoPlayerBase.prototype.getAdExpanded=function(){return this._attributes.expanded},VpaidVideoPlayerBase.prototype.getAdSkippableState=function(){return this._attributes.skippableState},VpaidVideoPlayerBase.prototype.collapseAd=function(){this._attributes.expanded=!1,injectorPlayerEmitter.emit("cmd::collapse")},VpaidVideoPlayerBase.prototype.skipAd=function(){this._attributes.skippableState&&injectorPlayerEmitter.emit("cmd::skipAd")},VpaidVideoPlayerBase.prototype.subscribe=function(t,e,i){var n;"function"==typeof t&&(n=null!=i?t.bind(i):t,this._eventsCallbacks[e]=n)},VpaidVideoPlayerBase.prototype.unsubscribe=function(t){this._eventsCallbacks[t]=null},VpaidVideoPlayerBase.prototype.getAdWidth=function(){return this._attributes.width},VpaidVideoPlayerBase.prototype.getAdHeight=function(){return this._attributes.height},VpaidVideoPlayerBase.prototype.getAdRemainingTime=function(){return this._attributes.remainingTime},VpaidVideoPlayerBase.prototype.getAdDuration=function(){return this._attributes.duration},VpaidVideoPlayerBase.prototype.getAdCompanions=function(){return this._attributes.companions},VpaidVideoPlayerBase.prototype.getAdIcons=function(){return this._attributes.icons},VpaidVideoPlayerBase.prototype.getAdLinear=function(){return this._attributes.linear},VpaidVideoPlayerBase.prototype._getPlayerUrl=function(t,e){var i,n,r,o,s={};return t?(n=this._slot.getBoundingClientRect(),i=viralize.__VR.pageId||viralize.createPageId(this.config),viralize.__VR.pageId=i,s.player_session=JSON.stringify({page_id:i,screen:utils.getScreenSize(wnd),page:utils.getPageSize(wnd),viewport:utils.getViewportSize(wnd),player_size:{width:Math.round(n.width),height:Math.round(n.height)},pub_platform:this.detectedPlatform}),doc.referrer&&(s.r=doc.referrer),this.apiAdapter!==apiAdapter.STANDARD&&(s.inj_api_adapter=this.apiAdapter),o=utils.getRealDomain(),o&&(s.dd=o),s.sc=this._sessionCounter,void viralize.readCMPData(this.config,utils.bind(function(i,n,o,a){return s.gdpr=o,s.cs=a,s.cmp=n,r=t+"&"+utils.urlEncode(s),0===t.indexOf("http")?void e(r):void e(this._getProtocol()+r)},this))):void e()},VpaidVideoPlayerBase.prototype._getProtocol=function(){for(var t=this._slotWindow,e=t.location.protocol;0!==e.indexOf("http");)t=t.parent,e=t.location.protocol;return e},VpaidVideoPlayerBase.prototype._show=function(){this._playerIframe&&(this._playerIframe.style.display="block")},VpaidVideoPlayerBase.prototype._hide=function(){this._playerIframe&&(this._playerIframe.style.display="none")};var VpaidVideoPlayer=function(){};VpaidVideoPlayer.prototype=new VpaidVideoPlayerBase,VpaidVideoPlayer.prototype._initAd=function(){try{this.loadPlayer(this.viralize_player_url)}catch(t){throw utils.reportError(t,"_initAd"),t}};var getVPAIDAd=function(){try{return setupVPTImpl(),new VpaidVideoPlayer}catch(t){throw utils.reportError(t,"getVPAIDAd"),t}},templates={player:'<!DOCTYPE html>\n<html>\n    <head>\n        <meta http-equiv="content-type" content="text/html; charset=UTF-8">\n        <link rel="icon" href="data:;base64,iVBORw0KGgo=">\n        {{scripts}}\n        <script type="text/javascript">\n            Ecg(window, "ecg", "{{ecgEndpoint}}");\n            ecg("create");\n        </script>\n        <title>Viralize Player</title>\n    </head>\n    <body>\n        <script type="text/javascript">\n            function onPlayerReady (config, injectorPlayerEmitter, vpt) {\n                window.config = config;\n                window.injectorPlayerEmitter = injectorPlayerEmitter;\n\n                if (vpt != null) {\n                    window.vpt = vpt;\n                }\n\n                var user_data = config.user_data || {};\n                var sentryConfig = {{sentryConfig}};\n                var player = new Player(config, sentryConfig);\n                player.init();\n                injectorPlayerEmitter.emit("cmd::dmp_user_data", user_data);\n            }\n\n            if (window.config && window.injectorPlayerEmitter) {\n                // window.vpt could be undefined, and this is the expected behaviour\n                // for format without the api (as vpaid)\n                onPlayerReady(window.config, window.injectorPlayerEmitter, window.vpt);\n            } else {\n                window.onPlayerReady = onPlayerReady;\n            }\n        </script>\n    </body>\n</html>\n'};