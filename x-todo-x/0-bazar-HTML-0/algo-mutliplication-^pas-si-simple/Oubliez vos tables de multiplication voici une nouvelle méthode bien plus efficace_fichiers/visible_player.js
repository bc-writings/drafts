var ultimediaVisiblePlayer=function(){var n=false;var o=new Array();var f=new Array();var M=false;var L=false;var B=false;var N=new Array();var z=new Array();var A=new Array();var d=new Array();var v=new Array();var C=new Array();var O=new Array();var u=0;var r=0;var m=300;var E=this;var x=7;var I=false;var F=false;var D=false;var q=false;var y=0;var j=false;var s=false;var G=false;var p=false;var J=false;var l=false;var c=new Array();var t=window.outerWidth||screen.width;var K=(t<=420)?true:false;var b=window.outerHeight;var a=new Array();var k=false;var h=false;var g=this;window.addEventListener("scroll",function(P){if(!n&&I!=false){clearTimeout(u);u=setTimeout(function(){g.scrollVisiblePlayer()},15);clearTimeout(r);r=setTimeout(function(){E.check_play()},200)}},false);this.addCss=function(P,T,R,S,Q){if(!I&&typeof P!="undefined"&&P!=0){I=".visible_player {position: fixed !important; z-index: 10000 !important;";if(K){switch(Q){case 1:S=t;break;case 2:S=t*0.75;break;case 3:S=t*0.45;break;case 4:S=t*0.33;break;default:S=t*0.75;break}I=I+"top : auto !important; left: 0 !important; bottom:0 !important; right:auto !important;";D="auto";q=T;y=R;j="0";s="0";G="auto"}else{switch(P){case 1:I=I+"top : auto !important; left: auto !important; bottom:"+T+"px !important; right:"+R+"px !important;";D="auto";j=T;s="auto";G=R;break;case 2:I=I+"bottom : auto !important; left: auto !important; top:"+T+"px !important; right:"+R+"px !important;";D=T;j="auto";s="auto";G=R;break;case 3:I=I+"bottom : auto !important; right: auto !important; top:"+T+"px !important; left:"+R+"px !important;";D=T;j="auto";s=R;G="auto";break;case 4:I=I+"top : auto !important; right: auto !important; bottom:"+T+"px !important; left:"+R+"px !important;";D="auto";j=T;s=T;G="auto";break}}I=I+"width: "+S+"px !important;}";F=P;p=S;l=document.head||document.getElementsByTagName("head")[0],J=document.createElement("style");J.type="text/css";if(J.styleSheet){J.styleSheet.cssText=I}else{J.appendChild(document.createTextNode(I))}l.appendChild(J)}};this.findVideos=function(Y,T,aa,U,W){this.addCss(Y,T,aa,U,W);var R=document.querySelectorAll("iframe");for(var X=0;X<R.length;X++){if(R[X].hasAttribute("src")){if(R[X].getAttribute("src").match(/(ultimedia|digiteka)\.(com|net)/)&&o.indexOf(R[X])==-1){B=o.length;o.push(R[X]);a.push(R[X].getAttribute("style"));N[B]="pause";A[B]=true;c[B]=R[X].className;v[B]=false;R[X].contentWindow.postMessage("your_id="+B,"*");if(n){R[X].contentWindow.postMessage("end_of_visible","*")}var S=R[X].parentNode;var Q=document.createElement("div");Q.id=B+"_visible_player_brother";S.insertBefore(Q,R[X]);var V="#"+S.parentNode.id+" ."+S.className+" iframe#"+R[X].id+I,Z=document.head||document.getElementsByTagName("head")[0],P=document.createElement("style");P.type="text/css";if(P.styleSheet){P.styleSheet.cssText=V}else{P.appendChild(document.createTextNode(V))}Z.appendChild(P)}else{if(R[X].getAttribute("src").match(/(ultimedia|digiteka)\.(com|net)/)&&o.indexOf(R[X])!=-1){R[X].contentWindow.postMessage("your_id="+o.indexOf(R[X]),"*");if(typeof(R[X].className)!="undefined"&&R[X].className=="visible_player"){R[X].contentWindow.postMessage("visible_player_on_focus=1","*")}if(n){R[X].contentWindow.postMessage("end_of_visible","*")}}}}}};this.scrollVisiblePlayer=function(){for(var ag=0;ag<o.length;ag++){var af=document.compatMode!=="BackCompat";var S=af?document.documentElement:document.body;var W=(document.body.scrollLeft!=0)?document.body.scrollLeft:document.documentElement.scrollLeft;var V=(document.body.scrollTop!=0)?document.body.scrollTop:document.documentElement.scrollTop;var ad="innerWidth" in window?window.innerWidth:S.clientWidth;var P="innerHeight" in window?window.innerHeight:S.clientHeight;var U=[W,V,W+ad,V+P,ad,P];if(A[ag]){var W=0,V=0;var Z=document.getElementById(ag+"_visible_player_brother");if(null==Z||"undefined"==typeof Z){return}if(h&&o[ag].classList.contains("visible_extend")){E.toggleExtendPlayer(o[ag],false,ag)}if(!v[ag]||!o[ag].classList.contains("visible_player")){var X=o[ag].offsetWidth,ah=o[ag].offsetHeight}else{var X=Z.offsetWidth,ah=Z.offsetHeight}while(Z.offsetParent!==null){W+=Z.offsetLeft;V+=Z.offsetTop;Z=Z.offsetParent}var ai=o[ag].getBoundingClientRect();var ac=(F==1||F==4)?P-ai.top-ah:ai.top;var ab=(F==1||F==2)?ad-ai.left-X:ai.left;var aa=[W,V,W+X,V+ah,X,ah];var T=(f[ag]==1||f[ag]==2)&&(U[0]<=aa[2])&&(U[1]>=aa[1]+0.5*aa[5])&&(U[2]>=aa[0])&&(U[3]>=aa[3]);var Y=(f[ag]==1||f[ag]==3)&&(U[0]<=aa[2])&&(U[3]<=aa[1]+0.5*aa[5])&&(U[2]>=aa[0])&&(U[1]<=aa[1]);var R=false;if(f[ag]==5){R=M}else{R=!M&&((T||Y)&&N[ag]=="play"&&(typeof z[ag]!=="undefined"&&!z[ag]))}if(!(T||Y)&&(typeof ultimediaNotification!="undefined"&&ultimediaNotification.is_notif_visible)){ultimediaNotification.hideNotif()}if(0<o[ag].offsetHeight&&0<o[ag].offsetWidth&&R&&!O[ag]&&(M||(!n&&f[ag]!=5))&&(!v[ag]||!o[ag].classList.contains("visible_player"))){o[ag].style.position="fixed";o[ag].style.height=ah+"px";o[ag].style.width=X+"px";o[ag].style.opacity="0.1";o[ag].style.zIndex="10000";if(F==1){o[ag].style.bottom=ac+"px";o[ag].style.right=ab+"px"}else{if(F==2){o[ag].style.top=ac+"px";o[ag].style.right=ab+"px"}else{if(F==3){o[ag].style.top=ac+"px";o[ag].style.left=ab+"px"}else{if(F==4){o[ag].style.bottom=ac+"px";o[ag].style.left=ab+"px"}}}}for(var ae=0;ae<f.length;ae++){if(ag!=ae){i(ae)}}o[ag].className="";if(f[ag]==5&&!K){if(X<10&&ah<10){ah=200;X=320}}if((f[ag]==5&&L)||f[ag]!=5){e(ag,true,ah,X,ac,ab)}}else{if(!R&&(v[ag]||o[ag].classList.contains("visible_player"))){e(ag,false,ah,X,ac,ab)}}}else{if("undefined"!=typeof A[ag]){var W=0,V=0;var Z=document.getElementById(o[ag]._target+"_visible_player").parentNode;if(null==Z||"undefined"==typeof Z){return}if(h&&o[ag].classList.contains("visible_extend")){E.toggleExtendPlayer(o[ag],false,ag)}var X=Z.offsetWidth,ah=Z.offsetHeight;while(Z.offsetParent!==null){W+=Z.offsetLeft;V+=Z.offsetTop;Z=Z.offsetParent}var ai=document.getElementById(o[ag]._target).getBoundingClientRect();var ac=(F==1||F==4)?P-ai.top-ah:ai.top;var ab=(F==1||F==2)?ad-ai.left-X:ai.left;var aa=[W,V,W+X,V+ah,X,ah];var T=(f[ag]==1||f[ag]==2)&&(U[0]<=aa[2])&&(U[1]>=aa[1]+0.5*aa[5])&&(U[2]>=aa[0])&&(U[3]>=aa[3]);var Y=(f[ag]==1||f[ag]==3)&&(U[0]<=aa[2])&&(U[3]<=aa[1]+0.5*aa[5])&&(U[2]>=aa[0])&&(U[1]<=aa[1]);var R=!M&&(Y||T);var Q=o[ag]._jw.getState()=="PLAYING"||o[ag]._jw.getState()=="playing"||o[ag]._jw.getState()=="buffer"||o[ag]._jw.getState()=="BUFFER"||o[ag]._state=="preroll"||o[ag]._state=="after_preroll"||o[ag]._state=="before_preroll"&&!o[ag]._prefetching;if(d[ag]=="pauseAd"){Q=false}else{if(d[ag]=="pause"&&Q){for(var ae=0;ae<f.length;ae++){if(ag!=ae){i(ae)}}d[ag]="play"}else{if(!Q){d[ag]="pause"}}}if(!R&&(typeof ultimediaNotification!="undefined"&&ultimediaNotification.is_notif_visible)){ultimediaNotification.hideNotif()}var aj=document.getElementById(o[ag]._target+"_visible_player");if(R&&Q&&!O[ag]&&(!v[ag]||!aj.classList.contains("visible_player"))){e(ag,true,ah,X,ac,ab);for(var ae=0;ae<f.length;ae++){if(ag!=ae){i(ae)}}}else{if((!R||!Q)&&(v[ag]||aj.classList.contains("visible_player"))){e(ag,false,ah,X,ac,ab)}}}}}};function e(ak,Q,ah,Y,ad,ac){if(Q&&!k){for(var ab=0;ab<f.length;ab++){if(f[ab]!=5&&ab!=ak){f[ab]=0}}k=true}Y=Math.round(Y);ah=Math.round(ah);var aj=false;var T=false;var S=false;var S=false;var V=false;var V=false;var ae=false;if(A[ak]){var W=o[ak].contentWindow;if(null==W||"undefined"==typeof o[ak].contentWindow){return}aj=document.getElementById(ak+"_visible_player_brother");if(Q){if(f[ak]!=5&&M){return}E.set_in_page_visible_player(true);v[ak]=1;O[ak]=1;if(f[ak]!=5){aj.style.width=Y+"px";aj.style.height=ah+"px";aj.style.backgroundColor="black"}W.postMessage("fb_btn_hide","*");C[ak]=new Array();if(K){if(f[ak]==5&&F==2&&M&&q){var X=Math.round(t)-y;var ag=Math.round((t*9)/16);T=q+"px !important;";ae=Math.round(y/2)+"px !important;";if(typeof screen!="undefined"){window.addEventListener("orientationchange",function(){if(M){if(screen.width==t&&typeof(window.orientation)!="undefined"&&(window.orientation==-90||window.orientation==90)){ae=Math.round((screen.height-X)/2)+"px !important;"}else{if(screen.width&&screen.width>t){ae=Math.round((screen.width-X)/2)+"px !important;"}else{ae=Math.round(y/2)+"px !important;"}}o[ak].style.cssText="z-index:10000;position:fixed !important;height:"+ag+"px !important;width:"+X+"px !important;bottom:"+S+"right:"+V+"top:"+T+"left:"+ae;E.resizeDTK(X,ag,ak)}})}}else{var X=Math.round(p);var ag=Math.round((p*9)/16);T="auto !important;";ae="0 !important;"}var R=1;S="0 !important;";V="0 !important;";o[ak].style.cssText="z-index:10000;position:fixed !important;height:"+ag+"px !important;width:"+X+"px !important;bottom:"+S+"right:"+V+"top:"+T+"left:"+ae;o[ak].style.opacity=R;o[ak].className="visible_player";E.resizeDTK(X,ag,ak)}else{for(var af=1;af<=m;af++){C[ak].push(setTimeout(function(al){return function(){switch(F){case 1:T=D+" !important;";S=ad+(j-ad)*al/m;S=S+"px !important;";V=ac+(G-ac)*al/m;V=V+"px !important;";ae=s+" !important;";break;case 2:T=ad+(D-ad)*al/m;T=T+"px !important;";S=j+" !important;";V=ac+(G-ac)*al/m;V=V+"px !important;";ae=s+" !important;";break;case 3:T=ad+(D-ad)*al/m;T=T+"px !important;";S=j+" !important;";V=G+" !important;";ae=ac+(s-ac)*al/m;ae=ae+"px !important;";break;case 4:T=D+" !important;";S=ad+(j-ad)*al/m;S=S+"px !important;";V=G+" !important;";ae=ac+(s-ac)*al/m;ae=ae+"px !important;";break}var an=Math.round(ah+(ah/Y*p-ah)*al/m);var ao=Math.round(Y+(p-Y)*al/m);var am=0.1+(0.9)*al/m;o[ak].style.cssText="z-index:10000;position:fixed !important;height:"+an+"px !important;width:"+ao+"px !important;bottom:"+S+"right:"+V+"top:"+T+"left:"+ae;o[ak].style.opacity=am;if(al==m){o[ak].className="visible_player";o[ak].style.removeProperty("width");o[ak].style.removeProperty("opacity");o[ak].style.removeProperty("z-index");o[ak].style.removeProperty("position");o[ak].style.removeProperty("bottom");o[ak].style.removeProperty("right");o[ak].style.removeProperty("top");o[ak].style.removeProperty("left");O[ak]=0;E.resizeDTK(ao,an,ak);W.postMessage("VisiblePlayerEnable","*")}}}(af),af))}}}else{if(f[ak]==5&&M){return}E.set_in_page_visible_player(false);for(var aa in C[ak]){clearTimeout(C[ak][aa])}aj.style.width="";aj.style.height="";if(typeof a[ak]!=="undefined"&&a[ak]!==null){o[ak].style.cssText=a[ak]}else{o[ak].style.removeProperty("height");o[ak].style.removeProperty("width");o[ak].style.removeProperty("zIndex");o[ak].style.removeProperty("position");o[ak].style.removeProperty("bottom");o[ak].style.removeProperty("right")}o[ak].style.removeProperty("opacity");o[ak].className=c[ak];O[ak]=0;v[ak]=0;W.postMessage("fb_btn_show","*");E.resizeDTK(Y,ah,ak)}}else{if("undefined"!=typeof A[ak]){var U=document.getElementById(o[ak]._target+"_visible_player");if(Q){E.set_in_page_visible_player(true);v[ak]=1;O[ak]=1;U.parentNode.style.width=Y+"px";U.parentNode.style.height=ah+"px";U.parentNode.style.backgroundColor="black";o[ak].setVisiblePlayer(true);o[ak].showPanel(false);if(K){var ag=Math.round((p*9)/16);var X=Math.round(p);var R=1;T="auto !important;";S="0 !important;";V="0 !important;";ae="0 !important;";U.style.cssText="z-index:10000;position:fixed !important;height:"+ag+"px !important;width:"+X+"px !important;bottom:"+S+"right:"+V+"top:"+T+"left:"+ae;U.style.opacity=R}else{for(var af=1;af<=m;af++){C[ak]=setTimeout(function(al){return function(){switch(F){case 1:T=D+" !important;";S=ad+(j-ad)*al/m;S=S+"px !important;";V=ac+(G-ac)*al/m;V=V+"px !important;";ae=s+" !important;";break;case 2:T=ad+(D-ad)*al/m;T=T+"px !important;";S=j+" !important;";V=ac+(G-ac)*al/m;V=V+"px !important;";ae=s+" !important;";break;case 3:T=ad+(D-ad)*al/m;T=T+"px !important;";S=j+" !important;";V=G+" !important;";ae=ac+(s-ac)*al/m;ae=ae+"px !important;";break;case 4:T=D+" !important;";S=ad+(j-ad)*al/m;S=S+"px !important;";V=G+" !important;";ae=ac+(s-ac)*al/m;ae=ae+"px !important;";break}var an=Math.round(ah+(ah/Y*p-ah)*al/m);var ao=Math.round(Y+(p-Y)*al/m);var am=0.1+(0.9)*al/m;U.style.cssText="z-index:10000;position:fixed !important;height:"+an+"px !important;width:"+ao+"px !important;bottom:"+S+"right:"+V+"top:"+T+"left:"+ae;U.style.opacity=am;if(al==m){U.classList.add("visible_player");O[ak]=0;E.resizeDTK(ao,an,ak)}}}(af),af)}}}else{if(v[ak]){var Z=document.getElementById(o[ak]._target+"_visible_player").parentNode;var ai=Z.offsetWidth,P=Z.offsetHeight;E.set_in_page_visible_player(false);U.parentNode.style.width="";U.parentNode.style.height=P+"px";U.style.height="";U.style.width="";U.style.zIndex="";U.style.position="";U.style.bottom="";U.style.right="";U.style.opacity="";U.classList.remove("visible_player");O[ak]=0;clearTimeout(C[ak]);v[ak]=0;o[ak].setVisiblePlayer(false);E.resizeDTK(U.parentNode.offsetWidth,U.parentNode.offsetHeight,ak)}}}}}function H(P){if(typeof P.data=="string"){var T=P.data.match(/(state_player)=(.*)_(\d+)/);var U=P.data.match(/(new_video_)(\d+)_(\d+)_(\d+)_(\d+)_(\d+)(_(\d+))?/);var R=P.data.match(/outstream_(\d+)/);var S=P.data.match(/is_extend_(\d+)/);if(!n&&T){if(f[T[3]]==5&&T[2]!="close"||k&&f[T[3]]==0){return}if(T[1]=="state_player"){if(T[2]=="play"){N[T[3]]="play";for(var Q=0;Q<f.length;Q++){if(T[3]!=Q){i(Q);if(v[Q]){e(Q,false,320,640,5,5)}}}E.scrollVisiblePlayer()}else{if(T[2]=="close"){if(f[T[3]]==5){M=false;o[T[3]].src="";e(T[3],false,320,640,5,5)}else{n=true}for(var Q=0;Q<o.length;Q++){e(Q,false,320,640,5,5);w(Q)}}else{if(T[2].match(/valid./)){f[T[3]]=parseInt(T[2].slice(-1));M=parseInt(T[2].slice(-1))==5?1:M}else{if(T[2].match(/prefetching./)){z[T[3]]=parseInt(T[2].slice(-1))}else{if(T[2]!="loading"){N[T[3]]="pause"}}}}}}}if(U){if(typeof(U[8])!="undefined"){m=parseInt(U[8])}E.findVideos(parseInt(U[2]),parseInt(U[3]),parseInt(U[4]),parseInt(U[5]),parseInt(U[6]))}else{if(R){M=M==-1?false:parseInt(R[1]);if(M){L=true}E.scrollVisiblePlayer()}else{if(S){E.toggleExtendPlayer(o[S[1]],true,S[1])}}}}}this.initWidget=function(Q,R){if(o.indexOf(Q)>=0){if(n){Q.endOfVisiblePlayer=true}return}if(null==document.getElementById(Q._target+"_visible_player")){o.push(Q);B=o.length-1;A[B]=false;f[B]=R;var P=document.getElementById(Q._target);var U=document.createElement("div");U.id=Q._target+"_visible_player";var T=document.createElement("div");T.id=B+"_button_visible_player";T.className="button_visible_player";T.style.position="absolute";T.style.top="0 px";T.style.left="0 px";T.style.width="100%";T.style.height="100%";T.style.zIndex="11";T.style.display="none";T.style.cursor="pointer";P.parentNode.insertBefore(U,P);U.appendChild(P);U.parentNode.insertBefore(T,U);var S=document.createElement("img");S.id="close_cross";S.style.cursor="pointer";S.style.display="none";S.style.position="absolute";S.style.right="7px";S.style.width="10px";S.style.height="10px";S.style.zIndex="1000";S.style.margin="0";S.style.top="7px";S.style.padding="5px";S.style.border="1px solid #fff";S.style.borderRadius="3px";S.style.boxSizing="content-box";S.style.backgroundColor="rgba(0,0,0,0.6)";S.src=Q._path+"/img/widget/close.png";P.parentNode.insertBefore(S,P);S.onclick=function(){n=true;for(var V=0;V<o.length;V++){e(V,false,320,640,5,5)}};T.onclick=function(){Q._jw.play(true);Q.toggleLayerVisiblePlayer(o.indexOf(Q),false);d[o.indexOf(Q)]="play";for(var V=0;V<f.length;V++){if(o.indexOf(Q)!=V){i(V);if(v[V]){e(V,false,320,640,5,5)}}}if(jwplayer.version.charAt(0)==6){Q._jw.callInternal("jwCallVPAID","resumeAd")}}}};this.changeState=function(T,P){var Q=o.indexOf(P);var S=o[Q];if(typeof S=="undefined"||typeof S._jw=="undefined"){return}if(T=="otplay"){x++;if(x%8==0){d[Q]="play";for(var R=0;R<f.length;R++){if(Q!=R){i(R);if(v[R]){e(R,false,320,640,5,5)}}}}}else{if(T=="play"||T=="playAd"){d[Q]="play";for(var R=0;R<f.length;R++){if(Q!=R){i(R);if(v[R]){e(R,false,320,640,5,5)}}}}else{if(T=="pause"||T=="pauseAd"){i(Q);e(Q,false,320,640,5,5);x=7;if(T=="pauseAd"){d[Q]="pauseAd"}}else{if(d[Q]!="pauseAd"){if(S._jw.getState()=="PLAYING"||S._jw.getState()=="playing"||S._jw.getState()=="buffer"||S._jw.getState()=="BUFFER"||S._state=="preroll"||S._state=="after_preroll"||S._state=="before_preroll"){d[Q]="play";for(var R=0;R<f.length;R++){if(Q!=R){i(R);if(v[R]){e(R,false,320,640,5,5)}}}}else{i(Q);e(Q,false,320,640,5,5);x=7;if(T=="pauseAd"){d[Q]="pauseAd"}}}}}}};this.set_in_page_visible_player=function(Q){for(var P=0;P<o.length;P++){if(A[P]&&null!=o[P].contentWindow&&"undefined"!=typeof o[P].contentWindow){o[P].contentWindow.postMessage("in_page_visible_player_"+Q?"true":"false","*")}else{o[P].in_page_visible_player=Q}}};this.check_play=function(){for(var P=0;P<o.length;P++){if(A[P]&&null!=o[P].contentWindow&&"undefined"!=typeof o[P].contentWindow){o[P].contentWindow.postMessage("check_play","*")}}};this.resizeDTK=function(Q,P,R){if(A[R]&&null!=o[R].contentWindow&&"undefined"!=typeof o[R].contentWindow){o[R].contentWindow.postMessage("resizeVsync_"+Q+"_"+P,"*")}else{if(null!=o[R].contentWindow&&"undefined"!=typeof o[R].contentWindow){o[R].resizeVsync(Q,P)}}};function w(P){if(A[P]&&null!=o[P].contentWindow&&"undefined"!=typeof o[P].contentWindow){var Q=o[P].contentWindow;Q.postMessage("end_of_visible","*")}else{if(o[P].contentWindow&&"undefined"!=typeof o[P].contentWindow){o[P].endOfVisiblePlayer=true}}}function i(P){if(f[P]==5&&M){return}if(!n){if(A[P]){if(null==Q||"undefined"==typeof Q){return}var Q=o[P].contentWindow;Q.postMessage("pause_","*")}else{if("undefined"==typeof f[P]||null==o[P]||"undefined"==typeof o[P]){return}o[P]._jw.pause(true);if(o[P]._state=="preroll"){o[P].toggleLayerVisiblePlayer(P,true);d[P]="pauseAd";if(jwplayer.version.charAt(0)==6){o[P]._jw.callInternal("jwCallVPAID","pauseAd")}}}}}this.toggleExtendPlayer=function(U,Q,V){if(Q){var S=0.5;U.classList.add("visible_extend");U.style.setProperty("transition","width .5s ease-in-out, height .5s ease-in-out");h=true}else{var S=0.33;U.classList.remove("visible_extend");h=false}var R=Math.round(t*S);var T=Math.round((R*9)/16);U.style.setProperty("width",R+"px","important");U.style.setProperty("height",T+"px ","important");E.resizeDTK(R,T,V);U.addEventListener("transitionend",function P(W){if(!W.propertyName==="width"){return}if(!h){U.style.setProperty("transition","none")}else{U.contentWindow.postMessage("is_transitionend_"+V,"*")}U.removeEventListener("transitionend",P,false)},false);if(!h){U.contentWindow.postMessage("is_reduced_"+V,"*")}};if(window.addEventListener){window.addEventListener("message",H,false)}else{window.attachEvent("onmessage",H)}};ultimediaVisiblePlayer=new ultimediaVisiblePlayer();