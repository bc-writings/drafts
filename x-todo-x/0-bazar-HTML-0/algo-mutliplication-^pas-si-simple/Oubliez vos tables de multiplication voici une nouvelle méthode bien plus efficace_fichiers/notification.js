var ultimediaNotification=function(){var q=new Array();var s=(window.location.protocol=="https:"?"https":"http")+"://www.ultimedia.com";var v=null;var n=this;this.is_notif_visible=false;var i={position:"fixed",borderRadius:"4px",backgroundColor:"rgba(0,0,0,0.7)",color:"#fff",font:"bold 12px arial",lineHeight:"12px",padding:"5px 20px 5px 5px",margin:"0",display:"none",opacity:"0",zIndex:"999"};var m={position:"absolute",top:"5px",right:"5px",background:"transparent url("+s+"/img/widget/close.png) no-repeat center center",padding:"3px",margin:"0",cursor:"pointer",borderRadius:"3px",border:"1px solid #fff",width:"10px",height:"10px",boxSizing:"content-box"};var f={color:"#fff",font:"bold 12px/13px arial",display:"inline-block",maxWidth:"115px",margin:"0 10px",cursor:"pointer",letterSpacing:"normal",textTransform:"none"};var x={border:"1px solid #fff",width:"69px",height:"52px",verticalAlign:"top",display:"inline-block",cursor:"pointer",position:"relative"};var j={border:"0 none",margin:"0",padding:"0",width:"67px",height:"50px"};var t={position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"transparent url("+s+"/img/central/icon/layer.svg) no-repeat center center",zIndex:"10"};var d={opacity:1,WebkitTransition:"opacity 0.5s ease-in-out",MozTransition:"opacity 0.5s ease-in-out",MsTransition:"opacity 0.5s ease-in-out",OTransition:"opacity 0.5s ease-in-out",transition:"opacity 0.5s ease-in-out"};var u={opacity:0,WebkitTransition:"opacity 0.5s ease-in-out",MozTransition:"opacity 0.5s ease-in-out",MsTransition:"opacity 0.5s ease-in-out",OTransition:"opacity 0.5s ease-in-out",transition:"opacity 0.5s ease-in-out"};var r=document.createElement("span");r.className="um_title_notif";var k=document.createElement("div");var A=document.createElement("img");var y=document.createElement("div");y.className="um_picto_notif";var e=document.createElement("div");e.className="um_notif";var C=4;var l=5;var B=5;var b=350;var h=2;function c(){var D=new Array();while(q.length>0){D.push(q.shift())}return D}this.addItem=function(D){q.push(D)};this.createNotif=function(E,I,K,D,L,G,F,H){v=E;C=I;b=F;H=H;var J=document.createElement("div");J.className="um_close_notif";o(k,x);o(A,j);o(y,t);o(r,f);o(J,m);o(e,i);switch(I){case 1:o(e,{bottom:D+"px",right:L+"px"});l=D;B=L;break;case 2:o(e,{top:K+"px",right:L+"px"});l=K;B=L;break;case 3:o(e,{top:K+"px",left:G+"px"});l=K;B=G;break;case 4:o(e,{bottom:D+"px",left:G+"px"});l=D;B=G;break;default:o(e,{bottom:D+"px",left:G+"px"});break}k.appendChild(A);k.appendChild(y);e.appendChild(k);e.appendChild(r);e.appendChild(J);document.body.appendChild(e);var M=c();if(M.length>0){this.reloadNotif(M);p()}};this.reloadNotif=function(D){for(var E=0;E<D.length;E++){e.setAttribute("data-target",D[E].target);if(D[E].title.length>65){r.innerHTML=D[E].title.substr(0,65)+"..."}else{r.innerHTML=D[E].title}A.setAttribute("src",D[E].imgSrc)}};function o(D,E){Object.keys(E).forEach(function(F){D.style[F]=E[F]})}function p(){e.style.display="block";o(e,d);n.is_notif_visible=true}this.hideNotif=function(){var D=document.querySelector("div.um_notif");o(D,u);n.is_notif_visible=false};function w(){n.hideNotif();if(v=="iframe"){a(C,l,B,b,h)}else{var D=function(){if("undefined"!=typeof v){ultimediaVisiblePlayer.addCss(C,l,B,b,h);ultimediaVisiblePlayer.initWidget(v,1);v._jw.play(true);v.sendPlayMessageFullAdSrc();v.debug("VSYNC","manageClick Notification playvsync");ultimediaVisiblePlayer.scrollVisiblePlayer()}else{setTimeout(D,100)}};D()}}function g(D){if(typeof D!="undefined"&&typeof D.data=="object"&&D.data.hasOwnProperty("target")){switch(D.data.action){case"create_notification":n.createNotif(D.data.target,D.data.position,D.data.top,D.data.bottom,D.data.right,D.data.left,D.data.width,D.data.display_mobile);break}}}function a(J,I,H,E,G){var F=document.querySelectorAll("iframe");for(var D=0;D<F.length;D++){F[D].contentWindow.postMessage({action:"launch_visible_from_notif",position:J,top_bottom:I,right_left:H,width:E,display_mobile:G},"*")}}function z(D){if(!(D.target.hasAttribute)||!D.target.hasAttribute("class")){return false}if(D.target.getAttribute("class").split(" ").indexOf("um_close_notif")!=-1){n.hideNotif();D.stopPropagation();return}if((D.target.getAttribute("class").split(" ").indexOf("um_notif")!=-1)||(D.target.getAttribute("class").split(" ").indexOf("um_picto_notif")!=-1)||(D.target.getAttribute("class").split(" ").indexOf("um_title_notif")!=-1)){w();D.stopPropagation();return}}if(document.addEventListener){document.addEventListener("click",z,false)}else{if(document.attachEvent){document.attachEvent("onclick",z)}}if(window.addEventListener){window.addEventListener("message",g,false)}else{window.attachEvent("onmessage",g)}};ultimediaNotification=new ultimediaNotification();