(self.webpackChunklite=self.webpackChunklite||[]).push([[7632],{54522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=r.createElement("path",{d:"M7 .5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM6 9a.5.5 0 1 1-1 0V5a.5.5 0 1 1 1 0v4zm3 0a.5.5 0 1 1-1 0V5a.5.5 0 1 1 1 0v4z",fill:"#292929"});const i=function(e){return r.createElement("svg",o({width:20,height:20,viewBox:"0 0 14 14",fill:"none"},e),a)}},39378:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a=r.createElement("path",{d:"M7 .5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zm2.28 6.92l-3 2A.5.5 0 0 1 5.5 9V5a.5.5 0 0 1 .78-.42l3 2a.5.5 0 0 1 0 .84z",fill:"#292929"});const i=function(e){return r.createElement("svg",o({width:20,height:20,viewBox:"0 0 14 14",fill:"none"},e),a)}},28859:(e,t,n)=>{"use strict";n.d(t,{u6:()=>s,Am:()=>l,TA:()=>u});var r=n(63038),o=n.n(r),a=n(67294),i={updateWatchedBounds:function(){},watchedBounds:new Map},s=a.createContext(i),l=function(e){var t=new Map,n=a.useState(t),r=o()(n,2),i=r[0],l=r[1],u={offset:{left:0,right:0,top:0,bottom:0}},c={watchedBounds:i,updateWatchedBounds:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;l((function(r){var o=new Map(r);return o.set(e,{ref:t,opts:n}),o}))}};return a.createElement(s.Provider,{value:c},e.children)},u=function(e){var t=e.children,n=e.className,r=e.name,o=e.type,i=e.offset,l=a.useContext(s).updateWatchedBounds,u=a.useRef(null);return a.useEffect((function(){l&&l(r,u,{type:o,offset:i})}),[]),a.createElement("div",{className:n,ref:u},t)}},30570:(e,t,n)=>{"use strict";n.d(t,{sK:()=>V,L0:()=>p});var r=n(28655),o=n.n(r),a=n(63038),i=n.n(a),s=n(71439),l=n(67294),u=n(73788),c=n(11615);function d(){var e=o()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}var f=l.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){},clearExpandedState:function(){}}),V=function(){return l.useContext(f)},p=function(e){var t=e.children,n=l.useState(null),r=i()(n,2),o=r[0],a=r[1],s=l.useState(!1),c=i()(s,2),d=c[0],V=c[1],p=l.useState(null),g=i()(p,2),h=g[0],m=g[1];return l.createElement(f.Provider,{value:{expandedPostId:o,setExpandedPostId:a,postInView:d,setPostInView:V,expandedPost:h,setExpandedPost:m,clearExpandedState:function(){m(null),a(null),V(!1)}}},l.createElement(u.k,{post:h,preload:!0},t))};(0,s.Ps)(d(),c.w)},56308:(e,t,n)=>{"use strict";n.d(t,{bz:()=>D,rz:()=>H,Fm:()=>U,ik:()=>Q});var r=n(28655),o=n.n(r),a=n(59713),i=n.n(a),s=n(71439),l=n(67294),u=n(28859),c=n(10515),d=n(51736),f=n(319),V=n.n(f),p=n(7647),g=n(95064),h=n(30027),m=n(6688),v=n(14391),b=n(65441);function y(){var e=o()(["\n  fragment ParagraphLayoutGrouping_privateNote on Note {\n    ...ParagraphStyleGrouping_privateNote\n  }\n  ","\n"]);return y=function(){return e},e}function E(){var e=o()(["\n  fragment ParagraphLayoutGrouping_highlight on Quote {\n    ...ParagraphStyleGrouping_highlight\n  }\n  ","\n"]);return E=function(){return e},e}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P={clear:"both"},A={clear:"both",width:"100%"},S=function(e){var t,n,r=e.layoutGroup,o=e.postBodyInserts,a=e.isEmbedded,i=(0,m.I)(),s=r.styleGroups[0].paragraphViewModels[0].richTextStyle,u=r.styleGroups.map((function(e,t){var n=l.createElement(g.ZQ,{key:t,styleGroup:e,postBodyInserts:o,richTextStyle:s});return"FULL_PAGE"===s&&t<3||"INLINE"===s?l.createElement(p.R,{key:t},n):n}));if((0,b.jH)(s)||a||"INLINE"===s)return l.createElement(l.Fragment,null,u);switch(r.effectiveLayout){case"OUTSET_CENTER":case"OUTSET_ROW":return l.createElement("div",{className:i(P)},l.createElement(h.P,{size:{xs:"full",sm:"full",md:"full",lg:"outset",xl:"outset"}},u));case"FULL_WIDTH":return l.createElement("div",{className:i(A)},u);default:return"FULL_PAGE"===s?l.createElement(h.P,{size:"inset"},u):l.createElement("div",{className:i((t=r.effectiveLayout,n={boxSizing:"border-box",margin:"0 auto",width:"100%"},"INSET_CENTER"===t?x(x({},n),{},{maxWidth:"700px",padding:"0 1.25em"}):n))},u)}},T=l.memo(S),O=(0,s.Ps)(E(),g.PL),I=(0,s.Ps)(y(),g.NR),k=n(1072),N=n(77180),R=n(80637),B={":after":{display:"block",content:'""',clear:"both"}},_=n(90038),L=n(534);function C(){var e=o()(["\n  fragment PostBodySection_privateNote on Note {\n    ...ParagraphLayoutGrouping_privateNote\n  }\n  ","\n"]);return C=function(){return e},e}function M(){var e=o()(["\n  fragment PostBodySection_highlight on Quote {\n    ...ParagraphLayoutGrouping_highlight\n  }\n  ","\n"]);return M=function(){return e},e}function F(){var e=o()(["\n  fragment PostBodySection_paragraph on Paragraph {\n    name\n    ...PostBodyParagraph_paragraph\n  }\n  ","\n"]);return F=function(){return e},e}function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var G=function(){return{display:"table-cell",paddingBottom:"32px",verticalAlign:"bottom"}};function W(e){var t,n,r,o,a=e.bgImage,i=e.children,s=e.isFullPage,c=e.paragraphName,d=(0,m.I)(),f=(0,N.F)();return a&&a.id&&s?l.createElement(u.TA,{name:c,type:"bgimage"},l.createElement("div",{className:d((t=a,n=t.id,r=t.originalWidth,o=t.originalHeight,function(){var e=[400,600,800,1e3,1200,1400,1600,1800,2e3],t={miroId:n,strategy:_._S.Resample,verticalGradient:{start:29,end:81,opacity:40}},a=e.reduce((function(n,a,i){var s=(0,_.W6)(z(z({},t),{},{width:a,height:a/r*o}));return i===e.length-1?(n.backgroundImage="url(".concat(s,")"),n):(n["@media (min-width: ".concat(a,"px)")]={backgroundImage:"url(".concat(s,")")},n)}),{});return z({backgroundColor:"rgba(0, 0, 0, 0.9)",backgroundPosition:"50% 50%",backgroundSize:"cover",display:"table",minHeight:"100vh",width:"100%"},a)}))},l.createElement("div",{className:d(G)},l.createElement(k.f,{theme:(0,L.GV)(f)},i)))):i}var D=function(e){var t=e.paragraphViewModels,n=e.postBodyInserts,r=e.section,o=l.useContext(c.M),a=(0,m.I)();if(0===t.length)return null;var s,u=function(e){var t=[],n=[];e.forEach((function(e){var r=function(e,t){switch(t){case v.ms.INSET_LEFT:case v.ms.OUTSET_LEFT:return"IMG"===e||"IFRAME"===e?v.ms.INSET_CENTER:t;case v.ms.OUTSET_ROW_CONTINUE:return v.ms.OUTSET_ROW;default:return t||v.ms.INSET_CENTER}}(e.paragraphStyle,e.paragraph.layout),o=t[t.length-1];if(o&&o.effectiveLayout===r)n.push(e);else{if(o){var a,i=(0,g.lD)(n);(a=o.styleGroups).push.apply(a,V()(i))}n.length=0,n.push(e),t.push({styleGroups:[],effectiveLayout:r})}}));var r=t[t.length-1];if(r){var o,a=(0,g.lD)(n);(o=r.styleGroups).push.apply(o,V()(a))}return t}(t),d=(s=t[0].richTextStyle,function(e){switch(s){case"SERIES":return{paddingTop:"32px",paddingBottom:"32px",margin:"auto 0",width:"100%"};case"STREAM":case"CARD":case"FULL_PAGE":case"INLINE":return{wordBreak:"break-word",wordWrap:"break-word"};case"SHORTFORM_CARD":return i()({wordBreak:"break-word",wordWrap:"break-word",position:"relative",overflow:"hidden",height:"340px"},R.md(e),{height:"218px"});default:return{}}});return l.createElement("section",{className:a([d,B])},l.createElement(W,{bgImage:r.backgroundImage,isFullPage:"FULL_PAGE"===t[0].richTextStyle,paragraphName:t[0].paragraph.name},u.map((function(e,t){return l.createElement(T,{key:t,layoutGroup:e,postBodyInserts:n,isEmbedded:o})}))))},U=(0,s.Ps)(F(),d.ph.fragments.paragraph),H=(0,s.Ps)(M(),O),Q=(0,s.Ps)(C(),I)},7632:(e,t,n)=>{"use strict";n.d(t,{yO:()=>ke,Pk:()=>Ne,v:()=>Be,XV:()=>Re,w6:()=>_e});var r=n(28655),o=n.n(r),a=n(67154),i=n.n(a),s=n(319),l=n.n(s),u=n(71439),c=n(67294),d=n(28859),f=n(6688),V={display:"flex",justifyContent:"center",marginTop:"32px",marginBottom:"14px",paddingTop:"24px",paddingBottom:"10px"},p=function(e){return{backgroundColor:e.baseColor.text.darker,borderRadius:"50%",display:"inline-block",height:"3px",width:"3px"}},g={marginRight:"20px"};function h(){var e=(0,f.I)();return c.createElement("div",{className:e(V),role:"separator"},c.createElement("span",{className:e([p,g])}),c.createElement("span",{className:e([p,g])}),c.createElement("span",{className:e(p)}))}var m=n(56308),v=n(63038),b=n.n(v),y=n(50008),E=n.n(y),w=n(23450),x=n.n(w),P=n(98281),A=n(16831),S=n(42933),T=n(86021),O=n(77180),I=n(27108);function k(){var e=o()(["\n  fragment PostNotesDetails_user on User {\n    id\n    imageId\n    name\n    username\n    ...UserAvatar_user\n  }\n  ","\n"]);return k=function(){return e},e}function N(e){var t=e.grid.xStep;return{padding:"".concat(3*t,"px ").concat(4*t,"px ").concat(3*t,"px"),width:"400px"}}function R(e){var t=e.close,n=e.users,r=(0,f.I)(),o=c.useRef(null),a=(0,O.F)(),i=a.grid.xStep;return c.useEffect((function(){function e(){var e=o.current;if(e&&e.getBoundingClientRect){var n=e.getBoundingClientRect(),r=n.bottom,i=n.top<0||r>window.innerHeight,s=window.innerWidth<a.breakpoints.xl;(i||s)&&t()}}return I.V6.on("scroll_end",e),I.V6.on("resize_throttled",e),function(){I.V6.off("scroll_end",e),I.V6.off("resize_throttled",e)}}),[]),c.createElement("section",{ref:o,className:r(N)},c.createElement(S.x,{borderBottom:"BASE_LIGHTER",marginBottom:"-".concat(i,"px"),paddingBottom:"".concat(2*i,"px")},c.createElement(T.Lh,null,"Highlights (".concat(n.length,")"))),c.createElement(S.x,{marginLeft:"3px"},n.length&&n.map((function(e){return c.createElement(S.x,{display:"inline-block",key:e.id,marginTop:"".concat(5*i,"px"),marginRight:"".concat(5*i,"px"),width:"".concat(8*i,"px")},c.createElement(P.Yt,{hasPopover:!0,link:!0,user:e,scale:"XS"}))}))))}var B=c.memo(R),_=(0,u.Ps)(k(),A.W),L=n(91442),C=n(16803),M=n(93340),F=n(89423),j=n(32589),z=n(19464),G=n(98024),W=n(24438),D=n(11642);function U(){var e=o()(["\n  fragment PostNotesMarkers_creator on User {\n    id\n    name\n  }\n"]);return U=function(){return e},e}function H(){var e=o()(["\n  fragment PostNotesMarkers_highlight on Quote {\n    id\n    endOffset\n    paragraphs {\n      id\n      name\n    }\n    startOffset\n    userId\n    user {\n      id\n      name\n      ...PostNotesDetails_user\n    }\n  }\n  ","\n"]);return H=function(){return e},e}function Q(){return{border:"none",cursor:"pointer",display:"block",padding:"0px",textAlign:"left",width:"100%"}}function Y(){return{left:"100%",position:"absolute",top:0}}function Z(e,t){return{marginTop:"6px",maxWidth:"100%",position:"absolute",top:"".concat(e-(t||0),"px"),whiteSpace:"nowrap",width:"100%"}}function X(e){return{marginLeft:"auto",marginRight:"auto",maxWidth:"".concat((0,W.G)(e,8,!0),"px"),position:"relative"}}function K(){return{display:"inline-block",maxWidth:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}function J(e,t){return"number"==typeof e.startOffset&&"number"==typeof t.startOffset?e.startOffset<t.startOffset?-1:1:-1}function q(e,t){var n=t.startOffset,r=t.endOffset,o=t.paragraphs[0].name;if(!o||"number"!=typeof n||"number"!=typeof r)return e;var a=!1,i=e[o]||[];return i.length&&(i=i.map((function(e){var o=n<=e.endOffset+1,i=e.startOffset,s=e.endOffset;return o&&(a=!0,e.highlights.push(t),s=Math.max(r,e.endOffset),i=Math.min(n,e.startOffset)),{highlights:e.highlights,endOffset:s,startOffset:i}}))),a||i.push({highlights:[t],endOffset:r,startOffset:n}),e[o]=i,e}function $(e){var t=e.children,n=e.highlightString,r=e.toggle,o=(0,f.I)();return"Top highlight"===n?c.createElement(c.Fragment,null,t):c.createElement("button",{className:o(Q),onClick:function(){return r()},onMouseDown:function(e){return e.preventDefault()}},t)}function ee(e){var t=e.creator,n=e.positionMap,r=e.yPosOffset,o=e.viewerEdge,a=(0,f.I)();if("number"!=typeof r)return null;var i=Array.from(n.entries());return c.createElement(F.I,{nonBlocking:!0},(function(e){return c.createElement(c.Fragment,null,i.map((function(n,i){var s=b()(n,2),l=s[0],u=s[1],d=function(e,t,n,r){var o=null==r?void 0:r.isFollowing;if(1===e.length){if("anon"===e[0].userId)return"Top highlight";if(!t)return null;if(n&&n.id===e[0].userId&&t.id!==n.id&&!o)return null;if(t&&t.id===e[0].userId)return"You highlighted";if(e[0].user&&e[0].user.name)return e[0].user.name}var a=[];if(e.forEach((function(e){if(e.user){var r=t&&t.id===e.userId,i=e.user.name,s=n&&n.id===e.userId&&(!t||t.id!==n.id&&!o);r?a.length&&"You"===a[0]||a.unshift("You"):s||!i||a.includes(i)||a.push(i)}})),!a.length)return"Top highlight";if(1===a.length)return"You"===a[0]?"You highlighted":a[0];if(2===a.length)return"".concat(a[0]," and ").concat(a[1]);var i=a.slice(0,2),s=a.length-i.length;return"".concat(i[0],", ").concat(i[1],", and ").concat(s," ").concat(x()("other",s))}(u,e,t,o);return d?c.createElement("div",{className:a(Z(l,r)),key:i},c.createElement(z.B,null,(function(e){var t=e.isVisible,n=e.hide,r=e.toggle;return c.createElement(c.Fragment,null,c.createElement($,{toggle:r,highlightString:d},c.createElement(G.F,{scale:"S"},c.createElement("span",{className:a(K)},d))),t&&c.createElement(C.G,{boundariesElement:"document",isVisible:!0,hide:n,placement:"right",popoverRenderFn:function(){var e=new Set,t=u.map((function(t){var n=t.user;return n&&n.id&&!e.has(n.id)?(e.add(n.id),n):null})).filter(D.b);return c.createElement(B,{close:n,users:t})}},c.createElement(c.Fragment,null)))}))):null})))}))}var te=c.forwardRef((function(e,t){var n=e.creator,r=e.highlights,o=c.useContext(L.Vc).highlightSegments,a=c.useRef(null),i=c.useState(null),s=b()(i,2),u=s[0],d=s[1],V=(0,f.I)(),p=(0,O.F)(),g=c.useState(null),h=b()(g,2),m=h[0],v=h[1],y=c.useState(null),w=b()(y,2),x=w[0],P=w[1],A=(0,j.Pd)(n).viewerEdge;return c.useEffect((function(){var e=function(){var e=function(e,t,n){var r=new Map;if(e.size&&t.length){var o=function(e){var t=l()(e).sort(J).reduce(q,{});return Object.values(t).reduce((function(e,t){return t&&"object"===E()(t)&&t.length?(e.push.apply(e,l()(t)),e):e}),[])}(t),a=[];o.forEach((function(t){var o=t.highlights[0],i=o.paragraphs[0].name;if(o&&"number"==typeof o.startOffset&&i){var s=e.get("".concat(i,"_").concat(o.startOffset));if(s&&s.ref&&s.ref.current){var l,u=s.ref.current.getBoundingClientRect().top+window.pageYOffset;a.length&&(l=a.find((function(e){return u<e+n.newFonts.body.lineHeight.M&&u>e||u>e-n.newFonts.body.lineHeight.M&&u<e})));var c=l||u,d=r.get(c)||[];d.length||a.push(c);var f=d.concat(t.highlights);f.length&&r.set(c,f)}}}))}return r}(o,r,p);if(d(e),"function"!=typeof t&&null!=t&&t.current&&P(t.current.offsetTop),null!=a&&a.current){var n=a.current.getBoundingClientRect().left,i=window.innerWidth-n-8*p.grid.xStep;v(i)}};I.V6.on("resize_throttled",e);var n=(0,M.x)((function(t){"iframe.resize"!==t.context&&"player.js"!==t.context||e()})).destructor;return e(),function(){I.V6.off("resize_throttled",e),n()}}),[r,o]),c.createElement("div",{className:V(X)},c.createElement(S.x,{display:"block",xs:{display:"none"},sm:{display:"none"},md:{display:"none"},lg:{display:"none"}},c.createElement("aside",{className:V(Y),ref:a,style:{width:m?"".concat(m,"px"):void 0}},u&&c.createElement(ee,{creator:n,highlights:r,positionMap:u,yPosOffset:x,width:m,viewerEdge:A}))))})),ne=c.memo(te),re=(0,u.Ps)(H(),_),oe=(0,u.Ps)(U()),ae=n(25415),ie=n(68356),se=n.n(ie),le=n(75341),ue=n(30570),ce=n(69677),de=n(76532),fe=n(30027),Ve=n(55099),pe=n(95760),ge=n(19725),he=n(54522),me=n(39378),ve=n(27390),be=function(e){return{backgroundColor:"white",borderColor:e.baseColor.border.darker,border:"1px solid",color:e.baseColor.border.darker,padding:"8px 10px 8px 10px",borderRadius:"20px",marginTop:"10px",cursor:"pointer",fontSize:"13px",display:"flex",alignItems:"center",transition:"border-color .2s linear, transform .1s linear",minWidth:"4.7rem",":hover":{borderColor:e.baseColor.border.darker},":active":{transform:"scale(.98)"}}},ye=function(e){return{fill:e.baseColor.background.light,marginRight:"6px",width:"20px"}},Ee=se()({loader:function(){return n.e(56391).then(n.bind(n,80838))},modules:["src/components/post/text-to-speech/SpeechifyWidget"],webpack:function(){return[80838]},loading:function(e){var t=e.children;return c.createElement(c.Fragment,null,t)},render:(0,ge.n)("SpeechifyWidget")}),we=c.forwardRef((function(e,t){var n=e.postId,r=e.readingTime,o=e.articleRef,a=e.isLockedPreviewOnly,i=(0,f.I)(),s=(0,pe.Av)(),l=(0,le.SK)(),u=(0,de.H)().value,d=!(null==u||!u.mediumMemberAt),V=(0,ue.sK)().expandedPostId,p=(0,ce.Ij)().paragraphRefsMappers.paragraphTitlesRefsByStyleMap,g=(0,c.useState)(!0),h=b()(g,2),m=h[0],v=h[1];if(c.useEffect((function(){return s.event("experiment.eligible",{experimentId:"ec7b685b3f40"}),v(!0)}),[p,V]),!u)return null;var y=!d&&a;return c.createElement(S.x,{display:"flex",alignItems:"center",boxSizing:"border-box"},c.createElement(S.x,{flexGrow:"1"},c.createElement(fe.P,{size:l?"full":"inset"},c.createElement("div",{ref:t},y?null:m?c.createElement(Ve.z,{onClick:function(){if(m){var e=new Audio;e.autoplay=!0,e.src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",v(!1)}},className:i(be)},c.createElement(me.Z,{className:i(ye)}),c.createElement("span",null,"Listen to this story"," ",r?" Â· "+(0,ve.Vd)(r)+" min":"")):c.createElement(Ee,{postId:n,buttonStyle:be,articleRef:o},c.createElement(Ve.z,{className:i(be)},c.createElement(he.Z,{className:i(ye)}),"0:00"))))))})),xe=n(47552),Pe=function(e){var t=e.postId,n=e.wordCount,r=e.detectedLanguage,o=e.readingTime,a=e.articleRef,i=e.isLockedPreviewOnly,s=(0,de.H)(),l=s.value,u=s.loading,d=!!l,f=l&&!!l.mediumMemberAt,V="en"===r&&(null!=n?n:0)>20&&d&&!f;return u?null:c.createElement(xe.b,{name:"enable_speechify_widget",placeholder:function(){return null}},(function(e){return e&&t&&V?c.createElement(we,{postId:t,readingTime:o,articleRef:a,isLockedPreviewOnly:i}):null}))},Ae=n(65441);function Se(){var e=o()(["\n  fragment PostBody_privateNote on Note {\n    ...normalizedBodyModel_privateNote\n    ...PostBodySection_privateNote\n  }\n  ","\n  ","\n"]);return Se=function(){return e},e}function Te(){var e=o()(["\n  fragment PostBody_creator on User {\n    ...PostNotesMarkers_creator\n  }\n  ","\n"]);return Te=function(){return e},e}function Oe(){var e=o()(["\n  fragment PostBody_highlight on Quote {\n    paragraphs {\n      id\n    }\n    ...normalizedBodyModel_highlight\n    ...PostBodySection_highlight\n    ...PostNotesMarkers_highlight\n  }\n  ","\n  ","\n  ","\n"]);return Oe=function(){return e},e}function Ie(){var e=o()(["\n  fragment PostBody_bodyModel on RichText {\n    sections {\n      name\n      startIndex\n      textLayout\n      imageLayout\n      backgroundImage {\n        id\n        originalHeight\n        originalWidth\n      }\n      videoLayout\n      backgroundVideo {\n        videoId\n        originalHeight\n        originalWidth\n        previewImageId\n      }\n    }\n    paragraphs {\n      id\n      ...PostBodySection_paragraph\n    }\n    ...normalizedBodyModel_richText\n  }\n  ","\n  ","\n"]);return Ie=function(){return e},e}var ke=c.forwardRef((function(e,t){var n,r,o=e.bodyModel,a=e.creator,s=e.highlights,u=e.isAuroraPostPageEnabled,V=e.privateNotes,p=e.postBodyInserts,g=e.richTextStyle,v=void 0===g?"FULL_PAGE":g,b=e.shouldHideHighlightAnnotations,y=void 0!==b&&b,E=e.isLockedPreviewOnly,w=void 0===E||E,x=e.readingTime,P=void 0===x?0:x,A=e.detectedLanguage,S=e.wordCount,T=void 0===S?0:S,O=e.postId,I=(0,f.I)(),k=c.createRef(),N=null===(n=c.useContext(d.u6).watchedBounds.get("byline"))||void 0===n||null===(r=n.ref)||void 0===r?void 0:r.current,R=N?N.offsetTop-48:100,B={position:"absolute",left:0,top:"calc(100vh + ".concat(R,"px)"),bottom:"calc(100vh + ".concat(100,"px)"),width:"10px",pointerEvents:"none"},_=(0,ae.Zx)().privateNoteSelection,L=c.useMemo((function(){return s&&_?[].concat(l()(s),[_]):s}),[s,_]),C=p?function(e){var t;return Object.keys(e).some((function(n){return!!e[n].find((function(e){return"BYLINE"===e.insertType}))&&(t=n,!0)})),t}(p):void 0,M=c.useMemo((function(){return(0,Ae.fj)(o,{bylineParagraphName:C,highlights:L,isAuroraPostPageEnabled:u,isPostPage:!0,privateNotes:V,richTextStyle:v})}),[o,L,V,v]),F=p&&p.first;return c.createElement("div",{ref:t},c.createElement("div",{ref:k},c.createElement(c.Fragment,null,c.createElement(d.TA,{name:"ghost-track",type:"ghost",className:I(B)}),"FULL_PAGE"===v&&s&&s.length>0&&!y&&c.createElement(ne,{creator:a,highlights:l()(s),ref:t}),!!F&&F.map((function(e,t){return e.component?c.createElement("section",{key:"postBodyInsertFirst_".concat(t)},e.component):null})),O?c.createElement(Pe,{postId:O,detectedLanguage:A,wordCount:T,readingTime:P,articleRef:k,isLockedPreviewOnly:w}):null),M.map((function(e,t){if("HR"===e){var n,r,o=M[t-1],a=M[t+1],s="HR"!==o&&(null==o||null===(n=o.section)||void 0===n?void 0:n.backgroundImage),l="HR"!==a&&(null==a||null===(r=a.section)||void 0===r?void 0:r.backgroundImage);return s||l?null:c.createElement(h,{key:t})}return c.createElement(m.bz,i()({key:e.section.name||t,postBodyInserts:p},e))}))))})),Ne=(0,u.Ps)(Ie(),Ae.gd,m.Fm),Re=(0,u.Ps)(Oe(),Ae.Cn,m.rz,re),Be=(0,u.Ps)(Te(),oe),_e=(0,u.Ps)(Se(),Ae.EH,m.ik)},29577:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(68356),o=n.n(r),a=n(19725),i=o()({loader:function(){return Promise.all([n.e(17084),n.e(19692),n.e(95064),n.e(63303),n.e(5850),n.e(55402),n.e(99590),n.e(23913),n.e(97417)]).then(n.bind(n,55358))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[55358]},loading:function(){return null},render:(0,a.n)("ThreadedResponsesSidebar")})},73788:(e,t,n)=>{"use strict";n.d(t,{k:()=>c});var r=n(63038),o=n.n(r),a=n(67294),i=n(49486),s=n(29577),l=n(70586),u=n(92214),c=function(e){var t=e.children,n=e.post,r=e.preload,c=void 0===r||r,d=a.useState(void 0),f=o()(d,2),V=f[0],p=f[1],g=a.useCallback((function(e){return function(t){p(t),e()}}),[]);return a.createElement(l.E,{preload:c},(function(e){var r=e.showPreviousSidebar,o=e.hasLoaded,l=e.initialSidebarRender,c=e.isVisible,d=e.continueThisThreadPosts,f=e.openSidebar,h=e.cleanupSidebar;return a.createElement(i.Q.Provider,{value:{openSidebarToRespondToHighlight:g(f)}},!!n&&o&&a.createElement(s.L,{isResponsesSidebarVisible:c&&0===d.length,parentPost:n,inResponseToQuote:V,setInResponseToQuote:p,showPreviousSidebar:r,cleanupSidebar:h,initialSidebarRender:!!l.current}),!!n&&o&&d.map((function(e,t,o){var i=(0,u.iI)(t);return a.createElement(s.L,{key:n.id,isResponsesSidebarVisible:c&&t===o.length-1,parentPost:n,inResponseToQuote:V,setInResponseToQuote:p,continueThisThreadPost:e,continueThisThreadPostDepth:i,showPreviousSidebar:r,cleanupSidebar:h,initialSidebarRender:!!l.current})})),t)}))}},72393:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r=n(67294).createContext({addContinueThisThreadSidebar:function(){return null},openSidebar:function(){return null},closeSidebar:function(){return null}})},70586:(e,t,n)=>{"use strict";n.d(t,{E:()=>g});var r=n(319),o=n.n(r),a=n(63038),i=n.n(a),s=n(38125),l=n.n(s),u=n(67294),c=n(29577),d=n(72393),f=n(77180),V=n(27108),p=n(8403),g=function(e){var t=e.preload,n=e.children,r=u.useState(!1),a=i()(r,2),s=a[0],g=a[1],h=(0,f.F)(),m=!!(0,p.Wd)("responsesOpen"),v=u.useState(!1),b=i()(v,2),y=b[0],E=b[1],w=u.useRef(!0),x=u.useRef(0),P=u.useState(!1),A=i()(P,2),S=A[0],T=A[1],O=u.useCallback((function(){return E(!0)}),[]),I=u.useState([]),k=i()(I,2),N=k[0],R=k[1],B=u.useCallback((function(e){w.current=!1,R([].concat(o()(N),[e]))}),[N]),_=u.useCallback((function(){R(l()(N))}),[N]),L=u.useCallback((function(){E(!1),R([]),w.current=!0}),[]);u.useEffect((function(){T(!0),E(m)}),[m]);var C=function(){window.innerWidth<h.breakpoints.md&&g(!0)};return u.useEffect((function(){return C(),V.V6.on("resize",C),function(){return V.V6.off("resize",C)}}),[]),u.useEffect((function(){var e,t,n=null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.documentElement;return s&&null!=n&&n.style&&(y?(n.style.top="-".concat(x.current,"px"),x.current=n.scrollTop,n.style.overflow="hidden",n.style.position="fixed"):(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=x.current)),function(){s&&null!=n&&n.style&&(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=x.current)}}),[y]),u.useEffect((function(){t&&c.L.preload()}),[t]),u.createElement(d.f.Provider,{value:{addContinueThisThreadSidebar:B,openSidebar:O,closeSidebar:L}},n({showPreviousSidebar:_,hasLoaded:S,initialSidebarRender:w,isVisible:y,continueThisThreadPosts:N,openSidebar:O,cleanupSidebar:L}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/7632.dee973cf.chunk.js.map