On introduit les notations suivantes.
\begin{itemize}[label = \textbullet]
	\item Pour un naturel $n$,
	$\displaystyle      n =  \left[ \, c_{d-1} c_{d-2} \cdots c_1 c_0 \, \right]_{10} 
	\stackrel{\text{def}}{=} \sum_{i=0}^{d-1} c_i 10^i$,
	avec $c_{d-1} \neq 0$, désigne l'écriture décimale propre de $n$.
	
	\item On pose enuite
	$\displaystyle sq(n) = \sum_{i=0}^{d-1} (c_i)^2$
	et
	$\taille(n) = d$ sera appelé \emph{\og taille de $n$ \fg}.


	\item Pour $(n \,; i) \in \NN^2$, on définit 
	$  \sqseq{n}{0} = n$
	et
	$  \sqseq{n}{i} = sq^i(n)
	\stackrel{\text{def}}{=} sq \,\circ sq \,\circ \cdots \,\circ sq(n)$ avec $(i-1)$ compositions si $i > 0$.
	
	
	\smallskip\noindent
	Autrement dit, nous avons
	$\sqseq{n}{0} = n$
	et
	$\sqseq{n}{i+1} = sq \left( \, \sqseq{n}{i} \right)$.


	\item Enfin on note
	$V_n = \setgene{ \, \sqseq{n}{i} \, | \, i \in \NN }$
	l'ensemble des valeurs prises par la suite $\left( \, \sqseq{n}{i} \right)_i$.
\end{itemize}



\bigskip

\begin{fact}
	$\forall n \in \NN$, $sq(n) \leqslant 81 d$ où $d = \taille(n)$.
\end{fact}

\begin{proof*}
	Si $n = \left[ \, c_{d-1} c_{d-2} \cdots c_1 c_0 \, \right]_{10}$
	alors 
	$\displaystyle sq(n) = \sum_{i=0}^{d-1} (c_i)^2 \leqslant \sum_{i=0}^{d-1} 9^2 = 81 d $.
\end{proof*}




\medskip

\begin{fact}\label{magicmajo}
	$\forall n \in \NN$, notant $d = \taille(n)$, nous avons les résultats suivants :
	
	\begin{enumerate}
		\item Si $d \geqslant 4$ alors $sq(n) < n$.
		
		\item Si $d \leqslant 3$ alors $sq(n) < 10^3$.
	\end{enumerate}
\end{fact}

\begin{proof*}
	Comme $n \geqslant 10^{d-1}$ et compte tenu du fait précédent, nous cherchons à comparer $10^{d-1}$ et $81d$.
	Pour cela, regardons ce qu'il se passe pour les premières valeurs de $d$.

	\smallskip
	\begin{center}
		\begin{tabular}{|r|c|c|c|c|c|}
			\hline
				$d$        & $1$  & $2$   & $3$   & $4$    & $5$        \\
			\hline
				$10^{d-1}$ & $1$  & $10$  & $100$ & $1000$ & $10\,000$  \\
			\hline
				$81d$      & $81$ & $162$ & $243$ & $324$  & $405$      \\
			\hline
		\end{tabular}
	\end{center}
	\smallskip
	
	Or lorsque $d \geqslant 2$ augmente de $1$, alors $81d$ augmente de $81$ tandis que $10^{d-1}$ augmente de $9\times10^{d-1}$ soit d'au moins $90$.
	En effet, $10^d = 10 \times 10^{d-1} = 10^{d-1} + 9 \times 10^{d-1}$.
	
	
	\smallskip
	
	Donc dès que $d \geqslant 4$, nous avons $n \geqslant 10^{d-1} > 81d \geqslant sq(n)$ d'où ensuite $n > sq(n)$.
	Ceci prouve le 1\ier{} point.
	\footnote{
		Pour les fans de Nicolas BOURBAKI, voir la preuve \cpageref{magicmajo-proof} du fait \ref{magicmajo} qui traite le cas des puissances quelconques
	}.


	\bigskip
	
	Le 2nd point pour $d \leqslant 3$ découle directement de $sq(999) = 243$.
\end{proof*}




\medskip

\begin{fact}
	$\forall n \in \NN$, l'ensemble $V_n$ est fini et donc la suite $\left( \, \sqseq{n}{i} \right)_{i \in \NN}$ est ultimement périodique, i.e. périodique à partir d'un certain rang.
\end{fact}

\begin{proof*}
	Le 2nd point dépend directement du 1er point via le principe des tiroirs et la définition récursive de la suite $\left( \, \sqseq{n}{i} \right)_i$.
	
	\medskip
	
	Pour le 1er point, pour $n \leqslant 999$, on a directement $V_n \subset \intervalC{0}{999}$,
	sinon il suffit de montrer que $V_n \subset \intervalC{0}{10^{\taille(n)}}$ pour $n \geqslant 10^4$ via une petite récurrence descendante finie.
\end{proof*}